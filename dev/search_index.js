var documenterSearchIndex = {"docs":
[{"location":"api/material_geometry/earth_layering/#EarthLayering","page":"EarthLayering","title":"EarthLayering","text":"The EarthLayering material geometry is composed of upper continental crust,  lower continental crust and a three-layer mantle lithosphere superimposed on the  asthenosphere.","category":"section"},{"location":"api/material_geometry/earth_layering/#Initialization","page":"EarthLayering","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/earth_layering/#EarthBox.MaterialGeometry.EarthLayering.initialize!","page":"EarthLayering","title":"EarthBox.MaterialGeometry.EarthLayering.initialize!","text":"Initialize Earth layering geometry.\n\nArguments\n\nmodel::ModelData: The model data container used to store model parameters and arrays.\n\nKeyword arguments:\n\nthick_lith::Float64: \nThickness in meters of lithosphere\nthick_crust::Float64: \nThickness in meters of crust\nthick_upper_crust::Float64: \nThickness in meters of upper crust\nthick_lower_crust::Float64: \nThickness in meters of lower crust\nthick_upper_lith::Float64: \nThickness in meters of upper mantle lithosphere\nthick_middle_lith::Float64: \nThickness in meters of middle lithosphere\nthick_lower_lith::Float64: \nThickness in meters of lower mantle lithosphere\n\nReturns\n\nNothing\n\nInitialization Scenarios\n\nScenario 1: Layer thicknesses provided as input are used as-is for the upper continental crust     (thick_upper_crust), lower continental crust (thick_lower_crust), upper mantle lithosphere     (thick_upper_lith), middle mantle lithosphere (thick_middle_lith) and lower mantle     lithosphere (thick_lower_lith).\n\nScenario 2: If the total thickness of the lithosphere (thick_lith),  the total thickness of the continental crust (thick_crust), and the thickness of the upper continental crust (thick_upper_crust) are provided as inputs, remaining thicknesses are derived as follows:\n\nThe thickness of the lower continental crust (thick_lower_crust) will be calculated as the   difference between the total thickness of the continental crust (thick_crust) and the thickness   of the upper continental crust (thick_upper_crust).\nThe thickness of the mantle lithosphere (thick_mantle_lith) will be calculated as the difference   between the thickness of the total lithosphere (thick_lith) and the thickness of the continental   crust (thick_crust).\nThe thickness of the upper mantle lithosphere (thick_upper_lith) will be set to one-third of the   thickness of the mantle lithosphere (thick_mantle_lith).\nThe thickness of the middle mantle lithosphere (thick_middle_lith) will be set to one-third of the   thickness of the mantle lithosphere (thick_mantle_lith).\nThe thickness of the lower mantle lithosphere (thick_lower_lith) will be set to one-third of the   thickness of the mantle lithosphere (thick_mantle_lith).\n\nExample 1: Direct input of layer thicknesses\n\neb = EarthBoxState(\n    xnum = 200, ynum = 100, xsize = 500000.0, ysize = 120000.0,\n    dx_marker = 100.0, dy_marker = 100.0\n    )\nmodel = eb.model_manager.model # ModelData container\nEarthBox.MaterialGeometry.EarthLayering.initialize!(\n    model, \n    thick_upper_crust = 22_000.00, \n    thick_lower_crust = 18_000.0, \n    thick_upper_lith  = 28_333.3, \n    thick_middle_lith = 28_333.3, \n    thick_lower_lith  = 22_000.0\n)\n\nExample 2: Calculating layer thicknesses from total lithosphere and crust thicknesses\n\neb = EarthBoxState(\n    xnum = 200, ynum = 100, xsize = 500000.0, ysize = 120000.0,\n    dx_marker = 100.0, dy_marker = 100.0\n)\nmodel = eb.model_manager.model # ModelData container\nEarthBox.MaterialGeometry.EarthLayering.initialize!(\n    model, \n    thick_lith        = 100_000.0, \n    thick_crust       = 40_000.0, \n    thick_upper_crust = 22_000.0\n)\n\n\n\n\n\n","category":"function"},{"location":"api/boundary_conditions/boundary_conditions/#BoundaryConditions","page":"Initialization","title":"BoundaryConditions","text":"The BoundaryConditions module is used to initialize the integrated boundary condition model for the Stokes-continuity and heat equations. An integrated boundary condition model also manages volume conservation and marker  recycling for inflow/outflow boundary conditions.","category":"section"},{"location":"api/boundary_conditions/boundary_conditions/#Boundary-Condition-Models","page":"Initialization","title":"Boundary Condition Models","text":"using EarthBox\nimport Markdown\noptions = ModelManager.BoundaryConditions.get_options()\nliststr = join([\"- $(options[id].option_name)\" for id in keys(options)], \"\\n\")\nMarkdown.parse(liststr)\n\ntip: quick search for boundary condition model type\nHighlight a boundary condition model name in the list above and use Ctl-F + Enter to navigate to a detailed description in the Integrated Boundary Condition Model Types section below.","category":"section"},{"location":"api/boundary_conditions/boundary_conditions/#Initialization","page":"Initialization","title":"Initialization","text":"","category":"section"},{"location":"api/boundary_conditions/boundary_conditions/#Example","page":"Initialization","title":"Example","text":"","category":"section"},{"location":"api/boundary_conditions/boundary_conditions/#EarthBox.BoundaryConditions.initialize!","page":"Initialization","title":"EarthBox.BoundaryConditions.initialize!","text":"initialize!(\n    model::ModelData;\n    model_type::Union{Int, String, Symbol, Nothing}=nothing\n)::Nothing\n\nInitialize integrated boundary condition model type for coupled Stokes-continuity and heat equations.\n\nArguments\n\nmodel::ModelData: The model data object containing model parameters and arrays.\nmodel_type::Union{Int, String, Symbol, Nothing}: Controls the type of integrated boundary    condition model type for the Stokes-continuity and heat equations. See the Integrated Boundary    Condition Model Types section below for information on available boundary condition model types.    The boundary condition model type is stored in the model data container as an integer ID (itype_bc)    and a corresponding string name (stype_bc). If model_type is nothing the current boundary condition    type defined in the model data container will be used. The boundary condition model type parameters can be    accessed from the model data container as follows:\nitype_bc = model.bcs.parameters.bc_options.itype_bc.value\nstype_bc = model.bcs.parameters.bc_options.stype_bc.value\n\nReturns\n\nNothing\n\nIntegrated Boundary Condition Model Types\n\nLithosphericExtensionMovingBoundaries\n\nmodel_type value: \"LithosphericExtensionMovingBoundaries\", :LithosphericExtensionMovingBoundaries, or 0\nDescription: This boundary condition type is used for extension models with moving boundaries. A fixed free slip upper boundary is used with moving lower and side boundaries. Orthogonal velocity is prescribed along side and bottom boundaries. Regridding is applied with no marker recycling since boundaries are moving. Temperature is prescribed on the top and bottom, and zero heat flux is applied along side boundaries.\n\nLithosphericExtensionFixedBoundaries\n\nmodel_type value: \"LithosphericExtensionFixedBoundaries\", :LithosphericExtensionFixedBoundaries, or 1\nDescription: This boundary condition type is for extension models with fixed boundaries. Free slip with orthogonal velocity is prescribed along top, bottom and side boundaries to ensure volume conservation. Markers are recycled with special treatment in the sticky air region to ensure constant sticky air volume. Temperature is prescribed on the top and bottom, and zero heat flux is applied along side boundaries.\n\nLithosphericExtensionFixedBoundariesAsymmetric\n\nmodel_type value: \"LithosphericExtensionFixedBoundariesAsymmetric\", :LithosphericExtensionFixedBoundariesAsymmetric, or 2\nDescription: This boundary condition type is for extension models with fixed boundaries and asymmetric boundary conditions. Free slip in the y-direction and zero lateral orthogonal velocity are applied on the left boundary, and uniform lateral full extension velocity with free slip in y-direction is applied along the right boundary. Free slip with orthogonal velocity is prescribed along top and bottom boundaries to ensure volume conservation. Markers are recycled with special treatment in the sticky air region to ensure constant sticky air volume. Temperature is prescribed on the top and bottom, and zero heat flux is applied along side boundaries.\n\nLithosphericExtensionDepthDependent\n\nmodel_type value: \"LithosphericExtensionDepthDependent\", :LithosphericExtensionDepthDependent, or 3\nDescription: This boundary condition type is used for extension models with fixed boundaries and side boundaries with free slip and depth-dependent prescribed orthogonal velocity. Along top and bottom boundaries free slip is applied with prescribed orthogonal velocity calculated to ensure volume conservation. Particles are recycled (no regridding) with special treatment in sticky air region to ensure constant sticky air volume. Temp. boundary conditions on top and bottom, zero flux on sides.\n\nLithosphericExtensionInflowAndOutflowAlongSides\n\nmodel_type value: \"LithosphericExtensionInflowAndOutflowAlongSides\", :LithosphericExtensionInflowAndOutflowAlongSides, or 4\nDescription: This boundary condition type is used for extension models with fixed boundaries and side boundaries with free slip and depth-dependent prescribed orthogonal velocity for inflow and outflow. Along top and bottom boundary free slip is applied with prescribed orthogonal velocity calculated to ensure volume conservation in the sticky layer. Particles are recycled (no regridding) with special treatment in sticky and side inflow regions to ensure. Temperature boundary conditions on top and bottom, zero flux on sides.\n\nExtensionNoBottomInflow\n\nmodel_type value: \"ExtensionNoBottomInflow\", :ExtensionNoBottomInflow, or 5\nDescription: This boundary condition type is used for the simple extension with constant outflow along the side boundary, conservative inflow along the top boundary and a closed free slip boundary along the bottom. Velocity is prescribed along side and top boundaries to ensure the conservation of volume.\n\nPureShearDeformation\n\nmodel_type value: \"PureShearDeformation\", :PureShearDeformation, or 6\nDescription: This boundary conditions type is used for a pure shear experiment. Free slip is applied along boundaries with orthogonal prescribed velocity. Temperature is prescribed on top, bottom and side boundaries. No marker recycling is used.\n\nVerticalCouetteFlow\n\nmodel_type value: \"VerticalCouetteFlow\", :VerticalCouetteFlow, or 7\nDescription: Boundary conditions for vertical Couette flow (simple shear). Open channel boundary conditions are applied along the top and bottom boundaries to model vertical flow in an infinite channel. This is accomplished by prescribing zero vertical velocity gradients along top and bottom boundaries and by prescribing a vertical pressure gradient, which for this case is zero. No-slip bcs on are applied on side boundaries with prescribed y-velocity along the right boundary to induce shear flow. Zero vertical temperature gradients are prescribed along top and bottom boundaries. Prescribed temperature is applied along left boundary. An insulating boundary condition (zero lateral heat flux) is implemented along the right boundary. Marker recycling takes into account vertical channel flow.\n\nSolidBodyRotation\n\nmodel_type value: \"SolidBodyRotation\", :SolidBodyRotation, or 8\nDescription: This boundary condition type is used for the solid body rotation benchmark with fixed boundaries (Stokes equations are not solved). Prescribed thermal gradients are applied along side boundaries.\n\nRayleighTaylorInstability\n\nmodel_type value: \"RayleighTaylorInstability\", :RayleighTaylorInstability, or 9\nDescription: This boundary condition type is used for the Rayleigh-Taylor instability benchmark from Ramberg (1968). No slip boundary conditions are applied on top and bottom boundaries and free slip boundary condition are applied on side boundaries.\n\nBoxConvection\n\nmodel_type value: \"BoxConvection\", :BoxConvection, or 10\nDescription: This boundary conditions type is used for the convection in a box benchmark. Free slip boundary conditions are applied on all sides. Temperature is prescribed on top and bottom boundaries. Side boundaries have insulating thermal boundary conditions.\n\nElasticSlab\n\nmodel_type value: \"ElasticSlab\", :ElasticSlab, or 11\nDescription: This boundary conditions type is used for the elastic slab experiment. No slip boundary conditions are applied on the left boundary. Free slip boundary conditions are applied on top, bottom and right boundaries.\n\nViscousBlock\n\nmodel_type value: \"ViscousBlock\", :ViscousBlock, or 12\nDescription: This boundary conditions type is used for the viscous block benchmark. Free slip boundary conditions are applied along all boundaries.\n\nSandboxShortening\n\nmodel_type value: \"SandboxShortening\", :SandboxShortening, or 13\nDescription: This boundary condition type is used for the sandbox shortening benchmark. No slip boundary conditions are applied on bottom and left boundaries. Free slip boundary conditions are applied on top and right boundaries. Prescribed internal velocity boundary conditions are used to model a mobile wall. Boundary friction is also used along the left and bottom boundaries in addition to the interface between sand and mobile wall. Plastic failure is prevented from occurring in the mobile wall.\n\nSandboxExtension\n\nmodel_type value: \"SandboxExtension\", :SandboxExtension, or 14\nDescription: This boundary condition type is used for the sandbox extension benchmark. No slip boundary conditions are applied on bottom and left boundaries. Free slip boundary conditions are applied on top and right boundaries. Prescribed internal velocity boundary conditions are used to model a mobile wall. Boundary friction is also used along the left and bottom boundaries in addition to the interface between sand and mobile wall. Plastic failure is prevented from occurring in the mobile wall and thin plate extending from mobile wall.\n\nVerticalChannelFlowNonNewtonian\n\nmodel_type value: \"VerticalChannelFlowNonNewtonian\", :VerticalChannelFlowNonNewtonian, or 16\nDescription: This boundary condition type is used for vertical channel flow with prescribed pressure and velocity gradients along upper and lower boundaries. No-slip boundary condition are applied on side boundaries. Prescribed temperature is applied along top and bottom boundaries. Prescribed gradients are applied along side boundaries. Special regridding for is applied for channel flow. This bc type is used for non-newtonian channel flow benchmark with temperature along side boundaries set equal to zero.\n\nVerticalChannelFlowIsoviscous\n\nmodel_type value: \"VerticalChannelFlowIsoviscous\", :VerticalChannelFlowIsoviscous, or 15\nDescription: This boundary conditions type is used for vertical channel flow with prescribed pressure and velocity gradients along upper and lower boundaries. No-slip boundary conditions are applied on side boundaries. Prescribed temperature along top and bottom boundaries. Prescribed gradients are applied along side boundaries. Special regridding for is applied for channel flow. This bc type is used for the isoviscous channel flow benchmark with thermal advection benchmark and temperature prescribed along side boundaries.\n\nVerticalChannelFlowShearHeating\n\nmodel_type value: \"VerticalChannelFlowShearHeating\", :VerticalChannelFlowShearHeating, or 17\nDescription: This boundary conditions type is used for vertical channel flow with prescribed pressure and velocity gradients along upper and lower boundaries. No-slip boundary conditions are applied on side boundaries. Prescribed temperature along top and bottom boundaries. Prescribed gradients are applied along side boundaries. Special regridding for is applied for channel flow. This boundary condition type is used for the channel flow benchmark with variable thermal conductivity and shear heating.\n\nFractureZoneContractionFixedBoundaries\n\nmodel_type value: \"FractureZoneContractionFixedBoundaries\", :FractureZoneContractionFixedBoundaries, or 18\nDescription: This boundary condition type is used for contraction models with fixed boundaries, symmetric contraction and fracture zone material setup. Free slip boundary conditions are applied along top, bottom and side boundaries. Orthogonal velocity is prescribed along side boundaries. Temperature is prescribed on top and bottom, and zero heat flux is applied along side boundaries.\n\nFractureZoneContractionFixedBoundariesAsymmetric\n\nmodel_type value: \"FractureZoneContractionFixedBoundariesAsymmetric\", :FractureZoneContractionFixedBoundariesAsymmetric, or 19\nDescription: This boundary condition type is used for contraction models with fixed boundaries, asymmetric contraction and fracture zone material setup. Free slip boundary conditions are applied along top, bottom and side boundaries. Orthogonal velocity is prescribed along side boundaries with zero inflow along the left boundary. Temperature is prescribed on top and bottom, and zero heat flux is applied along side boundaries.\n\nViscoelasticContraction\n\nmodel_type value: \"ViscoelasticContraction\", :ViscoelasticContraction, or 20\nDescription: This boundary condition type is used for contraction models with fixed boundaries, symmetric contraction and viscoelastic lithosphere material setup. Free slip boundary conditions are applied along top, bottom and side boundaries. Orthogonal velocity is prescribed along side boundaries. Temperature is prescribed on top and bottom and zero heat flux is applied along side boundaries.\n\nViscoelasticContractionAsymmetric\n\nmodel_type value: \"ViscoelasticContractionAsymmetric\", :ViscoelasticContractionAsymmetric, or 21\nDescription: This boundary condition type is used for contraction models with fixed boundaries, asymmetric contraction and viscoelastic lithosphere material setup. Free slip boundary conditions are applied along top, bottom and side boundaries. Orthogonal velocity is prescribed along side boundaries with zero inflow along the left boundary. Temperature is prescribed on top and bottom and zero heat flux is applied along side boundaries.\n\n\n\n\n\n","category":"function"},{"location":"api/markers/stress_limits/#MarkerStressLimits","page":"MarkerStressLimits","title":"MarkerStressLimits","text":"","category":"section"},{"location":"api/markers/stress_limits/#Initialize","page":"MarkerStressLimits","title":"Initialize","text":"","category":"section"},{"location":"api/markers/stress_limits/#EarthBox.Markers.MarkerMaterials.MarkerStressLimits.initialize!","page":"MarkerStressLimits","title":"EarthBox.Markers.MarkerMaterials.MarkerStressLimits.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize marker stress limits for dislocation creep and plasticity models.\n\nArguments\n\nmodel::ModelData: The model data container containing the model parameters and arrays.\n\nKeyword Arguments\n\npowerlaw_stress_min::Union{Float64, Nothing}=nothing:\nMinimum stress limit for power law\nyield_stress_min::Union{Float64, Nothing}=nothing:\nMinimum stress limit for plastic failure in Pa\nyield_stress_max::Union{Float64, Nothing}=nothing:\nMaximum stress limit for plastic failure in Pa\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"installation/installation/#EarthBox-Installation","page":"Installation","title":"EarthBox Installation","text":"","category":"section"},{"location":"installation/installation/#Operating-System","page":"Installation","title":"Operating System","text":"Although the core functionality of Julia and EarthBox will work on Windows and MacOS operating systems, we recommend using a Linux operating system since  Linux yields better performance for scientific software, and the installation  of complex scientific software often involves less overhead.\n\nEarthBox was developed and tested on Debian-based Linux distributions like  Ubuntu and PopOS. Therefore, you will see a strong bias toward Debian-based package  management and the Bash shell in the EarthBox documentation. We recommend using Ubuntu or PopOS since EarthBox was extensively tested on these operating systems. \n\nIf you are working on Windows we recommend using VirtualBox to build a virtual Linux machine. See VirtualBox.","category":"section"},{"location":"installation/installation/#Julia-Installation","page":"Installation","title":"Julia Installation","text":"The easiest way to get started with Julia is to use juliaup which involves executing the following command on Linux systems:\n\ncurl -fsSL https://install.julialang.org | sh\n\nJuliaup will automatically customize your ~/.bashrc file for using Julia.\n\nSee Installing Julia for more details. \n\nAlternatively, you can install Julia directly from the latest tarball. For example:\n\nwget https://julialang-s3.julialang.org/bin/linux/x64/1.12/julia-1.12.1-linux-x86_64.tar.gz\ntar zxvf julia-1.12.1-linux-x86_64.tar.gz\n\nSee Julia Tarball for more details. Custom installations of Julia will require adding the path to the Julia  bin in your ~/.bashrc file:\n\nexport PATH=\"path/to/the/unpacked/julia/bin:$PATH\"\n\nand then sourcing your ~/.bashrc:\n\nsource ~/.bashrc\n\nIt is often useful to define a symbolic link to the Julia directory, which includes  the version number in the directory name, to eliminate the need to update your  ~/.bashrc with when a new version is installed. For example,\n\nln -sfn julia-1.11.2 julia\n\nYou can customize your Julia setup by defining the following environment variables in your ~/.bashrc:\n\n# Tell Julia to use all available threads\nexport JULIA_NUM_THREADS=auto\n# Define where packages, artifacts etc... will be stored\nexport JULIA_DEPOT_PATH=\"/path/to/your/custom/julia-depot\"\nexport JULIA_SCRATCH=\"/path/to/your/custom/julia-scratch\"                   \nexport JULIA_ARTIFACTS_DIR=\"/path/to/your/custom/julia-artifacts\"\n\nWhen using MUMPS it is often a good idea to restrict the number of OMP threads to 1 in your ~/.bashrc especially if you are using a locally compiled version:\n\nexport OMP_NUM_THREADS=1","category":"section"},{"location":"installation/installation/#Basic-EarthBox-Installation","page":"Installation","title":"Basic EarthBox Installation","text":"You can install the registered version of EarthBox via the Julia REPL:\n\njulia> ]\n(@v1.x) pkg> add EarthBox","category":"section"},{"location":"installation/installation/#Installing-MPI-in-Base-Julia-Environment","page":"Installation","title":"Installing MPI in Base Julia Environment","text":"If you plan on using the MUMPS solver you will need to install MPI in your base  Julia environment, configure MPI using MPIPreferences and install mpiexecjl:\n\n[1] Add MPI to your base environment:\n\njulia> ]\n(@v1.12) pkg> add MPI@0.20.22\n\n[2] And MPIPreferences to your base environment:\n\njulia> ]\n(@v1.12) pkg> add MPIPreferences@0.1.11\n\nwarning: version matching with EarthBox\nIt is a good idea to match the version of MPI and MPIPreferences used by EarthBox.\n\nSee Stable MPI Configuration for more details.\n\n[3] configure MPI to use the Julia OpenMPI binary:\n\njulia> using MPIPreferences\njulia> MPIPreferences.use_jll_binary(\"OpenMPI_jll\")\n\ntip: error message\nAn error message is generated instructing you to restart Julia. This is OK, the task was completed properly. Just restart the Julia REPL.\n\n[4] Install mpiexecjl using the following:\n\njulia> using MPI\njulia> MPI.install_mpiexecjl()\n\ntip: note the path to mpiexecjl\nmake a note of the path to the directory containing mpiexecjl produce as screen  output since you will add this path to your .bashrc\n\n[5] Add the path to mpiexecjl to your ~/.bashrc\n\nexport PATH=\"/path/to/mpiexecjl/bin:$PATH\"\n\nsource ~/.bashrc","category":"section"},{"location":"installation/installation/#EarthBox-Installation-for-Development-and-Experimentation","page":"Installation","title":"EarthBox Installation for Development and Experimentation","text":"The  following instructions are for installing the EarthBox project for local  experimentation that involves modifying the code.\n\n[1] Download the EarthBox project directory. \n\n[2] Navigate to the EarthBox directory and ensure that Manifest.toml and  LocalPreferences.toml files are deleted. Then enter the REPL with EarthBox as  the active project:\n\njulia --project=.\n\n[3] From inside the REPL instantiate the EarthBox project:\n\njulia> using Pkg\njulia> Pkg.instantiate()\n\nThis may take some time to complete especially if you are starting with a fresh depot. \n\n[4] With the active EarthBox project, configure MPI to use Julia binaries for OpenMP.\n\njulia> using MPIPreferences\njulia> MPIPreferences.use_jll_binary(\"OpenMPI_jll\")\n\nMPI.jl should also be installed in the base Julia environment (see  Installing MPI in Base Julia Environment). These MPI configuration steps are required for the use of MUMPS.jl with EarthBox.\n\n[5] Add EarthBox to your current default Julia environment for development. First exit out of the REPL if you are in it (you can use exit() from the REPL).  Then re-enter the REPL with the base Julia environment and add the EarthBox  project as a development project:\n\njulia> ]\n(@v1.x) pkg> dev /path/to/EarthBox\n\nThis will allow you to access EarthBox via\n\nusing EarthBox\n\nAfter these steps are completed you will have a basic working version of EarthBox that used Julia binaries for MPI and MUMPS.\n\nwarning: Parallel Analysis with MUMPS Using PT-Scotch and ParMetis\nParallel analysis with PT-Scotch and ParMetis for the MUMPS solver may not  work on your system when using JUlia binaries. You may need to set the MUMPS  analysis_method to SERIAL to work around these issues. However, having parallel  analysis can significantly increase MUMPS performance especially with large  systems of equations so it is worth the effort to get these features working.  See the Configuring MPI.jl to Use System Binaries and  Installing Custom MUMPS Libraries for guidance on using system MPI  and a local compiled version of MUMPS on Debian-type systems (e.g. Ubuntu, PopOS).","category":"section"},{"location":"api/melt_model/melt_model/#MeltModel","page":"MeltModel","title":"MeltModel","text":"","category":"section"},{"location":"api/melt_model/melt_model/#Initialization","page":"MeltModel","title":"Initialization","text":"","category":"section"},{"location":"api/melt_model/melt_model/#EarthBox.MeltModel.initialize!","page":"MeltModel","title":"EarthBox.MeltModel.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize melt model parameters.\n\nArguments\n\nmodel::ModelData: The model data container containing the    model parameters and arrays.\n\nKeyword Arguments\n\niuse_melting::Int64\nInteger flag that activates melt model with melt fraction calculation: 0 off; 1 on\niuse_melt_viscosity::Int64\nInteger flag that activates melt viscosity model where the viscosity of partially molten rocks is set to melt viscosity if melt fraction exceeds 10%: 0 off; 1 on\nviscosity_melt::Float64\nViscosity of molten rock in Pa.s\niuse_exponential_viscosity_reduction::Int64\nInteger flag that activates exponential viscosity reduction for partially molten rocks whereby the effective viscosity of partially molten rocks is reduced exponentially with extractable melt fraction for mantle rocks that are impacted bymelt extraction and melt fraction for crustal rocks that are currently not impacted by melt extraction (0 = off, 1 = on). If this parameter is set to 0, the effective viscosity of partially molten rocks is set to melt viscosity if melt fraction exceeds 10%.\niuse_melt_thermal_props::Int64\nInteger flag that activates melt to impact thermal properties including density, heat capacity in the term rhocp and thermal expansivity in the adiabatic heating term alphaT: 0 off; 1 on\niuse_depletion_density::Int64\nInteger flag that activate depletion density model (0 = off, 1 = on) whereby the density of rocks that have undergone melt extraction is modified to account for the partitioning of heavy elements into the melt.\n\n\n\n\n\n","category":"function"},{"location":"api/marker_materials/material_collection_files/#Material-Collection-Files","page":"Material Collection Files","title":"Material Collection Files","text":"Material collection files are yamal formatted files that contain groups of materials  and associated properties. The user can create a custom material collection file or use one of the  collections that are packaged with EarthBox MaterialLibrary.\n\nThe general structure of a material collection file is as follows:\n\ndescription: |\n  \n  Text description goes here.\n  - And can include bullets\n  - Like these\n\n  And Sections\n  ============\n  With text that provides additional details....\nnmats: 3\nMaterialGroupNameA:\n    UniqueMaterialNameA:\n      property_name_1: [value, units, description]\n      property_name_2: [value, units, description]\n      ...\n    UniqueMaterialNameB\n      property_name_1: [value, units, description]\n      property__name_2: [value, units, description]\n      ...\nMaterialGroupNameB\n    UniqueMaterialNameC:\n      property_name_1: [value, units, description]\n      property_name_2: [value, units, description]\n      property_name_3: [value, units, description]\n      ...\n    UniqueMaterialNameD\n      property_name_1: [value, units, description]\n      property_name_2: [value, units, description]\n      ...\n\nSee the list of valid material property names and standard units for material library files in  Material Properties.\n\nwarning: material names\nAll material names in the material collection file must be unique. \n\ninfo: group names\nGroup names are only for organizational purposes and are ignored by the code.\n\nwarning: material property units\nThe units provided in the material library file must match the master units as described in Material Properties. Material property unit conversion will be added in a future version of EarthBox.","category":"section"},{"location":"api/advection/advection/#Advection","page":"Advection","title":"Advection","text":"","category":"section"},{"location":"api/advection/advection/#Initialization","page":"Advection","title":"Initialization","text":"","category":"section"},{"location":"api/advection/advection/#EarthBox.Advection.initialize!","page":"Advection","title":"EarthBox.Advection.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize marker advection scheme parameters.\n\nArguments\n\nmodel::ModelData: The model data container containing the    model parameters and arrays.\n\nKeyword Arguments\n\nadvection_scheme::Union{Int, String, Nothing}=nothing: Controls the type of marker advection scheme.   See the Marker Advection Schemes section below for information on available marker advection schemes.   The marker advection scheme is stored in the model data container as an integer ID (itype_move_markers)    and a corresponding string name (stype_move_markers). If advection_scheme is nothing the current    marker advection scheme defined in the model data container will be used. The marker advection scheme    parameters can be accessed from the model data container as follows:\nitype_move_markers = model.markers.parameters.advection.itype_move_markers.value\nstype_move_markers = model.markers.parameters.advection.stype_move_markers.value\n\nKeyword Arguments\n\niuse_local_adaptive_time_stepping::Int64:\nActivate local adaptive time stepping where displacement is calculated at staggered grid nodes. The default value is 0 (off). If deactivated then adaptive time stepping using average grid spacing.\nmarker_cell_displ_max::Float64:\nMaximum marker displacement as a fraction of cell size in meters\nsubgrid_diff_coef_temp::Float64:\nNumerical subgrid temperature diffusion coefficient\nsubgrid_diff_coef_stress::Float64:\nNumerical subgrid stress diffusion coefficient\n\n\n\nMarker Advection Schemes\n\n\n\nNoMotion\n\nadvection_scheme value: \"NoMotion\", :NoMotion, or 0\nDescription: Markers are fixed in space and time\n\nRungeKutta4thOrder\n\nadvection_scheme value: \"RungeKutta4thOrder\", :RungeKutta4thOrder, or 4\nDescription: Markers are advected in the velocity field using a 4th order Runge Kutta scheme.\n\nSimpleAdvection\n\nadvection_scheme value: \"SimpleAdvection\", :SimpleAdvection, or 1\nDescription: Markers are advected in the velocity field using a 1st order Runge Kutta scheme (simple advection).\n\n\n\n\n\n","category":"function"},{"location":"methods/stokes_algorithm/stokes_algorithm/#Algorithm-for-Solving-the-Visco-elasto-plastic-Stokes-Continuity-Equations","page":"Stokes-Continuity Algorithm","title":"Algorithm for Solving the Visco-elasto-plastic Stokes-Continuity Equations","text":"The frictional-plastic failure model used in this work introduces a strong non-linearity where the visco-plastic viscosity eta_vpm is dependent on deviatoric stress and  deviatoric stress is in turn dependent on the visco-plastic viscosity as described in  equations eq:visco-plastic-viscosity and eq:second-invariant-elastic-stress.  EarthBox uses a node-based Picard iteration method to iteratively solve the non-linear Stokes-continuity  equations on the staggered grid. \n\nThe deviatoric stress tensor is updated on markers that are advected with the velocity field. Updating  the deviatoric stress tensor on markers requires accounting for three components of stress change:\n\ndeviatoric grid stress changes from equation Eq. obtained on the Eulerian staggered grid by solving the non-linear Stokes-continuity equation  with visco-elasto-plastic stress forecast\ndeviatoric stress changes occurring at a subgrid scale on individual markers\ndeviatoric stress changes associated with the rotation of markers during advection\n\nThe following steps are used to solve equations eq:x-stokes, eq:y-stokes,  and eq:continuity using the visco-elasto-plastic constitutive law described in equations  eq:xx-stress and eq:xy-stress, and update the deviatoric stress tensor on  markers for the three components of stress change described above.\n\nFor each time step t do:\n\n[1] Set model time step Delta t equal to visco-elastic time step Delta t_ve.\n\n[2] Update marker failure properties including cohesion sigma_cm and friction angle theta_m including the effects of randomized initial friction angle theta_m^o, strain  weakening and melt damage.\n\n[3] Update non-linear creep viscosity eta_creepm including the effects of temperature, pressure, stress.\n\n[4] Initialize visco-plastic viscosity eta_vpm with eta_creepm and update for the effects of partial melt.\n\n[5] Interpolate Stokes-continuity parameters from markers to staggered grids using equation  eq:bilinear_interp2grid:\n\nbeginsplit\n    textDensity (inclusive)  rho_m rightarrow rho_(ij)_b \n    textCohesion (exclusive)  C_m rightarrow C_(ij)_b \n    textFriction angle (exclusive)  theta_m rightarrow theta_(ij)_b \n    textCreep viscosity (exclusive)  eta_creepm rightarrow eta_creep(ij)_b \n    textVisco-plastic Shear Viscosity (exclusive)  eta_vpm rightarrow eta_vp(ij)_b \n    textVisco-plastic Normal Viscosity (exclusive)  eta_vpm rightarrow eta_vp(ij)_p \n    textShear modulus on basic nodes (exclusive)  mu_m rightarrow mu_(ij)_b \n    textShear modulus on pressure nodes (inclusive)  mu_m rightarrow mu_(ij)_p \n    textDeviatoric shear stress (exclusive)  sigma_xym rightarrow sigma_xy(ij)_b1 \n    textDeviatoric normal stress (inclusive)  sigma_xxm rightarrow sigma_xx(ij)_p1 \nendsplit\n\n[6] Calculate updated solutions for x-component of velocity v_x(ij)_vx, y-component of velocity  v_y(ij)_vy and pressure P_(ij)_p using a node-based Picard iteration loop  (Picard Loop) with iterative updates to visco-plastic shear viscosity on the basic grid eta_vp(ij)_b that take into account plastic yielding and visco-plastic normal viscosity on pressure  grid eta_vp(ij)_p calculated using a harmonic average of updated shear visco-plastic viscosity  on basic nodes.\n\n[7] Update model time step Delta t ensuring that displacement is less than a user specified fraction of the staggered grid spacing based on current velocity solutions v_x(ij)vx and  v_y(ij)vy and grid spacings Delta x_(ij)vx and Delta y_(ij)vy.\n\n[8] Calculate marker visco-plastic viscosity eta_vpm by interpolating visco-plastic viscosity  from basic grid eta_vp(ij)_b and taking plastic yielding into account (Marker Visco-plastic Viscosity).\n\n[9] Forecast deviatoric stresses sigma_xx(ij)_p2 and sigma_xy(ij)_b2 using  equation Eq. with updated deviatoric strain rates  dotepsilon_xx(ij)_p and dotepsilon_xy(ij)_b, updated visco-plastic  viscosity eta_vp(ij)_p and eta_vp(ij)_b and updated model time step Delta t.\n\n[10] Update grid deviatoric stress changes using the following equations:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:visco-elasto-plastic-stress-changes","page":"Stokes-Continuity Algorithm","title":"eq:visco-elasto-plastic-stress-changes","text":"beginsplit\nDelta sigma_xx(ij)_p = sigma_xx(ij)_p2 - sigma_xx(ij)_p1 \nDelta sigma_xy(ij)_b = sigma_xy(ij)_b2 - sigma_xy(ij)_b1\nendsplit\n\n[11] Update marker deviatoric stress components sigma_xxm and sigma_xxm by applying subgrid-stress diffusion steps (Subgrid-stress Diffusion Steps).\n\n[12] Advect markers and calculate marker angular velocity omega_m using the 4-th order  Runge-Kutta method and angular velocity on the basic grid omega_(ij)_b given by:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:angular-velocity","page":"Stokes-Continuity Algorithm","title":"eq:angular-velocity","text":"omega_(ij)_b =\n    05left(\n        frac(v_y(ij+1)vy - v_y(ij)vy) Delta x_vy(j) \n        - frac(v_x(i+1j)vx - v_x(ij)vx)Delta y_vx(i)\n        right)\n\n[13] Rotate deviatoric stress components on markers using the following equations:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:stress-rotation","page":"Stokes-Continuity Algorithm","title":"eq:stress-rotation","text":"beginsplit\nsigma_xxm = \n    sigma_xxm^oleft(cos(omega_m Delta t)^2 - sin(omega_m Delta t)^2right)\n    - sigma_xym^o sin(2omega_m Delta t\n    ) text \nsigma_xym = \n    sigma_xxm^o sin(2omega_m Delta t) + sigma_xym^o cos(2omega_m Delta t)\nendsplit\n\nwhere sigma_xxm^o and sigma_xym^o are the deviatoric marker stress components  before advection.\n\n[14] Advance model time t by Delta t.","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#Picard-Loop","page":"Stokes-Continuity Algorithm","title":"Picard Loop","text":"While Picard criterion R_L2  Tolerance and N_iterations  N_max do:\n\n[1] Calculate the visco-plastic viscosity on pressure grid eta_vp(ij)_p as a harmonic     average of the visco-plastic viscosity eta_vp(ij)_b on surrounding basic nodes:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:harmonic-viscosity-average","page":"Stokes-Continuity Algorithm","title":"eq:harmonic-viscosity-average","text":"eta_vp(ij)_p = frac4\n    1eta_vp(ij)_b + 1eta_vp(i-1j)_b \n    + 1eta_vp(ij-1)_b + 1eta_vp(i-1j-1)_b\n    \n\n[2] Obtain new solution vector S^new and updated solutions for x-component of velocity      v_x(ij)_vx, y-component of velocity v_y(ij)_vy and pressure P_(ij)_p      by solving equations eq:x-stokes, eq:y-stokes, and eq:continuity      using current eta_vp(ij)_b and eta_vp(ij)_p.\n\n[3] Update the convergence R_L2 criterion defined as:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:picard_criterion","page":"Stokes-Continuity Algorithm","title":"eq:picard_criterion","text":"R_L2 = frac\n    sqrtdisplaystylesum_i (S_v_xyi^new - S_v_xyi^old)^2\n    \n    sqrt displaystylesum_i (S_v_xyi^new)^2\n    \n\nwhere S_v_xy^old is the old velocity solution vector and S_v_xy^new is the  new velocity solution vector.\n\n[4] Calculate deviatoric strain rate components dotepsilon_xx(ij)_p and  dotepsilon_xy(ij)_b using updated velocity solutions v_x(ij)vx and  v_y(ij)vy and the following equation:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:deviatoric-strain-rate","page":"Stokes-Continuity Algorithm","title":"eq:deviatoric-strain-rate","text":"beginsplit\ndotepsilon_xx(ij)_p = frac12 left( \n    frac\n        v_x(i+1j+1)vx - v_x(i+1j)vx\n        Delta x_j_b \n    - frac\n        v_y(i+1j+1)vy - v_y(ij+1)vy\n        Delta y_i_b \nright) quad textand \ndotepsilon_xy(ij)_b = frac12 left( \n    frac\n        v_x(i+1j)vx - v_x(ij)vx\n        Delta y_i_p \n    + frac\n        v_y(ij+1)vx - v_y(ij)vx\n        Delta x_j_p\nright) text \nendsplit\n\n[5] Forecast deviatoric stresses sigma_xx(ij)_p2 and sigma_xy(ij)_b2 using  updated deviatoric strain rates dotepsilon_xx(ij)_p and dotepsilon_xy(ij)_b,  updated visco-plastic viscosity eta_vp(ij)_p and eta_vp(ij)_b with the  following equations:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:deviatoric-stress-forecast","page":"Stokes-Continuity Algorithm","title":"eq:deviatoric-stress-forecast","text":"beginsplit\n    sigma_xx(ij)_p2 = \n        2 eta_vp(ij)_p dotepsilon_xx(ij)_p\n            frac mu_(ij)_b Delta t  mu_(ij)_b Delta t + eta_vp(ij)_p  \n        + sigma_xx(ij)_p1 \n            frac eta_vp(ij)_p  mu_(ij)_b Delta t + eta_vp(ij)_p  \n                quad textand \n    sigma_xy(ij)_b2 =\n        2 eta_vp(ij)_b dotepsilon_xy(ij)_b\n            frac mu_(ij)_b Delta t  mu_(ij)_b Delta t + eta_vp(ij)_b \n        + sigma_xy(ij)_b1\n            frac eta_vp(ij)_b  mu_(ij)_b Delta t + eta_vp(ij)_b \nendsplit\n\n[6] Update visco-plastic viscosity on basic grid eta_vp(ij)_b for plastic yielding, and update yield state chi_(ij)_b  (Visco-plastic Viscosity Update for Yielding on Basic Grid).","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#Visco-plastic-Viscosity-Update-for-Yielding-on-Basic-Grid","page":"Stokes-Continuity Algorithm","title":"Visco-plastic Viscosity Update for Yielding on Basic Grid","text":"For Each Basic Node (ij) Do:\n\n[1] Calculate the second invariant of deviatoric stress sigma_II(ij)_b using updated  deviatoric stresses sigma_xx(ij)_b2 and sigma_xy(ij)_b2 as described by the  following equation:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:second-invariant-stress*basic*nodes","page":"Stokes-Continuity Algorithm","title":"eq:second-invariant-stressbasicnodes","text":"beginsplit\nsigma_xxavg(ij)_b2 =\n    frac14\n    left(\n        sigma_xx(ij)_p2 + sigma_xx(i+1j)_p2\n        + sigma_xx(ij+1)_p2 + sigma_xx(i+1j+1)_p2\n    right) text \nsigma_II(ij)_b = sqrt\n    left(\n        left( sigma_xy(ij)_b2 right)^2\n        + left( sigma_xxavg(ij)_b2right)^2\n    right)\n    \nendsplit\n\n[2] Compute the second invariant of deviatoric stress for purely elastic stress buildup sigma_II elastic(ij)_b using the following equation:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:elastic_stress","page":"Stokes-Continuity Algorithm","title":"eq:elastic_stress","text":"sigma_II elastic(ij)_b = fracmu_(ij)_b Delta t + eta_vp(ij)_beta_vp(ij)_b\n    sigma_II(ij)_b\n\nwhere mu_(ij)_b is the shear modulus at basic nodes and Delta t is the model time step.\n\n[3] Interpolate pressure from staggered pressure grid P_(ij)_p to basic pressure grid  P_(ij)_b:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:pressure_basic","page":"Stokes-Continuity Algorithm","title":"eq:pressure_basic","text":"P_(ij)_b = frac14left(P_(ij)_p + P_(i+1j)p + P_(ij+1)p + P_(i+1j+1)pright)\n\n[4] Compute the Drucker-Prager yield stress on basic grid sigma_textyield(ij)_b using the following equation:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:yield*stress*basic_nodes","page":"Stokes-Continuity Algorithm","title":"eq:yieldstressbasic_nodes","text":"sigma_yield(ij) =\nbegincases\n    sigma_c(ij)_b cos(theta_(ij)_b) + sin(theta_(ij)_b)left(P_(ij)_b - P_fright) \n         quad textfor P_(ij)_b geq P_f\n    sigma_c(ij)_b cos(theta_(ij)_b)  quad textfor P_(ij)_b  P_f\nendcases\n\nwhere sigma_yield(ij) is the second invariant of the deviatoric stress tensor at basic  grid node at yield, sigma_c(ij)_b is the cohesion, theta_(ij)_b is the friction  angle and P_f is the fluid pressure.\n\n[5] Update visco-plastic viscosity eta_vp(ij)_b for plastic failure using the following equation:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:visco*elasto*plastic*viscosity*update","page":"Stokes-Continuity Algorithm","title":"eq:viscoelastoplasticviscosityupdate","text":"beginsplit\neta_vp(ij)_b = \n    begincases\n    eta_creep(ij)_b \n             textfor quad sigma_IIelastic(ij)_b leq sigma_yield(ij)_b quad \n    min left( eta_yield(ij)_b\n            text  eta_creep(ij)_b right)\n             textfor quad sigma_IIelastic(ij)_b  sigma_yield(ij)_b\n    endcases\nendsplit\n\nwhere eta_creep(ij)_b is the composite creep viscosity interpolated from markers and  eta_yield(ij)_b is the visco-plastic viscosity at the yield state as given by:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:yield_viscosity","page":"Stokes-Continuity Algorithm","title":"eq:yield_viscosity","text":"eta_yield(ij)_b = mu_(ij)_b Delta t\n        fracsigma_yield(ij)_bsigma_IIelastic(ij)_b - sigma_yield(ij)_b\n\n[6] Update the plastic yielding state on basic nodes chi_(ij)_b using the following      equation:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:plastic_yielding","page":"Stokes-Continuity Algorithm","title":"eq:plastic_yielding","text":"chi_(ij)_b = \nbegincases\n    1  textif  sigma_IIelastic(ij)_b  sigma_yield(ij)_b \n        text and  eta_yield(ij)_b  eta_creep(ij)_b \n    0  textotherwise\nendcases\n\nwhere a value of 1 indicates that the basic node has undergone plastic failure and a value of 0 indicates that the basic node has not undergone plastic failure.","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#Marker-Visco-plastic-Viscosity","page":"Stokes-Continuity Algorithm","title":"Marker Visco-plastic Viscosity","text":"For each marker m do:\n\n[1] Determine if plastic yielding has occurred for any basic node associated with the cell that     contains marker m using the plastic failure criterion chi_(ij)_b defined on the      basic grid.\n\n[2] Initialize the visco-plastic viscosity of the marker eta_vpm to the creep viscosity     eta_creep(m).\n\n[3] If plastic yielding has occurred on a node associated with marker m calculate the      visco-plastic viscosity of the marker eta_vpm using a harmonic average limited by the      flow viscosity eta_creepm as follows:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:harmonic*viscosity*average_yield","page":"Stokes-Continuity Algorithm","title":"eq:harmonicviscosityaverage_yield","text":"beginsplit\neta_yieldm =\n    left(\n        chi_(UL)_bw_ULm + chi_(LL)_bw_LLm\n        + chi_(UR)_bw_URm + chi_(LR)_bw_LRm\n    right)\n    left(\n    fracchi_(UL)_bw_ULmeta_vp(UL)_b +\n    fracchi_(LL)_bw_LLmeta_vp(LL)_b +\n    fracchi_(UR)_bw_URmeta_vp(UR)_b +\n    fracchi_(LR)_bw_LRmeta_vp(LR)_b\n    right)^-1 text  \neta_vpm = minleft(eta_yieldm text  eta_creepmright)\nendsplit\n\nwhere UL = (i_ulm j_ulm), LL = (i_ulm+1 j_ulm), UR = (i_ulm j_ulm+1), and LR = (i_ulm+1 j_ulm+1) are the basic nodes indices associated with the cell  containing marker m and w_ULm, w_LLm, w_URm, and w_LRm are the  associated node-marker weights calculated using equation eq:nodemarkerweights and i_ulm and j_ulm are the indices of the upper-left basic grid node of the cell containing marker m.","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#Subgrid-stress-Diffusion-Steps","page":"Stokes-Continuity Algorithm","title":"Subgrid-stress Diffusion Steps","text":"[1] Calculate initial nodal stresses sigma_xxnodalm and sigma_xynodalm for each     marker m by interpolating sigma_xx(ij)_p1 and sigma_xy(ij)_b1 to      markers using equation eq:bilinear-interp2markers.\n\n[2] Calculated the total subgrid stress differences Delta sigma_xxsgtm and      Delta sigma_xysgtm for each marker m using the following equations:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:subgrid*stress*difference","page":"Stokes-Continuity Algorithm","title":"eq:subgridstressdifference","text":"beginsplit\nDelta sigma_xxsgtm  = sigma_xxnodalm - sigma_xxm \nDelta sigma_xysgtm  = sigma_xynodalm - sigma_xym text\nendsplit\n\n[3] Calculate the relaxed subgrid stress differences Delta sigma_xxsgm and      Delta sigma_xysgm using the following equations:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:subgrid*stress*relaxed","page":"Stokes-Continuity Algorithm","title":"eq:subgridstressrelaxed","text":"beginsplit\nDelta sigma_xxsgm = Delta sigma_xxsgtm\n    left(1 - exp left(-D_sg fracDelta tt_maxright)right) \nDelta sigma_xysgm = Delta sigma_xysgtm\n    left(1 - exp left(-D_sg fracDelta tt_maxright)right)\nendsplit\n\nwhere D_sg is the sub-grid diffusion coefficient and t_max is the Maxwell time defined as:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:maxwell-time","page":"Stokes-Continuity Algorithm","title":"eq:maxwell-time","text":"t_max = fraceta_vpmmu_m text\n\n[4] Calculate the relaxed sub-grid stress differences on the staggered grids      Delta sigma_xxsg(ij)_p and Delta sigma_xysg(ij)_b by interpolating the      relaxed subgrid stress differences from markers Delta sigma_xxsgm and      Delta sigma_xysgm to the staggered grid using the bilinear interpolation method      described in equation eq:bilinear_interp2grid.\n\n[5] Calculate the remaining stress changes on staggered grid nodes by removing the interpolated     relaxed sub-grid stress differences using the following equations:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:remaining*stress*change*on*grid","page":"Stokes-Continuity Algorithm","title":"eq:remainingstresschangeongrid","text":"beginsplit\nDelta sigma_xxvepr(ij)_p = \n    Delta sigma_xx(ij)_p - Delta sigma_xxsg(ij)_p text \nDelta sigma_xyvepr(ij)_b = \n    Delta sigma_xy(ij)_b - Delta sigma_xysg(ij)_b\nendsplit\n\n[6] Calculate the remaining visco-elasto plastic stress changes Delta sigma_xxveprm and Delta sigma_xyveprm for each marker m by  interpolating the remaining stress changes on staggered grid nodes  Delta sigma_xxvepr(ij)_b and Delta sigma_xyvepr(ij)_b to markers using  equation Eq..\n\n[7] Update marker deviatoric stress components sigma_xxm and sigma_xxm using     the following equations:","category":"section"},{"location":"methods/stokes_algorithm/stokes_algorithm/#eq:subgrid*stress*update","page":"Stokes-Continuity Algorithm","title":"eq:subgridstressupdate","text":"beginsplit\nsigma_xxm = \n    sigma_xxm^o + Delta sigma_xxsgm \n    + Delta sigma_xxveprm text\nsigma_xym = \n    sigma_xym^o + Delta sigma_xysgm \n    + Delta sigma_xyveprm\nendsplit\n\nwhere sigma_xxm^o and sigma_xym^o are the previous marker deviatoric stress components.","category":"section"},{"location":"model_data/collections/bcs/","page":"BoundaryConditions","title":"BoundaryConditions","text":"BoundaryConditions\n\nParameters\nBcOptions\nTemperature\nVelocity\nPressure\nVelocityStep\nArrays\nTemperature\nVelocity\nVelComp\nBcInternal","category":"section"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.BoundaryConditions","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.BoundaryConditions","text":"BoundaryConditionsDataState\n\nStruct containing boundary conditions parameters and arrays.\n\nFields\n\nparameters::Parameters: Parameter groups for boundary conditions\narrays::Arrays: Array groups for boundary conditions\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.Parameters","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.Parameters","text":"Parameters\n\nCollection of boundary condition parameters.\n\nFields\n\nbc_options::BcOptions: General boundary condition options\ntemperature::Temperature: Temperature boundary conditions\nvelocity::Velocity: Velocity boundary conditions  \npressure::Pressure: Pressure boundary conditions\nvelocity_step::VelocityStep: Velocity step boundary conditions\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.BcOptionsGroup.BcOptions","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.BcOptionsGroup.BcOptions","text":"BcOptions <: AbstractParameterGroup\n\nParameter group for boundary condition options.\n\nFields\n\nitype_bc::ParameterInt: Boundary condition option for Stokes and heat equations\nstype_bc::ParameterStr: Boundary condition option name\npressure_bc_mode::ParameterFloat: Pressure bc: 0 upper left cell 1 top and bottom\n\nNested Dot Access\n\nitype_bc = model.bcs.parameters.bc_options.itype_bc.value\nstype_bc = model.bcs.parameters.bc_options.stype_bc.value\npressure_bc_mode = model.bcs.parameters.bc_options.pressure_bc_mode.value\n\nConstructor\n\nBcOptions()\n\nInitializes boundary condition option parameters with default values.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.TemperatureGroup.Temperature","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.TemperatureGroup.Temperature","text":"Temperature <: AbstractParameterGroup\n\nParameter group for temperature boundary conditions.\n\nFields\n\ntemperature_top::ParameterFloat: Temperature along the top boundary of the model domain in Kelvin\ntemperature_bottom::ParameterFloat: Temperature at the base of the model domain in Kelvin\ntemperature_left::ParameterFloat: Temperature along the left boundary of the model domain in Kelvin\ntemperature_right::ParameterFloat: Temperature along the right boundary of the model domain in Kelvin\niuse_bottom_transient::ParameterInt: Flag to use transient temperature at the bottom boundary\ntemperature_bottom_transient::ParameterFloat: transient temperature at the bottom boundary\ntemperature_bottom_original::ParameterFloat: Original temperature at the bottom boundary\nstart_time_bottom_transient::ParameterFloat: Start time (Myr) for transient temperature at the bottom boundary\nend_time_bottom_transient::ParameterFloat: End time (Myr) for transient temperature at the bottom boundary\ndelta_temperature_transient::ParameterFloat: Temperature perturbation for initial transient temperature at the bottom boundary\ntemperature_base_lith_warmer_initial::ParameterFloat: Temperature at the base of the lithosphere\ntemperature_bottom_warmer_initial::ParameterFloat: Initial elevated temperature at the bottom of the model\ntemperature_bottom_cooler_final::ParameterFloat: Cooler transient temperature at the bottom of the model\n\nNested Dot Access\n\ntemperature_top = model.bcs.parameters.temperature.temperature_top.value\ntemperature_bottom = model.bcs.parameters.temperature.temperature_bottom.value\ntemperature_left = model.bcs.parameters.temperature.temperature_left.value\ntemperature_right = model.bcs.parameters.temperature.temperature_right.value\niuse_bottom_transient = model.bcs.parameters.temperature.iuse_bottom_transient.value\ntemperature_bottom_transient = model.bcs.parameters.temperature.temperature_bottom_transient.value\ntemperature_bottom_original = model.bcs.parameters.temperature.temperature_bottom_original.value\nstart_time_bottom_transient = model.bcs.parameters.temperature.start_time_bottom_transient.value\nend_time_bottom_transient = model.bcs.parameters.temperature.end_time_bottom_transient.value\ndelta_temperature_transient = model.bcs.parameters.temperature.delta_temperature_transient.value\ntemperature_base_lith_warmer_initial = model.bcs.parameters.temperature.temperature_base_lith_warmer_initial.value\ntemperature_bottom_warmer_initial = model.bcs.parameters.temperature.temperature_bottom_warmer_initial.value\ntemperature_bottom_cooler_final = model.bcs.parameters.temperature.temperature_bottom_cooler_final.value\n\nConstructor\n\nTemperature()\n\nInitializes temperature boundary condition parameters with default values.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.VelocityGroup.Velocity","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.VelocityGroup.Velocity","text":"Velocity <: AbstractParameterGroup\n\nParameter group for velocity boundary conditions.\n\nFields\n\nvelocity::ParameterFloat: General velocity boundary condition\nfull_velocity_extension::ParameterFloat: Full extension rate in m/s\nfull_velocity_extension_step1::ParameterFloat: Full extension rate at step 1 in m/s\nfull_velocity_extension_step2::ParameterFloat: Full extension rate at step 2 in m/s\nfull_velocity_contraction::ParameterFloat: Full contraction rate in m/s\nvelocity_shear::ParameterFloat: Shear velocity in m/s\nvelocity_rotation::ParameterFloat: Rotation velocity in m/s\niuse_strain_rate::ParameterInt: 0 use full extension velocity to define velocity bc's; 1 use strain rate\nstrain_rate_bc::ParameterFloat: Strain rate boundary condition in 1/s\nvyu::ParameterFloat: Velocity in y direction at upper boundary in m/s\nvyl::ParameterFloat: Velocity in y direction at lower boundary in m/s\nvelocity_internal_x::ParameterFloat: X component of internal velocity in m/s\nvelocity_internal_y::ParameterFloat: Y component of internal velocity in m/s\nplate_thickness::ParameterFloat: Thickness of plate in meters used for inflow-outflow depth-dependent extension and contraction boundary conditions\nsmoothing_thickness::ParameterFloat: Thickness in meters for velocity smoothing between inflow and outflow boundaries\nvelocity_inflow_left::ParameterFloat: Inflow velocity at left boundary in m/s\nvelocity_inflow_right::ParameterFloat: Inflow velocity at right boundary in m/s\nvelocity_inflow_smooth_avg_left::ParameterFloat: Smoothed average inflow velocity at left boundary in m/s\nvelocity_inflow_smooth_avg_right::ParameterFloat: Smoothed average inflow velocity at right boundary in m/s\niuse_velocity_stop::ParameterInt: Flag for velocity stopping: 0 = off; 1 = on\nvelocity_stop_time::ParameterFloat: Time at which velocity stops in Myr\nivelocity_stop_counter::ParameterInt: Counter for velocity stop: 0 = off; 1 = on\n\nNested Dot Access\n\nvelocity = model.bcs.parameters.velocity.velocity.value\nfull_velocity_extension = model.bcs.parameters.velocity.full_velocity_extension.value\nfull_velocity_extension_step1 = model.bcs.parameters.velocity.full_velocity_extension_step1.value\nfull_velocity_extension_step2 = model.bcs.parameters.velocity.full_velocity_extension_step2.value\nfull_velocity_contraction = model.bcs.parameters.velocity.full_velocity_contraction.value\nvelocity_shear = model.bcs.parameters.velocity.velocity_shear.value\nvelocity_rotation = model.bcs.parameters.velocity.velocity_rotation.value\niuse_strain_rate = model.bcs.parameters.velocity.iuse_strain_rate.value\nstrain_rate_bc = model.bcs.parameters.velocity.strain_rate_bc.value\nvyu = model.bcs.parameters.velocity.vyu.value\nvyl = model.bcs.parameters.velocity.vyl.value\nvelocity_internal_x = model.bcs.parameters.velocity.velocity_internal_x.value\nvelocity_internal_y = model.bcs.parameters.velocity.velocity_internal_y.value\nplate_thickness = model.bcs.parameters.velocity.plate_thickness.value\nsmoothing_thickness = model.bcs.parameters.velocity.smoothing_thickness.value\nvelocity_inflow_left = model.bcs.parameters.velocity.velocity_inflow_left.value\nvelocity_inflow_right = model.bcs.parameters.velocity.velocity_inflow_right.value\nvelocity_inflow_smooth_avg_left = model.bcs.parameters.velocity.velocity_inflow_smooth_avg_left.value\nvelocity_inflow_smooth_avg_right = model.bcs.parameters.velocity.velocity_inflow_smooth_avg_right.value\niuse_velocity_stop = model.bcs.parameters.velocity.iuse_velocity_stop.value\nvelocity_stop_time = model.bcs.parameters.velocity.velocity_stop_time.value\nivelocity_stop_counter = model.bcs.parameters.velocity.ivelocity_stop_counter.value\n\nConstructor\n\nVelocity()\n\nInitializes velocity boundary condition parameters with default values.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.PressureGroup.Pressure","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.PressureGroup.Pressure","text":"Pressure <: AbstractParameterGroup\n\nParameter group for pressure boundary conditions.\n\nFields\n\npressure_bc::ParameterFloat: Pressure boundary condition in Pa.\n\nNested Dot Access\n\npressure_bc = model.bcs.parameters.pressure.pressure_bc.value\n\nConstructor\n\nPressure()\n\nInitializes pressure boundary condition parameter with default value of  10000.0 Pa.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.VelocityStepGroup.VelocityStep","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ParameterCollection.VelocityStepGroup.VelocityStep","text":"VelocityStep <: AbstractParameterGroup\n\nParameter group for velocity step changes.\n\nFields\n\niuse_velocity_step::ParameterInt: Increase/decrease full extension velocity by factor at specified time\nvelocity_step_factor::ParameterFloat: Factor used to increase/decrease velocity at specified time\ntimestep_adjustment_factor::ParameterFloat: Factor used to adjust time step when velocity is increased/decreased\nvelocity_step_time::ParameterFloat: Time of velocity increase/decrease in Myr\nvelocity_second_step_time::ParameterFloat: Time of second velocity increase/decrease in Myr\nivelocity_step_counter::ParameterInt: Integer counter for velocity step\nvelocity_second_step_factor::ParameterFloat: Factor used to increase/decrease velocity at specified time\ntimestep_second_adjustment_factor::ParameterFloat: Factor used to adjust time step when velocity is increased/decreased\n\nNested Dot Access\n\niuse_velocity_step = model.bcs.parameters.velocity_step.iuse_velocity_step.value\nvelocity_step_factor = model.bcs.parameters.velocity_step.velocity_step_factor.value\ntimestep_adjustment_factor = model.bcs.parameters.velocity_step.timestep_adjustment_factor.value\nvelocity_step_time = model.bcs.parameters.velocity_step.velocity_step_time.value\nvelocity_second_step_time = model.bcs.parameters.velocity_step.velocity_second_step_time.value\nivelocity_step_counter = model.bcs.parameters.velocity_step.ivelocity_step_counter.value\nvelocity_second_step_factor = model.bcs.parameters.velocity_step.velocity_second_step_factor.value\ntimestep_second_adjustment_factor = model.bcs.parameters.velocity_step.timestep_second_adjustment_factor.value\n\nConstructor\n\nVelocityStep()\n\nInitializes velocity step parameters with default values.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.Arrays","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.Arrays","text":"Arrays\n\nCollection of boundary condition arrays.\n\nFields\n\ntemperature::Temperature: Temperature boundary condition arrays\nvelocity::Velocity: Velocity boundary condition arrays\nvel_comp::VelComp: Velocity component arrays\ninternal::BcInternal: Internal boundary condition arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.TemperatureGroup.Temperature","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.TemperatureGroup.Temperature","text":"Temperature <: AbstractArrayGroup\n\nArray group for temperature boundary conditions.\n\nFields\n\nbtopt::BcArrayFloatState: (xnum, 2) : Temperature boundary condition along top boundary: \n\n tk[1][j] = btopt[j][1] + tk[2][j]*btop[j][2]\n\nbbottomt::BcArrayFloatState: (xnum, 2) : Temperature boundary condition along bottom boundary: \n\n tk[ynum][j] = bbottomt[j][1] + tk[ynum-1][j]*bbottomt[j][2]\n\nbleftt::BcArrayFloatState: (ynum, 2) : Temperature boundary condition along left boundary: \n\n tk[i][1] = bleftt[i][1] + bleftt[i][2]*tk[i][2]\n\nbrightt::BcArrayFloatState: (ynum, 2) : Temperature boundary condition along right boundary: \n\n tk[i][xnum] = brightt[i][1] + brightt[i][2]*tk[i][xnum-1]\n\nConstructor\n\nTemperature(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in the vertical direction\nxnum::Int: Number of grid points in the horizontal direction\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.VelocityGroup.Velocity","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.VelocityGroup.Velocity","text":"Velocity <: AbstractArrayGroup\n\nArray group for combined velocity boundary conditions.\n\nFields\n\nbtop::BcArrayFloatState: (xnum+1, 6) : Velocity boundary conditions along top boundary: \n\n vx[1,j,:] = btop[j,1] + vx[2,j,:]*btop[j,2] \n vy[1,j,:] = btop[j,3] + vy[2,j,:]*btop[j,4] \n vz[1,j,:] = btop[j,5] + vz[2,j,:]*btop[j,6]\n\nbbottom::BcArrayFloatState: (xnum+1, 6) : Velocity boundary conditions along bottom boundary: \n\n vx[ynum+1,j,:] = bbottom[j,1] + vx[ynum  ,j,:]*bbottom[j,2] \n vy[ynum  ,j,:] = bbottom[j,3] + vy[ynum-1,j,:]*bbottom[j,4] \n vz[ynum+1,j,:] = bbottom[j,5] + vz[ynum  ,j,:]*bbottom[j,6]\n\nbleft::BcArrayFloatState: (ynum+1, 6) : Velocity boundary conditions along left boundary: \n\n vx[i,1,:] = bleft[i,1] + vx[i,2,:]*bleft[i,2] \n vy[i,1,:] = bleft[i,3] + vy[i,2,:]*bleft[i,4] \n vz[i,1,:] = bleft[i,5] + vz[i,2,:]*bleft[i,6]\n\nbright::BcArrayFloatState: (ynum+1, 6) : Velocity boundary conditions along right boundary: \n\n vx[i,xnum  ,:] = bright[i,1] + vx[i,xnum-1,:]*bright[i,2] \n vy[i,xnum+1,:] = bright[i,3] + vy[i,xnum  ,:]*bright[i,4] \n vz[i,xnum+1,:] = bright[i,5] + vz[i,xnum  ,:]*bright[i,6]\n\nbfront::BcArrayFloatState: (ynum+1, 6) : Velocity boundary conditions along front boundary: \n\n vx[i,j,1] = bfront[i,1] + vx[i,j,2]*bfront[i,2] \n vy[i,j,1] = bfront[i,3] + vy[i,j,2]*bfront[i,4] \n vz[i,j,1] = bfront[i,5] + vz[i,j,2]*bfront[i,6]\n\nbback::BcArrayFloatState: (ynum+1, 6) : Velocity boundary conditions along back boundary: \n\n vx[i,j,znum+1] = bback[i,1] + vx[i,j,znum]*bback[i,2] \n vy[i,j,znum+1] = bback[i,3] + vy[i,j,znum]*bback[i,4] \n vz[i,j,znum  ] = bback[i,5] + vz[i,j,znum-1]*bback[i,6]\n\nNested Dot Access\n\nbtop = model.bcs.arrays.velocity.btop.array\nbbottom = model.bcs.arrays.velocity.bbottom.array\nbleft = model.bcs.arrays.velocity.bleft.array\nbright = model.bcs.arrays.velocity.bright.array\nbfront = model.bcs.arrays.velocity.bfront.array\nbback = model.bcs.arrays.velocity.bback.array\n\nConstructor\n\nVelocity(ynum::Int64, xnum::Int64; znum::Int64=1)\n\nInitializes combined velocity boundary condition arrays with zero values.\n\nArguments\n\nynum::Int64: Number of grid points in the vertical direction\nxnum::Int64: Number of grid points in the horizontal direction\nznum::Int64=1: Number of grid points in the z-direction (default: 1 for 2D)\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.VelCompGroup.VelComp","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.VelCompGroup.VelComp","text":"VelComp <: AbstractArrayGroup\n\nArray group for component-wise velocity boundary conditions.\n\nFields\n\nbtopx::BcArrayFloatState: (xnum+1, 2) : Vx boundary condition along top boundary: \n\n vx[1,j,:] = btopx[j,1] + vx[2,j,:]*btopx[j,2]\n\nbtopy::BcArrayFloatState: (xnum+1, 2) : Vy boundary condition along top boundary: \n\n vy[1,j,:] = btopy[j,1] + vy[2,j,:]*btopy[j,2]\n\nbtopz::BcArrayFloatState: (xnum+1, 2) : Vz boundary condition along top boundary: \n\n vz[1,j,:] = btopz[j,1] + vz[2,j,:]*btopz[j,2]\n\nbbottomx::BcArrayFloatState: (xnum+1, 2) : Vx boundary condition along bottom boundary: \n\n vx[ynum+1,j,:] = bbottomx[j,1] + vx[ynum, j,:]*bbottomx[j,2]\n\nbbottomy::BcArrayFloatState: (xnum+1, 2) : Vy along bottom boundary: \n\n vy[ynum,j,:] = bbottomy[j,1] + vy[ynum-1, j,:]*bbottomy[j,2]\n\nbbottomz::BcArrayFloatState: (xnum+1, 2) : Vz boundary condition along bottom boundary: \n\n vz[ynum+1,j,:] = bbottomz[j,1] + vz[ynum, j,:]*bbottomz[j,2]\n\nbleftx::BcArrayFloatState: (ynum+1, 2) : Vx boundary condition along left boundary: \n\n vx[i,1] = bleftx[i,1] + vx[i, 2]*bleftx[i,2]\n\nblefty::BcArrayFloatState: (ynum+1, 2) : Vy boundary condition along left boundary: \n\n vy[i,1] = blefty[i,1] + vy[i, 2]*blefty[i,2]\n\nbleftz::BcArrayFloatState: (ynum+1, 2) : Vz boundary condition along left boundary: \n\n vz[i,1,:] = bleftz[i,1] + vz[i,2,:]*bleftz[i,2]\n\nbrightx::BcArrayFloatState: (ynum+1, 2) : Vx boundary condition along right boundary: \n\n vx[i,xnum] = brightx[i, 1] + vx[i, xnum-1]*brightx[i,2]\n\nbrighty::BcArrayFloatState: (ynum+1, 2) : Vy boundary condition along right boundary: \n\n vy[i,xnum+1] = brighty[i,1] + vx[i, xnum]*brighty[i,2]\n\nbrightz::BcArrayFloatState: (ynum+1, 2) : Vz boundary condition along right boundary: \n\n vz[i,xnum+1,:] = brightz[i,1] + vz[i,xnum,:]*brightz[i,2]\n\nbfrontx::BcArrayFloatState: (ynum+1, 2) : Vx boundary condition along front boundary: \n\n vx[i,j,1] = bfrontx[i,j,1] + vx[i,j,2]*bfrontx[i,j,2]\n\nbfronty::BcArrayFloatState: (ynum+1, 2) : Vy boundary condition along front boundary: \n\n vy[i,j,1] = bfronty[i,j,1] + vy[i,j,2]*bfronty[i,j,2]\n\nbfrontz::BcArrayFloatState: (ynum+1, 2) : Vz boundary condition along front boundary: \n\n vz[i,j,1] = bfrontz[i,j,1] + vz[i,j,2]*bfrontz[i,j,2]\n\nbbackx::BcArrayFloatState: (ynum+1, 2) : Vx boundary condition along back boundary: \n\n vx[i,j,znum+1] = bbackx[i,j,1] + vx[i,j,znum]*bbackx[i,j,2]\n\nbbacky::BcArrayFloatState: (ynum+1, 2) : Vy boundary condition along back boundary: \n\n vy[i,j,znum+1] = bbacky[i,j,1] + vy[i,j,znum]*bbacky[i,j,2]\n\nbbackz::BcArrayFloatState: (ynum+1, 2) : Vz boundary condition along back boundary: \n\n vz[i,j,znum  ] = bbackz[i,j,1] + vz[i,j,znum-1]*bbackz[i,j,2]\n\nNested Dot Access\n\nbtopx = model.bcs.arrays.vel_comp.btopx.array\nbtopy = model.bcs.arrays.vel_comp.btopy.array\nbtopz = model.bcs.arrays.vel_comp.btopz.array\nbbottomx = model.bcs.arrays.vel_comp.bbottomx.array\nbbottomy = model.bcs.arrays.vel_comp.bbottomy.array\nbbottomz = model.bcs.arrays.vel_comp.bbottomz.array\nbleftx = model.bcs.arrays.vel_comp.bleftx.array\nblefty = model.bcs.arrays.vel_comp.blefty.array\nbleftz = model.bcs.arrays.vel_comp.bleftz.array\nbrightx = model.bcs.arrays.vel_comp.brightx.array\nbrighty = model.bcs.arrays.vel_comp.brighty.array\nbrightz = model.bcs.arrays.vel_comp.brightz.array\nbfrontx = model.bcs.arrays.vel_comp.bfrontx.array\nbfronty = model.bcs.arrays.vel_comp.bfronty.array\nbfrontz = model.bcs.arrays.vel_comp.bfrontz.array\nbbackx = model.bcs.arrays.vel_comp.bbackx.array\nbbacky = model.bcs.arrays.vel_comp.bbacky.array\nbbackz = model.bcs.arrays.vel_comp.bbackz.array\n\nConstructor\n\nVelComp(ynum::Int64, xnum::Int64; znum::Int64=1)\n\nArguments\n\nynum::Int64: Number of grid points in the vertical direction\nxnum::Int64: Number of grid points in the horizontal direction\nznum::Int64=1: Number of grid points in the z-direction (default: 1 for 2D)\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/bcs/#EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.BcInternalGroup.BcInternal","page":"BoundaryConditions","title":"EarthBox.ModelDataContainer.BoundaryConditionsContainer.ArrayCollection.BcInternalGroup.BcInternal","text":"BcInternal <: AbstractArrayGroup\n\nArray group for internal boundary conditions.\n\nFields\n\nbintern_zone::InternalBcArrayIntState: (8) : Integer array with grid index information    defining spatial zones where internal boundary conditions are applied.\n(1) Horizontal position of vx nodes with prescribed velocity [no such condition if negative]\n(2) Min vertical position\n(3) Max vertical position\n(4) (not used)\n(5) Horizontal position of vy nodes with prescribed velocity [no such condition if negative]\n(6) Min vertical position\n(7) Max vertical position\n(8) (not used)\nbintern_velocity::InternalBcArrayFloatState: (8) : Float array containing   prescribed velocity values for internal boundary conditions.\n(1) (not used)\n(2) (not used)\n(3) (not used)\n(4) Prescribed shortening velocity, m/s\n(5) (not used)\n(6) (not used)\n(7) (not used)\n(8) Prescribed vertical velocity, m/s\n\nNested Dot Access\n\nbintern_zone = model.bcs.arrays.internal.bintern_zone.array\nbintern_velocity = model.bcs.arrays.internal.bintern_velocity.array\n\nConstructor\n\nBcInternal()\n\n\n\n\n\n","category":"type"},{"location":"thermo_mechanical_algorithm/advection_solver_steps/advection_solver_steps/#Advection-solver-Steps","page":"Advection-solver Steps","title":"Advection-solver Steps","text":"[1] Update marker location (x_m y_m) and spin w_m using a 4th order Runge-Kutta scheme and the current velocity field v_x(ij)_vx and v_y(ij)_vy.\n\n[2] Update marker stress sigma_xxm and sigma_xym for rotation using equation eq:stress-rotation.\n\n[3] Update total marker strain epsilon_m and marker plastic strain rate  dotepsilon_m^plastic and plastic strain epsilon_m^plastic  (Marker Strain Update Steps).\n\n[4] Correct temperature in sticky air-water markers by setting temperature equal to the  temperature at the top of the model domain.","category":"section"},{"location":"thermo_mechanical_algorithm/advection_solver_steps/advection_solver_steps/#Marker-Strain-Update-Steps","page":"Advection-solver Steps","title":"Marker Strain Update Steps","text":"[1] Update total marker strain after copying current marker strain epsilon_m to epsilon_m^o:\n\nepsilon_m = epsilon_m^o + Delta t sqrtdotepsilon_xxm^2 + dotepsilon_xy(m)^2\n\n[2] Update marker plastic strain rate dot epsilon _m^plastic and plastic strain  epsilon _plasticm using eq:plastic-strain after copying current marker plastic strain  to \\epsilon _{plastic,m}^o``","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#Strain-Weakening-and-Melt-Damage","page":"Strain Weakening","title":"Strain Weakening and Melt Damage","text":"Experimental works shows that the yield stress in equation eq:yield-stress decreases as  phyllosilicate minerals and foliation form and the pressure-solution deformation mechanism becomes  dominant as grain size is reduced in shear zones (Bos and Spiers, 2002). This weakening of frictional-plastic strength is modeled by reducing the cohesion and friction angle with increasing plastic strain as  described by the following equations:","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:strain-weakening","page":"Strain Weakening","title":"eq:strain-weakening","text":"beginsplit\n    sigma_cm = \n        sigma_cm^o\n        + frac(sigma_cm^f - sigma_cm^o)(epsilon^f - epsilon^o)(epsilon_plasticm - epsilon^o)  \n    theta_m = \n        theta_m^o\n        + frac(theta_m^f - theta_m^o)(epsilon^f - epsilon^o)(epsilon_plasticm - epsilon^o)\nendsplit\n\nwhere m is the index of the marker, epsilon_plasticm is plastic strain of the marker,  epsilon^o and epsilon^f are initial and final reference plastic strain, sigma_cm^o and  sigma_cm^f are initial and final reference cohesion, and theta_m^f is the final reference  friction angle and theta_m^o is the final initial reference friction angle that is randomized at  the beginning of each time step using the following equation from (Naliboff et al., 2017):","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:friction-angle-randomization","page":"Strain Weakening","title":"eq:friction-angle-randomization","text":"theta_m^o = theta_m^o + (05 - r)f_random\n\nwhere theta_m^o is the initial reference friction angle of the material associated  with marker m, r is a random number in the range [0,1], and f_random is a randomization  factor controlling the magnitude of the perturbation and set equal to 10 for the experiments of this work. The randomization of friction angles described in equation Eq. is  used to model the evolving variability of frictional-plastic strength due to fluid-rock interactions  (Naliboff et al., 2017). The final reference friction angle theta_m^f is defined as:","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:final-friction-angle","page":"Strain Weakening","title":"eq:final-friction-angle","text":"theta_m^f = fractheta_m^ftheta_m^otheta_m^o\n\nwhere theta_m^f is the unmodified final reference friction angle of the material associated  with marker m. Marker plastic strain epsilon _plasticm in equation Eq.  is calculate using the following equations:","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:plastic-strain","page":"Strain Weakening","title":"eq:plastic-strain","text":"beginsplit\n    sigma_IIm = sqrt\n        left(sigma_xxmright)^2 + left(sigma_xymright)^2\n        text \n    dot epsilon _plasticm = frac12sigma_IIm\n        left( frac1eta_vpm - frac1eta_creepmright)\n        text \n    epsilon _plasticm \n        = epsilon _plasticm^o \n            + left( dot epsilon _plasticm Delta t - dot epsilon_healing Delta t right)             \nendsplit\n\nwhere epsilon _plasticm^o is the current marker plastic strain, dot epsilon _plasticm is the plastic strain rate, sigma_IIm is the second invariant of the stress tensor, and dot epsilon_healing is the plastic healing rate.\n\nAs melt is transported through the lithosphere and crust it can weaken the bulk frictional-plastic  yield strength of the rock by forming reactive channelized networks, increasing fluid pressure and  forming dikes and sills that may be weaker than the surrounding rock prior to solidification. In this  work, weakening associated with melt transport is assumed to be probabilistically localized above local  maxima of the partially molten domain in the mantle that act as focusing points for melt migration.  The maximum probability of melt damage is assumed to scale with amount of melt being generated in a  melt drainage basin k, which is defined by the characteristic magmatic crust height H_mck  calculated during melt extraction (see equation eq:char-magmatic-crust-height). The weakening from  damage associated with melt transport is modeled by reducing cohesion and friction angle based on a  melt damage factor f_damagem as described by the following equations:","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:melt-damage-weakening","page":"Strain Weakening","title":"eq:melt-damage-weakening","text":"beginsplit\n    sigma_cm = fracsigma_cmf_damagem text\n    theta_m = fractheta_mf_damagem text\nendsplit\n\nThe melt damage factor f_damagem is defined in a binary manner where f_damagem is set equal to 1 outside of the melt damage zone and set equal to either 1 or a constant value greater than 1 based on a probability distribution within the melt damage zone. A melt damage zone is defined for a given melt drainage basin k by the x-coordinate limits x_damage^min and x_damage^max and y-coordinate limit y_damage^max defined as follows:","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:melt-damage-zone-limits","page":"Strain Weakening","title":"eq:melt-damage-zone-limits","text":"beginsplit\n    x_damage^min  = x_shallowpmk - fracW_damage2 text\n    x_damage^max  = x_shallowpmk + fracW_damage2 text\n    y_damage^max  = y_shallowpmk\nendsplit\n\nwhere x_shallowpmk is the average x-coordinate of the shallowest partially molten mantle marker and y_shallowpmk is the average y-coordinate of the shallowest partially molten mantle marker calculated during melt extraction, and W_damage is the width of the damage zone. The melt model is applied to each marker m in the melt damage zone excluding sticky air and water markers.\n\nThe melt damage factor f_damagem for a given marker m is calculated using the following equation:","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:melt-damage-factor","page":"Strain Weakening","title":"eq:melt-damage-factor","text":"f_damagem = \nbegincases\n    f_damagemax  textif  r  p_damagem \n    10  textif  r geq p_damagem\nendcases\n\nwhere f_damagemax is the maximum melt damage factor set equal to 10 for the experiments of  this work, and r is a random number between 0 and 1. The damage probability p_damagem is  calculated using the following equation:","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:melt-damage-probability","page":"Strain Weakening","title":"eq:melt-damage-probability","text":"p_damagem = \nbegincases\n    00  textif  x_damage^max  x_m  x_damage^min \n    leftfrac\n            p_damage^central\n        \n            2cosleft(fracleft(x_m - x_shallowpmkright)W_damage2piright) + 1\n         right\n         textif  x_damage^min leq x_m leq x_damage^max\nendcases\n\nwhere the central damage zone damage probability p_damage^central is given by:","category":"section"},{"location":"methods/strain_weakening/strain_weakening/#eq:central-damage-probability","page":"Strain Weakening","title":"eq:central-damage-probability","text":"p_damage^central = \nbegincases\n    00  textif  H_mck leq H_mcmin \n\n    p_damage^max  textif  H_mck geq H_mcmax \n\n    fracp_damage^interH_mcinter - H_mcminDelta H_1\n             textif  H_mcmin  H_mck leq H_mcinter \n\n    p_damage^inter\n        + fracp_damage^max - p_damage^interH_mcmax - H_mcinterDelta H_2\n                 textif  H_mcinter  H_mck  H_mcmax\nendcases\n\nwhere Delta H_1 = (H_mck - H_mcmin), Delta H_2 = (H_mck - H_mcinter), H_mck is characteristic magmatic crust height for drainage basin k calculated  during melt extraction, H_mcmin is the minimum reference characteristic magmatic crust height, H_mcmax is the maximum reference  characteristic magmatic crust height, H_mcinter is the intermediate reference characteristic magmatic crust height, p_damage^max is the maximum  damage probability, and p_damage^inter is the intermediate damage probability.","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#Material-Collection:-benchmarks_sfs","page":"Collection: Benchmarks SFS","title":"Material Collection: benchmarks_sfs","text":"","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#Material-List","page":"Collection: Benchmarks SFS","title":"Material List","text":"SFSStickyAir\nSFSStickyWater\nSFSClasticSediment\nSFSPeridotiteDryFertile\nSFSGabbroicCrust\nSFSGabbroicMagma\nSFSLayeredGabbroicCrust\nSFSLayeredGabbroicMagma\nSFSUpperContinentalCrust\nSFSLowerContinentalCrust","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#Material-Summary","page":"Collection: Benchmarks SFS","title":"Material Summary","text":"Collection File Path\n\nsrc/material_library/registries/benchmarks/benchmarks.yml","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#Material-Tables:-Seafloor_Spreading","page":"Collection: Benchmarks SFS","title":"Material Tables:  Seafloor_Spreading","text":"","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSStickyAir","page":"Collection: Benchmarks SFS","title":"SFSStickyAir","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSStickyAir\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSStickyWater","page":"Collection: Benchmarks SFS","title":"SFSStickyWater","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSStickyWater\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSClasticSediment","page":"Collection: Benchmarks SFS","title":"SFSClasticSediment","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSClasticSediment\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSPeridotiteDryFertile","page":"Collection: Benchmarks SFS","title":"SFSPeridotiteDryFertile","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSPeridotiteDryFertile\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSGabbroicCrust","page":"Collection: Benchmarks SFS","title":"SFSGabbroicCrust","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSGabbroicCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSGabbroicMagma","page":"Collection: Benchmarks SFS","title":"SFSGabbroicMagma","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSGabbroicMagma\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSLayeredGabbroicCrust","page":"Collection: Benchmarks SFS","title":"SFSLayeredGabbroicCrust","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSLayeredGabbroicCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSLayeredGabbroicMagma","page":"Collection: Benchmarks SFS","title":"SFSLayeredGabbroicMagma","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSLayeredGabbroicMagma\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSUpperContinentalCrust","page":"Collection: Benchmarks SFS","title":"SFSUpperContinentalCrust","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSUpperContinentalCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks_sfs/#SFSLowerContinentalCrust","page":"Collection: Benchmarks SFS","title":"SFSLowerContinentalCrust","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Seafloor_Spreading\", material_name = \"SFSLowerContinentalCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"api/surface_processes/topography/#Topography","page":"Topography","title":"Topography","text":"","category":"section"},{"location":"api/surface_processes/topography/#Initialization","page":"Topography","title":"Initialization","text":"","category":"section"},{"location":"api/surface_processes/topography/#EarthBox.SurfaceProcesses.Topography.initialize!","page":"Topography","title":"EarthBox.SurfaceProcesses.Topography.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize topography model parameters.\n\nArguments\n\nmodel::ModelData\nThe model data container containing the model parameters and arrays.\nnode_advection::Union{Int, String, Symbol, Nothing}\nControls the type of topography node advection scheme. See the    Node Advection Schemes section below for information on available node advection schemes.   The node advection scheme is stored in the model data container as an integer ID (itype_topo)    and a corresponding string name (stype_topo). If node_advection is nothing the current    node advection scheme defined in the model data container will be used. The node advection scheme    parameters can be accessed from the model data container as follows:\nitype_topo = model.topography.parameters.model_options.itype_topo.value\nstype_topo = model.topography.parameters.model_options.stype_topo.value\n\nKeyword Arguments\n\niuse_topo::Int64\nInteger flag used to enable topography model: 0 = off; 1 = on\nnsmooth_top_bottom::Int64\nNumber of topography nodes that will be used to calculate a running average for the calculated y-coordinate of the top and bottom of marker layers\nmarker_search_factor::Float64\nSearch factor used to calculate the search radius for determining the shallowest and deepest markers associated with a given topography node\ntoponum::Int64\nNumber of nodes in the x-direction of the topography model\ntopo_xsize::Float64\nTopography model size in horizontal direction in meters\ndx_topo::Float64\nTopography grid step size in meters\nerosion_rate::Float64\nErosion rate above water level in m/s\nsedimentation_rate::Float64\nSedimentation rate below water level in m/s\n\n\n\nNode Advection Schemes\n\n\n\nRungeKuttaWithInterp\n\nnode_advection value: \"RungeKuttaWithInterp\", :RungeKuttaWithInterp, or 0\nDescription: Topography nodes are advected using a 4th order Runge Kutta scheme and the elevation of the advected marker chain is interpolated to Eulerian topography grid points.\n\nAntidiffusion\n\nnode_advection value: \"Antidiffusion\", :Antidiffusion, or 1\nDescription: Elevation is calculated at topography nodes using an antidiffusion scheme.\n\n\n\n\n\n","category":"function"},{"location":"plot_tools/yield_strength_plots/#Plotting-Yield-Strength","page":"Yield Strength Plots","title":"Plotting Yield Strength","text":"","category":"section"},{"location":"plot_tools/yield_strength_plots/#EarthBox.PlotToolsManager.ModelPlots2DManager.plot_yield_strength","page":"Yield Strength Plots","title":"EarthBox.PlotToolsManager.ModelPlots2DManager.plot_yield_strength","text":"plot_yield_stress(; \n    model_output_path::String,\n    kwargs...\n)::Nothing\n\nArguments\n\nmodel_output_path::String:\nPath to output directory containing model output files\n\nYield Strength Plot Keyword Arguments\n\nPlot Parameters\n\nfigsize::Tuple{Float64, Float64}: Figure size (default: (5.0, 10.0))\ndepth_plot_limit::Float64: Depth plot limit in km (default: 160.0)\ndepth_axis_spacing::Float64: Depth axis spacing in km (default: 10.0)\ntemperature_plot_limit::Float64: Temperature plot limit in Celsius (default: 1400.0)\ntemperature_axis_spacing::Float64: Temperature axis spacing in Celsius (default: 100.0)\nyield_stress_plot_limit::Float64: Yield stress plot limit in MPa (default: 500.0)\nyield_stress_axis_spacing::Float64: Yield stress axis spacing in MPa (default: 50.0)\n\nStrain Rate Parameters\n\nstrain_rate::Float64: Strain rate invariant in 1/s (default: 1.0e-15)\n\nGeotherm Model Option\n\niuse_linear_segments::Bool: Use a temperature profile with four linear segments.  If false, an analytical three-layer temperature profile is used instead.\n\nThickness Parameters\n\nthickness_upr_cont_crust_meters::Float64: Thickness of upper continental crust in meters\nthickness_lwr_cont_crust_meters::Float64: Thickness of lower continental crust in meters\nthickness_lithosphere_meters::Float64: Thickness of lithosphere in meters\nthickness_thermal_lithosphere::Float64: Thickness of thermal lithosphere in meters\nthickness_asthenosphere_meters::Float64: Thickness of asthenosphere in meters\ndy_meters::Float64: Grid spacing in meters\n\nDensity Parameters\n\nexpansivity::Float64: Thermal expansivity in 1/K\ncompressibility::Float64: Compressibility in 1/Pa\ndensity_upper_continental_crust::Float64: Density of upper continental crust in kg/m^3\ndensity_lower_continental_crust::Float64: Density of lower continental crust in kg/m^3\ndensity_mantle_lithosphere::Float64: Density of mantle lithosphere in kg/m^3\ndensity_asthenosphere::Float64: Density of asthenosphere in kg/m^3\n\nTemperature Parameters\n\ntemperature_top_celsius::Float64: Temperature at top of lithosphere in Celsius\ntemperature_moho_celsius::Float64: Temperature at Moho in Celsius\ntemperature_base_lith_celsius::Float64: Temperature at base of lithosphere in Celsius\nadiabatic_gradient_kelvin_km::Float64: Adiabatic gradient in Kelvin/km\n\nThermal Conductivity (Analytical 3-layer Model)\n\nconductivity_upper_crust::Float64: Thermal conductivity of upper crust in W/m/K\nconductivity_lower_crust::Float64: Thermal conductivity of lower crust in W/m/K\nconductivity_mantle::Float64: Thermal conductivity of mantle in W/m/K\n\nHeat Production (Analytical 3-layer Model)\n\nheat_production_upper_crust::Float64: Heat production in upper crust in W/m^3\nheat_production_lower_crust::Float64: Heat production in lower crust in W/m^3\nheat_production_mantle::Float64: Heat production in mantle in W/m^3\n\nFluid Pressure Option\n\niuse_fluid_pressure_for_yield::Int: Use fluid pressure in yield stress calculation (default: 0)\n\n\n\n\n\n","category":"function"},{"location":"api/case_management/case_management/#Case-Management","page":"Case Management","title":"Case Management","text":"EarthBox provides a case definition system that allows the user to build a collection of model cases and run simulations based on a standard case name like case0, case1 etc.\n\nThe recommended workflow is to build a module called CaseInputs in a file located within the model directory called CaseInputs.jl where a dictionary of model cases is generated. This module can then be included in the a main model file Model.jl providing access to model parameters based on case name.","category":"section"},{"location":"api/case_management/case_management/#Case-Management-Data-Types","page":"Case Management","title":"Case Management Data Types","text":"","category":"section"},{"location":"api/case_management/case_management/#Case-Builder-Tools","page":"Case Management","title":"Case Builder Tools","text":"","category":"section"},{"location":"api/case_management/case_management/#Example","page":"Case Management","title":"Example","text":"The following example is of a module that would be defined in a file called  CaseInputs.jl and includes a function called define_case_inputs that returns a dictionary of model parameters based on a specified case name. This particular  example involves building a range of scenarios that explore the melt damage model.\n\nusing EarthBox\nPRINT_SETTINGS.print_case_info = true;\n\nmodule CaseInputs\n\nusing EarthBox\n\nconst PARAMS = get_eb_parameters()\n\nfunction define_case_parameters(;model_case_name::String=\"case0\")::CaseType\n    # Define the base case\n    base_case = CaseType(\n        # ThermalBottomTransientBoundaryCondition\n        PARAMS.delta_temperature_transient.name => CaseParameter(100.0, \"deltaK\"),\n        # MeltDamageModel\n        PARAMS.iuse_melt_damage.name     => CaseParameter(1, \"None\"),\n        PARAMS.melt_damage_distance.name => CaseParameter(2.5, \"km\"),\n        PARAMS.melt_damage_factor.name   => CaseParameter(10.0, \"None\"),\n        # Extrusion Model\n        PARAMS.extrusion_volume_factor.name               => CaseParameter(0.06, \"None\"),\n        PARAMS.extrusion_volume_factor_max.name           => CaseParameter(0.5, \"None\"),\n        PARAMS.characteristic_flow_length_subaerial.name  => CaseParameter(20.0, \"km\"),\n        PARAMS.eruption_interval_yr.name                  => CaseParameter(50_000.0, \"yr\")\n    )\n    # Initialize all model cases using the base case (default is 500 cases)\n    case_inputs = initialize_cases(base_case)\n    # Update case_inputs with 4 cases involving variable delta temperature transient\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini    = 1,\n        parameter_name = PARAMS.delta_temperature_transient.name,\n        values         = [50.0, 75.0, 125.0, 150.0],\n        units          = \"deltaK\"\n    )\n    # Update case_inputs with 4 cases with variable characteristic flow length subaerial\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini    = case_id + 1,\n        parameter_name = PARAMS.characteristic_flow_length_submarine.name,\n        values         = [10_000.0, 40_000.0, 80_000.0, 100_000.0],\n        units          = \"m\"\n    )\n    # Update case_inputs with 4 cases with variable melt damage factor\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini    = case_id + 1,\n        parameter_name = PARAMS.melt_damage_factor.name,\n        values         = [1.0, 1.25, 2.5, 5.0],\n        units          = \"None\"\n    )\n    # Update case_inputs with 4 cases with variable melt damage distance\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini    = case_id + 1,\n        parameter_name = PARAMS.melt_damage_distance.name,\n        values         = [0.625, 1.25, 5.0],\n        units          = \"km\"\n    )\n    # Update case_inputs with 4 cases with variable eruption duration\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini    = case_id + 1,\n        parameter_name = PARAMS.eruption_interval_yr.name,\n        values         = [12_500.0, 25_000.0, 100_000.0],\n        units          = \"yr\"\n    )\n    # Variable maximum extrusion volume factor @ eruption duration = 50_000 yrs\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini          = case_id + 1,\n        parameter_name       = PARAMS.extrusion_volume_factor_max.name,\n        values               = [0.1, 0.2, 0.3, 0.4, 0.6, 0.7],\n        units                = \"None\",\n        fixed_parameter_name = PARAMS.eruption_interval_yr.name,\n        fixed_value          = 50_000.0,\n        fixed_units          = \"yr\"\n    )\n    # Update case_inputs with variable maximum extrusion volume factor @ eruption duration = 75_000 yrs\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini          = case_id + 1,\n        parameter_name       = PARAMS.extrusion_volume_factor_max.name,\n        values               = [0.1, 0.3, 0.5, 0.7],\n        units                = \"None\",\n        fixed_parameter_name = PARAMS.eruption_interval_yr.name,\n        fixed_value          = 75_000.0,\n        fixed_units          = \"yr\"\n    )\n    # Update case_inputs with variable maximum extrusion volume factor @ eruption duration = 100_000 yrs\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini          = case_id + 1,\n        parameter_name       = PARAMS.extrusion_volume_factor_max.name,\n        values               = [0.1, 0.2, 0.3, 0.7],\n        units                = \"None\",\n        fixed_parameter_name = PARAMS.eruption_interval_yr.name,\n        fixed_value          = 100_000.0,\n        fixed_units          = \"yr\"\n    )\n    # Update case_inputs with variable maximum extrusion volume factor @ damage factor = 1\n    case_id = define_case_group!(\n        case_inputs,\n        case_id_ini          = case_id + 1,\n        parameter_name       = PARAMS.extrusion_volume_factor_max.name,\n        values               = [0.1, 0.2, 0.3, 0.4],\n        units                = \"None\",\n        fixed_parameter_name = PARAMS.melt_damage_factor.name,\n        fixed_value          = 1.0,\n        fixed_units          = \"None\"\n    )\n    # Only the specified target names will show up in the markdown table\n    print_case_info(\n        case_inputs=case_inputs, \n        case_id_max=case_id, \n        target_names=[\n            PARAMS.delta_temperature_transient.name,\n            PARAMS.extrusion_volume_factor.name,\n            PARAMS.extrusion_volume_factor_max.name,\n            PARAMS.iuse_melt_damage.name,\n            PARAMS.melt_damage_factor.name,\n            PARAMS.melt_damage_distance.name,\n            PARAMS.characteristic_flow_length_subaerial.name,\n            PARAMS.eruption_interval_yr.name\n        ]\n    )\n    # Select the active case\n    case_parameters = case_inputs[model_case_name]\n    # Convert to standard units\n    convert_case_parameters_to_standard_units!(case_parameters)\n    return case_parameters\nend\n\nend # module\n\ncase_parameters = CaseInputs.define_case_parameters(model_case_name=\"case3\")\n\n\n| Case   | delta_     | extrusion_ | extrusion_ | iuse_melt_ | melt_      | melt_      | characteri | eruption_  |\n|        | temperatur | volume_    | volume_    | damage     | damage_    | damage_    | stic_flow_ | interval_  |\n|        | e_transien | factor     | factor_max |            | factor     | distance   | length_    | yr         |\n|        | t          |            |            |            |            |            | subaerial  |            |\n|--------|------------|------------|------------|------------|------------|------------|------------|------------|\n| 0      | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 1      | 50         | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 2      | 75         | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 3      | 125        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 4      | 150        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 5      | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 6      | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 7      | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 8      | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 9      | 100        | 0.06       | 0.5        | 1          | 1          | 2.5        | 20         | 5.00e+04   |\n| 10     | 100        | 0.06       | 0.5        | 1          | 1.25       | 2.5        | 20         | 5.00e+04   |\n| 11     | 100        | 0.06       | 0.5        | 1          | 2.5        | 2.5        | 20         | 5.00e+04   |\n| 12     | 100        | 0.06       | 0.5        | 1          | 5          | 2.5        | 20         | 5.00e+04   |\n| 13     | 100        | 0.06       | 0.5        | 1          | 10         | 0.625      | 20         | 5.00e+04   |\n| 14     | 100        | 0.06       | 0.5        | 1          | 10         | 1.25       | 20         | 5.00e+04   |\n| 15     | 100        | 0.06       | 0.5        | 1          | 10         | 5          | 20         | 5.00e+04   |\n| 16     | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 1.25e+04   |\n| 17     | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 2.50e+04   |\n| 18     | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 1.00e+05   |\n| 19     | 100        | 0.06       | 0.1        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 20     | 100        | 0.06       | 0.2        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 21     | 100        | 0.06       | 0.3        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 22     | 100        | 0.06       | 0.4        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 23     | 100        | 0.06       | 0.6        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 24     | 100        | 0.06       | 0.7        | 1          | 10         | 2.5        | 20         | 5.00e+04   |\n| 25     | 100        | 0.06       | 0.1        | 1          | 10         | 2.5        | 20         | 7.50e+04   |\n| 26     | 100        | 0.06       | 0.3        | 1          | 10         | 2.5        | 20         | 7.50e+04   |\n| 27     | 100        | 0.06       | 0.5        | 1          | 10         | 2.5        | 20         | 7.50e+04   |\n| 28     | 100        | 0.06       | 0.7        | 1          | 10         | 2.5        | 20         | 7.50e+04   |\n| 29     | 100        | 0.06       | 0.1        | 1          | 10         | 2.5        | 20         | 1.00e+05   |\n| 30     | 100        | 0.06       | 0.2        | 1          | 10         | 2.5        | 20         | 1.00e+05   |\n| 31     | 100        | 0.06       | 0.3        | 1          | 10         | 2.5        | 20         | 1.00e+05   |\n| 32     | 100        | 0.06       | 0.7        | 1          | 10         | 2.5        | 20         | 1.00e+05   |\n| 33     | 100        | 0.06       | 0.1        | 1          | 1          | 2.5        | 20         | 5.00e+04   |\n| 34     | 100        | 0.06       | 0.2        | 1          | 1          | 2.5        | 20         | 5.00e+04   |\n| 35     | 100        | 0.06       | 0.3        | 1          | 1          | 2.5        | 20         | 5.00e+04   |\n| 36     | 100        | 0.06       | 0.4        | 1          | 1          | 2.5        | 20         | 5.00e+04   |\n\nThe function define_case_inputs can be accessed from a local Model.jl file using the following julia code:\n\n# Model.jl\nusing EarthBox\ninclude(\"CaseInputs.jl\")\nimport .CaseInputs: define_case_parameters\n\nconst PARAMS = get_eb_parameters()\n\n# Get the melt_damage_distance parameter for case3\ncase_parameters = define_case_parameters(model_case_name=\"case3\")\nmelt_damage_distance = case_parameters[PARAMS.melt_damage_distance].value","category":"section"},{"location":"api/case_management/case_management/#Material-Override-Using-CaseType","page":"Case Management","title":"Material Override Using CaseType","text":"Some material properties defined in the material collection can be overridden using the API and case_parameters dictionary with type EarthBox.CaseType. Standard earthbox parameters are defined from get_eb_parameters() and values for these parameters are set in the case_parameters dictionary. Material overriding is based on material types and domains (see Material Types and Material Domains). The docstring below provides a detailed descriptions of parameters and associated material types and domains.","category":"section"},{"location":"api/case_management/case_management/#EarthBox.CaseInputTools.CaseTypes.CaseParameter","page":"Case Management","title":"EarthBox.CaseInputTools.CaseTypes.CaseParameter","text":"CaseParameter\n\nType for storing a model case parameter value and its units.\n\nEarthBox will convert the case parameter value to standard units when the  parameters are loaded into the model.\n\n\n\n\n\n","category":"type"},{"location":"api/case_management/case_management/#EarthBox.CaseInputTools.CaseTypes.CaseType","page":"Case Management","title":"EarthBox.CaseInputTools.CaseTypes.CaseType","text":"CaseType\n\nDictionary type for storing model case inputs where the key is the earthbox  parameter name and the value is a CaseParameter type.\n\n\n\n\n\n","category":"type"},{"location":"api/case_management/case_management/#EarthBox.CaseInputTools.CaseTypes.CaseCollectionType","page":"Case Management","title":"EarthBox.CaseInputTools.CaseTypes.CaseCollectionType","text":"CaseCollectionType\n\nOrdered dictionary type for storing a collection of model cases where the key  is the case name (case0, case1, etc) and the value is a CaseType dictionary.\n\n\n\n\n\n","category":"type"},{"location":"api/case_management/case_management/#EarthBox.CaseInputTools.initialize_cases","page":"Case Management","title":"EarthBox.CaseInputTools.initialize_cases","text":"initialize_cases(\n    base_case::CaseType,\n    number_of_cases::Int = 500\n)::CaseCollectionType\n\nInitialize a collection of model cases with a base case and a given number of cases.\n\nArguments\n\nbase_case::CaseType: Base case inputs.\nnumber_of_cases::Int: Number of cases to initialize.\n\nReturns\n\ncase_inputs::CaseCollectionType: Collection of model cases.\n\n\n\n\n\n","category":"function"},{"location":"api/case_management/case_management/#EarthBox.CaseInputTools.CaseBuilder.define_case_group!","page":"Case Management","title":"EarthBox.CaseInputTools.CaseBuilder.define_case_group!","text":"define_case_group!(\n    case_inputs::CaseCollectionType;\n    case_id_ini::Int,\n    parameter_name::String,\n    values::Vector{Float64},\n    units::String,\n    fixed_parameter_name::Union{String, Nothing}=nothing,\n    fixed_value::Union{Float64, Nothing}=nothing,\n)::Int\n\nDefine case inputs for a given target parameter name and a list of values.  An optional fixed key can be set to a fixed value for all cases.\n\nArguments\n\ncase_inputs::CaseCollectionType\nDictionary containing the case inputs for each case.\ncase_id_ini::Int\nInitial case ID to start building cases from.\nparameter_name::String\nParameter name in the case inputs dictionary to modify for each case  using values from the values vector.\nvalues::Vector{Float64}\nList of values to assign to the parameter name for each case.\nunits::String\nUnits to assign to the parameter name for each case.\nfixed_parameter_name::Union{String, Nothing}\nParameter name key to set a fixed value for all cases.\nfixed_value::Union{Float64, Nothing}\nFixed value to assign to the fixedparametername for all cases.\nfixed_units::Union{String, Nothing}\nUnits to assign to the fixedparametername for all cases.\n\nReturns\n\ncase_id::Int: The case ID of the last case built\n\n\n\n\n\n","category":"function"},{"location":"api/case_management/case_management/#EarthBox.CaseInputTools.convert_case_parameters_to_standard_units!","page":"Case Management","title":"EarthBox.CaseInputTools.convert_case_parameters_to_standard_units!","text":"convert_case_parameters_to_standard_units!(\n    case_parameters::CaseType\n)::Nothing\n\nConvert case parameters to standard units.\n\nArguments\n\ncase_parameters::CaseType\nDictionary of case parameters where the key is a parameter name and the   value is   a CaseParameter struct containing the parameter value and units.\n\nReturns\n\nnothing\n\n\n\n\n\n","category":"function"},{"location":"api/case_management/case_management/#EarthBox.CaseInputTools.CasePrinters.print_case_info","page":"Case Management","title":"EarthBox.CaseInputTools.CasePrinters.print_case_info","text":"print_case_info(\n    case_inputs::CaseCollectionType,\n    case_id_max::Int,\n    target_names::Vector{String}\n)::Nothing\n\nPrint case information to the console in a markdown table format.\n\nArguments\n\ncase_inputs::CaseCollectionType: Collection of model cases.\ncase_id_max::Int: Maximum case ID to print.\ntarget_names::Vector{String}: List of parameter names to print.\n\nReturns\n\nnothing: Returns nothing.\n\n\n\n\n\n","category":"function"},{"location":"api/case_management/case_management/#EarthBox.Markers.MarkerMaterials.MaterialOverride.override_material_properties!","page":"Case Management","title":"EarthBox.Markers.MarkerMaterials.MaterialOverride.override_material_properties!","text":"override_material_properties!(model::ModelData, case_inputs_active::CaseType)\n\nOverride material properties for model materials using a case type.\n\nArguments\n\nmodel::ModelData: The model data object that contains the materials to override\ncase_inputs_active::CaseType: The case inputs active with keys equal to   material properties to override.\n\nMaterial Domains, Genetic Types, and Parameters for Overriding\n\nPlasticity in Solidified Basalt\n\ntype_names: \"SolidifiedBasalt\"\nParameters:\nstrain_final_solidified_basalt\nfriction_angle_initial_solidified_basalt\nfriction_angle_final_solidified_basalt\n\nPlasticity in Oceanic Crust\n\ntype_names:\n\"SolidifiedGabbro\"\n\"SolidifiedGabbroPartiallyMolten\"\n\"SolidifiedLayeredGabbro\"\n\"SolidifiedLayeredGabbroPartiallyMolten\"\nParameters:\nstrain_final_oceanic_crust\nfriction_angle_initial_oceanic_crust\nfriction_angle_final_oceanic_crust\n\nPlasticity in Sediment\n\ntype_names: \"Sediment\"\nParameters:\nstrain_final_sediment\nfriction_angle_initial_sediment\nfriction_angle_final_sediment\n\nPlasticity in Zones with Strain Weakening\n\ntype_names:\n\"FelsicContinentalCrustFertile\"\n\"FelsicContinentalCrustPartiallyMolten\"\n\"FelsicContinentalCrustRefactory\"\n\"MaficContinentalCrustFertile\"\n\"MaficContinentalCrustPartiallyMolten\"\n\"MaficContinentalCrustRefactory\"\n\"UltramaficMantleFertile\"\n\"UltramaficMantlePartiallyMolten\"\n\"UltramaficMantleRefactory\"\n\"SolidifiedGabbro\"\n\"SolidifiedGabbroPartiallyMolten\"\n\"SolidifiedLayeredGabbro\"\n\"SolidifiedLayeredGabbroPartiallyMolten\"\n\"SolidifiedBasalt\"\n\"Sediment\"\nParameters:\nstrain_final\nfriction_angle_initial\nfriction_angle_final\n\nPlasticity in Lithospheric Strong Zones\n\ndomain_names:\n\"LithosphericMantleStrongZone\"\n\"UpperContinentalCrustStrongZone\"\n\"LowerContinentalCrustStrongZone\"\nParameters:\nstrain_final \nfriction_angle_initial\nfriction_angle_final\n\nRadiogenic Heat Production in Continental Crust\n\ntype_names:\n\"FelsicContinentalCrustFertile\"\n\"FelsicContinentalCrustPartiallyMolten\"\n\"FelsicContinentalCrustRefactory\"\n\"MaficContinentalCrustFertile\"\n\"MaficContinentalCrustPartiallyMolten\"\n\"MaficContinentalCrustRefactory\"\nParameters:\nheat_production_upper_crust\nheat_production_lower_crust\n\nPre-Exponential Factors in Asthenosphere\n\ntype_names:   If not in domains [\"UpperMantleLithosphere\", \"MiddleMantleLithosphere\", \"LowerMantleLithosphere\"]):       - \"UltramaficMantleFertile\"       - \"UltramaficMantlePartiallyMolten\"       - \"UltramaficMantleRefactory\"\nParameters:\nscale_factor_mantle_dislocation_creep\nscale_factor_mantle_diffusion_creep\n\nPre-Exponential Factors in Continental Crust\n\ntype_names:\n\"FelsicContinentalCrustFertile\"\n\"FelsicContinentalCrustPartiallyMolten\"\n\"FelsicContinentalCrustRefactory\"\n\"MaficContinentalCrustFertile\"\n\"MaficContinentalCrustPartiallyMolten\"\n\"MaficContinentalCrustRefactory\"\nParameters:\nscale_factor_crustal_dislocation_creep\nscale_factor_oceanic_crust_dislocation_creep\n\nPre-Exponential Factors in Oceanic Crust\n\ntype_names:\n\"SolidifiedGabbro\"\n\"SolidifiedGabbroPartiallyMolten\"\n\"SolidifiedLayeredGabbro\"\n\"SolidifiedLayeredGabbroPartiallyMolten\"\n\"SolidifiedBasalt\"\nParameters:\nscale_factor_oceanic_crust_dislocation_creep\n\nPre-Exponential Factors in Solidified Basalt\n\ntype_names: \"SolidifiedBasalt\"\nParameters:\nscale_factor_solidified_basalt_dislocation_creep\n\nPre-Exponential Factors in Sediment\n\ntype_names: \"Sediment\"\nParameters:\nscale_factor_sediment_dislocation_creep\n\nLatent Heat in Mantle Rocks\n\ntype_names:\n\"UltramaficMantleFertile\"\n\"UltramaficMantlePartiallyMolten\"\n\"UltramaficMantleRefactory\"\nParameters:\nlatent_heat_mantle\n\nLatent Heat in Oceanic Crust\n\ntype_names:\n\"SolidifiedGabbro\"\n\"SolidifiedGabbroPartiallyMolten\"\n\"SolidifiedLayeredGabbro\"\n\"SolidifiedLayeredGabbroPartiallyMolten\"\n\"SolidifiedBasalt\"\nParameters:\nlatent_heat_oceanic_crust\n\nMantle Solidus\n\ntype_names:\n\"UltramaficMantleFertile\"\n\"UltramaficMantlePartiallyMolten\"\n\"UltramaficMantleRefactory\"\nParameters:\nmantle_solidus\n\nMantle Liquidus\n\ntype_names:\n\"UltramaficMantleFertile\"\n\"UltramaficMantlePartiallyMolten\"\n\"UltramaficMantleRefactory\"\nParameters:\nmantle_liquidus\n\n\n\n\n\n","category":"function"},{"location":"benchmarks/models/elastic_slab/#Elastic-Slab","page":"Elastic Slab","title":"Elastic Slab","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:elastic_slab);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nWorking on time step 160\n\nMax difference (num-ana): 1503.78021\nMax relative error: 0.200 %\nMax relative error limit: 0.300 %\n\nTest Successful: max relative error is not greater than limit: 0.200% <= 0.300%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_17-23-35/elastic_slab_output\n\n(Image: Elastic Slab Benchmark)","category":"section"},{"location":"benchmarks/models/elastic_slab/#fig:elastic-slab","page":"Elastic Slab","title":"fig:elastic-slab","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"thermo_mechanical_algorithm/stokes_solver_steps/stokes_solver_steps/#Stokes-solver-Steps","page":"Stokes-solver Steps","title":"Stokes-solver Steps","text":"[1] Use the Picard iteration method and nodal plasticity to solve for x-component of  velocity v_x(ij)_vx, y-component of velocity v_y(ij)_vy and pressure  P_(ij)_p and update visco-plastic normal viscosity eta_vp(ij)_p,  visco-plastic shear viscosity eta_vp(ij)_b, deviatoric normal stress forecast  sigma_xx(ij)_p2 and deviatoric shear stress forecast sigma_xy(ij)_b2  (see Picard Loop).\n\n[2] Interpolate visco-plastic viscosity eta_vp(ij)_b to markers if marker is  located in a cell that has undergone plastic yielding (see  Visco-plastic Viscosity Update for Yielding on Basic Grid).\n\n[3] Update model time step Delta t ensuring that displacement is less than a user  specified fraction of the staggered grid spacing based on current velocity solutions v_x(ij)_vx and v_y(ij)_vy and grid spacings Delta x_(ij)_vx  and Delta y_(ij)_vy.\n\n[4] Update deviatoric stresses on staggered grid sigma_xx(ij)_p2 and  sigma_xy(ij)_b2 using equation eq:deviatoric-stress-forecast with  updated deviatoric strain rates dotepsilon_xx(ij)_p and  dotepsilon_xy(ij)_b, updated visco-plastic viscosity eta_vp(ij)_p and  eta_vp(ij)_b and updated model time step Delta t.\n\n[5] Calculate deviatoric stress changes on staggered grid  Delta sigma_xx(ij)_p and Delta sigma_xy(ij)_b using  eq:visco-elasto-plastic-stress-changes with updated deviatoric stresses  sigma_xx(ij)_p2 and sigma_xy(ij)_b2 and original deviatoric  stresses sigma_xx(ij)_p1 and sigma_xy(ij)_b1.\n\n[6] Update marker strain rate components dotepsilon_xxm and  dotepsilon_xym using updated velocity solution by interpolating  dotepsilon_xx(ij)_p and dotepsilon_xy(ij)_b to markers using  equation eq:bilinear-interp2markers.\n\n[7] Update stress-based over velocity-based strain-rate ratio for markers R_srm  using equation eq:strainrateratio with updated grid strain rate components  dotepsilon_xx(ij)_p and dotepsilon_xy(ij)_b, forecasted deviatoric  grid stresses sigma_xx(ij)_p2 and sigma_xy(ij)_b2 and grid stress  changes Delta sigma_xx(ij)_p and Delta sigma_xy(ij)_b.\n\n[8] Update marker pressure P_m by interpolating pressure from staggered pressure  grid P_(ij)_p to markers using equation eq:bilinear-interp2markers.\n\n[9] Update deviatoric marker stresses sigma_xxm and sigma_xym for stress  changes on staggered grid Delta sigma_xx(ij)_p and  Delta sigma_xy(ij)_b and sub-grid stress diffusion  Delta sigma_xxsg(ij)_p and Delta sigma_xysg(ij)_b (see  Subgrid-stress Diffusion Steps).","category":"section"},{"location":"api/markers/friction/#Marker-Friction-Coefficients","page":"MarkerFriction","title":"Marker Friction Coefficients","text":"","category":"section"},{"location":"api/markers/friction/#Initialization","page":"MarkerFriction","title":"Initialization","text":"","category":"section"},{"location":"api/markers/friction/#EarthBox.Markers.MarkerFriction.initialize!","page":"MarkerFriction","title":"EarthBox.Markers.MarkerFriction.initialize!","text":"initialize!(\n    model::ModelData; \n    initialization_model::Union{Int, String, Symbol, Nothing}=nothing, kwargs...\n)::Nothing\n\nManage marker friction coefficients initialization and time-dependent models.\n\nArguments\n\nmodel::ModelData: The model data container containing the model parameters and arrays.\ninitialization_model::Union{Int, String, Symbol, Nothing}: \nControls the type of marker friction coefficients initialization model.  initialization model for marker friction coefficients. See the   Marker Friction Coefficient Initialization Models section below for information on   available initialization models. If the initialization_model is not provided, the default   initialization model will be used. The initialization model is stored in the model data   container as an integer flag (iuse_random_fric). The initialization model parameter flag   can be accessed from the model data container as follows:\niuse_random_fric = model.materials.parameters.random_friction.iuse_random_fric.value\n\nKeyword Arguments\n\ndelta_fric_coef::Union{Float64, Nothing}=nothing:\nFriction coefficient perturbation used to randomize initial marker friction coefficients\niuse_random_fric_time::Union{Bool, Nothing}=nothing:\nRandomize marker friction coefficients with each time step: 0 off; 1 on\nrandomization_factor::Union{Float64, Nothing}=nothing:\nRandomization factor used to randomize marker friction coefficients with each time step\n\nMarker Friction Initialization Models\n\nRegular\n\ninitialization_model value: \"Regular\", :Regular, or 0\nDescription: Initial marker friction is regular.\n\nRandomized\n\ninitialization_model value: \"Randomized\", :Randomized, or 1\nDescription: Initial marker friction is randomized using delta_fric_coef.\n\n\n\n\n\n","category":"function"},{"location":"api/stokes_continuity_solver/global_plasticity_loop/#GlobalPlasticityLoop","page":"GlobalPlasticityLoop","title":"GlobalPlasticityLoop","text":"","category":"section"},{"location":"api/stokes_continuity_solver/global_plasticity_loop/#Initialization","page":"GlobalPlasticityLoop","title":"Initialization","text":"","category":"section"},{"location":"api/stokes_continuity_solver/global_plasticity_loop/#EarthBox.GlobalPlasticityLoop.initialize!","page":"GlobalPlasticityLoop","title":"EarthBox.GlobalPlasticityLoop.initialize!","text":"initialize!(\n    model::ModelData;\n    global_plasticity_loop::Union{Int, Symbol, String, Nothing}=nothing,\n    kwargs...\n)::Nothing\n\nInitialize the global plasticity loop (Picard iteration loop]).\n\nArguments\n\nmodel::ModelData: The model data container containing    model parameters and arrays.\n\nKeyword Arguments\n\nglobal_plasticity_loop::Union{Int, String, Nothing}=nothing:\nControls the type of global plasticity loop. See the Global Plasticity Loop Types section   below for information on available global plasticity loop types. If global_plasticity_loop   is nothing the option id from the model data container will be used to define global plasticity   loop type. The global plasticity loop type is stored in the model data container as an integer   ID (itype_global) and a corresponding string name (stype_global). The global plasticity loop   type parameters can be accessed from the model data container as follows:\nitype_global = model.stokes_continuity.parameters.picard.itype_global.value\nstype_global = model.stokes_continuity.parameters.picard.stype_global.value\ntolerance_picard::Float64:\nConvergence criterion for the global plasticity iterations (a.k.a. Picard iterations)\nnglobal::Int64:\nMaximum number of global plasticity iterations (a.k.a. Picard iterations)\n\n\n\nGlobal Plasticity Loop Types\n\n\n\nMarkerPlasticityLoop\n\nglobal_plasticity_loop value: \"MarkerPlasticityLoop\", :MarkerPlasticityLoop, or 0\nDescription: Plasticity is defined on markers.\n\nNodalPlasticityLoop\n\nglobal_plasticity_loop value: \"NodalPlasticityLoop\", :NodalPlasticityLoop, or 1\nDescription: Plasticity is defined on nodes.\n\n\n\n\n\n","category":"function"},{"location":"benchmarks/models/solid_body_rotation/#Solid-Body-Rotation","page":"Solid Body Rotation","title":"Solid Body Rotation","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:solid_body_rotation);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 0.07100\nMax relative error: 0.010 %\nMax relative error limit: 2.000 %\n\nTest Successful: max relative error is not greater than limit: 0.010% <= 2.000%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_17-14-19/solid_body_rotation_output\n\n(Image: Solid Body Rotation Benchmark)","category":"section"},{"location":"benchmarks/models/solid_body_rotation/#fig:solid-body-rotation","page":"Solid Body Rotation","title":"fig:solid-body-rotation","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"methods/discretization/stokes_bcs/#Stokes-continuity-Boundary-Conditions","page":"Stokes Boundary Conditions","title":"Stokes-continuity Boundary Conditions","text":"Earthbox uses the approach of Gerya (2010) for specifying boundary conditions   for the Stokes-continuity equations on a Staggered grid whereby simple coefficients are used that control type of boundary condition. ","category":"section"},{"location":"methods/discretization/stokes_bcs/#Stokes-Boundary-Conditions:-Top-and-Bottom-Boundaries","page":"Stokes Boundary Conditions","title":"Stokes Boundary Conditions: Top and Bottom Boundaries","text":"Boundary conditions for the x-component of velocity are implemented along the top and bottom  boundaries using the following equations:","category":"section"},{"location":"methods/discretization/stokes_bcs/#eq:vx-bc-top-bottom","page":"Stokes Boundary Conditions","title":"eq:vx-bc-top-bottom","text":"beginsplit\n    v_x(1j)_v_x  = v_x^top + f_v_x^topv_x(2j)_v_x \n    v_x(N_yb+1j)_v_x  = v_x^bot + f_v_x^botv_x(N_ybj)_v_x \nendsplit\n\nwhere j ranges from 1 to N_xb, f_v_x^top and f_v_x^bot are the  boundary condition coefficients for the top boundary and bottom boundaries, respectively, and  v_x^top and v_x^bot are the prescribed velocity components at ghost nodes along  the top and bottom boundaries, respectively. The coefficients f_v_x^top and f_v_x^bot  control how the x-component of velocity at ghost nodes is related to the internal velocity and can  have a value of -1, 0 or 1 depending on the type of boundary condition.\n\nBoundary conditions for the y-component of velocity are implemented along the top and bottom  boundaries using the following equations:","category":"section"},{"location":"methods/discretization/stokes_bcs/#eq:vy-bc-top-bottom","page":"Stokes Boundary Conditions","title":"eq:vy-bc-top-bottom","text":"beginsplit\n    v_y(1j)_v_y  = v_y^top + f_v_y^topv_y(2j)_v_y \n    v_y(N_ybj)_v_y  = v_y^bot + f_v_y^botv_y(N_yb-1j)_v_y \nendsplit\n\nwhere j ranges from 1 to N_xb+1, f_v_y^top and f_v_y^bot are the  boundary condition coefficients for the top boundary and bottom boundaries, respectively, and v_y^top and v_y^bot are the prescribed velocity components at boundary unknown nodes  along the top and bottom boundaries, respectively. The coefficients f_v_y^top and  f_v_y^bot control how the y-component of velocity at boundary unknown nodes is related to  the internal velocity and can have a value of -1, 0 or 1 depending on the type of boundary condition.","category":"section"},{"location":"methods/discretization/stokes_bcs/#Stokes-Boundary-Conditions:-Left-and-Right-Boundaries","page":"Stokes Boundary Conditions","title":"Stokes Boundary Conditions: Left and Right Boundaries","text":"Boundary conditions for the x-component of velocity are implemented along the left and right  boundaries using the following equations:","category":"section"},{"location":"methods/discretization/stokes_bcs/#eq:vx-bc-left-right","page":"Stokes Boundary Conditions","title":"eq:vx-bc-left-right","text":"beginsplit\n    v_x(i1)_v_x  = v_x^left + f_v_x^leftv_x(i2)_v_x \n    v_x(iN_xb)_v_x  = v_x^right + f_v_x^rightv_x(iN_xb-1)_v_x \nendsplit\n\nwhere i ranges from 1 to N_yb+1, f_v_x^left and f_v_x^right are  the boundary condition coefficients for the left boundary and right boundaries, respectively,  v_x^left and v_x^right are the prescribed velocity components at boundary unknown  nodes along the left and right boundaries, respectively. The coefficients f_v_x^left and  f_v_x^right control how the x-component of velocity at boundary unknown nodes is related to  the internal velocity and can have a value of -1, 0 or 1 depending on the type of boundary condition.\n\nBoundary conditions for the y-component of velocity are implemented along the left and right  boundaries using the following equations:","category":"section"},{"location":"methods/discretization/stokes_bcs/#eq:vy-bc-left-right","page":"Stokes Boundary Conditions","title":"eq:vy-bc-left-right","text":"beginsplit\n    v_y(i1)_v_y  = v_y^left + f_v_y^leftv_y(i2)_v_y \n    v_y(iN_xb+1)_v_y  = v_y^right + f_v_y^rightv_y(iN_xb)_v_y \nendsplit\n\nwhere i ranges from 1 to N_yb, f_v_y^left and f_v_y^right are  the boundary condition coefficients for the left boundary and right boundaries, respectively, and  v_y^left and v_y^right are the prescribed velocity components at boundary unknown  nodes along the left and right boundaries. The coefficients f_v_y^left and f_v_y^right  control how the y-component of velocity at boundary unknown nodes is related to the internal velocity  and can have a value of -1, 0 or 1 depending on the type of boundary condition.","category":"section"},{"location":"methods/discretization/stokes_bcs/#No-slip-Boundary-Conditions","page":"Stokes Boundary Conditions","title":"No-slip Boundary Conditions","text":"For no-slip boundary conditions along all boundaries, boundary coefficients f_v_x^top,  f_v_x^bot, f_v_y^left and f_v_y^right are set equal to -1, and boundary coefficients f_v_y^top, f_v_y^bot, f_v_x^left and f_v_x^right  are set equal to 0. Additionally, prescribed velocities v_x^top, v_x^bot,  v_y^top, v_y^bot, v_x^left, v_x^right, v_y^left and  v_y^right are set to zero. These conditions ensure that velocity at ghost nodes has the  opposite sign of the internal velocity along the boundary, making the velocity at the model  boundary zero as described in the following equations:","category":"section"},{"location":"methods/discretization/stokes_bcs/#eq:no-slip-bc","page":"Stokes Boundary Conditions","title":"eq:no-slip-bc","text":"beginsplit\n    v_x(1j)_v_x  = -v_x(2j)_v_x \n    v_y(1j)_v_y  = 0 \n    v_x(N_yb+1j)_v_x  = -v_x(N_ybj)_v_x \n    v_y(N_ybj)_v_y  = 0 \n    v_x(i1)_v_x  = 0 \n    v_y(i1)_v_y  = -v_y(i2)_v_y \n    v_x(iN_xb)_v_x  = 0 \n    v_y(iN_xb+1)_v_y  = -v_y(iN_xb)_v_y \nendsplit","category":"section"},{"location":"methods/discretization/stokes_bcs/#Free-slip-Boundary-Conditions-with-Inflow/Outflow","page":"Stokes Boundary Conditions","title":"Free-slip Boundary Conditions with Inflow/Outflow","text":"For free slip with inflow/outflow boundary conditions, boundary coefficients f_v_x^top, f_v_x^bot, f_v_y^left and f_v_y^right are set equal to 1, and boundary coefficients f_v_y^top, f_v_y^bot, f_v_x^left and f_v_x^right  are set equal to 0. Additionally, prescribed velocities v_x^top, v_x^bot,  v_y^left and v_y^right are set to zero, and prescribed velocities v_y^top,  v_y^bot, v_x^left and v_x^right are set to the inflow/outflow velocity. These conditions ensure that velocity parallel to the boundary at ghost nodes is equal to the  internal velocity, and velocity perpendicular to the boundary at boundary nodes is equal  to the inflow/outflow velocity as described in the following equations:","category":"section"},{"location":"methods/discretization/stokes_bcs/#eq:free-slip-bc-inflow-outflow","page":"Stokes Boundary Conditions","title":"eq:free-slip-bc-inflow-outflow","text":"beginsplit\n    v_x(1j)_v_x  = v_x(2j)_v_x \n    v_y(1j)_v_y  = v_y^top \n    v_x(N_yb+1j)_v_x  = v_x(N_ybj)_v_x \n    v_y(N_ybj)_v_y  = v_y^bot \n    v_x(i1)_v_x  = v_x^left \n    v_y(i1)_v_y  = v_y(i2)_v_y \n    v_x(iN_xb)_v_x  = v_x^right \n    v_y(iN_xb+1)_v_y  = v_y(iN_xb)_v_y \nendsplit\n\ntip: pure-free-slip\nTo implement standard free-slip condition, the inflow-outflow velocities are set to zero.","category":"section"},{"location":"methods/discretization/stokes_bcs/#Boundary-Conditions-for-Extensional-Models-with-Fixed-Boundaries","page":"Stokes Boundary Conditions","title":"Boundary Conditions for Extensional Models with Fixed Boundaries","text":"Extensional models with fixed boundaries use free-slip boundary conditions with inflow/outflow along  all boundaries as described in Eq.. Prescribed outflow  velocity along the side boundaries is set to 05v_ext where v_ext is the full  extension velocity. Prescribed inflow velocity along the top and bottom boundaries are defined  so that the net inflow/outflow volume is zero over the entire model domain and the net  inflow/outflow volume is zero within the sticky layer. The prescribed inflow velocity along  the top boundary v_y^top is calculated as:","category":"section"},{"location":"methods/discretization/stokes_bcs/#eq:inflow-velocity-top","page":"Stokes Boundary Conditions","title":"eq:inflow-velocity-top","text":"v_y^top = fracv_extleft(H_stickyl + H_stickyrright)x_size\n\nwhere H_stickyl and H_stickyr are the thickness of the sticky layer on the left  and right sides of the model domain, and x_size is the width of the model domain. The  prescribed inflow velocity along the bottom boundary v_y^bot is calculated as:","category":"section"},{"location":"methods/discretization/stokes_bcs/#eq:inflow-velocity-bottom","page":"Stokes Boundary Conditions","title":"eq:inflow-velocity-bottom","text":"v_y^bot = v_y^top -2v_extfracy_sizex_size\n\nwhere y_size is the height of the model domain. Inflow velocities v_y^top and  v_y^bot are recalculated at each time step to account for changes in the sticky layer  thickness due to crustal thickness changes and isostatic adjustment.","category":"section"},{"location":"methods/melt/melt/#Melt-generation,-Transport-and-Emplacement","page":"Melt","title":"Melt generation, Transport and Emplacement","text":"The models presented in this work use a linearized equilibrium melt fraction model based on the  following equation:","category":"section"},{"location":"methods/melt/melt/#eq:melt-fraction","page":"Melt","title":"eq:melt-fraction","text":"M_m = fracT_m - T_solidusmT_liquidusm - T_solidusm\n\nwhere m is the index of the marker, M_m is the melt fraction for the marker, T_m is the  temperature of the marker, T_solidusm is the solidus temperature of the marker, and  T_liquidusm is the liquidus temperature of the marker (Gerya, 2013). \n\nThe the solidus temperature of markers with ultramafic composition is defined for anhydrous  peridotite by the following equation:","category":"section"},{"location":"methods/melt/melt/#eq:solidus-mantle","page":"Melt","title":"eq:solidus-mantle","text":"T_solidus^mantle =\nbegincases\n    - 51(P_GPa)^2 + 1329P_GPa + 10857\n         textfor  P_GPa leq 8 text GPa \n    T_solidusK03^8GPa\n    + fracleft( T_solidus20 - T_solidusK3^8GParight)12\n        left(P_GPa - 8right)\n             textfor  P_GPa  8 text GPa\nendcases\n\nwhere P_GPa is the pressure in GPa, T_solidusK3^8GPa is the solidus temperature in K at  8 GPa according to the model of Katz et al. (2003), and T_solidus20 is the solidus temperature in K at 20 GPa set equal to 2250 K. Anhydrous peridotite is used as water is quickly removed from the  system during the early stages of melting. The liquidus temperature for ultramafic mantle markers is defined by the following equation for anhydrous peridotite:","category":"section"},{"location":"methods/melt/melt/#eq:liquidus-mantle","page":"Melt","title":"eq:liquidus-mantle","text":"T_liquidus^mantle =\nbegincases\n    - 2(P_GPa)^2 + 450P_GPa + 17800\n         textfor  P_GPa leq 8 text GPa \n    T_liquidusK3^8GPa\n    + fracleft( T_liquidus20 - T_liquidusK03^8GParight)12\n        left(P_GPa - 8right)\n             textfor  P_GPa  8 text GPa\nendcases\n\nwhere T_liquidusK3^8GPa is the liquidus temperature in K at 8 GPa according to the model of Katz et al. (2003), and T_liquidus20 is the liquidus temperature in K at 20 GPa set equal to 2600 K.\n\nThis study employs two distinct models to determine the solidus and liquidus temperatures for gabbro:  (1) a standard gabbro model representing the composition of primary melt products derived from the  mantle, and (2) a model for gabbroic materials that have experienced fractional crystallization  during emplacement. The solidus and liquidus temperatures for markers that have normal gabbro  composition are defined by the following equations (Gerya, 2010):","category":"section"},{"location":"methods/melt/melt/#eq:solidus-liquidus-gabbro","page":"Melt","title":"eq:solidus-liquidus-gabbro","text":"beginsplit\n    T_solidus^gabbro = 13270 + 91P_GPa text \n    T_liquidus^gabbro = 1423 + 105P_GPa\nendsplit\n\nThe solidus and liquidus temperatures for fractionated gabbro are defined the following equations:","category":"section"},{"location":"methods/melt/melt/#eq:solidus-liquidus-fractionated-gabbro","page":"Melt","title":"eq:solidus-liquidus-fractionated-gabbro","text":"beginsplit\n    T_solidus^frac = T_solidus^gabbro + Delta T_solidus^frac\n    T_liquidus^frac = T_liquidus^gabbro + Delta T_liquidus^frac\nendsplit\n\nwhere Delta T_solidus^frac and Delta T_liquidus^frac are the temperature differences  between the solidus and liquidus temperatures for normal gabbro and fractionated gabbro, respectively.  We use the following values for fractionated shifts in solidus and liquidus temperatures based on the work of Maclennan et al. (2004): Delta T_solidus^frac = 100 K and  Delta T_liquidus^frac = 300 K. \n\nMelt is assumed to migrate instantaneously to the top of the partially molten mantle domain and  then flow horizontally toward local high points. At the local maximum, melt is  divided into two fractions: one that is immediately emplaced at the base of the crust and another that  is transported to the surface. This simplified model of melt transport and emplacement is implemented  independently within each melt drainage basin bounded by local minima along the top of the partially  molten domain.\n\nThe extractable melt fraction for a marker m is defined by the following  equation:","category":"section"},{"location":"methods/melt/melt/#eq:extractable-melt-fraction","page":"Melt","title":"eq:extractable-melt-fraction","text":"M_extractablem = M_m - M_extractedm^o\n\nwhere M_m is the total melt fraction for the marker as described in Eq. and  M_extractedm^o is the melt fraction already extracted. The extracted melt fraction updated using:","category":"section"},{"location":"methods/melt/melt/#eq:extracted-melt-fraction","page":"Melt","title":"eq:extracted-melt-fraction","text":"M_extractedm = M_extractedm^o + M_extractablem\n    quad textif quad M_m  0 quad textand quad M_extractablem  0\n\nMarker density rho_m is impacted by melting by depleting the rock matrix and through the presence of melt in the pore space. The impact of depletion is modeled using the approach of Theunissen et al. (2022)  as described in following equation:","category":"section"},{"location":"methods/melt/melt/#eq:density-melt-depletion","page":"Melt","title":"eq:density-melt-depletion","text":"rho_m = \nbegincases\n    rho_m^o - 38 M_extractedm 100\n         textif  M_extractedm  0075 \n    rho_m^o - left(2484 + 0488M_extractedm100right)\n         textif  M_extractedm geq 0075 \nendcases\n\nwhere rho_m^o is the density of the marker prior to the update step. The effect of melt in pore  space on density modeled using the following equation:","category":"section"},{"location":"methods/melt/melt/#eq:density-melt-pore-space","page":"Melt","title":"eq:density-melt-pore-space","text":"beginsplit\n    rho_melt = rho_refmelt + f_eosP_Pa text \n    rho_m = rho_m^o(1 - M_extractablem) + rho_melt M_extractablem\nendsplit\n\nwhere rho_m^o is the density of the marker prior to this update step, rho_refmelt is the  reference density of the melt set equal to 2750 frackgm^3, P_Pam is the pressure in Pa  and f_eos is the linearized derivative of melt density with respect to pressure equal to  897cdot10^-8 frackgm^3Pa derived from the Birch-Murnagham equation-of-state for anhydrous  basaltic melt using K_to = 208 and K_tp = 46 (Lesher and Spera, 2015; Stolper et al., 1981).\n\nThe total number of magma markers in drainage basin k if all extractable melt  were consolidated into a single body is calculated as:","category":"section"},{"location":"methods/melt/melt/#eq:total-magma-markers","page":"Melt","title":"eq:total-magma-markers","text":"N_magmatotk\n    = f_extraction\n        left( displaystyle sum_m=0^N_marker M_extractablem \n            + R_meltk^o\n        right)\n\nsubject to the conditions:\n\nM_m  0 text  quad M_extractablem  0 quad textand quad\nx_dividek  x_m  x_divide(k+1)\n\nwhere f_extraction is the extraction efficiency, R_meltk^o is the residual  melt from the previous time step, x_dividek and x_divide(k+1) are the x-coordinates of the  left and right drainage divides for drainage basin k, respectively, x_m is the x-coordinate of  the marker. For the experiments presented in this work f_extraction = 099 to account for a small amount of melt retained in the mantle during transport. \n\nThe number of magma markers available for emplacement or extrusion in drainage basin k for a given  time step is:","category":"section"},{"location":"methods/melt/melt/#eq:available-magma-markers","page":"Melt","title":"eq:available-magma-markers","text":"N_magmak = int(N_magmatotk)\n\nand the residual component used in the next time step is updated as:","category":"section"},{"location":"methods/melt/melt/#eq:residual-melt","page":"Melt","title":"eq:residual-melt","text":"R_meltk = N_magmatotk - N_magmak text\n\nThe total extractable magma volume in the drainage basic k is then:","category":"section"},{"location":"methods/melt/melt/#eq:total-extractable-magma-volume","page":"Melt","title":"eq:total-extractable-magma-volume","text":"V_magmak = N_magmak Delta x_m Delta y_m\n\nwhere Delta x_m and Delta y_m are the average widths of the markers in the x and y directions, respectively.\n\nThe height of new column of crust formed if V_magmak is emplaced as a dike within a spreading  plate is:","category":"section"},{"location":"methods/melt/melt/#eq:char-magmatic-crust-height","page":"Melt","title":"eq:char-magmatic-crust-height","text":"H_mck\n    = fracV_magmakv_extDelta t\n\nwhere v_ext is the full extension velocity and Delta t is the model time step. This  characteristic magmatic crust height, H_mck, is used to as a proxy for the efficiency of melt transport to the surface.\n\nThe number of volcanic markers that are available for extrusion on the surface as lava flows above  drainage basin k is given by:","category":"section"},{"location":"methods/melt/melt/#eq:volcanic-markers","page":"Melt","title":"eq:volcanic-markers","text":"N_volcanick = int(f_vN_magmak)\n\nwhere f_v is the extrusion efficiency factor. We assume that the efficiency of melt transport to the surface correlates with the characteristic magmatic crust height H_mck as described by the following equation:","category":"section"},{"location":"methods/melt/melt/#eq:extrusion_efficiency","page":"Melt","title":"eq:extrusion_efficiency","text":"f_v = \n    begincases\n        f_vmin\n             quad textfor quad H_mck leq H_mcmin\n                quad textand \n        f_v(max)\n             quad textfor quad H_mck geq H_mcmax\n                quad textand \n        f_vmin + \n            frac(H_mck - H_mcmin)Delta H_mcDelta f_v\n             quad textfor quad H_mcmin  H_mck  H_mcmax\n    endcases\n\nwhere Delta f_v is equal to f_vmax - f_vmin and Delta H_mc  is equal to H_mcmax - H_mcmin. For this work, f_vmin = 003, H_mcmin = 6000 m and H_mcmax = 17500 m. Alternative scenarios for parameter f_v(max) are explored ranging from 0.1 to 0.5. The total volume of volcanic markers V_volk extruded on the surface for a given time step is:","category":"section"},{"location":"methods/melt/melt/#eq:volcanic-extrusion-volume","page":"Melt","title":"eq:volcanic-extrusion-volume","text":"V_volk = V_volk^o + N_volcanick Delta x_m Delta y_m text\n\nwhere V_volk^o is the volume of material available for extrusion from previous model times  steps within the current eruption interval. The number of magma markers N_magmak can be updated to account for volcanic material as follows:","category":"section"},{"location":"methods/melt/melt/#eq:magma-markers-final","page":"Melt","title":"eq:magma-markers-final","text":"N_magmak = N_magmak - N_volcanick text\n\nTherefore, the volume of magma markers from equation that are emplaced at the base of the crust is:","category":"section"},{"location":"methods/melt/melt/#eq:magma-volume-final","page":"Melt","title":"eq:magma-volume-final","text":"V_magmak = N_magmak Delta x_m Delta y_m text\n\nGabbroic magma is injected at the base of the Moho within an injection zone of width W_injk that is centered on the local maximum of the partially molten domain of the mantle. The width of the magma  injection zone W_injk is calculated using the following equation:","category":"section"},{"location":"methods/melt/melt/#eq:injection-width","page":"Melt","title":"eq:injection-width","text":"W_injk = \nbegincases\n    fracV_magmakH_injlimit \n        quad textfor quad H_inj  H_injlimit\n    W_inj^char \n        quad textfor quad H_inj leq H_injlimit\nendcases\n\nwhere W_inj^char is the characteristic injection width, H_injlimit is the maximum injection height limit, and H_inj is the injection height defined by:","category":"section"},{"location":"methods/melt/melt/#eq:injection-height","page":"Melt","title":"eq:injection-height","text":"H_inj = fracV_magmakW_inj^char text\n\nThe injection zone is divided into subdomains that are selected using a normal probability  distribution centered on the local maximum of the partially molten domain of the mantle. The  injection of gabbroic magma is implemented by replacing the shallowest marker below the Moho within  a selected subdomain with a marker that has the composition of gabbroic magma and emplacement  temperature of 1200^circC. At the beginning of each time step, gabbroic magma markers that are within 2km of the Moho are converted into fractionated gabbroic magma markers. This  conversion accounts for the fractional crystallization that occurs during the emplacement of magma  in the crust, including processes such as dike and sill injection and the flow of crystal mush in  the so called gabbro glacier.\n\nMarkers undergo solidification based on their updated melt fraction M_m. The solidification process occurs as follows: \n\nSolidification is modeled by transforming purely molten markers that have  cooled below the liquidus temperature to a solid state.\nSolid markers with temperatures between the solidus and liquidus temperatures are  transformed to a partially molten state.\nPartially molten markers that have cooled below the solidus are transformed to  a solid state by updating.\n\nIf the melt fraction M_m from Eq. falls below the extracted melt  fraction M_extractedm from Eq. (i.e. M_extractable  0)  the marker is transformed into a refractory state.","category":"section"},{"location":"model_data/collections/benchmarks/","page":"Benchmarks","title":"Benchmarks","text":"Benchmarks\n\nParameters","category":"section"},{"location":"model_data/collections/benchmarks/#EarthBox.ModelDataContainer.BenchmarkContainer.Benchmarks","page":"Benchmarks","title":"EarthBox.ModelDataContainer.BenchmarkContainer.Benchmarks","text":"Benchmarks <: CollectionContainer\n\nParameter collection for benchmark parameters.\n\nFields\n\nparameters::Parameters: Parameter groups for benchmark configuration\n\nConstructor\n\nBenchmarks()\n\nReturns\n\nBenchmarks: New Benchmarks parameter collection with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/benchmarks/#EarthBox.ModelDataContainer.BenchmarkContainer.ParameterCollection.Parameters","page":"Benchmarks","title":"EarthBox.ModelDataContainer.BenchmarkContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for benchmark parameters.\n\nFields\n\niuse_ramberg_post_processing::ParameterInt: Calculate quantities for Rayleigh-Taylor benchmark: 0 = off; 1 = on\niuse_viscous_block_processing::ParameterInt: Calculate quantities for viscous block benchmark: 0 = off; 1 = on\niuse_conbox_post_processing::ParameterInt: Post-processing for convection in a box: 0 = off; 1 = on\n\nNested Dot Access\n\niuse_ramberg_post_processing = model.benchmarks.parameters.iuse_ramberg_post_processing.value\niuse_viscous_block_processing = model.benchmarks.parameters.iuse_viscous_block_processing.value\niuse_conbox_post_processing = model.benchmarks.parameters.iuse_conbox_post_processing.value\n\nConstructor\n\nParameters()\n\nReturns\n\nParameters: New Parameters collection with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/rock_properties/serpentinization/serpentinization/#Serpentinization-Model","page":"Serpentinization","title":"Serpentinization Model","text":"","category":"section"},{"location":"api/rock_properties/serpentinization/serpentinization/#Initialization","page":"Serpentinization","title":"Initialization","text":"","category":"section"},{"location":"api/rock_properties/serpentinization/serpentinization/#EarthBox.Serpentinization.initialize!","page":"Serpentinization","title":"EarthBox.Serpentinization.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize parameters for the serpentinization model.\n\nArguments\n\nmodel::ModelData: Model data container containing the model parameters and arrays.\n\nKeyword Arguments\n\niuse_serpentinization::Int64\nSerpentinization model: 0 off; 1 on. Topography must be activated for serpentinization (i.e. iuse_topo must be equal to 1). See EarthBox.SurfaceProcesses.Topography.initialize!) for more details on topography initialization.\nserpentinization_temperature::Float64\nTemperature in Celsius that controls when serpentinization rate reaches maximum and then rapidly decreases. Typical values from the literature are around 613.15K (340.15C) (e.g. Mezri et al. (2024)).\nmaximum_serpentinization_depth::Float64\nMaximum submud serpentinization depth in meters\nmaximum_serpentinization_rate::Float64\nMaximum serpentinization rate (1/s). Typical values from the literature are around 1e-10 to 1e-11 1/s (e.g. Mezri et al. (2024)).\nnominal_strain_rate_serpentinization::Float64\nNominal plastic strain rate for serpentinization (1/s). Plastic strain rate beyond which the effect of plastic strain rate on serpentinization rate rapidly increases and then becomes constant (e.g. Merzi et al., 2024). Typical values from the literature are around 1e-12 to 1e-13 1/s (e.g. Mezri et al. (2024)).\n\n\n\n\n\n","category":"function"},{"location":"api/run_time_steps/time_Step_initialization/#Time-Step-Initialization","page":"Initialization","title":"Time Step Initialization","text":"The time step parameters timestep_viscoelastic and ntimestep_max are initialized based on  (1) the key word arguments provided by the user to the run_time_steps function, (2) whether  extensional boundary condition have been enabled and (3) whether velocity stepping has been  enabled.","category":"section"},{"location":"api/run_time_steps/time_Step_initialization/#Scenario-1:-User-provided-values","page":"Initialization","title":"Scenario 1: User provided values","text":"The viscoelastic time step (timestep_viscoelastic) and number of time step  (ntimestep_max) are based on user provided values via the run_time_steps function or loaded from  the yaml model input file.","category":"section"},{"location":"api/run_time_steps/time_Step_initialization/#Scenario-2:-Symmetric-extensional-boundary-conditions-without-velocity-stepping","page":"Initialization","title":"Scenario 2: Symmetric extensional boundary conditions without velocity stepping","text":"The viscoelastic time step (timestep_viscoelastic), number of time step (ntimestep_max) are  calculated for models with symmetric extensional boundary conditions without velocity stepping. \n\nRequired conditions for this scenario:\n\nTime stepping parameters have not been previously set as indicated by timestep_viscoelastic and  ntimestep_max being equal to a default value of NaN.\nSymmetric extensional boundary conditions have been enabled.\nThe model duration parameter (model_duration_myr) has been set.\nVelocity stepping has not been enabled as indicated by the iuse_velocity_step parameter being set to 0.\n\nIf the above conditions are met, the viscoelastic time step (timestep_viscoelastic) is calculated using the full extension velocity (full_extension_velocity), the maximum allowed cell displacement  fraction (marker_cell_displ_max) and the minimum calculated cell spacing:","category":"section"},{"location":"api/run_time_steps/time_Step_initialization/#eq:viscoelastic-timestep-calculated","page":"Initialization","title":"eq:viscoelastic-timestep-calculated","text":"    Delta t_ve = \n        min left( \n            frac min left( Delta x_min Delta y_min right) f_cell  05 v_ext  Delta t_limit\n        right)\n\nwhere Delta t_ve is the viscoelastic time step, Delta x_min and Delta y_min are the minimum  cell spacings x- and y-directions, respectively, f_cell is the maximum allowed cell displacement fraction,  v_ext is the full extension velocity, and Delta t_limit is the maximum allowed  viscoelastic time step (50,000 years).\n\nThe number of time steps (ntimestep_max) is calculated using the viscoelastic time step  (timestep_viscoelastic) and the model duration (model_duration_myr) taking a buffer time of 3 Myr  into account for the adaptive time stepping:","category":"section"},{"location":"api/run_time_steps/time_Step_initialization/#eq:number-of-timesteps-calculated","page":"Initialization","title":"eq:number-of-timesteps-calculated","text":"n_tsmax = frac Delta t_model + Delta t_buffer  Delta t_ve \n\nwhere n_tsmax is the maximum number of time steps, Delta t_model is the model duration,  Delta t_ve is the viscoelastic time step, and Delta t_buffer is the buffer time.\n\nwarning: adaptive time stepping and actual model duration\nIf the calculated magnitude of velocity exceeds the half-extension rate, the viscoelastic time step  may be reduced more than estimated using Eq. . Therefore, Eq. may be too small for achieving the desired model duration. To mitigate this issue set the model_duration_myr parameter to a larger value.  ","category":"section"},{"location":"api/run_time_steps/time_Step_initialization/#Scenario-3:-Symmetric-extensional-boundary-conditions-with-velocity-stepping","page":"Initialization","title":"Scenario 3: Symmetric extensional boundary conditions with velocity stepping","text":"The viscoelastic time steps (timestep_viscoelastic, timestep_viscoelastic_step1 and  timestep_viscoelastic_step2), number of time steps (ntimestep_max), velocity stepping factors  (velocity_step_factor and velocity_second_step_factor) and time step adjustment factors  (timestep_adjustment_factor and timestep_second_adjustment_factor) are calculated for models with  symmetric extensional boundary conditions with velocity stepping. \n\nRequired conditions for this scenario:\n\nSymmetric extensional boundary conditions have been enabled.\nVelocity stepping factors have not been previously set as indicated by the velocity_step_factor equal  to the default value of NaN.\nThe time stepping parameters have not been previously set as indicating by timestep_viscoelastic  and ntimestep_max being equal to a default value of NaN.\nThe model duration parameter (model_duration_myr) has been set.\nVelocity stepping has been enabled by setting the iuse_velocity_step parameter to 1  (see BoundaryConditions.VelocityStep.initialize! for more details).\nThe first velocity step time (velocity_first_step_time) has been set using the  BoundaryConditions.VelocityStep.initialize!  function or loaded from the model input file. The second velocity step time (velocity_second_step_time) is optional and only required if a second velocity step is desired.  \nFull extensions velocities for all phases (full_velocity_extension, full_velocity_extension_step1  have been set using the BoundaryConditions.Velocity.initialize!  function or loaded from the model input file. The second full extension velocity  (full_velocity_extension_step2) is optional and only required if a second velocity step is desired.  \n\nThe calculation procedure for this scenario is similar to Scenario 2 but modified to account for  the multiple time steps, velocity stepping factors and time step adjustment factors associated with  velocity stepping.","category":"section"},{"location":"models/model_execution/batch_local_execution/#Batch-Local-Execution","page":"Batch Local Execution","title":"Batch Local Execution","text":"The function local_model_loop can be used for batch  execution of models on local machines. The example below shows a module  called RunitLoop that allows the user to spawn multiple models as background processes. This involves a dictionary called `models \n\nmodule RunitLoop\n\nusing EarthBox\n\nfunction run_local_models()::Nothing\n    base_path = \"/home/$(get_username())/apps/julia/EarthBox/models/extension_to_sfs\"\n    models = Dict(\n        \"$(base_path)/extension_strong_zones\" => [\"case1\"],\n        \"$(base_path)/extension_weak_fault\" => [\"case2\"],\n    )\n    local_model_loop(\n        models       = models,\n        run_model    = true,\n        plot_markers = false,\n        plot_scalars = false,\n        istart       = 1,\n        iend         = 100\n    )\n    return nothing\nend\n\nfunction main()\n    run_local_models()\nend\n\nend # module\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    RunitLoop.main()\nend","category":"section"},{"location":"models/model_execution/batch_local_execution/#Local-Model-Loop","page":"Batch Local Execution","title":"Local Model Loop","text":"","category":"section"},{"location":"models/model_execution/batch_local_execution/#EarthBox.RunTools.local_model_loop","page":"Batch Local Execution","title":"EarthBox.RunTools.local_model_loop","text":"local_model_loop(;\n    models::Dict{String, Vector{String}},\n    model_dir_path::String,\n    run_model::Union{Bool, Nothing} = nothing,\n    plot_markers::Union{Bool, Nothing} = nothing,\n    plot_scalars::Union{Bool, Nothing} = nothing,\n    istart::Union{Int64, Nothing} = nothing,\n    iend::Union{Int64, Nothing} = nothing\n)\n\nExecute a script locally by looping over the function execute_remote_script_in_background for each model case.\n\n!!! WARNING !!! This function is for Linux/Unix systems only.\n\nArguments\n\nmodels::Dict{String, Vector{String}}\nA dictionary of model directories containing Model.jl and Plot.jl scripts    and model case names like:\n\"/path/to/model_dir1\" => [\"case0\", \"case1\", \"case2\"]\n\"/path/to/model_dir2\" => [\"case3\", \"case4\", \"case5\"]\nrun_model::Union{Bool, Nothing}\nRun the model (default: nothing)\nplot_markers::Union{Bool, Nothing}\nPlot markers (default: nothing)\nplot_scalars::Union{Bool, Nothing}\nPlot scalars (default: nothing)\nistart::Union{Int64, Nothing}\nStart index for plotting (default: nothing)\niend::Union{Int64, Nothing}\nEnd index for plotting (default: nothing)\n\n\n\n\n\n","category":"function"},{"location":"models/spreading_center/spreading_center/#Seafloor-Spreading-Model-with-Melting,-Melt-Extraction-and-Extrusion","page":"Spreading Center","title":"Seafloor Spreading Model with Melting, Melt Extraction and Extrusion","text":"see EarthBox/models/spreading_center","category":"section"},{"location":"methods/discretization/marker_distribution/#Marker-Distribution","page":"Marker Distribution","title":"Marker Distribution","text":"Marker coordinates (x_m y_m) are initialized using the following equations:","category":"section"},{"location":"methods/discretization/marker_distribution/#eq:marker-coordinates","page":"Marker Distribution","title":"eq:marker-coordinates","text":"beginsplit\nx_m  = j_m Delta x_m - 05 Delta x_m + (r_j_m - 05) Delta x_m \ny_m  = i_m Delta y_m - 05 Delta y_m + (r_i_m - 05) Delta y_m\nendsplit\n\nwhere i_m is the marker index in the x-direction ranging from 1 to N_xm  with N_xm equal to the total number of markers in the x-direction, j_m  is the marker index in the y-direction ranging from from 1 to N_ym with  N_ym equal to the total number of markers in the y-direction,  Delta x_m is the average marker spacing in the x-direction, Delta y_m  is the average marker spacing in the y-direction, and r_i_m and r_j_m  are random numbers in the range 01. N_xm and N_ym are  calculated using average marker spacings Delta x_m and Delta y_mand model  domain dimensions x_size and y_size as follows:","category":"section"},{"location":"methods/discretization/marker_distribution/#eq:marker-dimensions","page":"Marker Distribution","title":"eq:marker-dimensions","text":"beginsplit\n    N_xm = fracx_sizeDelta x_m \n    N_ym = fracy_sizeDelta y_m text\nendsplit\n\nThe global marker index m is related to the indices i_m and j_m as follows:","category":"section"},{"location":"methods/discretization/marker_distribution/#eq:global-marker-index","page":"Marker Distribution","title":"eq:global-marker-index","text":"m = (j_m - 1) N_ym + i_m text\n\nand the total number of markers N_m is given by:","category":"section"},{"location":"methods/discretization/marker_distribution/#eq:markers-total-number","page":"Marker Distribution","title":"eq:markers-total-number","text":"N_m = N_xmN_ym text","category":"section"},{"location":"models/lithospheric_extension/extension_strong_zones/#Lithospheric-Extension-with-Strong-Lateral-Zones","page":"Lithospheric Extension with Strong Lateral Zones","title":"Lithospheric Extension with Strong Lateral Zones","text":"Lithospheric extension where frictional plastic properties in the central  region of the model domain undergo strain weakening whereas strong lateral zones  do not undergo strain weakening. \n\nsee EarthBox/models/lithospheric_extension/extension_strong_zones","category":"section"},{"location":"api/melt_model/melt_extrusion/#MeltExtrusion","page":"MeltExtrusion","title":"MeltExtrusion","text":"","category":"section"},{"location":"api/melt_model/melt_extrusion/#Initialization","page":"MeltExtrusion","title":"Initialization","text":"Extruded material is defined using material types called  \"ExtrudedGabbroicMagma\" (extruded lava) and \"SolidifiedBasalt\" (solidified lava). These two material types must be defined in the  material model for the extrusion model to work. See Material Types for more information about material types. \n\nThe volume of extruded volcanic material is calculated as the product of the extrusion volume factor and the total incremental volume of magma  produced within the mantle in a given migration domain.\n\nThe flow distance of individual lava flows is controlled by the residual lava thickness, total volume of the flow and surface relief. Lava flows will  advance only after the residual lava thickness has been reached and a  downward slope is present.\n\nThe characteristic volume of lava per flow is equal to the product of the characteristic flow length and the residual lava thickness, which  have different values for subaerial and submarine flows. The total number of lava flows per time step is calculated as the total volume of magma produced in a particular migration domain divided by the characteristic volume of lava per flow. The flow distance of a given lava flow is directly proportional to the characteristic flow length and inversely  proportional to the residual lava thickness.\n\nThe location of extrusion at the surface is controlled by the extrusion window. The center of the extrusion window is determined by  x-coordinate of the shallowest partially molten mantle marker. If  width_eruption_domain_fixed is zero then the width of the extrusion  window is defined by the minimum and maximum x-coordinates of the  partially molten or molten gabbroic material. With this model, extrusion  is spatially related to gabbroic magma chambers and gabbroic magma mush  zones (gabbro glacier). If width_eruption_domain_fixed is greater than zero, the width of the extrusion window is equal to the value of width_eruption_domain_fixed.\n\nTwo models are available for eruption location of a laval flow at the  surface within the extrusion window:\n\nProbabilistic:\nThe eruption location is chosen either randomly   (iuse_random_eruption_location = 1) or from a normal distribution   (iuse_normal_eruption_location = 1) within the extrusion window.\nStatic (iuse_random_eruption_location = 0): \nWith this option the eruption location is fixed at the midpoint of the   extrusion window.\n\nThe parameters porosity_initial_lava_flow and decay_depth_lava_flow are used to decompact extruded gabbroic magma to account for vesicles. Note that compaction during burial is not controlled by these parameters and is instead controlled by the material type.","category":"section"},{"location":"api/melt_model/melt_extrusion/#EarthBox.MeltModel.Extrusion.initialize!","page":"MeltExtrusion","title":"EarthBox.MeltModel.Extrusion.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize melt extrusion model parameters.\n\nArguments\n\nmodel::ModelData: The model data container containing the    model parameters and arrays.\n\nKeyword Arguments\n\niuse_extrusion::Int64\nInteger flag that activates melt extrusion model: 0 off; 1 on\niuse_random_eruption_location::Int64\nInteger flag that activates random eruption location: 0 off; 1 on\niuse_normal_eruption_location::Int64\nInteger flag that activates normal distribution for eruption location: 0 off; 1 on\niuse_eruption_interval::Int64\nInteger flag that activates eruption interval: 0 off; 1 on\nextrusion_volume_factor::Float64\nMinimum value for the extrusion volume factor. The volume of lava produced at the surface of the model is calculated as the product of the extrusion volume factor and the total volume of magma produced during a time step. The extrusion volume factor changes as a function of the characteristic magmatic crust height. The characteristic magmatic crust height is the height of new crust that would be formed if all the melt in the mantle was extracted and emplaced at the top of the model in a column with a width equal to the full extension velocity times the time step. This minimum value is used when the magmatic crust height is below the minimum characteristic magmatic crust height. A linear model is used to define the extrusion volume factor when the calculated magmatic crust height is between the minimum and maximum characteristic magmatic crust height.\nextrusion_volume_factor_max::Float64\nMaximum value for the extrusion volume factor. This maximum value is reached when the characteristic magmatic crust height is equal to the maximum characteristic magmatic crust height.\ncharacteristic_magmatic_crust_height_min::Float64\nMinimum reference value for the characteristic magmatic crust height in meters. When the calculated characteristic magmatic crust height is below this value the extrusion volume factor is set to the minimum value (i.e. extrusion_volume_factor).\ncharacteristic_magmatic_crust_height_max::Float64\nMaximum reference value for the characteristic magmatic crust height in meters. When the calculated characteristic magmatic crust height is above this value the extrusion volume factor is set to the maximum value (i.e. extrusion_volume_factor_max).\nwidth_eruption_domain_fixed::Float64\nFixed width of the eruption domain in meters. If this is set to zero, the width of the eruption domain is determined by the width of the gabbroic molten zone including normal and layered gabbro.\nwidth_eruption_domain_fixed_max::Float64\nMaximum width of the eruption domain. If this is set to zero, the width of the eruption domain is determined by the width of the gabbroic molten zone including normal and layered gabbro.\nresidual_lava_thickness_subaerial::Float64\nResidual lava thickness for subaerial eruptions in meters\ncharacteristic_flow_length_submarine::Float64\nCharacteristic flow length for submarine eruptions in meters.\ncharacteristic_flow_length_subaerial::Float64\nCharacteristic flow length for subaerial eruptions in meters. Flow distance of basaltic flows on land may be hundreds of kilometers (e.g. Ginkgo flow of the Frenchman Springs Member of the Columbia River Basalts has a flow length of 500 km).\nresidual_lava_thickness_submarine::Float64\nResidual lava thickness for submarine eruptions in meters\ndecimation_factor::Int64\nTopography grid decimation factor for 1D lava flow model grid\ninitial_magma_flush_steps::Int64\nNumber of time steps for initial magma flush\nmagma_flush_factor::Float64\nFactor that determines the amount of magma to flush for flush during magma flush time steps\nporosity_initial_lava_flow::Float64\nInitial porosity of lava flow in fraction used to decompact extruded gabbroic magma to account for vesicles. This parameter is not used to compact lava flows during burial. Instead, compaction properties associated with the material type are used. This allows for the decompaction of lava flows during eruption to account for porosity from vesicles and the preservation of thickness during burial due to chemical compaction and rigidity of the basalt matrix.\ndecay_depth_lava_flow::Float64\nDepth at which the porosity of lava flow decays to zero in meters. This parameter is used to compact lava flows during burial. Instead, compaction properties associated with the material type are used. This allows for the decompaction of lava flows during eruption to account for porosity from vesicles and the preservation of thickness during burial due to chemical compaction and rigidity of the basalt matrix.\neruption_interval_yr::Float64\nEruption interval in years\n\n\n\n\n\n","category":"function"},{"location":"material_library/material_library/#MaterialLibrary","page":"MaterialLibrary","title":"MaterialLibrary","text":"The MaterialLibrary struct provides access to material collections files that are packaged with EarthBox. See Material Collection Files for more information about the format of material collection library files.\n\nMaterial Collection Tables\n\nMaterial Collection: lithospheric_deformation_eb1","category":"section"},{"location":"material_library/material_library/#Example:-Accessing-Material-Collection-Files-and-Material-Names","page":"MaterialLibrary","title":"Example: Accessing Material Collection Files and Material Names","text":"using EarthBox\n\nlib = MaterialLibraryCollection.MaterialLibrary();\n\nlith_collections = lib.lithospheric_deformation;\n\ncollection = lith_collections.lithospheric_deformation_eb1;\npath = collection.path\nmaterials = collection.materials\n\ncollection = lith_collections.lithospheric_deformation_naliboff17;\npath = collection.path\nmaterials = collection.materials\n\ncollection = lith_collections.lithospheric_deformation_naliboff17corrected;\nlib_path = collection.path\nmat_names = collection.materials\n\ncollection = lith_collections.lithosphere_deformation_brune14;\nlib_path = collection.path\nmat_names = collection.materials\n\ncollection = lith_collections.lithosphere_deformation_brune14corrected\nlib_path = collection.path\nmat_names = collection.materials\n\npath = lib.benchmarks.path\nmaterials = lib.benchmarks.materials\n\npath = lib.gerya2019.path\nmaterials = lib.gerya2019.materials\n\npath = lib.viscoelastoplastic.path\nmaterials = lib.viscoelastoplastic.materials\n\npath = lib.simple_mantle_melting.path\nmaterials = lib.simple_mantle_melting.materials\n\npath = lib.seafloor_spreading.path\nmaterials = lib.seafloor_spreading.materials\n","category":"section"},{"location":"material_library/material_library/#EarthBox.MaterialLibraryCollection.MaterialLibrary","page":"MaterialLibrary","title":"EarthBox.MaterialLibraryCollection.MaterialLibrary","text":"MaterialLibrary\n\nThe material library struct is composed of material collections that define  material names associated with a material collection and the path to a yamal  formatted file with material properties associated with each material name in  the collection.\n\nFields\n\nlithospheric_deformation::LithosphericDeformationCollections:\nCollection of material collections for lithospheric deformation models.\nSee yamal files in src/materiallibrary/registries/lithosphericdeformation.\nsandbox::MaterialCollection:\nMaterial names and material collection file path for sandbox experiments.\nSee yamal files in src/material_library/registries/sandbox.\nbenchmarks::MaterialCollection:\nMaterial names and material collection file path for benchmark models.\nSee yamal files in src/material_library/registries/benchmarks.\ngerya2019::MaterialCollection:\nMaterial names and material collection file path for the models of Gerya (2019).\nSee yamal files in src/material_library/registries/gerya2019.\nviscoelastoplastic::MaterialCollection:\nMaterial names and material collection file path for viscoelasto-plastic models.\nSee yamal files in src/material_library/registries/viscoelastoplastic.\nsimple_mantle_melting::MaterialCollection:\nMaterial names and material collection file path for the simple mantle melting model.\nSee yamal files in src/materiallibrary/registries/simplemantle_melting.\nseafloor_spreading::MaterialCollection:\nMaterial names and material collection file path for the seafloor spreading model.\nSee yamal files in src/materiallibrary/registries/seafloorspreading.\n\n\n\n\n\n","category":"type"},{"location":"material_library/material_library/#EarthBox.MaterialLibraryCollection.MaterialCollectionManager.MaterialCollection","page":"MaterialLibrary","title":"EarthBox.MaterialLibraryCollection.MaterialCollectionManager.MaterialCollection","text":"MaterialCollection\n\nFields\n\nmaterials::NamedTuple:\nNamed tuple of material names associated with the material collection.\npath::String:\nPath to the yaml formatted material collection file with groups of materials and their properties.\n\n\n\n\n\n","category":"type"},{"location":"material_library/material_library/#EarthBox.MaterialLibraryCollection.LithosphericDeformationRegistry.LithosphericDeformationCollections","page":"MaterialLibrary","title":"EarthBox.MaterialLibraryCollection.LithosphericDeformationRegistry.LithosphericDeformationCollections","text":"LithosphericDeformationCollections\n\nThe lithospheric deformation collections are a collection of material collections for the lithospheric deformation models.\n\nSee yamal files in src/materiallibrary/registries/lithosphericdeformation.\n\nFields\n\nlithospheric_deformation_eb1::MaterialCollection:\nMaterial names and collection file path for the lithospheric deformation model eb1  with moderate crustal flow strength (GT95; R06; no scaling factors), mantle   flow laws from HK03, moderate plastic yield strength (cohesion 20 to 10 Pa from plastic strain 0 to 0.1),   moderate radiogenic heat production (upper crust 1.8e-6 microW/m^3; lower crust 0.5e-6 microW/m^3).\nlithospheric_deformation_naliboff17::MaterialCollection:\nMaterial names and collection file path for the lithospheric deformation model naliboff17corrected   based on Naliboff et al. (2017) but with temperature-pressure dependent   rock properties and melt extraction and corrected pre-exponential term for   wet anorthite dislocation creep that includes the water fugacity term.\nlithospheric_deformation_brune14::MaterialCollection:\nMaterial names and collection file path for the lithospheric deformation model brune14corrected  based on Brune et al. (2014) but with temperature-pressure dependent   rock properties and melt extraction and corrected pre-exponential terms for   dislocation and diffusion creep.\n\n\n\n\n\n","category":"type"},{"location":"plot_tools/marker_plots/#Plotting-Marker-Swarms","page":"Marker Swarm Plots","title":"Plotting Marker Swarms","text":"","category":"section"},{"location":"plot_tools/marker_plots/#EarthBox.PlotToolsManager.ModelPlots2DManager.plot_markers","page":"Marker Swarm Plots","title":"EarthBox.PlotToolsManager.ModelPlots2DManager.plot_markers","text":"plot_markers(;\n    plot_type::Union{String, Symbol},\n    model_output_path::String,\n    material_library_file_path::String,\n    material_model_file_path::Union{String, Nothing}=nothing,\n    materials_input_dict::Union{Dict, Nothing}=nothing,\n    dimensions::Tuple{Float64, Float64, Float64, Float64},\n    xyspacing::Tuple{Float64, Float64},\n    istart::Int64 = 1,\n    iend::Union{Int64, Nothing} = nothing,\n    kwargs...\n)::Nothing\n\nArguments\n\nplot_type::Union{String, Symbol}:\nType of marker plot to plot\nmodel_output_path::String:\nPath to output directory containing model output files\nmaterial_library_file_path::String:\nPath to material collection library file with yaml format. See   Material Collection Files for more information.\nmaterial_model_file_path::Union{String, Nothing}:\nPath to material model input file with yaml format. See   Material Input Files for more information.\nmaterials_input_dict::Union{Dict, Nothing}:\nDictionary of material inputs where keys are material ID's and each key refers to a   dictionary with keys for mat_name, mat_type, mat_domain,   red_fraction, green_fraction and blue_fraction. See   Material Input Dictionaries for more information.\ndimensions::Tuple{Float64, Float64, Float64, Float64}:\nDimensions of plot: (xmin, xmax, ymin, ymax)\nxyspacing::Tuple{Float64, Float64}:\nSpacing of ticks for the x and y axes: (xspacing, yspacing)\nistart::Int64 = 1:\nInitial starting time step\niend::Union{Int64, Nothing} = nothing:\nFinal ending time step\n\nValid Plot Types\n\nComposition\nMarker composition is plotted using RBG values associated with each material\nCompositionHeatFlow\nMarker composition is plotted using RBG values associated with each material\nSurface heat flow is plotted above the composition plot.\nCompositionGravity\nMarker composition is plotted using RBG values associated with each material\nSurface gravity is plotted above the composition plot.\nCompositionHeatFlowGravity\nMarker composition is plotted using RBG values associated with each material\nSurface heat flow and gravity are plotted above the composition plot.\nPlasticFailure\nMarker plastic failure is plotted using a color map associated with the plastic failure criterion.\nDensity\nMarker density is plotted using a color map associated with the density.\n\nOptional Marker Plot Keyword Arguments\n\nGeneral Marker Plot Parameters\n\nmarker_size::Float64: Size of the markers (default: 1.0)\nplot_contour_labels::Bool: Plot contour labels (default: false)\ncontour_line_width::Float64: Width of the contour lines (default: 0.5)\ncontour_line_color::{String, Symbol}: Contour line color (default: \"black\")\ndecimation_factor_scatter_overlay::Int: Decimation factor for scatter overlays (default: 1)\nnx_contour_grid::Int: Number of interpolation grid points in x-direction (default: 50)\nny_contour_grid::Int: Number of interpolation grid points in y-direction (default: 50)\ncolorbar_shift_factor::Float64: Shift factor for color bar (default: 0.0)\ndecimation_factor::Int: Decimation factor for scatter plots (default: 1)\n\nBase Level Plot Parameters\n\nplot_base_level::Bool: Whether to plot the base level (default: false)\nbase_level_line_width::Float64: Width of the base level lines (default: 0.5)\nbase_level_line_color::{String, Symbol}: Color of the base level lines (default: \"blue\")\n\nTopography Plot Parameters\n\nplot_topography::Bool: Whether to plot topography (default: false)\ntopo_line_width::Float64: Width of the topography lines (default: 0.5)\ntopo_line_color::{String, Symbol}: Color of the topography lines (default: \"black\")\n\nPlastic Strain Plot Parameters\n\nplot_plastic_strain::Bool: Plot marker plastic strain (default: false)\nstrain_min::Float64: Minimum strain value (default: 1.0)\nstrain_max::Float64: Maximum strain value (default: 6.0)\nstrain_contour_interval::Float64: Interval for strain contours (default: 0.25)\nstrain_cmap::{String, Symbol}: Colormap for strain plot (default: \"inferno\")\n\nPlastic Strain Rate Plot Parameters\n\nplot_plastic_strain_rate::Bool: Plot marker plastic strain rate (default: false)\nstrain_rate_min::Float64: Minimum strain rate value in log10(1/s) (default: -18)\nstrain_rate_max::Float64: Maximum strain rate value in log10(1/s) (default: -12)\nstrain_rate_contour_interval::Float64: Interval for strain rate contours in log10(1/s) (default: 1.0)\nstrain_rate_cmap::{String, Symbol}: Colormap for strain rate plot (default: \"Reds\")\n\nSediment Age Plot Parameters\n\nplot_sediment_age::Bool: Plot marker sediment age (default: false)\nage_min::Float64: Minimum age in Myr value (default: 0.0)\nage_max::Float64: Maximum age in Myr value (default: 10.0)\nage_contour_interval::Float64: Interval for age contours in Myr (default: 1.0)\nage_cmap::{String, Symbol}: Colormap for age plot (default: \"rainbow\")\n\nVolcanics Age Plot Parameters\n\nplot_volcanics_age::Bool: Plot marker volcanics age (default: false)\nage_min_volcanics::Float64: Minimum volcanics age in Myr value (default: 0.0)\nage_max_volcanics::Float64: Maximum volcanics age in Myr value (default: 10.0)\nage_contour_interval_volcanics::Float64: Interval for volcanics age contours in Myr (default: 1.0)\n\nIntrusive Age Plot Parameters\n\nplot_intrusive_age::Bool: Plot marker intrusive age (default: false)\nage_min_intrusive::Float64: Minimum intrusive age in Myr value (default: 0.0)\nage_max_intrusive::Float64: Maximum intrusive age in Myr value (default: 10.0)\nage_contour_interval_intrusive::Float64: Interval for intrusive age contours in Myr (default: 1.0)\n\nMelt Fraction Plot Parameters (only for mantle melting)\n\nplot_meltfrac::Bool: Plot marker melt fraction (default: false)\nplot_meltfrac_contours::Bool: Plot melt fraction contours (default: false)\n\nExtracted Melt Fraction Plot Parameters (only for mantle melting)\n\nplot_extracted_meltfrac::Bool: Plot marker extracted melt fraction (default: false)\nplot_extracted_meltfrac_contours::Bool: Plot extracted melt fraction contours (default: false)\n\nExtractable Melt Fraction Plot Parameters (only for mantle melting)\n\nplot_extractable_meltfrac::Bool: Plot marker extractable melt fraction (default: false)\nplot_extractable_meltfrac_contours::Bool: Plot extractable melt fraction contours (default: false)\n\nParameters for All Melt-fraction Plots (only for mantle melting)\n\nmelt_fraction_min::Float64: Minimum melt fraction value (default: 0.0)\nmelt_fraction_max::Float64: Maximum melt fraction value (default: 1.0)\nmelt_fraction_contour_interval::Float64: Interval for melt fraction contours (default: 0.1)\nmeltfrac_cmap::{String, Symbol}: Colormap for melt fraction plot (default: \"inferno\")\nmeltfrac_contour_color::{String, Symbol}: Contour color for melt fraction plot (default: \"red\")\nmeltfrac_number_format::String: Number format for melt fraction contours (default: \"%6.2f\")\n\nSerpentinization Plot Parameters\n\nplot_serpentinization::Bool: Plot marker serpentinization (default: false)\nserpentinization_min::Float64: Minimum serpentinization fraction value (default: 0.0)\nserpentinization_max::Float64: Maximum serpentinization fraction value (default: 1.0)\nserpentinization_contour_interval::Float64: Interval for serpentinization fraction contours (default: 0.1)\nserpentinization_cmap::{String, Symbol}: Colormap for serpentinization plot (default: \"inferno\")\n\nDensity Plot Parameters\n\nplot_density::Bool: Plot marker density (default: false)\ndensity_min::Float64: Minimum density value in kg/m^3 (default: 0.0)\ndensity_max::Float64: Maximum density value in kg/m^3 (default: 3000.0)\ndensity_contour_interval::Float64: Interval for density contours in kg/m^3 (default: 100.0)\n\nGrid Temperature Contour Plot Parameters\n\nplot_temperature_contours::Bool: Whether to plot temperature contours (default: false)\ntemperature_min::Float64: Minimum temperature value in Celsius (default: 0.0)\ntemperature_max::Float64: Maximum temperature value in Celsius (default: 1300.0)\ntemperature_contour_interval::Float64: Interval for temperature contours in Celsius (default: 100.0)\ntemperature_contour_color::{String, Symbol}: Contour color for temperature plot (default: \"black\")\ntemperature_number_format::String: Number format for temperature contours (default: \"%6.1f\")\n\nHeat flow and gravity subplot parameters\n\nheatflow_min::Float64: Minimum heat flow value in mW/m^2 (default: 0.0)\nheatflow_max::Float64: Maximum heat flow value in mW/m^2 (default: 200.0)\nheatflow_spacing::Float64: Spacing between heat flow ticks on y-axis in mW/m^2 (default: 50.0)\ngravity_min::Float64: Minimum gravity value in mgal (default: -200.0)\ngravity_max::Float64: Maximum gravity value in mgal (default: 200.0)\ngravity_spacing::Float64: Spacing between gravity ticks on y-axis in mgal (default: 50.0)\nheight_ratios::Vector{Float64}: Relative height ratios for subplots (default: [0.25, 0.25, 0.75])\n\nOptional General Plotting Keyword Arguments\n\nnsteps::Int: \nNumber of time steps to plot\nnskip::Int: \nNumber of time steps to skip\nistart::Int: \nInitial starting time step\niplot_contour_labels::Int:\n0 = off; 1 = plot contour labels\ncolor_map::Union{String, Symbol}:\ncolor map name for scalar grid plots (see https://docs.makie.org/dev/explanations/colors)\nfigure_dpi::Float64:\nDots per square inch for figures\nfigsize::Tuple{Float64, Float64}:\nFigure size in inches in x-y directions\nlength_units::String:\nLength units for plots (\"km\", \"m\", \"cm\")\ntime_units::String:\nTime units for plots (\"Myr\", \"yr\", \"s\")\nvelocity_units::String:\nVelocity units for plots (\"cm/yr\", \"cm/hr\", \"m/s\", \"m/yr\", \"mm/yr\")\ntemperature_units::String:\nTemperature units for plots (\"C\", \"K\")\nviscosity_units::String:\nViscosity units for plots (\"Pa.s\", \"log10(Pa.s)\")\nstrainrate_units::String:\nStrain rate units for plots (\"1/s\", \"log10(1/s)\")\npressure_units::String:\nPressure units for plots (\"Pa\", \"GPa\", \"MPa\")\nstress_units::String:\nStress units for plots (\"Pa\", \"GPa\", \"MPa\")\nlinewidth::Float64:\nLine width for plots\nedgecolor::String:\nEdge color for plots\nshow_nodes::Bool:\nShow nodes on plots\ndimensions::Tuple{Float64, Float64, Float64, Float64}:\nDimensions of plot: (xmin, xmax, ymin, ymax)\ndim_close_up::Union{Tuple{Float64, Float64, Float64, Float64}, Nothing}:\nDimensions of zoomed in plot: (xmin, xmax, ymin, ymax)\nxyspacing::Tuple{Float64, Float64}:\nSpacing of ticks for the x and y axes: (xspacing, yspacing)\nxy_location_contour_legend::Tuple{Float64, Float64}:\nLocation of low-left-hand corner of contour legend\ntitle_fontsize::Int:\nFont size for title\naxis_title_fontsize::Int:\nFont size for axis titles\naxis_labels_fontsize::Int:\nFont size for axis labels\naxis_ticks_fontsize::Int:\nFont size for axis ticks\ncontour_label_fontsize::Int:\nFont size for contour labels\nnumber_format::String:\nNumber format for contours (e.g. \"%6.1f\")\nlegend_fontsize::Int:\nFont size for legend\ncolorbar_ticks_fontsize::Int:\nFont size for color bar ticks\ncolorbar_labels_fontsize::Int:\nFont size for color bar labels\ntext_box_font_size::Int:\nFont size for text box\nextension::String:\nExtension for plots (e.g. \".png\", \".pdf\")\n\n\n\n\n\n","category":"function"},{"location":"material_library/collections/benchmarks/#Material-Collection:-benchmarks","page":"Collection: Benchmarks","title":"Material Collection: benchmarks","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#Material-List:-Single-material-Benchmarks","page":"Collection: Benchmarks","title":"Material List: Single-material Benchmarks","text":"Viscoelastic_Material\nMaterialForSolidBodyRotation\nLayer1RayleighTaylor\nLayer2RayleighTaylor\nIsoviscousFluidBlankenbach89\nIsoviscousFluid1AroundElasticSlab\nIsoviscousFluid2AroundElasticSlab\nViscoelasticSlabMaterial1\nViscoelasticSlabMaterial2\nNonNewtonianMaterialChannelFlowBenchmark\nConstantViscosityChannel\nConstantViscosityChannelVariableThermalConductivity\nTempDependentViscosityCouetteFlowBenchmark","category":"section"},{"location":"material_library/collections/benchmarks/#Material-List:-Kaus10-Plasticity-Benchmark","page":"Collection: Benchmarks","title":"Material List: Kaus10 Plasticity Benchmark","text":"StickyAirKaus10\nCrustKaus10\nWeakSeedKaus10","category":"section"},{"location":"material_library/collections/benchmarks/#Material-List:-Flexure-with-Triangular-Hole-Benchmark","page":"Collection: Benchmarks","title":"Material List: Flexure with Triangular Hole Benchmark","text":"FlexTestStickyWater\nFlexTestIsoviscousCrust\nFlexTestIsoviscousMantle","category":"section"},{"location":"material_library/collections/benchmarks/#Material-List:-Visco-elastic-Extension-and-Contraction-Benchmarks","page":"Collection: Benchmarks","title":"Material List: Visco-elastic Extension and Contraction Benchmarks","text":"ViscoelasticExtensionStickyAir\nViscoelasticExtensionStickyWater\nViscoelasticExtensionSediment\nViscoelasticExtensionUpperCrust\nViscoelasticExtensionLowerCrust\nViscoelasticExtensionUpperCrustStrong\nViscoelasticExtensionLowerCrustStrong\nViscoelasticExtensionMantle","category":"section"},{"location":"material_library/collections/benchmarks/#Material-List:-Simple-Sedimentation-Benchmark","page":"Collection: Benchmarks","title":"Material List: Simple Sedimentation Benchmark","text":"SimpleSedStickyAir\nSimpleSedStickyWater\nSimpleSedSedimentWetQuartziteGT95\nSimpleSedPeridotiteDryKK08\nSimpleSedSalt","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Summary","page":"Collection: Benchmarks","title":"Material Summary","text":"Collection File Path\n\nsrc/material_library/registries/benchmarks/benchmarks.yml","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables","page":"Collection: Benchmarks","title":"Material Tables","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-Viscoelastic_Stress_Buildup","page":"Collection: Benchmarks","title":"Material Tables: Viscoelastic_Stress_Buildup","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#Viscoelastic_Material","page":"Collection: Benchmarks","title":"Viscoelastic_Material","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Stress_Buildup\", \n    material_name = \"Viscoelastic_Material\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-Solid_Body_Rotation_Benchmark","page":"Collection: Benchmarks","title":"Material Tables: Solid_Body_Rotation_Benchmark","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#MaterialForSolidBodyRotation","page":"Collection: Benchmarks","title":"MaterialForSolidBodyRotation","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Solid_Body_Rotation_Benchmark\", \n    material_name = \"MaterialForSolidBodyRotation\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-Rayleigh_Taylor_Instability_Benchmark","page":"Collection: Benchmarks","title":"Material Tables: Rayleigh_Taylor_Instability_Benchmark","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#Layer1RayleighTaylor","page":"Collection: Benchmarks","title":"Layer1RayleighTaylor","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Rayleigh_Taylor_Instability_Benchmark\", \n    material_name = \"Layer1RayleighTaylor\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Layer2RayleighTaylor","page":"Collection: Benchmarks","title":"Layer2RayleighTaylor","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Rayleigh_Taylor_Instability_Benchmark\", \n    material_name = \"Layer2RayleighTaylor\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-Box_Convection_Benchmark","page":"Collection: Benchmarks","title":"Material Tables: Box_Convection_Benchmark","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#IsoviscousFluidBlankenbach89","page":"Collection: Benchmarks","title":"IsoviscousFluidBlankenbach89","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Box_Convection_Benchmark\", \n    material_name = \"IsoviscousFluidBlankenbach89\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-Elastic_Slab_Benchmark","page":"Collection: Benchmarks","title":"Material Tables: Elastic_Slab_Benchmark","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#IsoviscousFluid1AroundElasticSlab","page":"Collection: Benchmarks","title":"IsoviscousFluid1AroundElasticSlab","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Elastic_Slab_Benchmark\", \n    material_name = \"IsoviscousFluid1AroundElasticSlab\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#IsoviscousFluid2AroundElasticSlab","page":"Collection: Benchmarks","title":"IsoviscousFluid2AroundElasticSlab","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Elastic_Slab_Benchmark\", \n    material_name = \"IsoviscousFluid2AroundElasticSlab\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticSlabMaterial1","page":"Collection: Benchmarks","title":"ViscoelasticSlabMaterial1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Elastic_Slab_Benchmark\", \n    material_name = \"ViscoelasticSlabMaterial1\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticSlabMaterial2","page":"Collection: Benchmarks","title":"ViscoelasticSlabMaterial2","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Elastic_Slab_Benchmark\", \n    material_name = \"ViscoelasticSlabMaterial2\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-Plasticity_Benchmark_Kaus10","page":"Collection: Benchmarks","title":"Material Tables: Plasticity_Benchmark_Kaus10","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#StickyAirKaus10","page":"Collection: Benchmarks","title":"StickyAirKaus10","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Plasticity_Benchmark_Kaus10\", \n    material_name = \"StickyAirKaus10\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#CrustKaus10","page":"Collection: Benchmarks","title":"CrustKaus10","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Plasticity_Benchmark_Kaus10\", material_name = \"CrustKaus10\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#WeakSeedKaus10","page":"Collection: Benchmarks","title":"WeakSeedKaus10","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Plasticity_Benchmark_Kaus10\", \n    material_name = \"WeakSeedKaus10\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-NonNewtonian_Channel_Flow_Benchmark","page":"Collection: Benchmarks","title":"Material Tables: NonNewtonian_Channel_Flow_Benchmark","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#NonNewtonianMaterialChannelFlowBenchmark","page":"Collection: Benchmarks","title":"NonNewtonianMaterialChannelFlowBenchmark","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"NonNewtonian_Channel_Flow_Benchmark\", \n    material_name = \"NonNewtonianMaterialChannelFlowBenchmark\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Table:-Channel_Flow_Non_Steady_Temperature_Benchmark","page":"Collection: Benchmarks","title":"Material Table: Channel_Flow_Non_Steady_Temperature_Benchmark","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#ConstantViscosityChannel","page":"Collection: Benchmarks","title":"ConstantViscosityChannel","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Channel_Flow_Non_Steady_Temperature_Benchmark\", \n    material_name = \"ConstantViscosityChannel\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-Channel_Flow_Variable_Conductivity","page":"Collection: Benchmarks","title":"Material Tables: Channel_Flow_Variable_Conductivity","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#ConstantViscosityChannelVariableThermalConductivity","page":"Collection: Benchmarks","title":"ConstantViscosityChannelVariableThermalConductivity","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Channel_Flow_Variable_Conductivity\", \n    material_name = \"ConstantViscosityChannelVariableThermalConductivity\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-TempDependentViscosityCouetteFlowBenchmark","page":"Collection: Benchmarks","title":"Material Tables: TempDependentViscosityCouetteFlowBenchmark","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#TempDependentViscosityCouetteFlowBenchmark","page":"Collection: Benchmarks","title":"TempDependentViscosityCouetteFlowBenchmark","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"TempDependentViscosityCouetteFlowBenchmark\", \n    material_name = \"TempDependentViscosityCouetteFlowBenchmark\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Tables:-FlexureTest_Triangular_Load","page":"Collection: Benchmarks","title":"Material Tables: FlexureTest_Triangular_Load","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#FlexTestStickyWater","page":"Collection: Benchmarks","title":"FlexTestStickyWater","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"FlexureTest_Triangular_Load\", \n    material_name = \"FlexTestStickyWater\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#FlexTestIsoviscousCrust","page":"Collection: Benchmarks","title":"FlexTestIsoviscousCrust","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"FlexureTest_Triangular_Load\", \n    material_name = \"FlexTestIsoviscousCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#FlexTestIsoviscousMantle","page":"Collection: Benchmarks","title":"FlexTestIsoviscousMantle","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"FlexureTest_Triangular_Load\", \n    material_name = \"FlexTestIsoviscousMantle\"\n    )\nMarkdown.parse(table_str)\n\n`","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Table:-Viscoelastic_Extension","page":"Collection: Benchmarks","title":"Material Table: Viscoelastic_Extension","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticExtensionStickyAir","page":"Collection: Benchmarks","title":"ViscoelasticExtensionStickyAir","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Extension\", \n    material_name = \"ViscoelasticExtensionStickyAir\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticExtensionStickyWater","page":"Collection: Benchmarks","title":"ViscoelasticExtensionStickyWater","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Extension\", \n    material_name = \"ViscoelasticExtensionStickyWater\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticExtensionSediment","page":"Collection: Benchmarks","title":"ViscoelasticExtensionSediment","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Extension\", \n    material_name = \"ViscoelasticExtensionSediment\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticExtensionUpperCrust","page":"Collection: Benchmarks","title":"ViscoelasticExtensionUpperCrust","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Extension\", \n    material_name = \"ViscoelasticExtensionUpperCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticExtensionLowerCrust","page":"Collection: Benchmarks","title":"ViscoelasticExtensionLowerCrust","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Extension\", \n    material_name = \"ViscoelasticExtensionLowerCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticExtensionUpperCrustStrong","page":"Collection: Benchmarks","title":"ViscoelasticExtensionUpperCrustStrong","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Extension\", \n    material_name = \"ViscoelasticExtensionUpperCrustStrong\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticExtensionLowerCrustStrong","page":"Collection: Benchmarks","title":"ViscoelasticExtensionLowerCrustStrong","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Extension\", \n    material_name = \"ViscoelasticExtensionLowerCrustStrong\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#ViscoelasticExtensionMantle","page":"Collection: Benchmarks","title":"ViscoelasticExtensionMantle","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Viscoelastic_Extension\", \n    material_name = \"ViscoelasticExtensionMantle\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#Material-Table:-Simple_Sedimentation","page":"Collection: Benchmarks","title":"Material Table: Simple_Sedimentation","text":"","category":"section"},{"location":"material_library/collections/benchmarks/#SimpleSedStickyAir","page":"Collection: Benchmarks","title":"SimpleSedStickyAir","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Simple_Sedimentation\", \n    material_name = \"SimpleSedStickyAir\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#SimpleSedStickyWater","page":"Collection: Benchmarks","title":"SimpleSedStickyWater","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Simple_Sedimentation\", \n    material_name = \"SimpleSedStickyWater\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#SimpleSedSedimentWetQuartziteGT95","page":"Collection: Benchmarks","title":"SimpleSedSedimentWetQuartziteGT95","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Simple_Sedimentation\", \n    material_name = \"SimpleSedSedimentWetQuartziteGT95\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#SimpleSedPeridotiteDryKK08","page":"Collection: Benchmarks","title":"SimpleSedPeridotiteDryKK08","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Simple_Sedimentation\", \n    material_name = \"SimpleSedPeridotiteDryKK08\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/benchmarks/#SimpleSedSalt","page":"Collection: Benchmarks","title":"SimpleSedSalt","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().benchmarks,\n    target_collection_name = \"Simple_Sedimentation\", \n    material_name = \"SimpleSedSalt\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"api/markers/viscous_strain_softening/#MarkerViscousStrainSoftening","page":"MarkerViscousStrainSoftening","title":"MarkerViscousStrainSoftening","text":"","category":"section"},{"location":"api/markers/viscous_strain_softening/#Initialization","page":"MarkerViscousStrainSoftening","title":"Initialization","text":"","category":"section"},{"location":"api/markers/viscous_strain_softening/#EarthBox.Markers.MarkerMaterials.MarkerViscousStrainSoftening.initialize!","page":"MarkerViscousStrainSoftening","title":"EarthBox.Markers.MarkerMaterials.MarkerViscousStrainSoftening.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize marker viscous strain softening for plasticity models. This initializes  the iuse_viscous_strain_soft and vsoftfac parameters in the model data container  and is required for all models that use viscous strain softening whereby the pre-exponential term for dislocation creep is modified by a function of plastic strain and the strain softening  factor vsoftfac.\n\nArguments\n\nmodel::ModelData: The model data container containing the model parameters and arrays.\n\nKeyword Arguments\n\niuse_viscous_strain_soft::Union{Int, Nothing}=nothing:\nViscous strain softening: 0 off; 1 on\nvsoftfac::Union{Float64, Nothing}=nothing:\nSoftening factor multiplied by power-law pre-exponential\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/latent_heat_update/#Latent-Heat-Update-Steps","page":"Latent Heat Update Steps","title":"Latent Heat Update Steps","text":"[1] Update the adiabatic coefficient c_adim to include latent heat using equation eq:effective-adiabatic-coefficient with current adiabatic coefficient c_adim to define the adiabatic coefficient prior to this update step, latent heat of fusion L_m and equation eq:partial-melt-fraction-pressure to calculate the partial derivative of melt fraction with respect to pressure with marker temperature T_m and pressure P_m.\n\n[2] Update marker heat capacity C_pm to include latent heat using equation eq:effective-heat-capacity with current heat capacity C_pm to define the heat capacity prior to this update step, latent heat of fusion L_m and equation eq:partial-melt-fraction-temperature to calculate the partial derivative of melt fraction with respect to temperature with marker temperature T_m and pressure P_m.","category":"section"},{"location":"benchmarks/models/flexure_triangular_hole/#Flexure-Triangular-Hole","page":"Flexure Triangular Hole","title":"Flexure Triangular Hole","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:flexure_triangular_hole);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nrelative error limit %: 15.0\nmax relative error percentage: 13.2312\nmessage: \"Test Successful: max relative error is not greater than limit: 13.231% <= 15.000%\"\nresult: \"Success\"\n\n(Image: Flexure Triangular Hole Benchmark)","category":"section"},{"location":"benchmarks/models/flexure_triangular_hole/#fig:flexure-triangular-hole","page":"Flexure Triangular Hole","title":"fig:flexure-triangular-hole","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"units/units/#Unit-Management","page":"Units","title":"Unit Management","text":"EarthBox has a simple unit management system allowing unit conversion.","category":"section"},{"location":"units/units/#EarthBox.UnitConversion.get_unit_registry","page":"Units","title":"EarthBox.UnitConversion.get_unit_registry","text":"get_unit_registry()::UnitKeysType\n\nGet dictionary of standard unit names and valid alternative names. Any valid alternative will be converted to the standard unit when a parameter is loaded into the model.\n\nStandard Units and Valid Alternative Names\n\nStandard Unit Valid Alternative Names\nm meters\ncm centimeters\nkm kilometers\nm^3 cubic meters\ns seconds\nyr years\nMyr millions of years\nMa megaannum\nkg kilograms\nkg/m^3 kilograms per cubic meters\nm/s meters/second\nm/yr meters per year\ncm/yr centimeters per year\ncm/hr centimeters per hour\nmm/yr millimeters per year\n1/s per second\nlog10(1/s) log10(strain rate)\nK kelvin\nC Celsius\n1/K per kelvin\nm/s/s m/s^2\nm^2/s meters squared per second\nm^2/yr meters squared per year\nPa pascals\nMPa megapascals\nGPa gigapascals\n1/Pa per Pascal\nPa.s pascal seconds\nlog10(Pa.s) log10(pascal seconds)\nJ joules\nW watts\nW/m watts per meter\nK/m Kelvins per meter\nK/km Kelvins per kilometer\nC/m Celsius per meter\nJ/kg/K joules per kilogram per kelvin\nW/m/K watts per meter per kelvin\nW/m^3 watts per cubic meter\npercent %\nfraction fraction, frac\ndegrees Degrees, Degree\n1/s/MPa^n per second per megapascal to the nth power\ns^-m1*MPa^-m2 s to the -m1 power times MPa to the -m2 power\nkJ/mol kilojoules per mole\nJ/MPa/mol joules per megapascal per mole\nJ/kg joules per kilogram\ndeltaK delta Kelvin\ndeltaC delta Celsius\n\nReturns\n\nUnitKeysType: Dictionary of standard unit names and valid alternative names.\n\n\n\n\n\n","category":"function"},{"location":"units/units/#EarthBox.UnitConversion.get_unit_funcs","page":"Units","title":"EarthBox.UnitConversion.get_unit_funcs","text":"get_unit_funcs()::UnitFuncsType\n\nGet the unit conversion functions dictionary where the key is the standard unit  name and the value is a dictionary of conversion functions for converting to  other units.\n\nStandard Units and Available Conversions\n\nStandard Unit Available Conversions\ncm/yr m/s, cm/hr\nmm/yr m/s\nm/yr m/s\ncm/hr m/s\nC K\nK C\nyr s, Myr\ns yr, Myr\nMyr yr, s\nm km, cm\nkm m, cm\nPa.s log10(Pa.s)\n1/s log10(1/s)\nPa MPa, GPa\nm^2/yr m^2/s\npercent fraction\ndeltaK deltaC\ndeltaC deltaK\n\nReturns\n\nUnitFuncsType: Dictionary of unit conversion functions.\n\n\n\n\n\n","category":"function"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Material-Collection:-lithospheric_deformation_eb1","page":"Collection: Lithospheric Deformation eb1","title":"Material Collection: lithospheric_deformation_eb1","text":"","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Material-List","page":"Collection: Lithospheric Deformation eb1","title":"Material List","text":"StickyAir EB1\nStickyWater EB1\nClasticSediment EB1\nSalt EB1\nFelsicContinentalCrust EB1\nFelsicContinentalCrustWeak EB1\nFelsicContinentalCrustStrongZone EB1\nMaficContinentalCrust EB1\nMaficContinentalCrustStrongZone EB1\nUltramaficContinentalLithosphere EB1\nUltramaficContinentalLithosphereWeak EB1\nUltramaficContinentalLithosphereStrongZone EB1\nUltramaficAsthenosphereDryFertile EB1\nUltramaficAsthenosphereWetFertile EB1\nOceanicGabbroicCrust EB1\nGabbroicMagma EB1\nLayeredGabbroicCrust EB1\nLayeredGabbroicMagma EB1\nSerpentinizedPeridotite EB1","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Material-Summary","page":"Collection: Lithospheric Deformation eb1","title":"Material Summary","text":"Collection File Path\n\nsrc/material_library/registries/lithospheric_deformation/lithospheric_deformation_eb1.yaml\n\nMantle flow laws from HK03.\nBase case crustal flow strength from GT95 and R06 (no scaling factor)\nModerate plastic yield strength (20/10; 0/0.1)\nModerate radiogenic heat production (1.8e-6/0.5e-6)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Upper-Crustal-Rheology-(Moderate-Strength)","page":"Collection: Lithospheric Deformation eb1","title":"Upper Crustal Rheology (Moderate Strength)","text":"Wet quartzite dislocation creep flow law parameters from Gleason and Tullis (1995).  No scaling factor is applied to pre-exponential factor.","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Lower-Crustal-Rheology","page":"Collection: Lithospheric Deformation eb1","title":"Lower Crustal Rheology","text":"Wet anorthite dislocation creep flow law parameters from Rybacki et al. (2006) using a water  fugacity of 500 MPa based on fit to Figure 8b at 30 km. No scaling factor is applied to  pre-exponential factor.","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Mantle-Rheology","page":"Collection: Lithospheric Deformation eb1","title":"Mantle Rheology","text":"Dislocation and diffusion creep flow law parameters from Hirth and Kohlstedt (2003) for  dry and wet olivine aggregates. A grain size of 6 mm is assumed for the olivine diffusion creep flow  law. A water content of 500 ppm H/Si is assumed for the wet olivine aggregates.\n\nPeierls creep law parameters are inferred from Katayama and Karato (2008). The current  pre-exponential factor for Peierls creep was adjusted from 6.31e+7 (wet case) to 2.5e+7 approximate dry case and to ensure consistency with the dry dislocation  creep law. A visual comparison to Figure 9b of Katayama and Karato (2008) was used to test the adjusted pre-exponential factor at strain rate 1e-5 (~1000 MPa) and 1e-10 (~100 MPa). Note that the activation energy and volume for Peierls creep comes from the current dislocation creep law, which requires adjustment to the Peierls  pre-exponential term if different from Katayama and karato (2008).","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Frictional-Plastic-Model","page":"Collection: Lithospheric Deformation eb1","title":"Frictional Plastic Model","text":"Cohesion: 20 to 10 MPa from plastic strain of 0.0 to 1.0.\n\nFriction angles: 30 to 7 degrees from plastic strain of 0.0 to 1.0. The 7 degree minimum friction angle is from the model presented by Bos and Spiers (2002) based on laboratory  experiments (see Figure 6 for the case with a sliding velocity of 1e-3 micrometers/second).","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Radiogenic-Heat-Production","page":"Collection: Lithospheric Deformation eb1","title":"Radiogenic Heat Production","text":"upper crust: 1.8 microW/m^3\nlower crust: 0.5 microW/m^3","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Material-Tables","page":"Collection: Lithospheric Deformation eb1","title":"Material Tables","text":"","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#StickyAir-EB1","page":"Collection: Lithospheric Deformation eb1","title":"StickyAir EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"StickyAir\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#StickyWater-EB1","page":"Collection: Lithospheric Deformation eb1","title":"StickyWater EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"StickyWater\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#ClasticSediment-EB1","page":"Collection: Lithospheric Deformation eb1","title":"ClasticSediment EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"ClasticSediment\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#Salt-EB1","page":"Collection: Lithospheric Deformation eb1","title":"Salt EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"Salt\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#FelsicContinentalCrust-EB1","page":"Collection: Lithospheric Deformation eb1","title":"FelsicContinentalCrust EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"FelsicContinentalCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#FelsicContinentalCrustWeak-EB1","page":"Collection: Lithospheric Deformation eb1","title":"FelsicContinentalCrustWeak EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"FelsicContinentalCrustWeak\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#FelsicContinentalCrustStrongZone-EB1","page":"Collection: Lithospheric Deformation eb1","title":"FelsicContinentalCrustStrongZone EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"FelsicContinentalCrustStrongZone\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#MaficContinentalCrust-EB1","page":"Collection: Lithospheric Deformation eb1","title":"MaficContinentalCrust EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"MaficContinentalCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#MaficContinentalCrustStrongZone-EB1","page":"Collection: Lithospheric Deformation eb1","title":"MaficContinentalCrustStrongZone EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"MaficContinentalCrustStrongZone\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#UltramaficContinentalLithosphere-EB1","page":"Collection: Lithospheric Deformation eb1","title":"UltramaficContinentalLithosphere EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"UltramaficContinentalLithosphere\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#UltramaficContinentalLithosphereWeak-EB1","page":"Collection: Lithospheric Deformation eb1","title":"UltramaficContinentalLithosphereWeak EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"UltramaficContinentalLithosphereWeak\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#UltramaficContinentalLithosphereStrongZone-EB1","page":"Collection: Lithospheric Deformation eb1","title":"UltramaficContinentalLithosphereStrongZone EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"UltramaficContinentalLithosphereStrongZone\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#UltramaficAsthenosphereDryFertile-EB1","page":"Collection: Lithospheric Deformation eb1","title":"UltramaficAsthenosphereDryFertile EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"UltramaficAsthenosphereDryFertile\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#UltramaficAsthenosphereWetFertile-EB1","page":"Collection: Lithospheric Deformation eb1","title":"UltramaficAsthenosphereWetFertile EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"UltramaficAsthenosphereWetFertile\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#OceanicGabbroicCrust-EB1","page":"Collection: Lithospheric Deformation eb1","title":"OceanicGabbroicCrust EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"OceanicGabbroicCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#GabbroicMagma-EB1","page":"Collection: Lithospheric Deformation eb1","title":"GabbroicMagma EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"GabbroicMagma\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#LayeredGabbroicCrust-EB1","page":"Collection: Lithospheric Deformation eb1","title":"LayeredGabbroicCrust EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"LayeredGabbroicCrust\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#LayeredGabbroicMagma-EB1","page":"Collection: Lithospheric Deformation eb1","title":"LayeredGabbroicMagma EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"LayeredGabbroicMagma\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/lithospheric_deformation_eb1/#SerpentinizedPeridotite-EB1","page":"Collection: Lithospheric Deformation eb1","title":"SerpentinizedPeridotite EB1","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1,\n    target_collection_name = \"Lithospheric_Deformation_eb1\", material_name = \"SerpentinizedPeridotite\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"benchmarks/models/channel_flow_variable_conductivity/#Channel-Flow-Variable-Conductivity","page":"Channel Flow Variable Conductivity","title":"Channel Flow Variable Conductivity","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:channel_flow_variable_conductivity);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 1.83562\nMax relative error: 2.105 %\nMax relative error limit: 2.200 %\n\nTest Successful: max relative error is not greater than limit: 2.105% <= 2.200%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_14-53-27/channel_flow_variable_conductivity_output\n\n(Image: Couette Flow Viscous Heating Benchmark)","category":"section"},{"location":"benchmarks/models/channel_flow_variable_conductivity/#fig:channel-flowvariable-conductivity","page":"Channel Flow Variable Conductivity","title":"fig:channel-flowvariable-conductivity","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"api/surface_processes/salt/#Salt-Deposition","page":"SaltDeposition","title":"Salt Deposition","text":"","category":"section"},{"location":"api/surface_processes/salt/#EarthBox.SurfaceProcesses.SaltDeposition.initialize!","page":"SaltDeposition","title":"EarthBox.SurfaceProcesses.SaltDeposition.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nApply salt deposition model.\n\nArguments\n\nmodel::ModelData\nThe model data container containing the model parameters and arrays.\n\nKeyword Arguments\n\niuse_salt_deposition::Int64\nInteger flag that activates salt deposition model: 0 = off; 1 = on\nsalt_start_time::Float64\nSalt start time in Myr\nsalt_end_time::Float64\nSalt end time in Myr\nsalt_deposition_rate::Float64\nSalt deposition rate in m/s\n\n\n\n\n\n","category":"function"},{"location":"api/markers/temperature/#MarkerTemperature","page":"MarkerTemperature","title":"MarkerTemperature","text":"","category":"section"},{"location":"api/markers/temperature/#Initial-Temperature-Models","page":"MarkerTemperature","title":"Initial Temperature Models","text":"using EarthBox\nimport Markdown\noptions = Markers.MarkerTemperature.get_options()\nliststr = join([\"- $(options[id].option_name)\" for id in keys(options)], \"\\n\")\nMarkdown.parse(liststr)\n\ntip: quick search for initial temperature models\nHighlight an initial temperature model name in the list above and use Ctl-F + Enter to navigate to a detailed description in the Initial Marker Temperature Models section below.","category":"section"},{"location":"api/markers/temperature/#Initialization","page":"MarkerTemperature","title":"Initialization","text":"","category":"section"},{"location":"api/markers/temperature/#Example:-AnalyticalThreeLayer","page":"MarkerTemperature","title":"Example: AnalyticalThreeLayer","text":"\n# Copy and paste this code into the Julia REPL.\nusing EarthBox\nusing CairoMakie\n# Initialize EarthBox including model data container.\neb = EarthBoxState(\n    xsize=500000.0, ysize=160000.0, \n    xnum=250, ynum=80, \n    dx_marker=500.0, dy_marker=500.0);\n# Unpack the model data container.\nmodel = eb.model_manager.model;\n# Initialize the staggered grid.\nStaggeredGrid.initialize!(model, grid_type=:UniformGrid);\n# Initialize marker coordinates.\nMarkers.MarkerCoordinates.initialize!(model, marker_distribution=:Regular);\n# Initialize the required material geometry parameters for the \n# LithosphericExtensionLateralStrongZones material model\nMaterialGeometry.StickyAirGeometry.initialize!(model, thick_air=10000.0);\nMaterialGeometry.EarthLayering.initialize!(\n    model, thick_lith=125000.0, thick_crust=35000.0, thick_upper_crust=22000.0);\n# Get EarthBox parameters to programmatically define parameter dictionary keys\nconst PARAMS = get_eb_parameters();\n# Initialize marker temperature\nMarkers.MarkerTemperature.initialize!(\n    model,\n    initial_temperature_model=initial_temperature_names.AnalyticalThreeLayer,\n    parameters=Dict(\n        PARAMS.temperature_top.name             => ConversionFuncs.celsius_to_kelvin(0.0),\n        PARAMS.amplitude_perturbation.name      => 0.0,\n        PARAMS.width_perturbation.name          => 10_000.0,\n        PARAMS.thick_thermal_lithosphere.name   => 125_000.0,\n        PARAMS.temperature_base_lith.name       => ConversionFuncs.celsius_to_kelvin(1345.0),\n        PARAMS.adiabatic_gradient.name          => 0.4,\n        PARAMS.conductivity_upper_crust.name    => 2.25,\n        PARAMS.conductivity_lower_crust.name    => 2.0,\n        PARAMS.conductivity_mantle.name         => 2.0,\n        PARAMS.heat_production_upper_crust.name => 1.8e-6,\n        PARAMS.heat_production_lower_crust.name => 0.5e-6,\n        PARAMS.heat_production_mantle.name      => 0.0\n    )\n);\n# Get marker coordinate arrays amd convert from meters to kilometers\nmarker_x_km = model.obj_dict[\"marker_x\"].array./1000.0;\nmarker_y_km = model.obj_dict[\"marker_y\"].array./1000.0;\n# Get marker temperature array and convert to Celsius\nmarker_TC = ConversionFuncs.kelvin_to_celsius.(model.obj_dict[\"marker_TK\"].array);\n# Get size parameters and convert from meters to kilometers\nxsize_km = model.obj_dict[\"xsize\"].value/1000.0;\nysize_km = model.obj_dict[\"ysize\"].value/1000.0;\n# Decimate the marker arrays for faster plotting\ndecimation_factor = 2;\nindices = 1:decimation_factor:length(marker_TC);\nmarker_TC = marker_TC[indices];\nmarker_x_km = marker_x_km[indices];\nmarker_y_km = marker_y_km[indices];\n# Plot using CairoMakie\ndpi = 150.0;\nfig = Figure(size = (10.0*dpi, 3.0*dpi)); # 10 inches x 3 inches @ 150 dpi\nax = Axis(\n    fig[1, 1]; limits = (0.0, xsize_km, 0.0, ysize_km), yreversed = true,\n    xticks = collect(0.0:25.0:xsize_km), yticks = collect(0.0:10.0:ysize_km),\n    xlabel = \"X (km)\", ylabel = \"Y (km)\", \n    title = \"AnalyticalThreeLayer Model for Initial Marker Temperature\", \n    titlesize = 12, xlabelsize = 12, ylabelsize = 12, \n    xticklabelsize = 12, yticklabelsize = 12\n);\nplt = scatter!(\n    ax, marker_x_km, marker_y_km, color = marker_TC, \n    colormap = :bwr,\n    colorrange = (0.0, 1350.0),\n    marker=:circle, markersize = 4, rasterize = true\n); \ncb = Colorbar(\n    fig[1,2], plt; label = \"Marker Temperature (Celsius)\",\n    ticks = collect(0.0:50.0:1350.0),\n    ticklabelsize = 10\n);\nfig\n","category":"section"},{"location":"api/markers/temperature/#EarthBox.Markers.MarkerTemperature.initialize!","page":"MarkerTemperature","title":"EarthBox.Markers.MarkerTemperature.initialize!","text":"initialize!(\n    model::ModelData; \n    initial_temperature_model::Union{Int, String, Symbol, Nothing}=nothing, \n    kwargs...\n)::Nothing\n\nInitialize the initial marker temperature model. \n\nArguments\n\nmodel::ModelData\nModel data container.\ninitial_temperature_model::Union{Int, String, Symbol, Nothing}=nothing\nControls the type of initial temperature model used to initialize marker temperature.   See the Initial Marker Temperature Models section below for information on available   initial temperature models. Required parameters depend on the selected initial   temperature model and are set using the parameters dictionary or by using a   yamal formatted model input file. The initial temperature model type is stored   in the model data container as an integer ID (itype_temp) and a corresponding   string name (stype_temp). If initial_temperature_model is nothing the current   initial temperature model defined in the model data container will be used. The   initial temperature model parameters can be accessed from the model data container as follows:\nitype_temp = model.heat_equation.parameters.initial_condition.itype_temp.value\nstype_temp = model.heat_equation.parameters.initial_condition.stype_temp.value\n\nKeyword Arguments\n\ntemperature_uniform::Union{Float64, Nothing}\nUniform initial temperature value in Kelvin\nadiabatic_gradient::Union{Float64, Nothing}\nAdiabatic gradient in K/km\nparameters::Union{InputDictType, Nothing} \nDictionary of required parameters for the selected initial_temperature_model model.   See the section Initial Marker Temperature Models below for information on available   initial temperature models and required parameters.\n\nInitial Marker Temperature Models\n\nTemperatureWave\n\ninitial_temperature_model value: \"TemperatureWave\", :TemperatureWave, or 0\nDescription: Simple temperature wave model whereby a square domain is rotated in a circular velocity field. This model is used for the temperature wave benchmark.\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_top::Float64`: Temperature along the top boundary of the model domain in Kelvin\ntemperature_bottom::Float64: Temperature at the base of the model domain in Kelvin\ntemperature_of_wave::Float64: Temperature of wave in Kelvin\nRequired Geometries:\nNone\n\nUniform\n\ninitial_temperature_model value: \"Uniform\", :Uniform, or 1\nDescription: Uniform initial temperature temperature.\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_uniform::Float64: Uniform initial temperature value in Kelvin\nRequired Geometries:\nNone\n\nBoxConvection\n\ninitial_temperature_model value: \"BoxConvection\", :BoxConvection, or 2\nDescription: Initial temperature model for convection in a box benchmark\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_top::Float64: Temperature along the top boundary of the model domain in Kelvin\ntemperature_bottom::Float64: Temperature at the base of the model domain in Kelvin\nRequired Geometries:\nNone\n\nLinear\n\ninitial_temperature_model value: \"Linear\", :Linear, or 3\nDescription: Initial temperature model using a linear increase with depth.\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_top::Float64: Temperature along the top boundary of the model domain in Kelvin\ntemperature_bottom::Float64: Temperature at the base of the model domain in Kelvin\nRequired Geometries:\nNone\n\nAnalyticalThreeLayer\n\ninitial_temperature_model value: \"AnalyticalThreeLayer\", :AnalyticalThreeLayer, or 4\nDescription: Analytical steady-state three layer thermal model used to initialize marker temperature. The three layers are (1) the upper crust, (2) lower crust and (3) mantle lithosphere all of which have user defined thermal conductivities and radiogenic heat production. Thickness of the sticky layer above the three layers and the thicknesses of the upper crust and lower crust are defined during the initialization of earth layering and sticky geometry. Any mantle lithosphere thicknesses defined during initialization are ignored and the thickness of the thermal lithosphere (thick_thermal_lithosphere) is used instead. The temperature at the top of the crust is set equal to the temperature boundary condition applied at the top of the model (temperature_top) The temperature at the base of the thermal lithosphere is set equal to the temperature_base_lith parameter. If these parameters were set during boundary condition initialization they do not need to be set here. Temperature below the lithosphere is defined using an adiabatic gradient (adiabatic_gradient). A thermal perturbation is also included in the model that involves a triangular perturbation to the thickness of the thermal lithosphere. Note that if these parameters are set they will be used to define the geotherm for the reference lithosphere during reference lithosphere initialization.\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_top::Float64 : Temperature along the top boundary of the model domain in Kelvin\ntemperature_base_lith::Float64 : Initial temperature at the base of the lithosphere in Kelvin\nconductivity_upper_crust::Float64 : Thermal conductivity of upper crust W/m/K\nconductivity_lower_crust::Float64 : Thermal conductivity of lower crust W/m/K\nconductivity_mantle::Float64 : Thermal conductivity of mantle W/m/K\nheat_production_upper_crust::Float64 : Radiogenic heat production in upper crust W/m^3\nheat_production_lower_crust::Float64 : Radiogenic heat production in lower crust W/m^3\nheat_production_mantle::Float64 : Radiogenic heat production in mantle W/m^3\nthick_thermal_lithosphere::Float64 : Thickness of the thermal lithosphere in meters\nadiabatic_gradient::Float64 : Adiabatic gradient in K/km\namplitude_perturbation::Float64 : Amplitude of central thermal perturbation in meters\nwidth_perturbation::Float64 : Width of central thermal perturbation in meters\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\n\nFourLinearSegments\n\ninitial_temperature_model value: \"FourLinearSegments\", :FourLinearSegments, or 5\nDescription: Simple lithosphere geotherm composed of four linear segments with an optional thermal perturbation located in the middle of the model. The four segment are (1) sticky air/water, (2) continental crust, (3) mantle lithosphere and (4) asthenosphere. The layer thicknesses are defined during the initialization of earth layering and sticky air geometry parameters. Sub-layering in the crust and mantle is lumped into crustal and mantle lithosphere layers. Temperature in the sticky domain is constant and equal to the temperature at the top of the model defined during boundary condition initialization. Temperature within each additional layer is calculated assuming a linear gradient defined by the temperatures set using this input dictionary. A thermal perturbation is also included in the model that involves a triangular perturbation to the depth of the asthenosphere.\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_surface::Float64 : Initial temperature at the surface for lithospheric models with sticky air in Kelvin\ntemperature_moho::Float64 : Initial temperature at the Moho for lithospheric models in Kelvin\ntemperature_base_lith::Float64 : Initial temperature at the base of the lithosphere in Kelvin\ntemperature_bottom::Float64 : Temperature at the base of the model domain in Kelvin\namplitude_perturbation::Float64 : Amplitude of central thermal perturbation in meters\nwidth_perturbation::Float64 : Width of central thermal perturbation in meters\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\n\nFractureZone\n\ninitial_temperature_model value: \"FractureZone\", :FractureZone, or 6\nDescription: Initial temperature condition for fracture zone model.\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_top::Float64 : Temperature along the top boundary of the model domain in Kelvin\ntemperature_bottom::Float64 : Temperature at the base of the model domain in Kelvin\nage_lithosphere_left::Float64 : Age of lithosphere to the left of fracture zone in Myr\nage_lithosphere_right::Float64 : Age of lithosphere to the right of fracture zone in Myr\nadiabatic_gradient::Float64 : Adiabatic gradient in K/km\nthermal_lithosphere_depth_left::Float64 : Thermal lithosphere depth to the left of fracture zone in meters\nthermal_lithosphere_depth_right::Float64 : Thermal lithosphere depth to the right of fracture zone in meters\nthermal_diffusivity::Float64 : Thermal diffusivity in m^2/s\nRequired Geometries:\nStickyAirGeometry.initialize!\nFractureZone.initialize!\n\nHotBox\n\ninitial_temperature_model value: \"HotBox\", :HotBox, or 7\nDescription: Initial temperature condition for a hot box in a cold medium.\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_top::Float64 : Temperature along the top boundary of the model domain in Kelvin\ntemperature_bottom::Float64 : Temperature at the base of the model domain in Kelvin\nRequired Geometries:\nGeometric parameters are hard coded in the model. See HotBox.jl for more information.\n\nHalfSpaceSpreading\n\ninitial_temperature_model value: \"HalfSpaceSpreading\", :HalfSpaceSpreading, or 8\nDescription: Initial temperature condition for half-space spreading model.\nRequired Parameters (Set using parameters dictionary keyword argument):\ntemperature_top::Float64 : Temperature along the top boundary of the model domain in Kelvin\nadiabatic_gradient::Float64 : Adiabatic gradient in K/km\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\n\nHalfSpaceDoubleSpreading\n\ninitial_temperature_model value: \"HalfSpaceDoubleSpreading\", :HalfSpaceDoubleSpreading, or 9\nDescription: Initial temperature condition for half-space double spreading model.\nRequired Parameters (Set using parameters dictionary keyword argument):\nadiabatic_gradient::Float64 : Adiabatic gradient in K/km\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\n\n\n\n\n\n","category":"function"},{"location":"methods/heat_algorithm/heat_algorithm/#Algorithm-for-Solving-the-Heat-Advection-Diffusion-Equation","page":"Heat Algorithm","title":"Algorithm for Solving the Heat Advection-Diffusion Equation","text":"The Eulerian-Lagrangian marker-in-cell approach from Gerya (2010) is used to solve equation  eq:energy whereby markers are advected using a 4th-order Runge-Kutta scheme and marker  temperature T_m is updated using the conductive temperature solution on Eulerian grid nodes and  temperature changes associated with subgrid thermal diffusion:\n\nFor each time step do:\n\n[1] Interpolate current marker temperature T_m to basic grid nodes T_(ij)_b using  equation eq:bilinear_interp2grid.\n\n[2] Calculate purely conductive temperature solution over time interval Delta t on basic grid T_solu(ij)_b by solving equation eq:energy without advective terms and  using current grid temperature T_(ij)_b as the initial condition. An adaptive time-stepping  scheme is applied whereby the time step is reduced if the change in temperature exceeds a threshold.\n\n[3] Calculate the conductive temperature change on the Eulerian grid using the following equation:","category":"section"},{"location":"methods/heat_algorithm/heat_algorithm/#eq:temperature_change","page":"Heat Algorithm","title":"eq:temperature_change","text":"Delta T_(ij)_b = T_solu(ij)_b - T_(ij)_b\n\n[4] Update marker temperature T_m taking grid and sub-grid temperature changes into account  Subgrid Thermal Diffusion Steps.\n\n[5] Advect markers using a 4th-order Runge-Kutta scheme.\n\n[6] Advance model time t by Delta t.","category":"section"},{"location":"methods/heat_algorithm/heat_algorithm/#Subgrid-Thermal-Diffusion-Steps","page":"Heat Algorithm","title":"Subgrid Thermal Diffusion Steps","text":"[1] Calculate the initial nodal temperature on markers T_nodalm by interpolating  T_(ij)_b back to markers using equation eq:bilinear-interp2markers.\n\n[2] Calculate the total sub-grid temperature difference between interpolated nodal temperatures and current marker temperatures using the following equation:","category":"section"},{"location":"methods/heat_algorithm/heat_algorithm/#eq:subgrid-temp-difference","page":"Heat Algorithm","title":"eq:subgrid-temp-difference","text":"Delta T_sgtm = T_nodalm - T_m\n\n[3] Calculate the relaxed sub-grid temperature difference on markers using the following equation:","category":"section"},{"location":"methods/heat_algorithm/heat_algorithm/#eq:subgrid-temp-relaxed","page":"Heat Algorithm","title":"eq:subgrid-temp-relaxed","text":"Delta T_sgm = Delta T_sgtm\nleft(1 - exp left(-D_sgfracDelta tt_sg mright)right)\n\nwhere D_sg is the sub-grid diffusion coefficient, Delta t is the time step and t_sg  is the thermal diffusion time scale given by:","category":"section"},{"location":"methods/heat_algorithm/heat_algorithm/#eq:thermal-diffusion-timescale","page":"Heat Algorithm","title":"eq:thermal-diffusion-timescale","text":"t_sg m = fracrho_m C_pmk_mleft(frac2Delta x^2 + frac2Delta y^2right)\n\nwhere rho_m is the density of the marker, C_pm is the specific heat capacity of the  marker, k_m is the thermal conductivity of the marker, Delta x and Delta y are the  grid spacings in the x and y directions, respectively.\n\n[4] Calculate the relaxed sub-grid temperature difference on Eulerian grid  Delta T_sg(ij)_b by interpolating Delta T_sgm using equation  eq:bilinear_interp2grid.\n\n[5] Calculate the remaining temperature change  Delta T_r(ij)_b on Eulerian nodes by  removing the relaxed sub-grid temperature difference using the following equation:","category":"section"},{"location":"methods/heat_algorithm/heat_algorithm/#eq:remaining-temp-change","page":"Heat Algorithm","title":"eq:remaining-temp-change","text":"Delta T_r(ij)_b = Delta T_(ij)_b - Delta T_sg(ij)\n\n[6] Interpolate Delta T_r(ij)_b to markers using equation  eq:bilinear-interp2markers to obtain Delta T_rm, which is the nodal  temperature change with sub-grid effects removed.\n\n[7] Update marker temperature T_m taking into account both sub-grid effects and the remaining temperature change from the basic grid using the following equation:","category":"section"},{"location":"methods/heat_algorithm/heat_algorithm/#eq:marker-temp-update","page":"Heat Algorithm","title":"eq:marker-temp-update","text":"T_m = T_m + Delta T_sgm + Delta T_rm","category":"section"},{"location":"api/boundary_conditions/bc_managers/temperature/#EarthBox.BoundaryConditions.Temperature.initialize!","page":"Temperature","title":"EarthBox.BoundaryConditions.Temperature.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize temperature boundary conditions.\n\nArguments\n\nmodel::ModelData: Model data object containing model parameters and arrays.\n\nOptional Keyword Arguments\n\ntemperature_top::Float64: \nTemperature along the top boundary of the model domain in Kelvin\ntemperature_bottom::Float64: \nTemperature at the base of the model domain in Kelvin\ntemperature_left::Float64: \nTemperature along the left boundary of the model domain in Kelvin\ntemperature_right::Float64: \nTemperature along the right boundary of the model domain in Kelvin\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"api/run_time_steps/run_time_steps/#Time-Step-Execution","page":"Execution","title":"Time Step Execution","text":"","category":"section"},{"location":"api/run_time_steps/run_time_steps/#EarthBox.run_time_steps","page":"Execution","title":"EarthBox.run_time_steps","text":"Run model\n\nrun_time_steps(earthbox::EarthBoxState; kwargs...)\n\nInitialize time step parameters and run the model for a given number of time steps or model duration.\n\nArguments\n\nearthbox::EarthBoxState: EarthBoxState object\n\nKeyword arguments\n\nmake_backup::Bool\nWhether to make a backup of the model state at each output time step.\nmodel_duration_myr::Float64\nModel duration in Myr used to estimate the maximum number of time steps for extensional model with symmetric extension. If adaptive time stepping is used during the simulation due to displacements that exceed the user specified cell fraction then the actual model duration may be shorter than model_duration_myr. A buffer time of 3.0 Myr is added to the model duration when calculating the maximum number of time steps assuming that there will be some time step reduction. However, the user may need to increase the model_duration_myr to achieve the desired model duration. If you want full control over the number of time steps then set ntimestep_max and timestep_viscoelastic directly when using run_time_steps function.\nntimestep_max::Int\nMaximum number of model time steps\ntimestep_viscoelastic::Float64\nThe viscoelastic time step in seconds used in the viscoelastic formulation of the Stokes-continuity equations. The main model time step (timestep) is set equal to the viscoelastic time step at the start of each time loop iteration prior to defining the right-hand side terms that include the time-dependent viscoelastic factor. The viscoelastic time step may be modified due to changes in boundary conditions depending on user defined options\ntimestep_out::Float64\nTime step for output\ndispl_limit::Float64\nDisplacement limit for stopping the model in meters\niuse_boundary_displacement::Int\nFlag to use boundary displacement stopping: 0 = off; 1 = on. When active, the model will stop when the boundary displacement reaches the limit specified by displ_limit\nstrain_limit::Float64\nStrain limit for stopping the model\niuse_extensional_strain::Int\nFlag to use extensional strain stopping: 0 = off; 1 = on. When active, the model will stop when the extensional strain reaches the limit specified by strain_limit\niupdate_timestep::Int\n0 = off; 1 = update timestep using maximum displacement\nnumber_of_transport_timesteps_per_model_timestep::Int\nNumber of transport time steps per model time step.\n\n\n\n\n\n","category":"function"},{"location":"api/run_time_steps/examples/#Examples","page":"Examples","title":"Examples","text":"","category":"section"},{"location":"api/run_time_steps/examples/#Example-1:-User-provided-values","page":"Examples","title":"Example 1: User provided values","text":"using EarthBox\n\neb = EarthBoxState(\n    xnum = 101, ynum = 101, \n    xsize = 100000.0, ysize = 100000.0, \n    dx_marker = 25.0, dy_marker = 25.0\n);\n\n# Additional API calls are required to initialize components of the model\n\nrun_time_steps(\n    eb,\n    make_backup           = true, \n    ntimestep_max         = 4500,\n    timestep_viscoelastic = years_to_seconds(50_000.0), \n    timestep_out          = years_to_seconds(500_000.0)\n    );","category":"section"},{"location":"api/run_time_steps/examples/#Example-2:-Symmetric-extensional-boundary-conditions-without-velocity-stepping","page":"Examples","title":"Example 2: Symmetric extensional boundary conditions without velocity stepping","text":"This example demonstrates how to calculate derived parameters for testing  purposes without the need to initialize a full model with additional API calls.  Replace TimeLoop.initialize! with a call to run_time_steps after a model is  fully initialized with additional API calls to derive parameters and run a full model. Note that the run_time_steps function performs time loop initialization internally so the TimeLoop.initialize! call is not required.\n\nusing EarthBox\n\neb = EarthBoxState(\n    xnum = 101, ynum = 101, \n    xsize = 100000.0, ysize = 100000.0, \n    dx_marker = 100.0, dy_marker = 100.0);\n\nmodel = eb.model_manager.model;\n\nBoundaryConditions.initialize!(\n    model, \n    model_type = \"LithosphericExtensionFixedBoundaries\");\n\nBoundaryConditions.Velocity.initialize!(\n    model, full_velocity_extension = ConversionFuncs.cm_yr_to_m_s(4.0));\n\nTimeLoop.initialize!(\n    model,\n    model_duration_myr = 30.0,\n    timestep_out = ConversionFuncs.years_to_seconds(500_000.0));","category":"section"},{"location":"api/run_time_steps/examples/#Example-3:-Symmetric-extensional-boundary-conditions-with-velocity-stepping","page":"Examples","title":"Example 3: Symmetric extensional boundary conditions with velocity stepping","text":"This example demonstrates how to calculate derived parameters for testing  purposes without the need to initialize a full model with additional API calls.  Replace TimeLoop.initialize! with a call to run_time_steps after a model is  fully initialized with additional API calls to derive parameters and run a full model. Note that the run_time_steps function performs time loop initialization internally so the TimeLoop.initialize! call is not required.\n\nusing EarthBox\n\neb = EarthBoxState(\n    xnum = 101, ynum = 101, \n    xsize = 100000.0, ysize = 100000.0, \n    dx_marker = 100.0, dy_marker = 100.0);\n\nmodel = eb.model_manager.model;\n\nBoundaryConditions.initialize!(\n    model, \n    model_type = \"LithosphericExtensionFixedBoundaries\");\n\nBoundaryConditions.Velocity.initialize!(\n    model, \n    full_velocity_extension = ConversionFuncs.cm_yr_to_m_s(1.0), \n    full_velocity_extension_step1 = ConversionFuncs.cm_yr_to_m_s(1.0), \n    full_velocity_extension_step2 = ConversionFuncs.cm_yr_to_m_s(4.0));\n\nBoundaryConditions.VelocityStep.initialize!(\n    model, \n    iuse_velocity_step = 1, \n    velocity_step_time = 10.0, \n    velocity_second_step_time = 20.0);\n\nTimeLoop.initialize!(\n    model,\n    model_duration_myr = 16.0,\n    timestep_out = ConversionFuncs.years_to_seconds(500_000.0));","category":"section"},{"location":"benchmarks/models/couette_flow_viscous_heating/#Couette-Flow-with-Viscous-Heating","page":"Couette Flow with Viscous Heating","title":"Couette Flow with Viscous Heating","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:couette_flow_viscous_heating);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 3.38579\nMax relative error: 0.280 %\nMax relative error limit: 0.300 %\n\nTest Successful: max relative error is not greater than limit: 0.280% <= 0.300%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_12-52-30/couette_flow_viscous_heating_output\n\n(Image: Couette Flow Viscous Heating Benchmark)","category":"section"},{"location":"benchmarks/models/couette_flow_viscous_heating/#fig:couette-flow-viscous-heating","page":"Couette Flow with Viscous Heating","title":"fig:couette-flow-viscous-heating","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#Viscous-Creep","page":"Viscous Creep","title":"Viscous Creep","text":"A composite rheology is used to model solid-state creep including diffusion, dislocation, and Peierls  creep. The composite effective strain rate invariant dot epsilon_eff is given by:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:composite-strain-rate","page":"Viscous Creep","title":"eq:composite-strain-rate","text":"dot epsilon_eff = \n    maxleft(dot epsilon_dis dot epsilon_peiright) + dot epsilon_dif text \n\nwhere dot epsilon_dis, dot epsilon_pei, and dot epsilon_dif are the strain rate invariants for dislocation, Peierls, and diffusion creep, respectively. The effective creep  viscosity eta_creepm is then given by:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:composite-viscosity","page":"Viscous Creep","title":"eq:composite-viscosity","text":"eta_creepm = fracsigma_II(m)2dot epsilon_eff\n\nwhere sigma_II(m) is the second invariant of the stress tensor in MPa.\n\nThe strain rate invariant for diffusion creep dot epsilon_dif is calculated using the  following equation:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:diffusion_creep","page":"Viscous Creep","title":"eq:diffusion_creep","text":"dot epsilon_dif = \n    A_difexpleft\n        -frac\n            left( E_dif(m)10^3 + V_dif(m)P_m10^-6 right)\n        R_gasT_m\n        right(sigma_II(m)10^-6)\n\nwhere A_dif(m) is the diffusion creep pre-exponential factor in 1sMPa, E_dif(m) is the  diffusion creep activation energy in kJmol, V_dif(m) is the diffusion creep activation  volume in JMPamol, R_gas is the ideal gas constant in JmolK, T_m is the marker temperature in K, and P_m is the marker pressure in Pa. The strain rate invariant for  dislocation creep dot epsilon_dis is given by:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:dislocation_creep","page":"Viscous Creep","title":"eq:dislocation_creep","text":"dot epsilon_dis = \n    A_disexpleft\n        -frac\n            left( E_dis(m)10^3 + V_dis(m)P_m10^-6 right)\n        R_gasT_m\n        right(sigma_II(m)10^-6)^n_m\n\nwhere A_dis is the dislocation creep pre-exponential factor in 1s(MPa)^n, E_dis is the  dislocation creep activation energy in kJmol, V_dif is the dislocation creep activation  volume in JMPamol and n_m is the stress exponent. finally, the strain rate invariant for  Peierls creep dot epsilon_pei is calculated using the following equation:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:peierls_creep","page":"Viscous Creep","title":"eq:peierls_creep","text":"dot epsilon_pei = \n    A_pei (sigma_II(m)10^-6)^2 \n        expleft\n        -fracleft( E_pei(m)10^3 + V_pei(m)P_m10^-6 right)R_gasT_m\n        left(1 - left( fracsigma_II(m)10^-6sigma_pei(m) right)^n1_mright)^n2_m\n        right\n\nwhere A_pei(m) is the Peierls creep pre-exponential factor in 1s(MPa)^2, E_pei(m) is the Peierls creep activation energy in kJmol, V_pei(m) is the Peierls creep activation volume in JMPamol, sigma_pei(m) is the Peierls stress in MPa and n1_m and n2_m are the  Peierls stress exponents.\n\nThe visco-elastic nature of the rheology implemented in this work and the power law and exponential nature of the creep mechanisms introduces a non-linear time-dependent relationship between stress and  effective viscosity. Similar to (Gerya, 2010) a bisection algorithm is used to solve for the effective viscosity consistent with a visco-elastic stress forecast for a given marker m  calculated using the following equations:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:visco-elastic-stress-forecast","page":"Viscous Creep","title":"eq:visco-elastic-stress-forecast","text":"    f_vem = frac eta_creepm  mu_m Delta t + eta_creepm \n        text \n    sigma_xxfcm = \n        2 eta_creepm dotepsilon_xxmR_srm(1-f_vem)\n        + sigma_xxm f_vem \n                text \n    sigma_xyfcm =\n        2 eta_creepm dotepsilon_xymR_srm(1-f_vem)\n        + sigma_xym f_vem\n                text \n    sigma_IIfcm = max \n        left(\n        sqrt\n        left( sigma_xxfcm right)^2 \n        + left( sigma_xyfcm right)^2\n         sigma_min\n        right)\n\nwhere sigma_min is a user-defined minimum stress value, f_ve is the visco-elastic factor,  mu_m is the shear modulus, Delta t is the time step and dotepsilon_xxm and  dotepsilon_xym are the deviatoric strain rate components interpolated from strain rate  defined on the staggered grid as described by equation eq:deviatoric-strain-rate, and R_srm is strain rate ratio given by the following equation:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:strain*rate*ratio","page":"Viscous Creep","title":"eq:strainrateratio","text":"R_srm = fracdotepsilon_IIstressmdotepsilon_II velocitym\n\nwhere dotepsilon_IIvelocitym is the strain rate invariant for marker m calculated using the following equation:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:marker*strain*rate_invariant","page":"Viscous Creep","title":"eq:markerstrainrate_invariant","text":"dotepsilon_IIvelocitym = sqrt\n    left( dotepsilon_xxm right)^2 + left( dotepsilon_xym right)^2\n text\n\nand dotepsilon_IIstressm is the strain rate invariant for marker m calculated using nodal  deviatoric stress and deviatoric stress changes interpolated from the staggered grid as follows:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:stress*based*strain_rate","page":"Viscous Creep","title":"eq:stressbasedstrain_rate","text":"dotepsilon_IIstressm = sqrt\n    left( fracsigma_xxm_22eta_vpm + fracDelta sigma_xxm2Delta t mu_m right)^2\n    + left( fracsigma_xym_22eta_vpm + fracDelta sigma_xym2Delta t mu_m right)^2\n\n\nwhere sigma_xxm_2 and sigma_xym_2 are the forecasted deviatoric stress components at markers interpolated from forecasted deviatoric grid stress sigma_xx(ij)_p2 and sigma_xy(ij)_b2 from equation eq:deviatoric-stress-forecast and Delta sigma_xxm and  Delta sigma_xym are the grid stress changes at markers interpolated from  Delta sigma_xx(ij)_p and Delta sigma_xy(ij)_b from equation  eq:visco-elasto-plastic-stress-changes. The use of R_srm in equation  eq:visco-elastic-stress-forecast makes the visco-elastic stress forecast dependent on nodal  stress and reduces numerical diffusion in shear zones (Gerya, 2010).\n\nWith each time step, the effective visco-plastic viscosity eta_vpm is  initialized with the effective creep viscosity eta_creepm before the effects of plastic  failure and partial melt are taken into account using equation eq:visco-plastic-viscosity  and the following equation, respectively:","category":"section"},{"location":"methods/viscous_creep/viscous_creep/#eq:viscosity-partial-melt","page":"Viscous Creep","title":"eq:viscosity-partial-melt","text":"    eta_vpm = eta_vpm^o expleft(f_alphaM_extractablemright) \n        quad for quad M_extractablem  03 quad textand \n    eta_vpm = eta_melt quad for quad M_m geq 03\n\nwhere eta_vpm^o is the previous visco-plastic viscosity initialized as eta_creepm,  f_alpha is a user-defined parameter that controls the sensitivity of the visco-plastic viscosity to  melt fraction and eta_melt is the viscosity of melt at M_mextractablem = 1. The parameter  f_alpha is set to 35 by default.","category":"section"},{"location":"models/model_execution/parallel_marker_plotting/#Plotting-Marker-Swarms-in-Parallel","page":"Plotting Marker Swarms in Parallel","title":"Plotting Marker Swarms in Parallel","text":"Plotting marker swarms for exported plots can be computationally intensive. EarthBox provides a function to accelerate marker plotting by spawning multiple processes that work on chunks of time steps. The recommended workflow is to create a script called ParallelMarkerPlotter.jl that calls the function run_parallel_marker_plotter  (Parallel Marker Plotter) in the model directory that contains the script Plot.jl.\n\n\"\"\" \n    ParallelMarkerPlotter.jl\n\nRun the marker plotting script `Plot.jl` in parallel.\n\nUsage:\n    julia ParallelMarkerPlotter.jl <case_name> <total_steps> <num_processors>\n\nwhere:\n- <case_name>: The name of the case with the format case# where # is an integer.\n- <total_steps>: The total number of time steps.\n- <num_processors>: The number of processors to use.\n        \n\"\"\"\nmodule ParallelMarkerPlotter\n\nusing EarthBox\n\nfunction main()::Nothing\n    run_parallel_marker_plotter()\nend\n\nend # module\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    ParallelMarkerPlotter.main()\nend","category":"section"},{"location":"models/model_execution/parallel_marker_plotting/#Parallel-Marker-Plotter","page":"Plotting Marker Swarms in Parallel","title":"Parallel Marker Plotter","text":"","category":"section"},{"location":"models/model_execution/parallel_marker_plotting/#EarthBox.PlotToolsManager.RunParallelPlot.run_parallel_marker_plotter","page":"Plotting Marker Swarms in Parallel","title":"EarthBox.PlotToolsManager.RunParallelPlot.run_parallel_marker_plotter","text":"run_parallel_marker_plotter()::Nothing\n\nRun the marker plotting script Plot.jl in parallel for a given range of time steps.\n\nThe script Plot.jl must be located in the model directory along with the script that executes this function. The script Plot.jl is called via command line as  follows:\n\njulia Plot.jl marker_plots case_name=<case_name> istart=<istart> iend=<iend>\n\nThis assumes that the command line plotter function run_cl_plotter() is being passed the root path to the model output directory when called from the Plot.jl  script.\n\nUsage:\n\n``bash julia RunParallelPlot.jl <casename> <totalsteps> <num_processors>\n\n\nwhere:\n- <case_name>: The name of the case.\n- <total_steps>: The total number of time steps.\n- <num_processors>: The number of processors to use.\n\nand `RunParallelPlot.jl` is the script that imports and executes this function\nand is located in the model directory along with the `Plot.jl` script.\nAn example of the `RunParallelPlot.jl` script is as follows:\n\n\njulia module RunParallelPlot\n\nusing EarthBox\n\nfunction main()::Nothing     runparallelmarker_plotter() end\n\nend # module\n\nif abspath(PROGRAM_FILE) == @FILE     RunParallelPlot.main() end ```\n\n\n\n\n\n","category":"function"},{"location":"methods/hydrothermal/hydrothermal/#Hydrothermal-Circulation","page":"Hydrothermal Circulation","title":"Hydrothermal Circulation","text":"Hydrothermal circulation reduces temperatures in the lithosphere at a regional scale in areas where  locally hot rock associated magmatic intrusions interacts with seawater. Hydrothermal circulation  requires the presence of hot molten rock to locally elevate temperature and drive thermal convection  and is facilitated by the presence of fractures and faults that allow seawater to penetrate the crust and  interact with hot rock. Similar to previous work hydrothermal cooling is implemented using an  effective thermal conductivity that is a function of an effective Nusselt number N_eff and parameters  that describe the reduction in hydrothermal circulation with depth and temperature due to a reduction in permeability. The effective Nusselt number Nu_eff is used to increase effective thermal  conductivity close to areas with molten rock and in regions with relatively high plastic strain rates and high plastic strain where faults and damaged shear zones are likely to be present. The effective thermal conductivity model used in this work is given by the following equation:","category":"section"},{"location":"methods/hydrothermal/hydrothermal/#eq:hydrothermal-k","page":"Hydrothermal Circulation","title":"eq:hydrothermal-k","text":"k_m = \nbegincases\n    k_m^o + k_m^o(Nu_eff - 1)\n        expleftf_sleft(\n                        2 - fracT_mT_hydro^max - frac d_smm  d_mydro^max \n                    right)\n            right \n                 textif  0  d_sm(m)  d_hydro^max text and  y_ml  y_sl \n                 text and  y_m  y_sl text and  d_sedx_m  2500m \n    k_m^o  textotherwise\nendcases\n\nwhere f_s is a smoothing factor set equal to 075, T_hydro^max is the maximum temperature of the hydrothermal system set equal to 600^circC, d_smm is the the submud depth of the marker and d_hydro^max is the maximum submud depth of the hydrothermal system set equal to 4000m, y_ml is the y-coordinate of the mudline at the x-coordinate of the marker, y_sl is the y-coordinate of the sea level, y_m is the y-coordinate of the marker, d_sedx_m is the sediment thickness at the x-coordinate of the marker and k_m^o is the unmodified thermal  conductivity of the marker. \n\nThe effective Nusselt number Nu_eff is a functions of the distance from the molten zone, plastic strain rate and plastic strain as described with the following equations:","category":"section"},{"location":"methods/hydrothermal/hydrothermal/#eq:effective-nusselt","page":"Hydrothermal Circulation","title":"eq:effective-nusselt","text":"beginsplit\n    Nu_dot epsilon = \n        1 + (Nu_dist - 1)\n            left(1 \n                - expleft(-fracdot epsilon_plasticmdot epsilon_hydroright)\n            right) text\n    Nu_epsilon = \n        1 + (Nu_dist - 1)\n            left(1 \n                - expleft(-fracepsilon_plasticmepsilon_hydroright)\n            right) text\n    Nu_eff = max left( Nu_dot epsilon Nu_epsilon right)\nendsplit\n\nwhere dot epsilon_plasticm is the plastic strain rate of the marker m,  dot epsilon_hydro is the hydrothermal reference strain rate set equal to 10^-14s^-1, epsilon_plasticm is the plastic strain of the marker m, epsilon_hydro is the  hydrothermal plastic strain reference set equal to 0.5, Nu_dot epsilon is the Nusselt number based on the plastic strain rate, Nu_epsilon is the Nusselt number based on the plastic strain, and Nu_dist is the distance-based Nusselt number given by:","category":"section"},{"location":"methods/hydrothermal/hydrothermal/#eq:distance-based-nusselt","page":"Hydrothermal Circulation","title":"eq:distance-based-nusselt","text":"Nu_dist = max left( 10 f_hydroNu_refright)\n\nwhere Nu_ref is the reference Nusselt number set equal to 2 in this study and f_hydro is a hydrothermal distance factor given by:","category":"section"},{"location":"methods/hydrothermal/hydrothermal/#eq:hydrothermal-distance-factor","page":"Hydrothermal Circulation","title":"eq:hydrothermal-distance-factor","text":"f_hydro = exp left( - fracD_moltenlambda_hydro right)\n\nwhere lambda_hydro is the hydrothermal distance decay length set equal to 25km, and D_molten is the distance from the molten zone calculated using the following equation:","category":"section"},{"location":"methods/hydrothermal/hydrothermal/#eq:distance-from-molten-zone","page":"Hydrothermal Circulation","title":"eq:distance-from-molten-zone","text":"D_molten =\nbegincases\n    00  textif  x_molten^min  x_m  x_molten^max \n    x_molten^min - x_m  textif  x_m  x_molten^min \n    x_m - x_molten^max  textif  x_m  x_molten^max\nendcases\n\nwhere x_m is the x-coordinate of the marker and x_molten^min and x_molten^max are the  x-limits of the molten zone given by:","category":"section"},{"location":"methods/hydrothermal/hydrothermal/#eq:x-molten-limits","page":"Hydrothermal Circulation","title":"eq:x-molten-limits","text":"beginsplit\n    x_molten^min = x_moltenk - 05W_moltenk - D_molten^buffer text\n    x_molten^max = x_moltenk + 05W_moltenk + D_molten^buffer\nendsplit\n\nwhere W_moltenk is the width of the gabbroic molten zone in drainage basin k, x_moltenk is  the x-coordinate of the mid-point of the gabbroic molten zone in drainage basin k, and  D_molten^buffer is the buffer distance for the molten zone set equal to 25km.","category":"section"},{"location":"models/model_list/#EarthBox-Models","page":"Model List","title":"EarthBox Models","text":"Lithospheric Extension with Strong Lateral Zones\nLithospheric Extension with a Weak Fault\nLithospheric Extension with Viscous Softening\nPolyphase Lithospheric Extension\nVisco-elasto-plastic Extension with Sediment Transport\nMelting of a Hot Box in the Mantle\nSeafloor Spreading Model with Melting, Melt Extraction and Extrusion\nLithospheric Extension with Seaward Dipping Reflector (SDR) Formation\nSubduction Zone Initiation at a Fracture Zone\nSandbox Extension Analogue Benchmark\nSandbox Shortening Analogue Benchmark\nMagma-poor Extension: Iberia\nMagmatic Crust Formation: Central Atlantic","category":"section"},{"location":"benchmarks/models/viscoelastic_stress_buildup/#Viscoelastic-Stress-Buildup","page":"Viscoelastic Stress Buildup","title":"Viscoelastic Stress Buildup","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:viscoelastic_stress_buildup);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 0.00655\nMax relative error: 0.076 %\nMax relative error limit: 0.100 %\n\nTest Successful: max relative error is not greater than limit: 0.076% <= 0.100%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_17-37-19/viscoelastic_stress_buildup_output\n\n(Image: Viscoelastic Stress Buildup Benchmark)","category":"section"},{"location":"benchmarks/models/viscoelastic_stress_buildup/#fig:viscoelastic-stress-buildup","page":"Viscoelastic Stress Buildup","title":"fig:viscoelastic-stress-buildup","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"benchmarks/models/rayleigh_taylor_instability/#Rayleigh-Taylor-Instability","page":"Rayleigh Taylor Instability","title":"Rayleigh Taylor Instability","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:rayleigh_taylor_instability);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\n>> Rayleigh-Taylor Instability Benchmark Input and Output\n   layer1_thickness: 1500.0000\n   layer2_thickness: 1500.0000\n   density_layer1: 3000.0000\n   density_layer2: 2900.0000\n   viscosity_layer1: 10000000000000.0000\n   viscosity_layer2: 10000000000000000000.0000\n   amplitude_initial: 10.0000\n   wavelength: 4000.0000\n   growth_factor_k_numerical: 0.3137\n   velocity_y_wave_numerical(cm/yr): -7.2836E-04\n   growth_factor_k_analytical: 0.3190\n   velocity_y_wave_analytical(cm/yr): -7.4077E-04\n   theta1: 2.3562\n   b1: 0.5000\n   b2: 0.2000\n   b1*K+b2 (numerical): 0.3568\n   b1*K+b2 (analytical): 0.3595\n\n\nMax difference (num-ana): 0.00000\nMax relative error: 1.675 %\nMax relative error limit: 3.500 %\n\nTest Successful: max relative error is not greater than limit: 1.675% <= 3.500%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_17-18-47/rayleigh_taylor_instability_output\n","category":"section"},{"location":"api/material_geometry/sticky_air_geometry/#StickyAirGeometry","page":"StickyAirGeometry","title":"StickyAirGeometry","text":"The StickyAirGeometry module is used to initialize the sticky air/water layer used to approximate a stress-free surface.","category":"section"},{"location":"api/material_geometry/sticky_air_geometry/#Initialization","page":"StickyAirGeometry","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/sticky_air_geometry/#EarthBox.MaterialGeometry.StickyAirGeometry.initialize!","page":"StickyAirGeometry","title":"EarthBox.MaterialGeometry.StickyAirGeometry.initialize!","text":"Initialize sticky air geometry.\n\nKeyword arguments:\n\nthick_air::Float64:\nThickness in meters of sticky air in meters\n\n\n\n\n\n","category":"function"},{"location":"api/boundary_conditions/bc_managers/velocity_from_strain_rate/#EarthBox.BoundaryConditions.VelocityFromStrainRate.initialize!","page":"VelocityFromStrainRate","title":"EarthBox.BoundaryConditions.VelocityFromStrainRate.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize velocity from strain rate boundary condition parameters.\n\nArguments\n\nmodel::ModelData: Model data object containing model parameters and arrays.\n\nOptional Keyword Arguments\n\niuse_strain_rate::Union{Bool, Nothing}: \n0 use full extension velocity to define velocity bc's; 1 use strain rate\nstrain_rate_bc::Union{Float64, Nothing}: \nStrain rate boundary condition in 1/s\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"api/markers/dilatancy/#MarkerDilatancy","page":"MarkerDilatancy","title":"MarkerDilatancy","text":"","category":"section"},{"location":"api/markers/dilatancy/#Initialization","page":"MarkerDilatancy","title":"Initialization","text":"","category":"section"},{"location":"api/markers/dilatancy/#EarthBox.Markers.MarkerDilatancy.initialize!","page":"MarkerDilatancy","title":"EarthBox.Markers.MarkerDilatancy.initialize!","text":"initialize!(model::ModelData)::Nothing\n\nInitialize marker dilatancy for plasticity models. This initializes the marker_dilatation_angle array in the model data container and is required for all models that use dilatancy.\n\nArguments\n\nmodel::ModelData: The model data container containing the model parameters and arrays.\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"methods/lava_flow/lava_flow/#Melt-Extrusion-and-Lava-Flow","page":"Lava Flow","title":"Melt Extrusion and Lava Flow","text":"Volcanic extrusion and lava flow for a given eruption time step is modeled using a cellular automata  approach (Dietterich et al., 2017) where the volume of magma available for extrusion in a melt  drainage basin is divided into  N_flow flow events that extrude from a probabilistic eruption location x_e. Flow events occur at  an eruption interval Delta t_e and involve the extrusion of all melt extracted during model time steps within the eruption interval. At the beginning of each  flow event, the current topography grid (x_topo text  y_topo) is decimated to a uniform  grid (x_topotext  y_topo) with spacing Delta x_topo to improve the computational  performance of the cellular automata calculation. Then a decimated flow thickness grid for the flow  event, (x_topotext  H_flow), is initialized to zero thickness. Each flow is that divided  into N_pulse pulses that laterally flow from the eruption location x_e to adjacent cells on  the decimated topography grid. \n\nThe volume of volcanic material per flow V_flow is calculated using the following equation:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:flow-volume","page":"Lava Flow","title":"eq:flow-volume","text":"V_flow = fracV_volkN_flow\n\nwhere N_flow is given by:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:num-flows","page":"Lava Flow","title":"eq:num-flows","text":"N_flow =\nbegincases\n    intleft( fracV_volkV_flow^char right)  quad textfor quad V_volk  V_flow^char\n    1  quad textfor quad textotherwise\nendcases\n\nwhere V_volk is the total volume of volcanic material available for extrusion from the drainage  basin k calculated during the melt extraction steps within the eruption interval and V_flow^char  is the characteristic volume of volcanic material per flow given by:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:char-flow-volume","page":"Lava Flow","title":"eq:char-flow-volume","text":"V_flow^char = \nbegincases\n    L_sa H_ressa\n         quad textfor quad  y_efc leq y_sl\n            quad textand \n    L_sm H_ressm\n         quad textfor quad  y_efc  y_sl\nendcases\n\nwhere L_sa is the characteristic subaerial flow length, H_ressa is the  subaerial residual flow thickness, L_sm is the characteristic submarine flow length, and H_ressm is the submarine residual flow thickness, y_efc is the forecasted y-coordinate of the eruption, and y_sl is the y-coordinate of sea level. The forecasted y-coordinate  of the eruption y_efc in equation Eq. is determined by interpolating  the y-coordinate from the decimated topography grid (x_topo text  y_topo) at the  forecasted eruption location x_efc which is calculated using the following equation:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:x-eruption-fc","page":"Lava Flow","title":"eq:x-eruption-fc","text":"x_efc = x_e min + fracW_e2\n\nwhere x_e min is the minimum x-coordinate of the eruption location give by:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:x-eruption-min","page":"Lava Flow","title":"eq:x-eruption-min","text":"x_e min = x_shallowpm - fracW_e2\n\nwhere x_shallowpm is the average x-coordinate of the shallowest partially molten mantle  marker within drainage basin k calculated during melt extraction, and W_e is the width  of the eruption zone given by the following equation:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:eruption-width","page":"Lava Flow","title":"eq:eruption-width","text":"W_e = \nbegincases\n    W_emin\n         quad textfor quad H_mc leq H_mcmin quad textand \n    W_emax\n         quad textfor quad H_mc geq H_mcmax quad textand \n    W_emin + \n        frac(H_mck - H_mcmin)(H_mcmax - H_mcmin)(W_emax - W_emin)\n         quad textfor quad H_mcmin  H_mc  H_mcmax\nendcases\n\nwhere H_mck is the characteristic magmatic crust height for melt drainage basin k calculated  during melt extraction, H_mcmin is the minimum characteristic magmatic crust height, H_mcmax  is the maximum characteristic magmatic crust height, W_emin is the minimum width of the  eruption zone and W_emax is the maximum width of the eruption zone. \n\nEach flow is erupted on the surface at eruption location x_e calculated as a normally distributed random variable as described by the following equation:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:random-eruption-location","page":"Lava Flow","title":"eq:random-eruption-location","text":"x_e sim mathcalN left( x_emin + 05W_e  (025W_e)^2 right)\n\nsubject to the constraint:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:eruption-location-constraints","page":"Lava Flow","title":"eq:eruption-location-constraints","text":"x_emin leq x_e leq x_emin + W_e text\n\nIf x_e falls outside this range, it is recalculated.\n\nEach flow is erupted in a series of pulses where the number of pulses is:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:num_pulses","page":"Lava Flow","title":"eq:num_pulses","text":"N_pulse = maxleft\n    intleft(fracV_flowleft(Delta x_topo H_resright)right)\n    text  1\n    right\n\nwhere Delta x_topo is the grid spacing of a decimated topography grid used to perform cellular automata calculations, and H_res is the residual flow thickness given by:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:residual*flow*thickness","page":"Lava Flow","title":"eq:residualflowthickness","text":"H_res = \nbegincases\n    H_ressa\n         quad textfor quad  y_e leq Y_sl\n            quad textand \n    H_ressm\n         quad textfor quad  y_e  Y_sl\nendcases\n\nThe thickness of each pulse is calculated using the following equation:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:pulse_thickness","page":"Lava Flow","title":"eq:pulse_thickness","text":"H_pulse = fracV_flowN_pulseDelta x_topo\n\nA critical step in the cellular automata calculation is to sort the indices of the decimated topography grid based on the distance from the eruption location x_e with grid index given by:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:eruption-index","page":"Lava Flow","title":"eq:eruption-index","text":"i_e = intleft(fracx_eDelta x_toporight) text\n\nFor a given pulse of volcanic material, the cellular automata calculation is initialized as:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:initialize-pulse-thickness","page":"Lava Flow","title":"eq:initialize-pulse-thickness","text":"H_flow(i_e) = H_flow(i_e)^o + H_pulse text\n\nwhere H_flow(i_e)^o is the thickness of the flow at index i_e prior to the current pulse. For a given lava pulse, flow thickness H_flow is updated for each cell by radiating output from  index i_e. Basaltic lava material flows from cells with higher relative elevation to adjacent cells  with the lower relative elevation until the integrated thickness of the lava flow H_flow equals  the residual thickness H_res after which flow ceases to occur. During the iterative update procedure  for a given pulse of the lava, the y-coordinates of topography, y_topo(i), y_topo(i-1),  and y_topo(i+1) are are related to current flow thickness H_flow(i) as follows:\n\nbeginsplit\n    y_topo(i) = y_topo(i) - H_flow(i) \n    y_topo(i-1) = y_topo(i-1) - H_flow(i-1) \n    y_topo(i+1) = y_topo(i+1) - H_flow(i+1)\nendsplit\n\nand elevation differences that drive flow from cell i to adjacent cells are given by:\n\nbeginsplit\n    Delta E_left(i) = max(0 text  y_topo(i-1) - y_topo(i)) \n    Delta E_right(i) = max(0 text  y_topo(i+1) - y_topo(i)) text\nendsplit\n\nwhere positive values of Delta E_left(i) and Delta E_right(i) indicate that flow will  occur from cell i to adjacent cells i-1 and i+1, respectively, if current flow thickness H_flow(i) is greater than the residual thickness H_res. The total thickness of lava  available to flow to adjacent cells is given by:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:total-outflow-thickness","page":"Lava Flow","title":"eq:total-outflow-thickness","text":"Delta H_outtotal(i) = frac23\n    minleft\n            maxleft( 0 text  H_flow(i) - H_resright)\n            text \n            Delta E_limit(i)\n        right\n\nwhere Delta H_outtotal(i) is the total thickness of lava available to flow from cell i to adjacent cells, and Delta E_limit(i) is given by:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:lava-delta-elevation-limit","page":"Lava Flow","title":"eq:lava-delta-elevation-limit","text":"Delta E_limit(i) = \nbegincases\n    left(Delta E_left(i) + Delta E_right(i)right)2\n         quad textif quad\n            Delta E_left(i)  0 quad textand quad \n            Delta E_right(i))  0 \n    Delta E_right(i)\n         quad textelse if quad Delta E_right(i)  0 \n    Delta E_left(i)\n         quad textelse quad Delta E_left(i)  0 text\nendcases\n\nEquation Eq. facilitates convergence of the cellular automata  iterations by limiting the amount of inter-cellular flow and ensures that flow does not occur if flow thickness is less than or equal to the residual flow thickness H_res.\n\nThe total outflow thickness H_outtotal(i) is partitioned to adjacent cells using the following equations:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:outflow-thickness","page":"Lava Flow","title":"eq:outflow-thickness","text":"beginsplit\n    Delta H_outleft(i) = minleft(\n        Delta H_outtotal(i)\n        fracDelta E_left(i)\n            left( Delta E_left(i) + Delta E_right(i) right) text  Delta E_left(i)\n        right) \n    Delta H_outright(i) = minleft(\n        Delta H_outtotal(i)\n        fracDelta E_right(i)\n            left( Delta E_left(i) + Delta E_right(i) right) text  Delta E_right(i)\n        right) text \nendsplit\n\nwhere outflow thickness is limited by elevation differences between cells. The thickness of the flow is updated for cell i and adjacent cells using the following equations:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:flow-thickness-update","page":"Lava Flow","title":"eq:flow-thickness-update","text":"beginsplit\n    H_flow(i-1) = H_flow(i-1)^o + Delta H_outleft(i) \n    H_flow(i) = H_flow(i)^o - Delta H_outleft(i) - Delta H_outright(i) \n    H_flow(i+1) = H_flow(i+1)^o + Delta H_outright(i)\nendsplit\n\nwhere H_flow(i-1)^o, H_flow(i)^o, and H_flow(i+1)^o are the thickness of the flow prior to the current cellular automata iteration. For each iteration of the cellular automata calculation, equations Eq. are applied to each cell in the decimated topography grid. These iterations are repeated until the maximum thickness difference between iterations falls below a  tolerance of 10^-4.\n\nAfter the thickness of the flow on the decimated grid, H_flowi, is updated for each pulse, flow thickness is interpolated and added to the original un-decimated topography grid producing an  updated flow thickness H_flowi. The topography grid at the end of a flow event is then updated as follows:","category":"section"},{"location":"methods/lava_flow/lava_flow/#eq:topo-flow-update","page":"Lava Flow","title":"eq:topo-flow-update","text":"y_topoi = y_topoi^o - H_flowi\n\nwhere y_topoi^o is y-coordinate of the topography from the prior flow event. Equation  Eq. ensures that lava flow calculations are consistent with a dynamically  evolving landscape impacted by the flow of volcanic material. \n\nThe thickness of lava H_flowi produced during a given flow event is added to H_flowtoti, which is  the integrated thickness of all flow events associated with a thermo-mechanical model time step. The total flow thickness H_flowtoti is used to transform sticky markers to volcanic material if y_m is greater than y_topom, which is the interpolated y-coordinate of the updated topography grid y_topoi at x-coordinate x_m. For cases where topography has been  updated for both sedimentation and extrusive flow, sticky markers are transformed to volcanic  sediment if y_m is greater than y_topom + H_flowtotm and to volcanic markers if  y_m is less than y_topom + H_flowtotm where H_flowtotm is the total thickness of lava  flows interpolated at the x-coordinate of the marker x_m. This approach assumes that sediment is deposited prior to the eruption of volcanic material. The current volume of volcanic material available for extrusion, V_volk, is reset to zero at the end of each eruption interval.","category":"section"},{"location":"api/melt_model/melt_damage/#MeltDamage","page":"MeltDamage","title":"MeltDamage","text":"","category":"section"},{"location":"api/melt_model/melt_damage/#Initialization","page":"MeltDamage","title":"Initialization","text":"","category":"section"},{"location":"api/melt_model/melt_damage/#EarthBox.MeltModel.MeltDamage.initialize!","page":"MeltDamage","title":"EarthBox.MeltModel.MeltDamage.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize melt damage model parameters.\n\nArguments\n\nmodel::ModelData: The model data container containing the    model parameters and arrays.\n\nKeyword Arguments\n\niuse_melt_damage::Int64\nInteger flag that activates melt damage model where the damage factor is calculated for markers in the melt damage zone above partially molten mantle.\niuse_probabilistic_melt_damage::Int64\nInteger flag that activates probabilistic melt damage model where the damage factor is calculated probabilistically for markers in the melt damage zone.\nmelt_damage_distance::Float64\nDistance in meters from the shallow partially molten mantle where the damage factor is calculated for markers in the melt damage zone.\nmelt_damage_factor::Float64\nMaximum melt damage factor. Friction angle is divided by this factor to account for melt damage.\nmelt_damage_taper_distance::Float64\nDistance in meters over which melt damage factor tapers to one.\nmaximum_damage_probability::Float64\nMaximum probability (fraction) of melt damage for markers in the central melt damage zone.\nmagmatic_crust_height_threshold::Float64\nThreshold height in meters for magmatic crust used in linear melt damage probability model\nmagmatic_crust_height_minimum::Float64\nMinimum height in meters for magmatic crust used in linear melt damage probability model\nmagmatic_crust_height_maximum::Float64\nMaximum height in meters for magmatic crust used in linear melt damage probability model.\nmagmatic_crust_height_intermediate::Float64\nIntermediate height in meters for magmatic crust used in linear melt damage probability model.\nintermediate_damage_probability::Float64\nIntermediate probability (fraction) of melt damage for markers in the central melt damage zone.\n\n\n\n\n\n","category":"function"},{"location":"methods/governing_equations/momentum_and_mass/#Conservation-of-Momentum-and-Mass","page":"Conservation of Momentum and Mass","title":"Conservation of Momentum and Mass","text":"Velocity and pressure are obtained by solving the conservation momentum and mass equations for a slow, highly viscous incompressible visco-elasto-plastic fluid:","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:x-stokes","page":"Conservation of Momentum and Mass","title":"eq:x-stokes","text":"fracpartial sigma_xxpartial x\n+ fracpartial sigma_xypartial y\n- fracpartial Ppartial x\n= -rho g_x","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:y-stokes","page":"Conservation of Momentum and Mass","title":"eq:y-stokes","text":"-fracpartial sigma_xxpartial y \n+ fracpartial sigma_xypartial x\n- fracpartial Ppartial y\n= -rho g_y","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:visco-elastic-term","page":"Conservation of Momentum and Mass","title":"eq:visco-elastic-term","text":"f_ve = fraceta_vpmu Delta t + eta_vp","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:xx-stress","page":"Conservation of Momentum and Mass","title":"eq:xx-stress","text":"sigma_xx\n= 2 eta_vp dotepsilon_xx(1 - f_ve) + sigma_xx^co f_ve","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:xy-stress","page":"Conservation of Momentum and Mass","title":"eq:xy-stress","text":"sigma_xy\n= 2 eta_vp dotepsilon_xy (1 - f_ve) + sigma_xy^co f_ve","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:strain-rate-components","page":"Conservation of Momentum and Mass","title":"eq:strain-rate-components","text":"dotepsilon_xx = fracpartial v_xpartial x quad \ndotepsilon_xy = frac12 left( fracpartial v_xpartial y + \nfracpartial v_ypartial x right)","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:continuity","page":"Conservation of Momentum and Mass","title":"eq:continuity","text":"fracpartial v_xpartial x + fracpartial v_ypartial y = 0\n\nwhere sigma_xx is the deviatoric normal stresses, sigma_xx^co is the corrected deviatoric normal stress from the previous time step, sigma_xy is the deviatoric  shear stress, sigma_xy^co is the corrected deviatoric shear stress from the previous time  step, P is pressure, rho is density, g_x and g_y are the gravitational  accelerations, eta_vp is the visco-plastic viscosity, mu is the shear modulus,  Delta t is the computational time step, dotepsilon_xx is normal deviatoric strain  rate, dotepsilon_xy is the deviatoric shear strain rate and v_x and v_y are the  velocity components. Equations Eq. and Eq. are the x- and  y-components of the Stokes equations, respectively. We note that the equation Eq.  utilizes the relationships sigma_yy = -sigma_xx and sigma_yx = sigma_xy to  reduce computational storage requirements. The Boussinesq approximation is used to account for the  effects of temperature and pressure on density in the gravitation terms in Eq. and  Eq. while maintaining the assumptions of incompressibility from  Eq.:","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:density","page":"Conservation of Momentum and Mass","title":"eq:density","text":"rho = rho_ref left(1 - alpha (T - T_ref)right)left(1 + beta(P-P_ref)right)\n\nwhere rho_ref is the reference density, alpha is the thermal expansion coefficient, T_ref is the reference temperature (298.15 K), beta is the compressibility coefficient, P_ref is the reference pressure (10^5 Pa). Gravitational acceleration in the x-direction is set  equal to zero, g_x = 0, and in the y-direction gravitational acceleration is set to g_y = 98  m/s^2. The visco-plastic viscosity term eta_vp is given by:","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:visco-plastic-viscosity","page":"Conservation of Momentum and Mass","title":"eq:visco-plastic-viscosity","text":"beginsplit\neta_vp = eta_creep quad textfor quad sigma_II elastic leq sigma_yield \ntext and \neta_vp = mu Delta t fracsigma_yieldsigma_II elastic - sigma_yield quad \ntextfor quad sigma_II elastic  sigma_yield\nendsplit\n\nwhere eta_creep is the viscosity associated with creep mechanisms, sigma_yield  is the yield stress and sigma_II elastic is the second invariant for purely elastic stress buildup as given by","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:second-invariant-elastic-stress","page":"Conservation of Momentum and Mass","title":"eq:second-invariant-elastic-stress","text":"sigma_II elastic = fracmu Delta t + eta_creepeta_creepsigma_II\n\nwhere sigma_II is the second invariant of the stress tensor given by","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:second-invariant-stress","page":"Conservation of Momentum and Mass","title":"eq:second-invariant-stress","text":"sigma_II = sqrtleft(sigma_xy^2 + sigma_xx^2right) text\n\nVisco-plastic viscosity eta_vp is is limited by a minimum value and a maximum value to avoid numerical issues. A typical minimum viscosity used in EarthBox simulations is 10^18 Pa cdot s, and a typical maximum viscosity is 10^26 Pa cdot s.\n\nThe yield stress sigma_yield is given by the following equations:","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:yield-stress","page":"Conservation of Momentum and Mass","title":"eq:yield-stress","text":"sigma_yield =\nbegincases\n    sigma_c costheta + sinthetaleft(P - P_fright)  quad textfor P geq P_f\n    sigma_c cos(theta)  quad textfor P  P_f\nendcases\n\nwhere sigma_c is cohesion, theta is the friction angle, and P_f is  fluid pressure. Yield stress is limited by a minimum value of 1 MPa.\n\nThe corrected deviatoric stresses from previous time steps, sigma_xx^co and  sigma_xy^co, which appear in equations Eq. and Eq.,  take into account rotation using the following equations:","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#xx-stress-rot","page":"Conservation of Momentum and Mass","title":"xx-stress-rot","text":"sigma_xx^co\n= sigma_xxleft(cos(omega Delta t)^2 - sin(omega Delta t)^2right)\n- sigma_xy sin(2omega Delta t)","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#xy-stress-rot","page":"Conservation of Momentum and Mass","title":"xy-stress-rot","text":"sigma_xy^co = sigma_xx sin(2omega Delta t) + sigma_xy cos(2omega Delta t)\n\nomega = frac12left(fracpartial v_ypartial x - fracpartial v_xpartial yright)\n\nwhere omega is the rotation rate or spin of the material.\n\nA free surface is implemented in the model using a sticky-air-water layer requiring stabilization to  avoid the so called drunken sailor effect. To achieve this we use the approach described by  Gerya (2019) whereby advection-related density changes are incorporated into Eq.  to better approximate density at the end of the time step and avoid the drunken sailor effect. The  modified y-Stokes equation is given by:","category":"section"},{"location":"methods/governing_equations/momentum_and_mass/#eq:y-stokes-stabilization","page":"Conservation of Momentum and Mass","title":"eq:y-stokes-stabilization","text":"-fracpartial sigma_xxpartial y\n+ fracpartial sigma_xypartial x\n- fracpartial Ppartial y \n- g_y Delta t left( v_x fracpartial rhopartial x + \nv_y fracpartial rhopartial y right)\n= -rho g_y","category":"section"},{"location":"api/rock_properties/rock_properties/#RockProperties","page":"RockProperties","title":"RockProperties","text":"","category":"section"},{"location":"api/rock_properties/rock_properties/#Initialization","page":"RockProperties","title":"Initialization","text":"","category":"section"},{"location":"api/rock_properties/rock_properties/#Example","page":"RockProperties","title":"Example","text":"using EarthBox\n# Initialize EarthBox including model data container.\neb = EarthBoxState(\n    xsize=500000.0, ysize=160000.0, \n    xnum=250, ynum=80, \n    dx_marker=500.0, dy_marker=500.0);\n# Unpack the model data container.\nmodel = eb.model_manager.model;\n# Initialize a rock property model with the density model from Liao14,\n# temperature-dependent thermal conductivity and a rhocp (Density x Heat Capacity) \n# model with temperature dependent heat capacity\nRockProperties.initialize!(\n    model,\n    density_model              = density_model_names.Liao14,\n    thermal_conductivity_model = thermal_conductivity_model_names.SekiguchiWaples,\n    rhocp_model                = rhocp_model_names.TemperatureDependentWaples,\n    iuse_sed_porosity          = 1\n);\nRockProperties.print_option(model);","category":"section"},{"location":"api/rock_properties/rock_properties/#EarthBox.RockProperties.initialize!","page":"RockProperties","title":"EarthBox.RockProperties.initialize!","text":"initialize!(model::ModelData)::Nothing\n\nInitialize rock properties for all markers.\n\nArguments\n\nmodel::ModelData: Model data container containing the model parameters and arrays.\ndensity_model::Union{String, Symbol, Nothing}=nothing:    Density model option name. See the Density Models section below for    information on available density models.\nthermal_conductivity_model::Union{String, Symbol, Nothing}=nothing:    Thermal conductivity model option name. See the Thermal Conductivity Models    section below for information on available thermal conductivity models.\nrhocp_model::Union{String, Symbol, Nothing}=nothing:    Heat capacity model option name. See the RhoCp Models section below for    information on available heat capacity models.\n\nKeyword arguments\n\niuse_sed_porosity::Int64: \nDepth-dependent sediment porosity: 0 off; 1 on\niuse_melt_lens::Int64: \nInclude shallow melt lens effect: 0 off; 1 on\nmaximum_heat_capacity::Float64: \nMaximum heat capacity for rock properties used with Waples temperature-dependent model in J/kg/k\n\n\n\nDensity Models\n\n\n\nLiao14\n\ndensity_model value: \"Liao14\", :Liao14, or 0\nDescription: This density model type is a function of temperature and pressure following the equation described by Liao et al. (2014).\n\nNaliboff17\n\ndensity_model value: \"Naliboff17\", :Naliboff17, or 2\nDescription: This density model uses 600 degrees Celsius as a reference and does not include pressure.\n\nBlankenbach89\n\ndensity_model value: \"Blankenbach89\", :Blankenbach89, or 1\nDescription: This density model type is a function of temperature following the equation described by Blankenbach (1989).\n\n\n\nThermal Conductivity Models\n\n\n\nLiao14\n\nthermal_conductivity_model value: \"Liao14\", :Liao14, or 0\nDescription: This thermal conductivity model type is a function of temperature and pressure following the equation described by Liao et al. (2014).\n\nAdiabatic\n\nthermal_conductivity_model value: \"Adiabatic\", :Adiabatic, or 4\nDescription: Thermal conductivity model for simple lithosphere model. This thermal conductivity model uses constant values within material domains and increases thermal conductivity to mimic a sub-lithospheric adiabatic gradient.\n\nSekiguchiWaples\n\nthermal_conductivity_model value: \"SekiguchiWaples\", :SekiguchiWaples, or 5\nDescription: Thermal conductivity model adapted from Sekiguchi (1984) and modified by Doug Waples as summarized by Hantschel and Kauerauf (2009). Thermal conductivity is a function of temperature and matrix thermal conductivity at a reference temperature of 20 degrees Celsius.\n\nTemperatureDependent\n\nthermal_conductivity_model value: \"TemperatureDependent\", :TemperatureDependent, or 2\nDescription: This thermal conductivity model type is a function of temperature and is used for the channel flow benchmark with temperature-dependent thermal conductivity.\n\nNaliboff17\n\nthermal_conductivity_model value: \"Naliboff17\", :Naliboff17, or 3\nDescription: Thermal conductivity model from Naliboff et al. (2017). This thermal conductivity model uses constant values within material domains and increases thermal conductivity to 39.25 W/m/K to mimic a sub-lithospheric adiabatic gradient.\n\nUniform\n\nthermal_conductivity_model value: \"Uniform\", :Uniform, or 1\nDescription: This thermal conductivity model type involves constant thermal conductivity.\n\n\n\nRhoCp Models\n\n\n\nConstant\n\nrhocp_model value: \"Constant\", :Constant, or 0\nDescription: This rho*cp model type uses a constant heat capacity.\n\nTemperatureDependentWaples\n\nrhocp_model value: \"TemperatureDependentWaples\", :TemperatureDependentWaples, or 1\nDescription: This rho*cp model type uses a temperature-dependent heat capacity following the approach of Waples and Waples (2004). See Hantschel and Kauerauf (2010, pg. 117) for details.\n\n\n\n\n\n","category":"function"},{"location":"benchmarks/models/box_convection_isoviscous_1a/#Box-Convection-Isoviscous-1a","page":"Box Convection Isoviscous 1a","title":"Box Convection Isoviscous 1a","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:box_convection_isoviscous_1a);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 0.01676                                              \nMax relative error: 0.039 %                                                    \nMax relative error limit: 0.200 %                                              \n                                                                               \nTest Successful: max relative error is not greater than limit: 0.039% <= 0.200%\n                                                                               \nLook at the following path for benchmark plots: ../earthbox_benchmark_results_2025-11-15_17-48-48/box_convection_isoviscous_1a_output\n\n(Image: Plasticity Benchmark)","category":"section"},{"location":"benchmarks/models/box_convection_isoviscous_1a/#fig:box-convection-isoviscous-1a","page":"Box Convection Isoviscous 1a","title":"fig:box-convection-isoviscous-1a","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"api/earthbox_api/#EarthBox-API-Overview","page":"API Overview","title":"EarthBox API Overview","text":"The EarthBox API provides access to model initialization and execution functions.\n\nSee Building and Executing Models with the EarthBox API for examples of how to use the EarthBox API for building models and running time steps.","category":"section"},{"location":"api/earthbox_api/#API-Components","page":"API Overview","title":"API Components","text":"Initializing EarthBox\nEarthbox models are initialized by creating a EarthBoxState object\nStaggered Grid Initialization\nA staggered grid can be initialized using a variety of grid types and  refinement parameters.\nA variety of option are available for defining material geometries including  StickyAirGeometry, , EarthLayering, LithoStrongZones,   Plume, CrustalHole, RayleighTaylor,  MobileWall, Sandbox, InternalVelocityZone,   FractureZone, WeakFault and WeakSeed\nBoundaryConditions\nA variety of integrated boundary condition models are available for the  Stokes-continuity and heat equations that include marker recycling  schemes. Initialization API functions are available for pressure,   temperature, velocity, velocity stepping, velocity stopping, defining  velocity with strain rate and for defining transient bottom temperature   boundary conditions that approximate the thermal effects of a plume   spreading out beneath a tectonic plate.\nMarkerCoordinates\nMarkers can be initialized using a regular or random distribution.\nMarkerTemperature\nMarker temperature can be initialized using a variety of models including  analytical models for the Earth's geotherm.\nMarker Friction Coefficients\nFriction coefficients defined in markers can be initialized using a  a regular or randomized model, and time-dependent randomization can  be activated.\nMarkerCohesion\nInitialize marker cohesion. \nMarkerDilatancy\nInitialize marker dilatancy.\nMarkerViscousStrainSoftening\nA viscous strain softening model can be implemented whereby the   pre-exponential terms of dislocation creep are modified by a function  of plastic strain.\nMarkerStressLimits\nInitialize stress limits for power-law rheology and plastic yield stress.\nMarkerBoundaryFriction\nInitialize boundary friction layer thickness, friction angle and cohesion.\nMarkerMaterials\nInitialize a geometric marker material initialization model, define  viscosity limits, and activate the use of fluid pressure in yield stress  equations, and define a plastic healing rate.\nRockProperties\nInitialize rock property models for density, thermal conductivity and  heat capacity.\nHydrothermal Circulation\nInitialize a hydrothermal circulation model that approximates the effects   of hydrothermal circulation on thermal structure at spreading centers using  effective thermal conductivity.\nSerpentinization Model\nInitialize a serpentinization model that affects thermal conductivity and   density and produces heat during exothermic serpentinization reactions.\nStokesContinuitySolver\nInitialize the Stokes-continuity including gravitational acceleration,   activation of interface stabilization to avoid the drunken sailor effect,  an option for turning off gravity at a specified time and an option to   turn off the solver or use kinematic models instead of solving for velocity.\nGlobalPlasticityLoop\nInitialize the global plasticity loop (Picard iterations) used to solve   the non-linear visco-elasto-plastic Stoke-continuity equations including   tolerance, maximum number of iterations and the type of global plasticity  loop with option for defining plastic failure on nodes or markers.\nHeatSolver\nInitialize the heat-equation solver including options for shear heating,   adiabatic heating, maximum temperature change used for adaptive time stepping,  and a sticky air thermal correction that increases the accuracy of thermal   solutions at the sticky-rock interface.\nMarker Advection\nInitialize the marker advection scheme including adaptive time stepping  parameters and sub-grid thermal and stress diffusion.\nInterpolation\nInitialization of options involving interpolation including harmonic  averaging of shear viscosity on basic nodes to define viscosity on  pressure nodes.\nMeltModel\nInitialize the melting model include melt fraction calculation using  specified solidus and liquidus models and melt-dependent rock property   models (viscosity, density and heat capacity).\nMeltExtraction\nInitialize the melt extraction model for extracting partial melt from   fertile ultramafic rocks with option for injecting magma at the base of   the moho to model rapid melt transport and a gabbro fractionation   model that transforms the properties of gabbroic melt based on   proximity to the Moho.       \nMeltExtrusion\nInitialize a melt extrusion model that models lava flow using a cellular   automata approach.\nMeltDamage\nInitialize a probabilistic melt damage model hat modifies friction angles  to approximate the weakening effect of melt transport networks above  melt focusing points in the partially molten mantle.\nTopography\nInitialize a topography model that uses a marker-chain with a  Lagrangian-Eulerian approach for tracking the sticky-rock interface.\nSealevel\nInitialize a sea level model with different models for defining sea level  including constant, using the upper-left corning the the lithosphere and  using isostatic balance between a reference lithosphere column and average   pressure at the base of the model domain. A base level shift model can   also be defined.\nRelativeBaseLevel\nInitialize the reference lithosphere used in the seal-level model based  on average pressure at the base of the model. \nSedimentTransport\nInitialize the sediment transport model with deposition, erosion, fluvial  transport and sediment compaction.\nSalt Deposition\nInitialize a salt deposition model.\nTime Step Execution\nInitialize time stepping and velocity stepping parameters and execute  model times steps.\nCase Management\nDefine a dictionary of parameters for multiple cases and define model  parameters based on a case name.","category":"section"},{"location":"bibliography/bibliography/#References","page":"References","title":"References","text":"Amestoy,P.; Buttari,A.; L'Excellent,J.-Y. and Mary,T. (2019). Performance and Scalability of the Block Low-Rank Multifrontal Factorization on Multicore Architectures. ACMTransactionsonMathematicalSoftware 45, 2:12:26.\n\n\n\nAmestoy,P.; Duff,I.S.; Koster,J. and L'Excellent,J.-Y. (2001). A Fully Asynchronous Multifrontal Solver Using Distributed Dynamic Scheduling. SIAMJournalonMatrixAnalysisandApplications 23, 1541.\n\n\n\nAndrs-Martnez,M.; Prez-Gussiny,M.; Armitage,J. and Morgan,J.P. (2019). Thermomechanical Implications of Sediment Transport for the Architecture and Evolution of Continental Rifts and Margins. Tectonics 38, 641665, arXiv:https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/2018TC005346.\n\n\n\nBos,B. and Spiers,C.J. (2002). Frictional-viscous flow of phyllosilicate-bearing fault rock: Microphysical model and implications for crustal strength profiles. JournalofGeophysicalResearch:SolidEarth 107, ECV 1-1-ECV 1-13, arXiv:https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/2001JB000301.\n\n\n\nDietterich,H.R.; Lev,E.; Chen,J.; Richardson,J.A. and Cashman,K.V. (2017). Benchmarking computational fluid dynamics models of lava flow simulation for hazard assessment, forecasting, and risk management. JournalofAppliedVolcanology 6, 9.\n\n\n\nGerya,T. (2010). Introduction to Numerical Geodynamic Modelling (Cambridge University Press).\n\n\n\nGerya,T. (2019). Introduction to Numerical Geodynamic Modelling (Cambridge University Press).\n\n\n\nGerya,T.V. (2013). Three-dimensional thermomechanical modeling of oceanic spreading initiation and evolution. PhysicsoftheEarthandPlanetaryInteriors 214, 3552.\n\n\n\nGerya,T.V. and Yuen,D.A. (2003). Characteristics-based marker-in-cell method with conservative finite-differences schemes for modeling geological flows with strongly variable transport properties. PhysicsoftheEarthandPlanetaryInteriors 140, 293318.\n\n\n\nGerya,T.V. and Yuen,D.A. (2007). Robust characteristics method for modelling multiphase visco-elasto-plastic thermo-mechanical problems. PhysicsoftheEarthandPlanetaryInteriors 163, 83105. Computational Challenges in the Earth Sciences.\n\n\n\nHantschel,T. and Kauerauf,A.I. (2009). Fundamentals of Basin and Petroleum Systems Modeling, eBook Packages Earth and Environmental Science, Earth and Environmental Science (R0) (Springer Berlin, Heidelberg).\n\n\n\nHarlow,F.H. and Welch,J.E. (1965). Numerical Calculation of TimeDependent Viscous Incompressible Flow of Fluid with Free Surface. ThePhysicsofFluids 8, 21822189, arXiv:https://pubs.aip.org/aip/pfl/article-pdf/8/12/2182/12731401/21821online.pdf.\n\n\n\nKatz,R.F.; Spiegelman,M. and Langmuir,C.H. (2003). A new parameterization of hydrous mantle melting. Geochemistry,Geophysics,Geosystems 4, arXiv:https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/2002GC000433.\n\n\n\nKneller,E.; Wei,Z.; Gombosi,D. and Karner,G. (2023). Rapid and integrated petroleum systems analysis with dynamic gas fraction and flexural reconstructions: Application to hydrocarbon charge and commodity risk. MarineandPetroleumGeology 153, 106281.\n\n\n\nLesher,C.E. and Spera,F.J. (2015). Chapter 5 - Thermodynamic and Transport Properties of Silicate Melts and Magma. In: The Encyclopedia of Volcanoes (Second Edition), Second EditionEdition, edited by Sigurdsson,H. (Academic Press, Amsterdam); pp.113141.\n\n\n\nMaclennan,J.; Hulme,T. and Singh,S.C. (2004). Thermal models of oceanic crustal accretion: Linking geophysical, geological and petrological observations. Geochemistry,Geophysics,Geosystems 5, arXiv:https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/2003GC000605.\n\n\n\nMezri,L.; Garca-Pintado,J.; Prez-Gussiny,M.; Liu,Z.; Bach,W. and Cannat,M. (2024). Tectonic controls on melt production and crustal architecture during magma-poor seafloor spreading. EarthandPlanetaryScienceLetters 628, 118569.\n\n\n\nNaliboff,J.B.; Buiter,S.J.; Pron-Pinvidic,G.; Osmundsen,P.T. and Tetreault,J. (2017). Complex fault interaction controls continental rifting. NatureCommunications 8, 1179.\n\n\n\nSclater,J.G. and Christie,P.A. (1980). Continental stretching: An explanation of the Post-Mid-Cretaceous subsidence of the central North Sea Basin. JournalofGeophysicalResearch:SolidEarth 85, 37113739, arXiv:https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/JB085iB07p03711.\n\n\n\nStolper,E.; Walker,D.; Hager,B.H. and Hays,J.F. (1981). Melt segregation from partially molten source regions: The importance of melt density and source region size. JournalofGeophysicalResearch:SolidEarth 86, 62616271, arXiv:https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/JB086iB07p06261.\n\n\n\nTheunissen,T.; Huismans,R.S.; Lu,G. and Riel,N. (2022). Relative continent - mid-ocean ridge elevation: A reference case for isostasy in geodynamics. Earth-ScienceReviews 233, 104153.\n\n\n\n","category":"section"},{"location":"model_data/collections/heat_equation/","page":"HeatEquation","title":"HeatEquation","text":"HeatEquation\n\nParameters\nThermalCond\nHeatOptions\nTempChangeLimit\nBuild\nInitialCondition\nSteadyState\nRhoCp\nArrays\nRhsHeat\nRadiogenicProduction\nAdiabaticProduction\nThermalConductivity\nTemperature\nRhoCp\nHeatResidual","category":"section"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.HeatEquation","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.HeatEquation","text":"HeatEquation <: CollectionContainer\n\nData structure containing parameter and array objects for heat equation solver.\n\nFields\n\nparameters::Parameters: Parameter groups for heat solver configuration\narrays::Arrays: Array groups for temperature and thermal properties\n\nConstructor\n\nHeatEquation(ynum::Int, xnum::Int)::HeatEquation\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.Parameters","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for heat equation solver.\n\nFields\n\nthermalcond::ThermalCond: Thermal conductivity model options\nheat_options::HeatOptions: Heat solver on/off switches\ntemp_change_limit::TempChangeLimit: Temperature change limits\nbuild::Build: Sparse matrix build parameters\ninitial_condition::InitialCondition: Initial temperature conditions\nsteady_state::SteadyState: Steady state thermal structure parameters\nrhocp::RhoCp: Density times heat capacity options\n\nConstructor\n\nParameters(ynum::Int, xnum::Int)\n\nCreate a new Parameters collection with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.ThermalCondGroup.ThermalCond","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.ThermalCondGroup.ThermalCond","text":"ThermalCond <: AbstractParameterGroup\n\nParameter group for thermal conductivity model options.\n\nFields\n\nitype_conductivity::ParameterInt: Integer flag for thermal conductivity model\nstype_conductivity::ParameterStr: Thermal conductivity model option name\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nitype_conductivity = model.heat_equation.parameters.thermalcond.itype_conductivity.value\nstype_conductivity = model.heat_equation.parameters.thermalcond.stype_conductivity.value\n\nConstructor\n\nThermalCond()\n\nReturns\n\nThermalCond: New ThermalCond parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.HeatOptionsGroup.HeatOptions","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.HeatOptionsGroup.HeatOptions","text":"HeatOptions <: AbstractParameterGroup\n\nParameter group for heat solver on/off switches.\n\nFields\n\niuse_heat::ParameterInt: Solve heat equation: 0 off; 1 on\niuse_shear_heating::ParameterInt: Shear heating: 0 off; 1 on\niuse_adiabatic_heating::ParameterInt: Adiabatic heating: 0 off; 1 on\niuse_sticky_correction::ParameterInt: Sticky temperature correction (reset to top boundary temperature): 0 off; 1 on\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\niuse_heat = model.heat_equation.parameters.heat_options.iuse_heat.value\niuse_shear_heating = model.heat_equation.parameters.heat_options.iuse_shear_heating.value\niuse_adiabatic_heating = model.heat_equation.parameters.heat_options.iuse_adiabatic_heating.value\niuse_sticky_correction = model.heat_equation.parameters.heat_options.iuse_sticky_correction.value\n\nConstructor\n\nHeatOptions()\n\nReturns\n\nHeatOptions: New HeatOptions parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.TempChangeLimitGroup.TempChangeLimit","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.TempChangeLimitGroup.TempChangeLimit","text":"TempChangeLimit <: AbstractParameterGroup\n\nParameter group for temperature change limits.\n\nFields\n\nmax_temp_change::ParameterFloat: Maximal temperature change allowed for one timestep in Kelvin\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nmax_temp_change = model.heat_equation.parameters.temp_change_limit.max_temp_change.value\n\nConstructor\n\nTempChangeLimit()\n\nReturns\n\nTempChangeLimit: New TempChangeLimit parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.BuildGroup.Build","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.BuildGroup.Build","text":"Build <: AbstractParameterGroup\n\nParameter group for sparse matrix build parameters.\n\nFields\n\nibuild::ParameterInt: 0 define full system, 1 only define non-zero elements\nN::ParameterInt: Number of rows or columns in the large NxN matrix\nnonzero_max_heat::ParameterInt: Maximum number of non-zero values allowed for the large matrix\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nibuild = model.heat_equation.parameters.build.ibuild.value\nN = model.heat_equation.parameters.build.N.value\nnonzero_max_heat = model.heat_equation.parameters.build.nonzero_max_heat.value\n\nConstructor\n\nBuild(xnum::Int, ynum::Int)\n\nArguments\n\nxnum::Int: Number of grid points in x-direction\nynum::Int: Number of grid points in y-direction\n\nReturns\n\nBuild: New Build parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.InitialConditionGroup.InitialCondition","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.InitialConditionGroup.InitialCondition","text":"InitialCondition <: AbstractParameterGroup\n\nParameter group for initial temperature condition parameters.\n\nFields\n\nitype_temp::ParameterInt: Option flag for initial temperature condition\nstype_temp::ParameterStr: Initial temperature condition option name\ntemperature_uniform::ParameterFloat: Uniform initial temperature value in Kelvin\ntemperature_of_wave::ParameterFloat: Temperature of wave in Kelvin\nage_lithosphere_left::ParameterFloat: Age of lithosphere to the left of fracture zone in Myr\nage_lithosphere_right::ParameterFloat: Age of lithosphere to the right of fracture zone in Myr\nthermal_lithosphere_depth_left::ParameterFloat: Thermal lithosphere depth to the left of fracture zone in meters\nthermal_lithosphere_depth_right::ParameterFloat: Thermal lithosphere depth to the right of fracture zone in meters\nthermal_diffusivity::ParameterFloat: Thermal diffusivity in m^2/s\nadiabatic_gradient::ParameterFloat: Adiabatic gradient in K/km\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nitype_temp = model.heat_equation.parameters.initial_condition.itype_temp.value\nstype_temp = model.heat_equation.parameters.initial_condition.stype_temp.value\ntemperature_uniform = model.heat_equation.parameters.initial_condition.temperature_uniform.value\ntemperature_of_wave = model.heat_equation.parameters.initial_condition.temperature_of_wave.value\nage_lithosphere_left = model.heat_equation.parameters.initial_condition.age_lithosphere_left.value\nage_lithosphere_right = model.heat_equation.parameters.initial_condition.age_lithosphere_right.value\nthermal_lithosphere_depth_left = model.heat_equation.parameters.initial_condition.thermal_lithosphere_depth_left.value\nthermal_lithosphere_depth_right = model.heat_equation.parameters.initial_condition.thermal_lithosphere_depth_right.value\nthermal_diffusivity = model.heat_equation.parameters.initial_condition.thermal_diffusivity.value\nadiabatic_gradient = model.heat_equation.parameters.initial_condition.adiabatic_gradient.value\n\nConstructor\n\nInitialCondition()\n\nReturns\n\nInitialCondition: New InitialCondition parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.SteadyStateGroup.SteadyState","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.SteadyStateGroup.SteadyState","text":"SteadyState <: AbstractParameterGroup\n\nParameter group for steady state thermal structure parameters.\n\nFields\n\nthick_thermal_lithosphere::ParameterFloat: Thickness of the thermal lithosphere in meters\nconductivity_upper_crust::ParameterFloat: Thermal conductivity of upper crust W/m/K\nconductivity_lower_crust::ParameterFloat: Thermal conductivity of lower crust W/m/K\nconductivity_mantle::ParameterFloat: Thermal conductivity of mantle W/m/K\nheat_production_upper_crust::ParameterFloat: Radiogenic heat production in upper crust W/m^3\nheat_production_lower_crust::ParameterFloat: Radiogenic heat production in lower crust W/m^3\nheat_production_mantle::ParameterFloat: Radiogenic heat production in mantle W/m^3\namplitude_perturbation::ParameterFloat: Amplitude of central thermal perturbation in meters\nwidth_perturbation::ParameterFloat: Width of central thermal perturbation in meters\ntemperature_surface::ParameterFloat: Initial temperature at the surface for lithospheric models with sticky air in Kelvin\ntemperature_moho::ParameterFloat: Initial temperature at the Moho for lithospheric models in Kelvin\ntemperature_base_lith::ParameterFloat: Initial temperature at the base of the lithosphere in Kelvin\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nthick_thermal_lithosphere = model.heat_equation.parameters.steady_state.thick_thermal_lithosphere.value\nconductivity_upper_crust = model.heat_equation.parameters.steady_state.conductivity_upper_crust.value\nconductivity_lower_crust = model.heat_equation.parameters.steady_state.conductivity_lower_crust.value\nconductivity_mantle = model.heat_equation.parameters.steady_state.conductivity_mantle.value\nheat_production_upper_crust = model.heat_equation.parameters.steady_state.heat_production_upper_crust.value\nheat_production_lower_crust = model.heat_equation.parameters.steady_state.heat_production_lower_crust.value\nheat_production_mantle = model.heat_equation.parameters.steady_state.heat_production_mantle.value\namplitude_perturbation = model.heat_equation.parameters.steady_state.amplitude_perturbation.value\nwidth_perturbation = model.heat_equation.parameters.steady_state.width_perturbation.value\ntemperature_surface = model.heat_equation.parameters.steady_state.temperature_surface.value\ntemperature_moho = model.heat_equation.parameters.steady_state.temperature_moho.value\ntemperature_base_lith = model.heat_equation.parameters.steady_state.temperature_base_lith.value\n\nConstructor\n\nSteadyState()\n\nReturns\n\nSteadyState: New SteadyState parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.RhoCpGroup.RhoCp","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ParameterCollection.RhoCpGroup.RhoCp","text":"RhoCp <: AbstractParameterGroup\n\nParameter group for density times heat capacity model options.\n\nFields\n\nitype_rhocp::ParameterInt: Integer flag for density*heat_capacity model\nstype_rhocp::ParameterStr: Density*heat_capacity model option name\nmaximum_heat_capacity::ParameterFloat: Maximum heat capacity for rock properties used with Waples temperature-dependent model in J/kg/k\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nitype_rhocp = model.heat_equation.parameters.rhocp.itype_rhocp.value\nstype_rhocp = model.heat_equation.parameters.rhocp.stype_rhocp.value\nmaximum_heat_capacity = model.heat_equation.parameters.rhocp.maximum_heat_capacity.value\n\nConstructor\n\nRhoCp()\n\nCreate a new RhoCp parameter group with default values.\n\nReturns\n\nRhoCp: New RhoCp parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.Arrays","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.Arrays","text":"Arrays <: AbstractArrayCollection\n\nData structure containing array groups for heat equation solver.\n\nFields\n\nrhs::RhsHeat: Right-hand side arrays for heat equation\nradiogenic_production::RadiogenicProduction: Radiogenic heat  production arrays\nadiabatic_production::AdiabaticProduction: Adiabatic heat  production arrays\nthermal_conductivity::ThermalConductivity: Thermal conductivity arrays\ntemperature::Temperature: Temperature field arrays\nrhocp::RhoCp: Density times heat capacity arrays\nresiduals::HeatResidual: Heat equation residual arrays\n\nConstructor\n\nArrays(ynum::Int, xnum::Int)::Arrays\n\nCreate a new Arrays collection with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.RhsHeatGroup.RhsHeat","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.RhsHeatGroup.RhsHeat","text":"RhsHeat <: AbstractArrayGroup\n\nArray group containing right-hand side arrays for heat equation.\n\nFields\n\nRT1::ScalarArray2DState: (ynum, xnum) : Right-hand side values at grid node locations.\nRHSheat::RhsHeatArray1DState: (ynum*xnum) : Right-hand side array for heat equation.\n\nNested Dot Access\n\nRT1 = model.heat_equation.arrays.rhs.RT1.array\nRHSheat = model.heat_equation.arrays.rhs.RHSheat.array\n\nConstructor\n\nRhsHeat(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nRhsHeat: New RhsHeat array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.RadiogenicProductionGroup.RadiogenicProduction","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.RadiogenicProductionGroup.RadiogenicProduction","text":"RadiogenicProduction <: AbstractArrayGroup\n\nArray group containing radiogenic heat production arrays.\n\nFields\n\nhr0::ScalarArray2DState: (ynum, xnum) : Backup of radiogenic heat production on basic grid in W/m^3.\nhr1::ScalarArray2DState: (ynum, xnum) : Radiogenic heat production interpolated from markers to basic grid in W/m^3.\n\nNested Dot Access\n\nhr0 = model.heat_equation.arrays.radiogenic_production.hr0.array\nhr1 = model.heat_equation.arrays.radiogenic_production.hr1.array\n\nConstructor\n\nRadiogenicProduction(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nRadiogenicProduction: New RadiogenicProduction array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.AdiabaticProductionGroup.AdiabaticProduction","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.AdiabaticProductionGroup.AdiabaticProduction","text":"AdiabaticProduction <: AbstractArrayGroup\n\nArray group containing adiabatic heat production arrays.\n\nFields\n\nha0::ScalarArray2DState: (ynum, xnum) : Backup of adiabatic heat production term on basic grid.\nha1::ScalarArray2DState: (ynum, xnum) : Adiabatic heat production term (expansivity x temperature) interpolated from markers to basic grid.\n\nNested Dot Access\n\nha0 = model.heat_equation.arrays.adiabatic_production.ha0.array\nha1 = model.heat_equation.arrays.adiabatic_production.ha1.array\n\nConstructor\n\nAdiabaticProduction(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nAdiabaticProduction: New AdiabaticProduction array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.ThermalConductivityGroup.ThermalConductivity","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.ThermalConductivityGroup.ThermalConductivity","text":"ThermalConductivity <: AbstractArrayGroup\n\nArray group containing thermal conductivity arrays.\n\nFields\n\nkt0::ScalarArray2DState: (ynum, xnum) : Backup of thermal conductivity on basic grid in W/m/K.\nkt1::ScalarArray2DState: (ynum, xnum) : Thermal conductivity interpolated from markers to basic grid in W/m/K.\n\nNested Dot Access\n\nkt0 = model.heat_equation.arrays.thermal_conductivity.kt0.array\nkt1 = model.heat_equation.arrays.thermal_conductivity.kt1.array\n\nConstructor\n\nThermalConductivity(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nThermalConductivity: New ThermalConductivity array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.TemperatureGroup.Temperature","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.TemperatureGroup.Temperature","text":"Temperature <: AbstractArrayGroup\n\nArray group containing temperature field arrays.\n\nFields\n\ntk0::ScalarArray2DState: (ynum, xnum) : Old temperature array in Kelvin used for: (1) defining old temperature in grids for problematic marker interpolation after being copied from last conductive temperature solution (tk2), (2) defining old initial temperature when solving transient heat equation after being copied from temperature transport array (tk1), and (3) defining old temperature from previous iteration of adaptive time stepping heat loop after being copied from current conductive temperature solution (tk2).\ntk1::ScalarArray2DState: (ynum, xnum) : Transport array with temperature in Kelvin interpolated from advected markers to basic grid used to define initial old temperature when solving conductive heat equation.\ntk2::ScalarArray2DState: (ynum, xnum) : New conductive temperature solution array in Kelvin obtained by solving heat conduction equation on basic grid using adaptive time stepping heat loop and tk1 as initial condition.\ndtk1::ScalarArray2DState: (ynum, xnum) : Temperature change array in Kelvin used for: (1) defining temperature change (tk2 - tk0) on basic grid for iteration of adaptive time stepping heat loop, (2) defining temperature change on basic grid between new conductive solution and old advective transport array temperature (tk2 - tk1). Updated for subgrid diffusion by subtracting dtkn.\ndtkn::ScalarArray2DState: (ynum, xnum) : Subgrid diffusive temperature change array in Kelvin interpolated from markers to basic grid used to update dkt1 for subgrid diffusion.\n\nNested Dot Access\n\ntk0 = model.heat_equation.arrays.temperature.tk0.array\ntk1 = model.heat_equation.arrays.temperature.tk1.array\ntk2 = model.heat_equation.arrays.temperature.tk2.array\ndtk1 = model.heat_equation.arrays.temperature.dtk1.array\ndtkn = model.heat_equation.arrays.temperature.dtkn.array\n\nConstructor\n\nTemperature(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nTemperature: New Temperature array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.RhoCpGroup.RhoCp","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.RhoCpGroup.RhoCp","text":"RhoCp <: AbstractArrayGroup\n\nArray group containing density times heat capacity arrays.\n\nFields\n\nrhocp0::ScalarArray2DState: (ynum, xnum) : Backup of density times heat capacity on basic grid in kg/m^3 x J/kg/K.\nrhocp1::ScalarArray2DState: (ynum, xnum) : Density times heat capacity interpolated from markers to basic grid in kg/m^3 x J/kg/K.\n\nNested Dot Access\n\nrhocp0 = model.heat_equation.arrays.rhocp.rhocp0.array\nrhocp1 = model.heat_equation.arrays.rhocp.rhocp1.array\n\nConstructor\n\nRhoCp(ynum::Int, xnum::Int)\n\nCreate a new RhoCp array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nRhoCp: New RhoCp array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/heat_equation/#EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.HeatResidualGroup.HeatResidual","page":"HeatEquation","title":"EarthBox.ModelDataContainer.HeatEquationContainer.ArrayCollection.HeatResidualGroup.HeatResidual","text":"HeatResidual <: AbstractArrayGroup\n\nArray group containing heat equation residual array.\n\nFields\n\nrest::ScalarArray2DState: (ynum, xnum) : Residual for heat equation.\n\nNested Dot Access\n\nrest = model.heat_equation.arrays.residuals.rest.array\n\nConstructor\n\nHeatResidual(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nHeatResidual: New HeatResidual array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"plot_tools/scalar_grid_plots/#Plotting-Scalar-Arrays","page":"Scalar Grid Plots","title":"Plotting Scalar Arrays","text":"","category":"section"},{"location":"plot_tools/scalar_grid_plots/#EarthBox.PlotToolsManager.ModelPlots2DManager.plot_scalars","page":"Scalar Grid Plots","title":"EarthBox.PlotToolsManager.ModelPlots2DManager.plot_scalars","text":"plot_scalars(;\n    scalar_name::Union{String, Symbol},\n    model_output_path::String,\n    dimensions::Tuple{Float64, Float64, Float64, Float64},\n    xy_spacing::Tuple{Float64, Float64},\n    istart::Int64 = 1,\n    iend::Union{Int64, Nothing} = nothing,\n    kwargs...\n)::Nothing\n\nArguments\n\nscalar_name::Union{String, Symbol}:\nName of scalar to plot\nmodel_output_path::String:\nPath to output directory containing model output files\ndimensions::Tuple{Float64, Float64, Float64, Float64}:\nDimensions of plot: (xmin, xmax, ymin, ymax)\nxyspacing::Tuple{Float64, Float64}:\nSpacing of ticks for the x and y axes: (xspacing, yspacing)\nistart::Int64 = 1:\nInitial starting time step\niend::Union{Int64, Nothing} = nothing:\nFinal ending time step\n\nOptional Scalar Plotting Keyword Arguments\n\ncontour_interval::Float64:\nInterval for contour lines (defaults based on scalar name)\nminimum_value::Float64:\nMinimum value for contour lines (defaults based on scalar name)\nmaximum_value::Float64:\nMaximum value for contour lines (defaults based on scalar name)\nplot_contours::Bool:\nPlot contours (default is false)\ngrid_plot_type::String:\nGrid plot type: \"nomesh\" or \"mesh\" (default is \"nomesh\")\n\nOptional General Plotting Keyword Arguments\n\nnsteps::Int: \nNumber of time steps to plot\nnskip::Int: \nNumber of time steps to skip\nistart::Int: \nInitial starting time step\niplot_contour_labels::Int:\n0 = off; 1 = plot contour labels\ncolor_map::Union{String, Symbol}:\ncolor map name for scalar grid plots (see https://docs.makie.org/dev/explanations/colors)\nfigure_dpi::Float64:\nDots per square inch for figures\nfigsize::Tuple{Float64, Float64}:\nFigure size in inches in x-y directions\nlength_units::String:\nLength units for plots (\"km\", \"m\", \"cm\")\ntime_units::String:\nTime units for plots (\"Myr\", \"yr\", \"s\")\nvelocity_units::String:\nVelocity units for plots (\"cm/yr\", \"cm/hr\", \"m/s\", \"m/yr\", \"mm/yr\")\ntemperature_units::String:\nTemperature units for plots (\"C\", \"K\")\nviscosity_units::String:\nViscosity units for plots (\"Pa.s\", \"log10(Pa.s)\")\nstrainrate_units::String:\nStrain rate units for plots (\"1/s\", \"log10(1/s)\")\npressure_units::String:\nPressure units for plots (\"Pa\", \"GPa\", \"MPa\")\nstress_units::String:\nStress units for plots (\"Pa\", \"GPa\", \"MPa\")\nlinewidth::Float64:\nLine width for plots\nedgecolor::String:\nEdge color for plots\nshow_nodes::Bool:\nShow nodes on plots\ndimensions::Tuple{Float64, Float64, Float64, Float64}:\nDimensions of plot: (xmin, xmax, ymin, ymax)\ndim_close_up::Union{Tuple{Float64, Float64, Float64, Float64}, Nothing}:\nDimensions of zoomed in plot: (xmin, xmax, ymin, ymax)\nxyspacing::Tuple{Float64, Float64}:\nSpacing of ticks for the x and y axes: (xspacing, yspacing)\nxy_location_contour_legend::Tuple{Float64, Float64}:\nLocation of low-left-hand corner of contour legend\ntitle_fontsize::Int:\nFont size for title\naxis_title_fontsize::Int:\nFont size for axis titles\naxis_labels_fontsize::Int:\nFont size for axis labels\naxis_ticks_fontsize::Int:\nFont size for axis ticks\ncontour_label_fontsize::Int:\nFont size for contour labels\nnumber_format::String:\nNumber format for contours (e.g. \"%6.1f\")\nlegend_fontsize::Int:\nFont size for legend\ncolorbar_ticks_fontsize::Int:\nFont size for color bar ticks\ncolorbar_labels_fontsize::Int:\nFont size for color bar labels\ntext_box_font_size::Int:\nFont size for text box\nextension::String:\nExtension for plots (e.g. \".png\", \".pdf\")\n\nValid Scalar Names\n\ntemperature\nviscosity\nstrainrate\npressure\nnormal_stress\nshear_stress\nshear_plastic_failure\nnormal_plastic_failure\nvelocity_x\nvelocity_y\nvelocity_mag\ndensity\nthermal_conductivity\n\n\n\n\n\n","category":"function"},{"location":"api/rock_properties/hydrothermal/hydrothermal/#HydrothermalCirculation","page":"Hydrothermal Circulation","title":"HydrothermalCirculation","text":"","category":"section"},{"location":"api/rock_properties/hydrothermal/hydrothermal/#Initialization","page":"Hydrothermal Circulation","title":"Initialization","text":"","category":"section"},{"location":"api/rock_properties/hydrothermal/hydrothermal/#EarthBox.HydrothermalCirculation.initialize!","page":"Hydrothermal Circulation","title":"EarthBox.HydrothermalCirculation.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize parameters for the hydrothermal circulation model used to approximate the effects of hydrothermal circulation on thermal structure using an effective thermal conductivity.\n\nKeyword Arguments\n\niuse_hydrothermal::Int64\nHydrothermal circulation: 0 off; 1 on (iuse_topo must be 1)\niuse_plastic_strain_rate_for_hydrothermal::Int64\nUse plastic strain rate for hydrothermal circulation: 0 off; 1 on\niuse_plastic_strain_for_hydrothermal::Int64\nUse plastic strain for hydrothermal circulation: 0 off; 1 on\nhydrothermal_smoothing_factor::Float64\nHydrothermal smoothing factor\nhydrothermal_nusselt_number::Float64\nHydrothermal Nusselt number\nhydrothermal_max_temperature::Float64\nHydrothermal max temperature in Celsius\nhydrothermal_max_depth::Float64\nHydrothermal max depth in meters\nhydrothermal_decay_length::Float64\nHydrothermal decay length in meters\nhydrothermal_buffer_distance::Float64\nHydrothermal buffer distance in meters\nhydrothermal_plastic_strain_rate_reference::Float64\nHydrothermal plastic strain rate reference in 1/s\nhydrothermal_plastic_strain_reference::Float64\nHydrothermal plastic strain reference\nsediment_thickness_threshold::Float64\nSediment thickness threshold in meters\n\n\n\n\n\n","category":"function"},{"location":"api/boundary_conditions/bc_managers/pressure/#EarthBox.BoundaryConditions.Pressure.initialize!","page":"Pressure","title":"EarthBox.BoundaryConditions.Pressure.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize pressure boundary conditions. The pressure boundary condition is either applied in the upper  left corner of the model or along the top or bottom boundaries depending on the boundary condition type selected by the user. See BoundaryConditions.initialize!  for more information.\n\nArguments\n\nmodel::ModelData: Model data object containing model parameters and arrays.\n\nOptional Keyword Arguments\n\npressure_bc::Union{Float64, Nothing}=nothing: \nPressure boundary condition in Pa.\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"api/boundary_conditions/bc_managers/velocity_step/#EarthBox.BoundaryConditions.VelocityStep.initialize!","page":"VelocityStep","title":"EarthBox.BoundaryConditions.VelocityStep.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize velocity stepping model. Activating velocity stepping requires setting the  iuse_velocity_step parameter to 1. At the velocity step time the lateral velocity boundary conditions are multiplied by the velocity_step_factor  parameter. This is accompanied by a multiplying the viscoelastic time step (timestep_viscoelastic) by  the timestep_adjustment_factor used to maintain stability during an increase in  velocity. There are two available velocity steps. The second velocity step is ignored if associated parameters are not provided.\n\nFor certain cases involving symmetric extensional boundary conditions with two velocity stepping events,  the time step parameters, velocity stepping factors and time step adjustment factors are calculated automatically. See EarthBox.run_time_steps for more details. For these cases, ensure that velocity stepping factors and time step adjustment factors are not overridden by providing values for the velocity_step_factor, velocity_second_step_factor, timestep_adjustment_factor and timestep_second_adjustment_factor parameters. The integer flag iuse_velocity_step should be still be set to 1 to activate velocity stepping and the first and second  velocity step times (velocity_step_time and velocity_second_step_time) should be provided.\n\nArguments\n\nmodel::ModelData: Model data object containing model parameters and arrays.\n\nOptional Keyword Arguments\n\niuse_velocity_step::Int64: \nIncrease/decrease full extension velocity by factor at specified time\nvelocity_step_factor::Float64: \nFactor used to increase/decrease velocity at specified time\nvelocity_second_step_factor::Float64: \nFactor used to increase/decrease velocity at specified time\ntimestep_adjustment_factor::Float64: \nFactor used to adjust time step when velocity is increased/decreased\ntimestep_second_adjustment_factor::Float64: \nFactor used to adjust time step when velocity is increased/decreased\nvelocity_step_time::Float64: \nTime of velocity increase/decrease in Myr\nvelocity_second_step_time::Float64: \nTime of second velocity increase/decrease in Myr\n\nReturns\n\nNothing\n\nExample: Single velocity step\n\nusing EarthBox\neb = EarthBoxState(\n    xnum = 100, ynum = 100, \n    xsize = 1000000.0, ysize = 1000000.0, \n    dx_marker = 10000.0, dy_marker = 10000.0\n)\nmodel = eb.model_manager.model\nBoundaryConditions.VelocityStep.initialize!(\n    model, iuse_velocity_step = 1, velocity_step_factor = 2.0, \n    timestep_adjustment_factor = 0.5, velocity_step_time = 10.0\n)\n\n\n\n\n\n","category":"function"},{"location":"api/stokes_continuity_solver/stokes_continuity_solver/#StokesContinuitySolver","page":"StokesContinuitySolver","title":"StokesContinuitySolver","text":"","category":"section"},{"location":"api/stokes_continuity_solver/stokes_continuity_solver/#Initialization","page":"StokesContinuitySolver","title":"Initialization","text":"","category":"section"},{"location":"api/stokes_continuity_solver/stokes_continuity_solver/#EarthBox.StokesContinuitySolver.initialize!","page":"StokesContinuitySolver","title":"EarthBox.StokesContinuitySolver.initialize!","text":"initialize!(\n    model::ModelData;\n    velocity_type::Union{Int, String, Symbol, Nothing}=nothing,\n    kwargs...\n)::Nothing\n\nInitialize the Stokes-continuity solver.\n\nArguments\n\nmodel::ModelData: The model data container containing    model parameters and arrays.\n\nArguments\n\nvelocity_type::Union{Int, String, Symbol, Nothing}: Controls the type of    velocity calculation. See the Velocity Types section below for information    on available velocity types. If velocity_type is nothing the option id from    the model data container will be used to define velocity type. The velocity type    is stored in the model data container as an integer ID (itype_velocity) and    a corresponding string name (stype_velocity). The velocity type parameters can be    accessed from the model data container as follows:\nitype_velocity = model.stokes_continuity.parameters.velocity_calc_option.itype_velocity.value\nstype_velocity = model.stokes_continuity.parameters.velocity_calc_option.stype_velocity.value\n\nKeyword Arguments\n\ngravity_x::Float64:\nx-component of gravity acceleration in m/s/s\ngravity_y::Float64:\ny-component of gravity acceleration in m/s/s\nturn_off_gravity_y::Int64:\nFlag to turn off y-component of gravity: 0 = off; 1 = on\nnsteps_turn_off_gravity::Int64:\nNumber of steps to gradually turn off gravity\niuse_interface_stabilization::Int64:\nFlag for interface stabilization: 0 off; 1 on\n\nReturns\n\nNothing\n\n\n\nVelocity Types\n\n\n\nVelocityFromStokesSolver\n\nvelocity_type value: \"VelocityFromStokesSolver\", :VelocityFromStokesSolver, or 0\nDescription: Velocity is calculated via solving the Stokes-continuity equations.\n\nZeroVelocity\n\nvelocity_type value: \"ZeroVelocity\", :ZeroVelocity, or -1\nDescription: Velocity is set to zero for testing purposes.\n\nKinematicSolidBodyRotation\n\nvelocity_type value: \"KinematicSolidBodyRotation\", :KinematicSolidBodyRotation, or 1\nDescription: Velocity is prescribed using a solid body rotation model.\n\n\n\n\n\n","category":"function"},{"location":"model_data/collections/timestep/","page":"Timestep","title":"Timestep","text":"Timestep\n\nParameters\nMainTimeLoop\nThermalLoop \nOutputSteps\nSingleIncrease\nMultipleIncreases\nBoundaryDisplacementStopping","category":"section"},{"location":"model_data/collections/timestep/#EarthBox.ModelDataContainer.TimestepContainer.Timestep","page":"Timestep","title":"EarthBox.ModelDataContainer.TimestepContainer.Timestep","text":"Timestep <: CollectionContainer\n\nData structure containing parameter objects associated with model time stepping.\n\nFields\n\nparameters::Parameters: Parameter groups for model time stepping\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/timestep/#EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.Parameters","page":"Timestep","title":"EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nCollection of timestep parameters.\n\nFields\n\nmain_time_loop::MainTimeLoop: Parameters used for main model time loop\nthermal_loop::ThermalLoop: Parameters used for adaptive time stepping loop for heat    equation\noutput_steps::OutputSteps: Parameters used for output steps\nsingle_increase::SingleIncrease: Parameters used for modifying the time step by a    single step\nmultiple_increase::MultipleIncrease: Parameters used for modifying the time step over    multiple steps\nboundary_displacement_stopping::BoundaryDisplacementStopping: Parameters used for    stopping the model when the displacement or extensional strain reaches a specified value\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/timestep/#EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.MainTimeLoopGroup.MainTimeLoop","page":"Timestep","title":"EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.MainTimeLoopGroup.MainTimeLoop","text":"MainTimeLoop <: AbstractParameterGroup\n\nParameter group for main time loop configuration.\n\nFields\n\nmodel_duration_myr::ParameterFloat: Model duration in Myr used to estimate the maximum number of time steps for extensional model with symmetric extension. If adaptive time stepping is used during the simulation due to displacements that exceed the user specified cell fraction then the actual model duration may be shorter than model_duration_myr. A buffer time of 3.0 Myr is added to the model duration when calculating the maximum number of time steps assuming that there will be some time step reduction. However, the user may need to increase the model_duration_myr to achieve the desired model duration. If you want full control over the number of time steps then set ntimestep_max and timestep_viscoelastic directly when using run_time_steps function.\nntimestep_max::ParameterInt: Maximum number of model time steps\ntimesum::ParameterFloat: Total model time in seconds in seconds\nntimestep::ParameterInt: Model time step counter\ntimestep_viscoelastic::ParameterFloat: The viscoelastic time step in seconds used in the viscoelastic formulation of the Stokes-continuity equations. The main model time step (timestep) is set equal to the viscoelastic time step at the start of each time loop iteration prior to defining the right-hand side terms that include the time-dependent viscoelastic factor. The viscoelastic time step may be modified due to changes in boundary conditions depending on user defined options\ntimestep_viscoelastic_step1::ParameterFloat: The viscoelastic time step in seconds for the first velocity step in seconds\ntimestep_viscoelastic_step2::ParameterFloat: The viscoelastic time step in seconds for the second velocity step in seconds\ntimestep::ParameterFloat: Main model time step in seconds used for forecasting viscoelastic stress, solving heat conduction equation, advecting markers and advancing model time. The main model time step may be reduced after solving the Stokes-continuity equations to ensure that markers do not advect beyond a user defined limit. The model time step is reset to the viscoelastic time step at the start of each time loop iteration. The heat equation loop may use time steps that are smaller than the main model time step if temperature changes are too large\niupdate_timestep::ParameterInt: 0 = off; 1 = update timestep using maximum displacement\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nmodel_duration_myr = model.timestep.parameters.main_time_loop.model_duration_myr.value\nntimestep_max = model.timestep.parameters.main_time_loop.ntimestep_max.value\ntimesum = model.timestep.parameters.main_time_loop.timesum.value\nntimestep = model.timestep.parameters.main_time_loop.ntimestep.value\ntimestep_viscoelastic = model.timestep.parameters.main_time_loop.timestep_viscoelastic.value\ntimestep_viscoelastic_step1 = model.timestep.parameters.main_time_loop.timestep_viscoelastic_step1.value\ntimestep_viscoelastic_step2 = model.timestep.parameters.main_time_loop.timestep_viscoelastic_step2.value\ntimestep = model.timestep.parameters.main_time_loop.timestep.value\niupdate_timestep = model.timestep.parameters.main_time_loop.iupdate_timestep.value\n\nConstructor\n\nMainTimeLoop()\n\nInitializes main time loop parameters with default values. Main time step is  set to 10000.0 s.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/timestep/#EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.ThermalLoopGroup.ThermalLoop","page":"Timestep","title":"EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.ThermalLoopGroup.ThermalLoop","text":"ThermalLoop <: AbstractParameterGroup\n\nParameter group for thermal loop configuration.\n\nFields\n\ntimestep_heat::ParameterFloat: Thermal time step in seconds used in adaptive heat solver loop\ntimestep_sum::ParameterFloat: Total thermal loop time in seconds\nobj_list::Vector{ParameterFloat}: List of numerical parameter objects\n\nNested Dot Access\n\ntimestep_heat = model.timestep.parameters.thermal_loop.timestep_heat.value\ntimestep_sum = model.timestep.parameters.thermal_loop.timestep_sum.value\n\nConstructor\n\nThermalLoop()\n\nInitializes thermal loop parameters with zero values for thermal time step  and total time.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/timestep/#EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.OutputStepsGroup.OutputSteps","page":"Timestep","title":"EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.OutputStepsGroup.OutputSteps","text":"OutputSteps <: AbstractParameterGroup\n\nParameter group for output step configuration.\n\nFields\n\ntimestep_out::ParameterFloat: Time step for output\nnskip::ParameterInt: Number of time steps to skip before output is generated. This is calculated as floor(Int, timestep_out/timestep_viscoelastic)\nicount_output::ParameterInt: Output loop counter used to track time steps between outputs. An output event is triggered when this counter is equal to nskip, which involves setting the output counter to zero. This counter is incremented by one at the end of each time step\nnoutput::ParameterInt: Number of outputs generated during a model run\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of numerical parameter objects\n\nNested Dot Access\n\ntimestep_out = model.timestep.parameters.output_steps.timestep_out.value\nnskip = model.timestep.parameters.output_steps.nskip.value\nicount_output = model.timestep.parameters.output_steps.icount_output.value\nnoutput = model.timestep.parameters.output_steps.noutput.value\n\nConstructor\n\nOutputSteps()\n\nInitializes output step parameters with default values. Output time step is  set to 1000.0 s.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/timestep/#EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.SingleIncreaseGroup.SingleIncrease","page":"Timestep","title":"EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.SingleIncreaseGroup.SingleIncrease","text":"SingleIncrease <: AbstractParameterGroup\n\nParameter group for single time step increase.\n\nFields\n\niuse_single_timestep_increase::ParameterInt: Flag to use single timestep increase: 0 = off; 1 = on. When active, the time step will be increased once during the simulation at the time step specified by ntime_increase\nntime_increase::ParameterInt: Time step number at which to increase the timestep. This is only used if iuse_single_timestep_increase is 1\nobj_list::Vector{ParameterInt}: List of parameter objects\n\nNested Dot Access\n\niuse_single_timestep_increase = model.timestep.parameters.single_increase.iuse_single_timestep_increase.value\nntime_increase = model.timestep.parameters.single_increase.ntime_increase.value\n\nConstructor\n\nSingleIncrease()\n\nInitializes single time step increase parameters. The increase is set to  occur at time step 100.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/timestep/#EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.MultipleIncreaseGroup.MultipleIncrease","page":"Timestep","title":"EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.MultipleIncreaseGroup.MultipleIncrease","text":"MultipleIncrease <: AbstractParameterGroup\n\nParameter group for multiple time step increases.\n\nFields\n\niuse_multiple_timestep_increase::ParameterInt: Flag to use multiple viscoelastic time step increases: 0 = off; 1 = on. When active the viscoelastic time step will be increased multiple times during the simulation at the time steps specified by ntime_increase_1, ntime_increase_2, etc\nntime_increase_1::ParameterInt: First time step number at which to increase the timestep\nntime_increase_2::ParameterInt: Second time step number at which to increase the timestep\nntime_increase_3::ParameterInt: Third time step number at which to increase the timestep\nntime_increase_4::ParameterInt: Fourth time step number at which to increase the timestep\ntime_increase_factor::ParameterFloat: Multiplication factor used to increase the viscoelastic time step\ncell_displ_factor::ParameterFloat: Factor used to adjust the maximum allowed cell displacement fraction during multiple viscoelastic time step increases\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of numerical parameter objects\n\nNested Dot Access\n\niuse_multiple_timestep_increase = model.timestep.parameters.multiple_increase.iuse_multiple_timestep_increase.value\nntime_increase_1 = model.timestep.parameters.multiple_increase.ntime_increase_1.value\nntime_increase_2 = model.timestep.parameters.multiple_increase.ntime_increase_2.value\nntime_increase_3 = model.timestep.parameters.multiple_increase.ntime_increase_3.value\nntime_increase_4 = model.timestep.parameters.multiple_increase.ntime_increase_4.value\ntime_increase_factor = model.timestep.parameters.multiple_increase.time_increase_factor.value\ncell_displ_factor = model.timestep.parameters.multiple_increase.cell_displ_factor.value\n\nConstructor\n\nMultipleIncrease()\n\nInitializes multiple time step increase parameters. Time increase factor and  cell displacement factor are both set to 2.0.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/timestep/#EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.BoundaryDisplacementStoppingGroup.BoundaryDisplacementStopping","page":"Timestep","title":"EarthBox.ModelDataContainer.TimestepContainer.ParameterCollection.BoundaryDisplacementStoppingGroup.BoundaryDisplacementStopping","text":"BoundaryDisplacementStopping <: AbstractParameterGroup\n\nParameter group for stopping criteria for boundary displacement or extensional strain.\n\nFields\n\niuse_boundary_displacement::ParameterInt: Flag to use boundary displacement stopping: 0 = off; 1 = on. When active, the model will stop when the boundary displacement reaches the limit specified by displ_limit\ndispl_limit::ParameterFloat: Displacement limit for stopping the model in meters\niuse_extensional_strain::ParameterInt: Flag to use extensional strain stopping: 0 = off; 1 = on. When active, the model will stop when the extensional strain reaches the limit specified by strain_limit\nstrain_limit::ParameterFloat: Strain limit for stopping the model\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of numerical    parameter objects\n\nNested Dot Access\n\niuse_boundary_displacement = model.timestep.parameters.boundary_displacement_stopping.iuse_boundary_displacement.value\ndispl_limit = model.timestep.parameters.boundary_displacement_stopping.displ_limit.value\niuse_extensional_strain = model.timestep.parameters.boundary_displacement_stopping.iuse_extensional_strain.value\nstrain_limit = model.timestep.parameters.boundary_displacement_stopping.strain_limit.value\n\nConstructor\n\nBoundaryDisplacementStopping()\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/interpolation/","page":"Interpolation","title":"Interpolation","text":"Interpolation\n\nParameters\nMarkerAndGridInterpOptions\nArrays\nGridWeights\nMarkerWeights","category":"section"},{"location":"model_data/collections/interpolation/#EarthBox.ModelDataContainer.InterpolationContainer.Interpolation","page":"Interpolation","title":"EarthBox.ModelDataContainer.InterpolationContainer.Interpolation","text":"Interpolation <: CollectionContainer\n\nData structure containing parameter and array objects for marker-grid interpolation.\n\nFields\n\nparameters::Parameters: Parameter groups for interpolation options\narrays::Arrays: Array groups for grid and marker interpolation weights\n\nConstructor\n\nInterpolation(ynum::Int, xnum::Int, marknum::Int)::Interpolation\n\nCreate a new Interpolation collection with the given grid and marker dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\nmarknum::Int: Number of markers in the model\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/interpolation/#EarthBox.ModelDataContainer.InterpolationContainer.ParameterCollection.Parameters","page":"Interpolation","title":"EarthBox.ModelDataContainer.InterpolationContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for marker-grid interpolation.\n\nFields\n\ninterp_options::MarkerAndGridInterpOptions: Interpolation method options\n\nConstructor\n\nParameters()\n\nCreate a new Parameters collection with default interpolation options.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/interpolation/#EarthBox.ModelDataContainer.InterpolationContainer.ParameterCollection.MarkerAndGridInterpOptionsGroup.MarkerAndGridInterpOptions","page":"Interpolation","title":"EarthBox.ModelDataContainer.InterpolationContainer.ParameterCollection.MarkerAndGridInterpOptionsGroup.MarkerAndGridInterpOptions","text":"MarkerAndGridInterpOptions <: AbstractParameterGroup\n\nParameter group for marker-grid interpolation options.\n\nFields\n\niuse_initial_temp_interp::ParameterInt: Interpolate nodal temperatures back to markers at start: 0 off; 1 on\niuse_harmonic_avg_normal_viscosity::ParameterInt: Harmonic averaging of shear viscosity for normal viscosity: 0 off; 1 on\nobj_list::Vector{ParameterInt}: List of parameter objects\n\nNested Dot Access\n\niuse_initial_temp_interp = model.interpolation.parameters.interp_options.iuse_initial_temp_interp.value\niuse_harmonic_avg_normal_viscosity = model.interpolation.parameters.interp_options.iuse_harmonic_avg_normal_viscosity.value\n\nConstructor\n\nMarkerAndGridInterpOptions()\n\nCreate a new MarkerAndGridInterpOptions parameter group with default values.\n\nReturns\n\nMarkerAndGridInterpOptions: New parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/interpolation/#EarthBox.ModelDataContainer.InterpolationContainer.ArrayCollection.Arrays","page":"Interpolation","title":"EarthBox.ModelDataContainer.InterpolationContainer.ArrayCollection.Arrays","text":"Arrays <: AbstractArrayCollection\n\nData structure containing array groups for marker-grid interpolation weights.\n\nFields\n\ngrid_weights::GridWeights: Summed weight arrays on grid nodes\nmarker_weights::MarkerWeights: Individual marker weight arrays\n\nConstructor\n\nArrays(ynum::Int, xnum::Int, marknum::Int)::Arrays\n\nCreate a new Arrays collection with the given grid and marker dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\nmarknum::Int: Number of markers in the model\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/interpolation/#EarthBox.ModelDataContainer.InterpolationContainer.ArrayCollection.GridWeightsGroup.GridWeights","page":"Interpolation","title":"EarthBox.ModelDataContainer.InterpolationContainer.ArrayCollection.GridWeightsGroup.GridWeights","text":"GridWeights <: AbstractArrayGroup\n\nArray group containing summed interpolation weight arrays on grid nodes.\n\nFields\n\nwtnodes::ScalarArray2DState: (ynum, xnum) : Summed marker weight factors on basic grid nodes using inclusive method with maximum search radius for markers.\nwtetas::ScalarArray2DState: (ynum, xnum) : Summed marker weight factors on basic grid nodes using exclusive method with shorter search radius for markers.\nwtetan::ScalarArray2DState: (ynum - 1, xnum - 1) : Summed marker weight factors for normal viscosity on pressure nodes.\nwtnodes_vy::ScalarArray2DState: (ynum + 1, xnum) : Summed marker weight factors on Vy staggered grid nodes using inclusive method with maximum search radius.\n\nNested Dot Access\n\nwtnodes = model.interpolation.arrays.grid_weights.wtnodes.array\nwtetas = model.interpolation.arrays.grid_weights.wtetas.array\nwtetan = model.interpolation.arrays.grid_weights.wtetan.array\nwtnodes_vy = model.interpolation.arrays.grid_weights.wtnodes_vy.array\n\nConstructor\n\nGridWeights(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nGridWeights: New GridWeights array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/interpolation/#EarthBox.ModelDataContainer.InterpolationContainer.ArrayCollection.MarkerWeightsGroup.MarkerWeights","page":"Interpolation","title":"EarthBox.ModelDataContainer.InterpolationContainer.ArrayCollection.MarkerWeightsGroup.MarkerWeights","text":"MarkerWeights <: AbstractArrayGroup\n\nArray group containing individual marker weight arrays for interpolation.\n\nFields\n\nmarker_wtforULnode::MarkerArrayFloat1DState: (marknum) : Marker weight for upper-left basic grid node.\nmarker_wtforLLnode::MarkerArrayFloat1DState: (marknum) : Marker weight for lower-left basic grid node.\nmarker_wtforURnode::MarkerArrayFloat1DState: (marknum) : Marker weight for upper-right basic grid node.\nmarker_wtforLRnode::MarkerArrayFloat1DState: (marknum) : Marker weight for lower-right basic grid node.\nmarker_wtforCnode::MarkerArrayFloat1DState: (marknum) : Marker weight for central pressure grid node.\nmarker_wtforULnodeVy::MarkerArrayFloat1DState: (marknum) : Marker weight for upper-left Vy staggered grid node.\nmarker_wtforLLnodeVy::MarkerArrayFloat1DState: (marknum) : Marker weight for lower-left Vy staggered grid node.\nmarker_wtforURnodeVy::MarkerArrayFloat1DState: (marknum) : Marker weight for upper-right Vy staggered grid node.\nmarker_wtforLRnodeVy::MarkerArrayFloat1DState: (marknum) : Marker weight for lower-right Vy staggered grid node.\n\nNested Dot Access\n\nmarker_wtforULnode = model.interpolation.arrays.marker_weights.marker_wtforULnode.array\nmarker_wtforLLnode = model.interpolation.arrays.marker_weights.marker_wtforLLnode.array\nmarker_wtforURnode = model.interpolation.arrays.marker_weights.marker_wtforURnode.array\nmarker_wtforLRnode = model.interpolation.arrays.marker_weights.marker_wtforLRnode.array\nmarker_wtforCnode = model.interpolation.arrays.marker_weights.marker_wtforCnode.array\nmarker_wtforULnodeVy = model.interpolation.arrays.marker_weights.marker_wtforULnodeVy.array\nmarker_wtforLLnodeVy = model.interpolation.arrays.marker_weights.marker_wtforLLnodeVy.array\nmarker_wtforURnodeVy = model.interpolation.arrays.marker_weights.marker_wtforURnodeVy.array\nmarker_wtforLRnodeVy = model.interpolation.arrays.marker_weights.marker_wtforLRnodeVy.array\n\nConstructor\n\nMarkerWeights(marknum::Int)\n\nArguments\n\nmarknum::Int: Number of markers in the model\n\nReturns\n\nMarkerWeights: New MarkerWeights array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"benchmarks/models/plasticity_benchmark_kaus10/#Plasticity-Benchmark-Kaus10","page":"Plasticity Benchmark Kaus10","title":"Plasticity Benchmark Kaus10","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:plasticity_benchmark_kaus10);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 1.00125                                              \nMax relative error: 1.780 %                                                    \nMax relative error limit: 4.000 %                                              \n                                                                               \nTest Successful: max relative error is not greater than limit: 1.780% <= 4.000%\n                                                                               \nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_17-48-48/plasticity_benchmark_kaus10_output\n\n(Image: Plasticity Benchmark)","category":"section"},{"location":"benchmarks/models/plasticity_benchmark_kaus10/#fig:plasticity-benchmark-kaus10","page":"Plasticity Benchmark Kaus10","title":"fig:plasticity-benchmark-kaus10","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"models/sdr_formation/sdr_formation/#Lithospheric-Extension-with-Seaward-Dipping-Reflector-(SDR)-Formation","page":"SDR Formation","title":"Lithospheric Extension with Seaward Dipping Reflector (SDR) Formation","text":"see EarthBox/models/sdr_formation\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/EExMeB9Svmc\"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"models/sdr_formation/sdr_formation/#fig:video-case0","page":"SDR Formation","title":"fig:video-case0","text":"Case0: Base case model of magmatic crust formation and subaerial lava flow during lithospheric extension with high melt damage. The melt damage factor is equal to 10 (High Melt Damage), the initial thermal anomaly in the asthenosphere Delta T_m is 100 C, the eruption interval (Delta t_erupt) is 50 thousand years and the fraction of melt extruded at the surface (f_ext) ranges from 6% to 50% as the characteristic magmatic crust increases from 6km to 7.5km.\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/-LEsA1HwXfo \"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"models/sdr_formation/sdr_formation/#fig:video-case1","page":"SDR Formation","title":"fig:video-case1","text":"Case1: Magmatic crust formation with lower thermal anomaly relative to case0. The melt damage factor is equal to 10 (High Melt Damage), the initial thermal anomaly in the asthenosphere (Delta T_m) is 50 C, the eruption interval (Delta t_erupt) is 50 thousand years and the fraction of melt extruded at the surface (f_ext) ranges from 6% to 50% as the characteristic magmatic crust increases from 6km to 7.5km.\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/VGA8DsmtTs4\"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"models/sdr_formation/sdr_formation/#fig:video-case9","page":"SDR Formation","title":"fig:video-case9","text":"Case9: Magmatic crust formation without melt damage. The melt damage factor is equal to 1 (i.e. No Melt Damage), the initial thermal anomaly in the asthenosphere (Delta T_m) is 100 C, the eruption interval (Delta t_erupt) is 50 thousand years and the fraction of melt extruded at the surface (f_ext) ranges from 6% to 50% as the characteristic magmatic crust increases from 6km to 7.5km.\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/5owKfEzqOIo \"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"models/sdr_formation/sdr_formation/#fig:video-case12","page":"SDR Formation","title":"fig:video-case12","text":"Case12: Magmatic crust formation with moderate melt damage. The melt damage factor is equal to 5 (Moderate Melt Damage), the initial thermal anomaly in the asthenosphere (Delta T_m) is 100 C, the eruption interval (Delta t_erupt) is 50 thousand years and the fraction of melt extruded at the surface (f_ext) ranges from 6% to 50% as the characteristic magmatic crust increases from 6km to 7.5km.\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/9sdVDjrcN5k\"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"models/sdr_formation/sdr_formation/#fig:video-case16","page":"SDR Formation","title":"fig:video-case16","text":"Case16: Shorter eruption interval relative to Case0. The melt damage factor is equal to 10 (High Melt Damage), the initial thermal anomaly in the asthenosphere (Delta T_m) is 100 C, the eruption interval (Delta t_erupt) is 12.5 thousand years and the fraction of melt extruded at the surface (f_ext) ranges from 6% to 50% as the characteristic magmatic crust increases from 6km to 7.5km.\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/DCyEYk1VpAE\"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"models/sdr_formation/sdr_formation/#fig:video-case18","page":"SDR Formation","title":"fig:video-case18","text":"Case18: Longer eruption interval relative to Case0. The melt damage factor is equal to 10 (High Melt Damage), the initial thermal anomaly in the asthenosphere (Delta T_m) is 100 C, the eruption interval (Delta t_erupt) is 100 thousand years and the fraction of melt extruded at the surface (f_ext) ranges from 6% to 50% as the characteristic magmatic crust increases from 6km to 7.5km.\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/TpGwJjRFWOI\"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"models/sdr_formation/sdr_formation/#fig:video-case20","page":"SDR Formation","title":"fig:video-case20","text":"Case20: Lower Maximum extrusion fraction. The melt damage factor is equal to 10 (High Melt Damage), the initial thermal anomaly in the asthenosphere (Delta T_m) is 100 C, the eruption interval (Delta t_erupt) is 50 thousand years and the fraction of melt extruded at the surface (f_ext) ranges from 6% to 20% as the characteristic magmatic crust increases from 6km to 7.5km.\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/NHKkyN-oVMg\"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"models/sdr_formation/sdr_formation/#fig:video-case33","page":"SDR Formation","title":"fig:video-case33","text":"Case33: Low extrusion fraction and no melt Damage. The melt damage factor is equal to 1 (No Melt Damage), the initial thermal anomaly in the asthenosphere (Delta T_m) is 100 C, the eruption interval (Delta t_erupt) is 50 thousand years and the fraction of melt extruded at the surface (f_ext) ranges from 6% to 10% as the characteristic magmatic crust increases from 6km to 7.5km.","category":"section"},{"location":"methods/introduction/#Methods","page":"Introduction","title":"Methods","text":"Conservation of Momentum and Mass\nConservation of Energy\nStaggered Grid Structure\nStaggered Grid Generation\nMarker Distribution\nDiscretizing the 2D Stokes-Continuity Equations\nDiscretization of Heat Conduction Equation\nStokes-continuity Boundary Conditions\nHeat Conduction Equation Boundary Conditions\nMarker-Grid Interpolation\nAlgorithm for Solving the Visco-elasto-plastic Stokes-Continuity Equations\nAlgorithm for Solving the Heat Advection-Diffusion Equation\nSediment Transport\nMelt generation, Transport and Emplacement\nMelt Extrusion and Lava Flow\nViscous Creep\nStrain Weakening and Melt Damage\nHydrothermal Circulation\nSerpentinization\n\nAlso see the detailed thermo-mechanical algorithm section Main Steps.","category":"section"},{"location":"api/material_geometry/weak_fault/#WeakFault","page":"WeakFault","title":"WeakFault","text":"The WeakFault material geometry is used to define a weak dipping zone that simulates a fault in the lithosphere.","category":"section"},{"location":"api/material_geometry/weak_fault/#Initialization","page":"WeakFault","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/weak_fault/#EarthBox.MaterialGeometry.WeakFault.initialize!","page":"WeakFault","title":"EarthBox.MaterialGeometry.WeakFault.initialize!","text":"Initialize weak fault geometry.\n\nKeyword arguments:\n\nfault_dip_degrees::Float64:\nDip in degrees of the weak zone used to approximate a fault\nfault_thickness::Float64:\nThickness in meters of the weak zone used to approximate a fault\nx_initial_fault::Float64:\nInitial x-coordinate in meters of the weak zone used to approximate a fault\nfault_height::Float64:\nHeight in meters of the weak zone used to approximate a fault\n\n\n\n\n\n","category":"function"},{"location":"models/subduction/slab_retreat/#Subduction-Zone-Initiation-at-a-Fracture-Zone","page":"Slab Retreat","title":"Subduction Zone Initiation at a Fracture Zone","text":"see EarthBox/models/subduction/slab_retreat","category":"section"},{"location":"methods/sediment_transport/sediment_transport/#Sediment-Transport","page":"Sediment Transport","title":"Sediment Transport","text":"Sediment transport is modeled on a Eulerian topography grid (x_topoi y_topoi) where i ranges from 0 to N_t-1, N_topo is the number of topography nodes and y_ti is the y-coordinate of  the topography at the i-th node. The spacing of the topography grid in the x-direction is denoted by  Delta x_t, which remains constant throughout the model domain. Prior to applying the sediment  transport model, topography grid nodes are advected in the current velocity field using a 4th order  Runge-Kutta scheme and then interpolated to the original topography grid to obtain new y-coordinates  of topography that track the interface between rock and the sticky-air/water layer.\n\nSediment transport is modeled using a diffusion equation that assumes density does not differ  between sediment and bedrock and that the cohesion of bedrock is negligible as to not limit sediment supply at the surface:","category":"section"},{"location":"methods/sediment_transport/sediment_transport/#eq:sediment-transport","page":"Sediment Transport","title":"eq:sediment-transport","text":"fracpartial y_topopartial t = fracpartialpartial x\n    left( kappa_s fracpartial y_topopartial x right) + R_pelagic\n\nwhere y_topo is the y-coordinate of topography in the 2D model domain, kappa_s is the  sediment transport diffusivity, and R_pelagic is a sediment source term that accounts for pelagic  sedimentation and sediment transport in and out of the plain of the model domain. We use the approach  described by Andrs-Martnez et al. (2019) to define kappa_s so that it includes the effects of subaerial  slope diffusion, subaerial fluvial concentrative diffusional transport associated with river systems  within a given drainage basin and water-depth dependent submarine slope diffusion that accounts for  wave and tidal effects at shallow water depths:","category":"section"},{"location":"methods/sediment_transport/sediment_transport/#eq:sediment-transport-diffusivity","page":"Sediment Transport","title":"eq:sediment-transport-diffusivity","text":"kappa_si =\nbegincases\n    kappa_sm expleft( -fracWlambda_sm right)\n         textif  W_i  0 \n    kappa_sa + kappa_fluviali\n         textotherwise\nendcases\n\nwhere W_i is water depth in m, kappa_sm is the submarine slope diffusivity in m^2s,  lambda_sm is the submarine diffusivity water-depth decay term in m, kappa_sa  is the subaerial slope diffusivity in m^2s and kappa_fluvial is the diffusivity associated with fluvial transport processes in m^2s. The fluvial diffusivity kappa_fluviali is described by  the following equation:\n\nkappa_fluviali = R_precipC_subaerialD_streami\n\nwhere R_precip is the precipitation rate in ms, C_subaerial is the subaerial transport coefficient, and D_streami is the downstream distance in m between drainage divides to the left and right of node i.  The downstream distance D_streami essentially scales fluvial diffusivity with the size of the drainage  basin. A 1D conservative finite element method is used to solve the sediment transport equation  Eq. with a time step of Delta t_sed.\n\nThe sediment transport equation Eq. does not take into account the effects of sediment compaction and assumes that sediment density is equal to bedrock density. This assumption is equivalent to assuming that the sediment is deposited in a state of maximum compaction and that the substrate upon which new sediment is deposited does not compact. We apply a compaction correction  to the topography solution at each time step of the sediment transport solver to account for deposition of sediment in a less compaction state and the compacted of pre-existing sediment:","category":"section"},{"location":"methods/sediment_transport/sediment_transport/#eq:sediment-compaction-correction","page":"Sediment Transport","title":"eq:sediment-compaction-correction","text":"y_topoi = \n    y_topotransi \n    - left\n        left( H_sedi^f + Delta H_sedi^fright)\n        - left( H_sedi^o + Delta H_sedi^o right) \n    right\n\nwhere y_topotransi is the topography obtained by solving the sediment transport equation Eq. at node i, H_sedi^o is the initial sediment thickness prior to  the deposition of new sediment, Delta H_sedi^o is the newly deposited sediment thickness in  the zero-porosity maximum compaction state, Delta H_sedi^f is the newly deposited sediment  thickness in a de-compacted state and H_sedi^f is the initial sediment thickness compacted to a  depth of Delta H_sedi^f. The parameter Delta H_sedi^o is related to the new and old  topography solutions obtained from solving Eq. as follows:","category":"section"},{"location":"methods/sediment_transport/sediment_transport/#eq:depo-thickness-max-compaction","page":"Sediment Transport","title":"eq:depo-thickness-max-compaction","text":"Delta H_sedi^o = maxleft (y_topoi^o - y_topotransi) text  0 right text\n\nThe newly deposited decompacted sediment thickness Delta H_sedi^f is calculated by de-compacting  Delta H_sedi^o from an assumed depth below mudline of 12 km to 0 km using the  conservation of mass and assuming that the relationship between porosity and depth in the sediment  column can be described by the following equation:","category":"section"},{"location":"methods/sediment_transport/sediment_transport/#eq:sediment-porosity","page":"Sediment Transport","title":"eq:sediment-porosity","text":"phi = phi_o exp left(-fracy_smmaxlambda_comp right)\n\nwhere phi is the sediment porosity, phi_o is the initial sediment porosity at the mudline,  y_smmax is the maximum depth below the seafloor encountered by a particle during burial  and lambda_comp is the compaction decay length (Sclater and Christie, 1980). A similar approach is used to obtain H_sedi^f whereby equation Eq. is used to compact H_sedi^o to  a depth below mudline of Delta H_sedi^f. With each time step of the sediment transport solver a correction is also applied to the location of sediment and sticky air/water markers whereby pre-existing sediment  and sticky air/water markers are advected vertically using the compaction displacement field.\n\nThe marker composition field is updated to account for erosion and sedimentation processes after the sediment transport solver and compaction correction have been applied to update the y-coordinate  of topography y_topoi. The updated topography is first interpolated at the x-coordinate x_m of  marker m to determine the elevation of the topography at the marker y_topom. If the  y-coordinate of the marker y_m is less than y_topom and the marker is lithological, the  marker is transformed to either a sticky-air or sticky-water marker depending on whether the marker  is above or below sea level to account for erosion. If the marker is sticky-air or sticky-water and  y_m is greater than y_topom, the marker is transformed to a sedimentary marker.\n\nFor a given marker m, sediment density rho_m, thermal conductivity k_m and heat capacity C_pm  are updated to account for water filled porosity as described in equation Eq.  using the following equations:","category":"section"},{"location":"methods/sediment_transport/sediment_transport/#eq:sediment-rock-props","page":"Sediment Transport","title":"eq:sediment-rock-props","text":"beginsplit\n    rho_m = (1 - phi_m) rho_matrixm + phi_m rho_water text  \n    k_m = (1 - phi_m) k_matrixm + phi_m k_water \n    C_pm = (1 - phi_m) C_pmatrixm + phi_m C_pwater\nendsplit\n\nwhere rho_matrixp is the density of the rock matrix, k_matrixm is the thermal conductivity of  the rock matrix, C_pmatrixm is the heat capacity of the rock matrix, rho_water is the density  of water, k_water is the thermal conductivity of water and C_pwater is the heat capacity of water.\n\nParameter Symbol Units Value\nSubaerial Transport coefficient C_subaerial - 10^-4\nSubaerial slope diffusivity kappa_submarine^slope m^2/yr 0.25\nSubmarine slope diffusivity kappa_submarine^slope m^2/yr 100\nSubmarine diffusion decay depth lambda_submarine m 1000\nPrecipitation rate R_precip m/yr 1.0\nPelagic sedimentation rate R_pelagic mm/yr 0.0\nInitial porosity of sediment at mudline phi_o - 0.4\nSediment porosity decay depth lambda_phi m 2500","category":"section"},{"location":"methods/sediment_transport/sediment_transport/#tab:sediment-transport-example-parameters","page":"Sediment Transport","title":"tab:sediment-transport-example-parameters","text":"Example parameters for sediment transport model","category":"section"},{"location":"api/material_geometry/litho_strong_zones/#LithoStrongZones","page":"LithoStrongZones","title":"LithoStrongZones","text":"The LithoStrongZones geometry is composed of a central upper weak zone in the lithosphere surrounded by strong lithospheric zones.","category":"section"},{"location":"api/material_geometry/litho_strong_zones/#Initialization","page":"LithoStrongZones","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/litho_strong_zones/#Initialization-Scenarios","page":"LithoStrongZones","title":"Initialization Scenarios","text":"Initialization involves defining the left and right boundaries of the central  lithospheric zone, x_left_strong and x_right_strong, respectively. Also, the  flag iuse_strong_zones argument must be set to 1 to enable strong zones.\n\nInitialization of these parameters depends on whether T-type refinement  parameters xo_highres and xf_highres were previously defined during model  initialization with EarthBoxState or during staggered  grid initialization with StaggeredGrid.initialize!.\n\nIf T-type refinement parameters xo_highres and xf_highres were previously  defined then x_left_strong and x_right_strong of the central lithospheric  zone will be set equal to xo_highres and xf_highres, respectively.\n\nIf T-type refinement parameters xo_highres and xf_highres were not previously  defined then x_left_strong and x_right_strong will be set to equal to the  values provided as arguments to initialize!.","category":"section"},{"location":"api/material_geometry/litho_strong_zones/#Examples","page":"LithoStrongZones","title":"Examples","text":"","category":"section"},{"location":"api/material_geometry/litho_strong_zones/#Example-1:-Direct-input-of-strong-zone-boundaries","page":"LithoStrongZones","title":"Example 1: Direct input of strong zone boundaries","text":"eb = EarthBoxState(xnum = 100, ynum = 100, xsize = 500000.0, ysize = 120000.0)\nmodel = eb.model_manager.model # ModelData container\nEarthBox.MaterialGeometry.LithoStrongZones.initialize!(\n    model, \n    iuse_strong_zones = 1,\n    x_left_strong = 200000.0,\n    x_right_strong = 300000.0\n)","category":"section"},{"location":"api/material_geometry/litho_strong_zones/#Example-2:-Using-T-type-refinement-parameters-to-set-strong-zone-boundaries","page":"LithoStrongZones","title":"Example 2: Using T-type refinement parameters to set strong zone boundaries","text":"ttype_refinement_parameters = Dict(\n    \"xo_highres\" => 200000.0,\n    \"xf_highres\" => 300000.0,\n    \"yf_highres\" => 50000.0,\n    \"dx_highres\" => 500.0,\n    \"dy_highres\" => 500.0,\n    \"dx_lowres\" => 2000.0,\n    \"dy_lowres\" => 2000.0\n)\neb = EarthBoxState(\n    xsize = 500000.0, ysize = 120000.0, \n    ttype_refinement_parameters = ttype_refinement_parameters\n)\nmodel = eb.model_manager.model\nEarthBox.MaterialGeometry.LithoStrongZones.initialize!(model, iuse_strong_zones = 1)","category":"section"},{"location":"api/material_geometry/litho_strong_zones/#EarthBox.MaterialGeometry.LithoStrongZones.initialize!","page":"LithoStrongZones","title":"EarthBox.MaterialGeometry.LithoStrongZones.initialize!","text":"Initialize lithosphere strong zones geometry.\n\nThis material geometry involves a central lithospheric zone with different frictional plastic properties than the surrounding lithosphere. The left and right boundaries of the central  lithospheric zone are controlled by the parameters x_left_strong and x_right_strong, respectively.\n\nMaterial properties of the central and lateral zones are defined using the material domains for the  upper continental crust strong zone, lower continental crust strong zone, and lithospheric mantle  strong zone in either a material.yaml file or Material.jl script.\n\nKeyword arguments:\n\niuse_strong_zones::Int:\nUse strong zones (0=off, 1=on)\nx_left_strong::Union{Float64, Nothing}:\nx-coordinate in meters of the left edge of the lithospheric strong zone\nx_right_strong::Union{Float64, Nothing}:\nx-coordinate in meters of the right edge of the lithospheric strong zone\n\n\n\n\n\n","category":"function"},{"location":"plot_tools/stokes_convergence_plots/#Plotting-Stokes-Convergence","page":"Stokes Convergence Plots","title":"Plotting Stokes Convergence","text":"","category":"section"},{"location":"plot_tools/stokes_convergence_plots/#EarthBox.PlotToolsManager.ModelPlots2DManager.PlasticityPlotManager.run_plasticity_plotter","page":"Stokes Convergence Plots","title":"EarthBox.PlotToolsManager.ModelPlots2DManager.PlasticityPlotManager.run_plasticity_plotter","text":"run_plasticity_plotter(file_dir::String; kwargs...)\n\nRun plasticity plotter.\n\nArguments\n\nfile_dir::String:\nDirectory containing the convergence.yml file.\n\nStokes Convergence PlotKeyword Arguments\n\nfigsize::Tuple{Float64, Float64}:\nFigure size in inches in x-y directions. Default is (80.0, 10.0).\nxspacing::Int:\nx-axis spacing. Default is 5.\nlog_l2_ymin::Int:\nMinimum y value for log L2 plot. Default is -5.\nlog_l2_ymax::Int:\nMaximum y value for log L2 plot. Default is 8.\nlog_l2_yspacing::Int:\nY-axis spacing for log L2 plot. Default is 1.\nplot_title::String:\nPlot title. Default is \"Plasticity Iterations\".\nlegend_fontsize::Int:\nLegend font size. Default is 8.\naxis_label_size::Int:\nAxis label size. Default is 12.\naxis_title_size::Int:\nAxis title size. Default is 14.\nxtick_label_size::Int:\nX-tick label size. Default is 7. Currently not used.\nytick_label_size::Int:\nY-tick label size. Default is 12.\nannotation_font_size::Int:\nAnnotation font size. Default is 4.\nplot_yield_error::Bool:\nWhether to plot yield error. Default is false.\nextension::String:\nOutput file extension. Default is \".png\".\n\n\n\n\n\n","category":"function"},{"location":"api/material_geometry/plume/#Plume","page":"Plume","title":"Plume","text":"The Plume material geometry is used to define a circular or plume-like blob with a composition that  differs from the surrounding mantle and elevated temperature used to simulate a mantle plume head. ","category":"section"},{"location":"api/material_geometry/plume/#Initialization","page":"Plume","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/plume/#EarthBox.MaterialGeometry.Plume.initialize!","page":"Plume","title":"EarthBox.MaterialGeometry.Plume.initialize!","text":"Initialize plume geometry.\n\nKeyword arguments:\n\nplume_radius::Float64:\nRadius in meters of the mantle plume\nplume_center_x::Float64:\nx-coordinate in meters of the plume center\nplume_center_y::Float64:\ny-coordinate in meters of the plume center\nplume_head_thick::Float64:\nThickness in meters of the plume head\ndelta_temperature_plume::Union{Float64, Nothing}:\nTemperature difference of the plume relative to background mantle\n\n\n\n\n\n","category":"function"},{"location":"models/lithospheric_extension/extension_with_softening_b14/#Lithospheric-Extension-with-Viscous-Softening","page":"Extension with Softening b14","title":"Lithospheric Extension with Viscous Softening","text":"Lithospheric extension with viscous strain softening whereby the pre-exponential terms of dislocation creep flow law are modified with strain to mimic the effects of viscous softening. Boundary conditions, model geometry and rheology  are similar to Brune et al. (2014).\n\nsee EarthBox/models/lithospheric_extension/extension_with_softening_b14","category":"section"},{"location":"model_data/collections/stokes_continuity/","page":"StokesContinuity","title":"StokesContinuity","text":"StokesContinuity\n\nParameters\nPicard\nSolutionNormsStokes\nResidualNormsStokes\nVelocityCalcOptions\nOutputStokes\nBuildSysStokes\nArrays\nRhsStokes\nStaggeredGridVelocity\nBasicGridVelocity\nVelocitySolution\nStokesSolution\nStrainRateAndSpin\nStress\nStressChange\nPressure\nDensity\nShearModulus\nViscosity\nPlasticDef\nResidualStokes","category":"section"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.StokesContinuity","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.StokesContinuity","text":"StokesContinuity <: CollectionContainer\n\nData structure containing parameter and array objects for Stokes-continuity solver.\n\nFields\n\nparameters::Parameters: Parameter groups for Stokes solver configuration\narrays::Arrays: Array groups for velocity, pressure, and stress fields\n\nConstructor\n\nStokesContinuity(ynum::Int, xnum::Int)::StokesContinuity\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.Parameters","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for Stokes-continuity solver.\n\nFields\n\nitype_density::ParameterInt: Density model ID\nstype_density::ParameterStr: Density model name\npicard::Picard: Picard iteration parameters\nsolution_norms::SolutionNormsStokes: Solution norm tracking\nresidual_norms::ResidualNormsStokes: Residual norm tracking\nvelocity_calc_option::VelocityCalcOptions: Velocity calculation options\noutput::OutputStokes: Output parameters\nbuild::BuildSysStokes: Sparse matrix build parameters\n\nConstructor\n\nParameters(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.PicardGroup.Picard","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.PicardGroup.Picard","text":"Picard <: AbstractParameterGroup\n\nParameter group for Picard iteration parameters.\n\nFields\n\nnglobal::ParameterInt: Maximum number of global plasticity iterations (a.k.a. Picard iterations)\ntolerance_picard::ParameterFloat: Convergence criterion for the global plasticity iterations (a.k.a. Picard iterations)\niconverge::ParameterInt: Convergence flag\niglobal::ParameterInt: Iteration counter for global stokes loop\nitype_global::ParameterInt: Type of global loop: 0 = marker-base; 1 = node-based\nstype_global::ParameterStr: Global loop option name\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nnglobal = model.stokes_continuity.parameters.picard.nglobal.value\ntolerance_picard = model.stokes_continuity.parameters.picard.tolerance_picard.value\niconverge = model.stokes_continuity.parameters.picard.iconverge.value\niglobal = model.stokes_continuity.parameters.picard.iglobal.value\nitype_global = model.stokes_continuity.parameters.picard.itype_global.value\nstype_global = model.stokes_continuity.parameters.picard.stype_global.value\n\nConstructor\n\nPicard()\n\nCreate a new Picard parameter group with default values.\n\nReturns\n\nPicard: New Picard parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.SolutionNormsStokesGroup.SolutionNormsStokes","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.SolutionNormsStokesGroup.SolutionNormsStokes","text":"SolutionNormsStokes <: AbstractParameterGroup\n\nParameter group for Stokes solution norm tracking.\n\nFields\n\ndsoluv1_abs_inf::ParameterFloat: Infinity norm of solution change\ndsoluv1_rel_inf::ParameterFloat: Relative infinity norm of solution change\ndsoluv1_abs_L2::ParameterFloat: L2 norm of solution change\ndsoluv1_rel_L2::ParameterFloat: Relative L2 norm of solution change\ndvx1_abs_L2::ParameterFloat: L2 norm of vx change\ndvx1_rel_L2::ParameterFloat: Relative L2 norm of vx change\ndvy1_abs_L2::ParameterFloat: L2 norm of vy change\ndvy1_rel_L2::ParameterFloat: Relative L2 norm of vy change\ndpr1_abs_L2::ParameterFloat: L2 norm of pressure change\ndpr1_rel_L2::ParameterFloat: Relative L2 norm of pressure change\ndvxy_abs_inf::ParameterFloat: Infinity norm of velocity solution\ndvxy_rel_inf::ParameterFloat: Relative infinity norm of velocity solution\ndvxy_abs_L2::ParameterFloat: L2 norm of velocity solution\ndvxy_rel_L2::ParameterFloat: Relative L2 norm of velocity solution\nglobal_yield_error::ParameterFloat: Global yield stress error\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\ndsoluv1_abs_inf = model.stokes_continuity.parameters.solution_norms.dsoluv1_abs_inf.value\ndsoluv1_abs_L2 = model.stokes_continuity.parameters.solution_norms.dsoluv1_abs_L2.value\ndvx1_abs_L2 = model.stokes_continuity.parameters.solution_norms.dvx1_abs_L2.value\n\nConstructor\n\nSolutionNormsStokes()\n\nReturns\n\nSolutionNormsStokes: New SolutionNormsStokes parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.ResidualNormsStokesGroup.ResidualNormsStokes","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.ResidualNormsStokesGroup.ResidualNormsStokes","text":"ResidualNormsStokes <: AbstractParameterGroup\n\nParameter group for Stokes residual norm tracking.\n\nFields\n\nresnl_L2_ini::ParameterFloat: Initial L2 norm of Stokes system\nresnl_L2::ParameterFloat: Current L2 norm of Stokes system\nresnl_rel_L2::ParameterFloat: Relative L2 norm of Stokes system\nresx_L2::ParameterFloat: L2 norm of vx residual\nresy_L2::ParameterFloat: L2 norm of vy residual\nresc_L2::ParameterFloat: L2 norm of pressure residual\nresx_L2_ini::ParameterFloat: Initial L2 norm of vx residual\nresy_L2_ini::ParameterFloat: Initial L2 norm of vy residual\nresc_L2_ini::ParameterFloat: Initial L2 norm of pressure residual\nresnlx_L2::ParameterFloat: Non-linear L2 norm of vx residual\nresnly_L2::ParameterFloat: Non-linear L2 norm of vy residual\nresnlc_L2::ParameterFloat: Non-linear L2 norm of pressure residual\nresnlx_rel_L2::ParameterFloat: Relative non-linear L2 norm of vx residual\nresnly_rel_L2::ParameterFloat: Relative non-linear L2 norm of vy residual\nresnlc_rel_L2::ParameterFloat: Relative non-linear L2 norm of pressure residual\nresnlx_L2_ini::ParameterFloat: Initial non-linear L2 norm of vx residual\nresnly_L2_ini::ParameterFloat: Initial non-linear L2 norm of vy residual\nresnlc_L2_ini::ParameterFloat: Initial non-linear L2 norm of pressure residual\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\nresnl_L2_ini = model.stokes_continuity.parameters.residual_norms.resnl_L2_ini.value\nresnl_L2 = model.stokes_continuity.parameters.residual_norms.resnl_L2.value\nresnl_rel_L2 = model.stokes_continuity.parameters.residual_norms.resnl_rel_L2.value\nresx_L2 = model.stokes_continuity.parameters.residual_norms.resx_L2.value\nresy_L2 = model.stokes_continuity.parameters.residual_norms.resy_L2.value\nresc_L2 = model.stokes_continuity.parameters.residual_norms.resc_L2.value\n\nConstructor\n\nResidualNormsStokes()\n\nReturns\n\nResidualNormsStokes: New ResidualNormsStokes parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.VelocityCalcOptionsGroup.VelocityCalcOptions","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.VelocityCalcOptionsGroup.VelocityCalcOptions","text":"VelocityCalcOptions <: AbstractParameterGroup\n\nParameter group for velocity calculation options.\n\nFields\n\nitype_velocity::ParameterInt: Velocity calculation options: -1 all zeros; 0 solve equations; 1 solid body rotation\nstype_velocity::ParameterStr: Velocity calculation option name\nobj_list::Vector{ParameterInt}: List of parameter objects\n\nNested Dot Access\n\nitype_velocity = model.stokes_continuity.parameters.velocity_calc_option.itype_velocity.value\nstype_velocity = model.stokes_continuity.parameters.velocity_calc_option.stype_velocity.value\n\nConstructor\n\nVelocityCalcOptions()\n\nReturns\n\nVelocityCalcOptions: New VelocityCalcOptions parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.OutputStokesGroup.OutputStokes","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.OutputStokesGroup.OutputStokes","text":"OutputStokes <: AbstractParameterGroup\n\nParameter group for Stokes solver output parameters.\n\nFields\n\nouttest::ParameterInt: 0 off; 1 output grid, vis., RHS, and bc as text files\nouttest2::ParameterInt: 1 output sparse matrix, rhs and solution vector as text files\nouttest3::ParameterInt: 1 output sparse matrix, rhs and solution vector as npy files\nobj_list::Vector{ParameterInt}: List of parameter objects\n\nNested Dot Access\n\nouttest = model.stokes_continuity.parameters.output.outtest.value\nouttest2 = model.stokes_continuity.parameters.output.outtest2.value\nouttest3 = model.stokes_continuity.parameters.output.outtest3.value\n\nConstructor\n\nOutputStokes()\n\nReturns\n\nOutputStokes: New OutputStokes parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.BuildSysStokesGroup.BuildSysStokes","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ParameterCollection.BuildSysStokesGroup.BuildSysStokes","text":"BuildSysStokes <: AbstractParameterGroup\n\nParameter group for sparse matrix build parameters for Stokes system.\n\nFields\n\nibuild::ParameterInt: 0 define full system, 1 only define non-zero elements\nhshift_to_vxR::ParameterInt: Horizontal shift index for system building equal to (ynum-1)*3\nN::ParameterInt: Number of rows/columns in NxN matrix equal to (xnum-1)(ynum-1)3\nnonzero_max::ParameterInt: Maximum number of non-zero values allowed set equal to xnumynum31\npscale::ParameterFloat: Coefficient for scaling pressure\niuse_interface_stabilization::ParameterInt: Flag for interface stabilization: 0 off; 1 on\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nibuild = model.stokes_continuity.parameters.build.ibuild.value\nhshift_to_vxR = model.stokes_continuity.parameters.build.hshift_to_vxR.value\nN = model.stokes_continuity.parameters.build.N.value\nnonzero_max = model.stokes_continuity.parameters.build.nonzero_max.value\npscale = model.stokes_continuity.parameters.build.pscale.value\niuse_interface_stabilization = model.stokes_continuity.parameters.build.iuse_interface_stabilization.value\n\nConstructor\n\nBuildSysStokes(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nBuildSysStokes: New BuildSysStokes parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.Arrays","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.Arrays","text":"Arrays <: AbstractArrayCollection\n\nData structure containing array groups for Stokes-continuity solver.\n\nFields\n\nrhs::RhsStokes: Right-hand side arrays for Stokes equations\nstaggered_grid_velocity::StaggeredGridVelocity: Velocity on staggered grid\nbasic_grid_velocity::BasicGridVelocity: Velocity on basic grid\nvelocity_solution::VelocitySolution: Velocity solution arrays\nstokes_solution::StokesSolution: Combined Stokes solution arrays\nstrain_rate_and_spin::StrainRateAndSpin: Strain rate and spin tensor\nstress::Stress: Stress tensor components\nstress_change::StressChange: Stress change arrays\npressure::Pressure: Pressure field arrays\ndensity::Density: Density field arrays\nshear_modulus::ShearModulus: Shear modulus arrays\nviscosity::Viscosity: Viscosity field arrays\nplastic_def::PlasticDef: Plastic deformation arrays\nresiduals::ResidualStokes: Residual arrays for Stokes equations\n\nConstructor\n\nArrays(ynum::Int, xnum::Int)::Arrays\n\nCreate a new Arrays collection with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.RhsStokesGroup.RhsStokes","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.RhsStokesGroup.RhsStokes","text":"RhsStokes <: AbstractArrayGroup\n\nArray group containing right-hand side arrays for Stokes equations.\n\nFields\n\nRX1::ScalarArray2DState: (ynum + 1, xnum) : Right-hand side values on vx grid for x-Stokes equation.\nRY1::ScalarArray2DState: (ynum, xnum + 1) : Right-hand side values on vy grid for y-Stokes equation.\nRC1::ScalarArray2DState: (ynum - 1, xnum - 1) : Right-hand side values on pressure grid for continuity equation.\nRHS::RhsStokesArray1DState: Discretized right-hand side array for Stokes-continuity equation\n\nNested Dot Access\n\nRX1 = model.stokes_continuity.arrays.rhs.RX1.array\nRY1 = model.stokes_continuity.arrays.rhs.RY1.array\nRC1 = model.stokes_continuity.arrays.rhs.RC1.array\nRHS = model.stokes_continuity.arrays.rhs.RHS.array\n\nConstructor\n\nRhsStokes(ynum::Int, xnum::Int)\n\nCreate a new RhsStokes array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nRhsStokes: New RhsStokes array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StaggeredGridVelocityGroup.StaggeredGridVelocity","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StaggeredGridVelocityGroup.StaggeredGridVelocity","text":"StaggeredGridVelocity <: AbstractArrayGroup\n\nArray group containing velocity arrays on staggered grid.\n\nFields\n\nvy1_old::ScalarArray2DState: (ynum, xnum + 1) : Old y-component of velocity on staggered vy grid in m/s.\nvy1::ScalarArray2DState: (ynum, xnum + 1) : Y-component of velocity on staggered vy grid in m/s.\nvx1_old::ScalarArray2DState: (ynum + 1, xnum) : Old x-component of velocity on staggered vx grid in m/s.\nvx1::ScalarArray2DState: (ynum + 1, xnum) : X-component of velocity on staggered vx grid in m/s.\n\nNested Dot Access\n\nvy1_old = model.stokes_continuity.arrays.staggered_grid_velocity.vy1_old.array\nvy1 = model.stokes_continuity.arrays.staggered_grid_velocity.vy1.array\nvx1_old = model.stokes_continuity.arrays.staggered_grid_velocity.vx1_old.array\nvx1 = model.stokes_continuity.arrays.staggered_grid_velocity.vx1.array\n\nConstructor\n\nStaggeredGridVelocity(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nStaggeredGridVelocity: New StaggeredGridVelocity array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.BasicGridVelocityGroup.BasicGridVelocity","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.BasicGridVelocityGroup.BasicGridVelocity","text":"BasicGridVelocity <: AbstractArrayGroup\n\nArray group containing velocity arrays on basic grid.\n\nFields\n\nvxb::ScalarArray2DState: (ynum, xnum) : x-component of velocity interpolated to basic grid in m/s.\nvyb::ScalarArray2DState: (ynum, xnum) : y-component of velocity interpolated to basic grid in m/s.\n\nNested Dot Access\n\nvxb = model.stokes_continuity.arrays.basic_grid_velocity.vxb.array\nvyb = model.stokes_continuity.arrays.basic_grid_velocity.vyb.array\n\nConstructor\n\nBasicGridVelocity(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nBasicGridVelocity: New BasicGridVelocity array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.VelocitySolutionGroup.VelocitySolution","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.VelocitySolutionGroup.VelocitySolution","text":"VelocitySolution <: AbstractArrayGroup\n\nArray group containing velocity solution arrays.\n\nFields\n\nvxy_old::SolutionArray1DState: Old solution array with vx and vy solutions in m/s.\nvxy::SolutionArray1DState: Solution array with vx and vy solutions in m/s.\n\nNested Dot Access\n\nvxy_old = model.stokes_continuity.arrays.velocity_solution.vxy_old.array\nvxy = model.stokes_continuity.arrays.velocity_solution.vxy.array\n\nConstructor\n\nVelocitySolution(ynum::Int, xnum::Int)\n\nCreate a new VelocitySolution array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nVelocitySolution: New VelocitySolution array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StokesSolutionGroup.StokesSolution","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StokesSolutionGroup.StokesSolution","text":"StokesSolution <: AbstractArrayGroup\n\nArray group containing combined Stokes solution arrays.\n\nFields\n\nsoluv1_old::SolutionArray1DState: Old Stokes-continuity solution array with velocity and pressure in m/s.\nsoluv1::SolutionArray1DState: Stokes-continuity solution array with velocity and pressure in m/s or Pa.\n\nNested Dot Access\n\nsoluv1_old = model.stokes_continuity.arrays.stokes_solution.soluv1_old.array\nsoluv1 = model.stokes_continuity.arrays.stokes_solution.soluv1.array\n\nConstructor\n\nStokesSolution(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nStokesSolution: New StokesSolution array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StrainRateAndSpinGroup.StrainRateAndSpin","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StrainRateAndSpinGroup.StrainRateAndSpin","text":"StrainRateAndSpin <: AbstractArrayGroup\n\nArray group containing strain rate and spin tensor arrays.\n\nFields\n\nexy::ScalarArray2DState: (ynum, xnum) : Shear strain rate in 1/s.\nexx::ScalarArray2DState: (ynum - 1, xnum - 1) : Normal strain rate in 1/s.\neii::ScalarArray2DState: (ynum - 1, xnum - 1) : Second invariant of deviatoric strain rate in 1/s.\nesp::ScalarArray2DState: (ynum, xnum) : Spin in 1/s.\neii_plastic_basic::ScalarArray2DState: (ynum, xnum) : Second invariant of plastic strain rate on basic grid in 1/s.\neii_plastic_pressure::ScalarArray2DState: (ynum - 1, xnum - 1) : Second invariant of plastic strain rate on pressure grid in 1/s.\n\nNested Dot Access\n\nexy = model.stokes_continuity.arrays.strain_rate_and_spin.exy.array\nexx = model.stokes_continuity.arrays.strain_rate_and_spin.exx.array\neii = model.stokes_continuity.arrays.strain_rate_and_spin.eii.array\nesp = model.stokes_continuity.arrays.strain_rate_and_spin.esp.array\n\nConstructor\n\nStrainRateAndSpin(ynum::Int, xnum::Int)\n\nCreate a new StrainRateAndSpin array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nStrainRateAndSpin: New StrainRateAndSpin array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StressGroup.Stress","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StressGroup.Stress","text":"Stress <: AbstractArrayGroup\n\nArray group containing stress tensor component arrays.\n\nFields\n\nsxy0::ScalarArray2DState: (ynum, xnum) : Old deviatoric shear stress array on basic grid in Pa used for: (1) storing copy of visco-elasto-plastic shear stress transport array (sxy1) and (2) storing product of old visco-elasto-plastic shear stress transport array (sxy1) and viscoelastic factor used in RHS terms of visco-elasto-plastic Stokes equations.\nsxy1::ScalarArray2DState: (ynum, xnum) : Visco-elasto-plastic deviatoric shear stress in Pa interpolated to basic grid from advected markers.\nsxy2::ScalarArray2DState: (ynum, xnum) : Visco-elasto-plastic deviatoric shear stress in Pa on basic grid calculated using updated deviatoric strain rates from Stokes velocity solution.\nsxx0::ScalarArray2DState: (ynum - 1, xnum - 1) : Old deviatoric normal stress array on basic grid in Pa used for: (1) storing copy of visco-elasto-plastic normal stress transport array (sxx1) and (2) storing product of old visco-elasto-plastic normal stress transport array (sxx1) and viscoelastic factor used in RHS terms of visco-elasto-plastic Stokes equations.\nsxx1::ScalarArray2DState: (ynum - 1, xnum - 1) : Visco-elasto-plastic deviatoric normal stress interpolated to basic grid from advected markers in Pa.\nsxx2::ScalarArray2DState: (ynum - 1, xnum - 1) : Visco-elasto-plastic deviatoric normal stress on pressure grid calculated using updated deviatoric strain rates from Stokes velocity solution in Pa.\n\nNested Dot Access\n\nsxy0 = model.stokes_continuity.arrays.stress.sxy0.array\nsxy1 = model.stokes_continuity.arrays.stress.sxy1.array\nsxy2 = model.stokes_continuity.arrays.stress.sxy2.array\nsxx0 = model.stokes_continuity.arrays.stress.sxx0.array\n\nConstructor\n\nStress(ynum::Int, xnum::Int)\n\nCreate a new Stress array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nStress: New Stress array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StressChangeGroup.StressChange","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.StressChangeGroup.StressChange","text":"StressChange <: AbstractArrayGroup\n\nArray group containing stress change arrays.\n\nFields\n\ndsxy::ScalarArray2DState: (ynum, xnum) : Dual purpose array: First stores post-Stokes viscoelastic stress change (sxy2-sxy1) and then updated to final (remaining) shear stress change by subtracting relaxed grid nodal-marker stress differences (dsxyn) in Pa.\ndsxx::ScalarArray2DState: (ynum - 1, xnum - 1) : Dual purpose array: First stores post-Stokes normal viscoelastic stress change (sxx2-sxx1) and then updated to final (remaining) normal stress change by subtracting relaxed grid nodal-marker stress differences (dsxxn) in Pa.\ndsxyn::ScalarArray2DState: (ynum, xnum) : Subgrid nodal-marker shear stress change on basic grid interpolated from markers in Pa.\ndsxxn::ScalarArray2DState: (ynum - 1, xnum - 1) : Subgrid nodal-marker normal stress change on basic grid interpolated from markers in Pa.\n\nNested Dot Access\n\ndsxy = model.stokes_continuity.arrays.stress_change.dsxy.array\ndsxx = model.stokes_continuity.arrays.stress_change.dsxx.array\ndsxyn = model.stokes_continuity.arrays.stress_change.dsxyn.array\ndsxxn = model.stokes_continuity.arrays.stress_change.dsxxn.array\n\nConstructor\n\nStressChange(ynum::Int, xnum::Int)\n\nCreate a new StressChange array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nStressChange: New StressChange array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.PressureGroup.Pressure","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.PressureGroup.Pressure","text":"Pressure <: AbstractArrayGroup\n\nArray group containing pressure field arrays.\n\nFields\n\npr1_old::ScalarArray2DState: (ynum - 1, xnum - 1) : Old pressure solution on pressure grid in Pa.\npr1::ScalarArray2DState: (ynum - 1, xnum - 1) : Pressure solution on pressure grid in Pa.\n\nNested Dot Access\n\npr1_old = model.stokes_continuity.arrays.pressure.pr1_old.array\npr1 = model.stokes_continuity.arrays.pressure.pr1.array\n\nConstructor\n\nPressure(ynum::Int, xnum::Int)\n\nCreate a new Pressure array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nPressure: New Pressure array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.DensityGroup.Density","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.DensityGroup.Density","text":"Density <: AbstractArrayGroup\n\nArray group containing density field arrays.\n\nFields\n\nrho0::ScalarArray2DState: (ynum, xnum) : Backup of transport array with density on basic grid in kg/m^3.\nrho1::ScalarArray2DState: (ynum, xnum) : Transport array with density on basic grid in kg/m^3.\nrho0_vy::ScalarArray2DState: (ynum, xnum + 1) : Backup of transport array with density on vy grid in kg/m^3.\nrho1_vy::ScalarArray2DState: (ynum, xnum + 1) : Transport array with density on vy grid in kg/m^3.\n\nNested Dot Access\n\nrho0 = model.stokes_continuity.arrays.density.rho0.array\nrho1 = model.stokes_continuity.arrays.density.rho1.array\nrho0_vy = model.stokes_continuity.arrays.density.rho0_vy.array\nrho1_vy = model.stokes_continuity.arrays.density.rho1_vy.array\n\nConstructor\n\nDensity(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nDensity: New Density array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.ShearModulusGroup.ShearModulus","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.ShearModulusGroup.ShearModulus","text":"ShearModulus <: AbstractArrayGroup\n\nArray group containing shear modulus arrays.\n\nFields\n\nmus0::ScalarArray2DState: (ynum, xnum) : Backup of shear modulus for shear stress on basic grid in Pa.\nmus1::ScalarArray2DState: (ynum, xnum) : Shear elastic modulus interpolated to basic grid from markers in Pa.\nmun0::ScalarArray2DState: (ynum - 1, xnum - 1) : Backup of shear modulus for normal stress on pressure grid in Pa.\nmun1::ScalarArray2DState: (ynum - 1, xnum - 1) : Normal elastic modulus interpolated to pressure grid from markers in Pa.\n\nNested Dot Access\n\nmus0 = model.stokes_continuity.arrays.shear_modulus.mus0.array\nmus1 = model.stokes_continuity.arrays.shear_modulus.mus1.array\nmun0 = model.stokes_continuity.arrays.shear_modulus.mun0.array\nmun1 = model.stokes_continuity.arrays.shear_modulus.mun1.array\n\nConstructor\n\nShearModulus(ynum::Int, xnum::Int)\n\nCreate a new ShearModulus array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nShearModulus: New ShearModulus array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.ViscosityGroup.Viscosity","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.ViscosityGroup.Viscosity","text":"Viscosity <: AbstractArrayGroup\n\nArray group containing viscosity field arrays.\n\nFields\n\netas0::ScalarArray2DState: (ynum, xnum) : Old viscoplastic shear viscosity array in Pa.s used for: (1) backup of viscoplastic shear viscosity (etas1) interpolated from markers used for problematic interpolation and (2) visco-elasto-plastic viscosity coefficients used in visco-elastic Stokes equations.\netas1::ScalarArray2DState: (ynum, xnum) : Viscoplastic shear viscosity in Pa.s interpolated to basic grid from markers.\netan0::ScalarArray2DState: (ynum - 1, xnum - 1) : Old viscoplastic normal viscosity array in Pa.s used for: (1) backup of viscoplastic normal viscosity (etan1) interpolated from markers used for problematic interpolation and (2) visco-elasto-plastic viscosity coefficients used in visco-elastic Stokes equations.\netan1::ScalarArray2DState: (ynum - 1, xnum - 1) : Viscoplastic normal viscosity in Pa.s interpolated to pressure grid from markers.\neta_flow::ScalarArray2DState: (ynum, xnum) : Flow viscosity in Pa.s interpolated to basic grid from markers.\neta_flow0::ScalarArray2DState: (ynum, xnum) : Backup of flow viscosity on basic grid in Pa.s used for problematic interpolation.\n\nNested Dot Access\n\netas0 = model.stokes_continuity.arrays.viscosity.etas0.array\netas1 = model.stokes_continuity.arrays.viscosity.etas1.array\netan0 = model.stokes_continuity.arrays.viscosity.etan0.array\netan1 = model.stokes_continuity.arrays.viscosity.etan1.array\n\nConstructor\n\nViscosity(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nViscosity: New Viscosity array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.PlasticDefGroup.PlasticDef","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.PlasticDefGroup.PlasticDef","text":"PlasticDef <: AbstractArrayGroup\n\nArray group containing plastic deformation arrays.\n\nFields\n\nplastics::ScalarArray2DState: (ynum, xnum) : Plastic deformation indicator on basic grid.\nplastics0::ScalarArray2DState: (ynum, xnum) : Backup of plastic deformation indicator on basic grid.\nplasticn::ScalarArray2DState: (ynum - 1, xnum - 1) : Plastic deformation indicator on pressure grid.\nplasticn0::ScalarArray2DState: (ynum - 1, xnum - 1) : Backup of plastic deformation indicator on pressure grid.\nplastic_yield::ScalarArray2DState: (ynum, xnum) : Plastic yielding marker on basic grid.\nyield_error::ScalarArray2DState: (ynum, xnum) : Plastic yielding stress error on basic grid.\ncohesion_grid::ScalarArray2DState: (ynum, xnum) : Cohesion on basic grid interpolated from markers in Pa.\ncohesion_grid0::ScalarArray2DState: (ynum, xnum) : Backup of cohesion on basic grid interpolated from markers in Pa.\nfric_degrees_grid::ScalarArray2DState: (ynum, xnum) : Friction angle in degrees on basic grid interpolated from markers in Degrees.\nfric_degrees_grid0::ScalarArray2DState: (ynum, xnum) : Backup of friction angle in degrees on basic grid in Degrees.\ndilatation_grid::ScalarArray2DState: (ynum - 1, xnum - 1) : Dilatation angle on pressure grid interpolated from markers in Degrees.\ndilatation_grid0::ScalarArray2DState: (ynum - 1, xnum - 1) : Backup of dilatation angle on pressure grid interpolated from markers.\n\nNested Dot Access\n\nplastics = model.stokes_continuity.arrays.plastic_def.plastics.array\ncohesion_grid = model.stokes_continuity.arrays.plastic_def.cohesion_grid.array\n\nConstructor\n\nPlasticDef(ynum::Int, xnum::Int)\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nPlasticDef: New PlasticDef array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/stokes_continuity/#EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.ResidualStokesGroup.ResidualStokes","page":"StokesContinuity","title":"EarthBox.ModelDataContainer.StokesContinuityContainer.ArrayCollection.ResidualStokesGroup.ResidualStokes","text":"ResidualStokes <: AbstractArrayGroup\n\nArray group containing residual arrays for Stokes equations.\n\nFields\n\nresx1::ScalarArray2DState: (ynum + 1, xnum) : x-Stokes equation residual on staggered vx grid in m/s.\nresnlx::ScalarArray2DState: (ynum + 1, xnum) : Non-linear x-Stokes equation residual on staggered vx grid in m/s.\nresy1::ScalarArray2DState: (ynum, xnum + 1) : y-Stokes equation residual on staggered vy grid in m/s.\nresnly::ScalarArray2DState: (ynum, xnum + 1) : Non-linear y-Stokes equation residual on staggered vy grid in m/s.\nresc1::ScalarArray2DState: (ynum - 1, xnum - 1) : Continuity equation residual on pressure grid in Pa.\nresnlc::ScalarArray2DState: (ynum - 1, xnum - 1) : Non-linear continuity equation residual on pressure grid in Pa.\nresnl::SolutionArray1DState: Non-linear stokes-continuity system residual.\n\nNested Dot Access\n\nresx1 = model.stokes_continuity.arrays.residuals.resx1.array\nresy1 = model.stokes_continuity.arrays.residuals.resy1.array\nresc1 = model.stokes_continuity.arrays.residuals.resc1.array\nresnl = model.stokes_continuity.arrays.residuals.resnl.array\n\nConstructor\n\nResidualStokes(ynum::Int, xnum::Int)\n\nCreate a new ResidualStokes array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nResidualStokes: New ResidualStokes array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"benchmarks/single_execution/#Single-Benchmark-Execution","page":"Single Execution","title":"Single Benchmark Execution","text":"","category":"section"},{"location":"benchmarks/single_execution/#List-of-Benchmarks","page":"Single Execution","title":"List of Benchmarks","text":"using EarthBox\nimport Markdown\noptions = BenchmarksManager.get_options()\nliststr = join([\"- `$(options[id].option_name)`\" for id in keys(options)], \"\\n\")\nMarkdown.parse(liststr)\n\ntip: quick search for benchmark description\nHighlight a benchmark name in the list above and use Ctl-F + Enter to navigate to a detailed description in the Benchmark Descriptions section below.","category":"section"},{"location":"benchmarks/single_execution/#Benchmark-Runner","page":"Single Execution","title":"Benchmark Runner","text":"","category":"section"},{"location":"benchmarks/single_execution/#EarthBox.BenchmarksManager.run_benchmark","page":"Single Execution","title":"EarthBox.BenchmarksManager.run_benchmark","text":"run_benchmark(benchmark_name::Symbol; kwargs...)::Nothing\n\nRun the benchmark specified by the benchmark_name.\n\nOptional Keyword Arguments:\n\nrun_model::Bool:\nSet to true to run the model. Default is true.\nrun_post_processing::Bool:\nSet to true to run post processing. Default is true.\nbase_path::String:\nBase path for the output directory. EarthBox creates a time-stamped subdirectory in this path.   Default is the present working directory (pwd()).\nold_date_stamp::String:\nOld date stamp for the output directory. If equal to nothing, a new date stamp will be generated.   If a old time stamp is provided, the output directory will use the old time stamp.  This is useful if you want to re-run post processing on a previous run. The format of the time stamp is  YYYY-MM-DDHH-MM-SS. For example: \"2024-04-2012-53-59\". Default is nothing.\nmake_backup::Bool:\nSet to true to make backup model files with each output step. This is useful for testing   model restart functionality. Default is false.\nrestart_from_backup::Bool:\nSet to true to restart from a backup file. Default is false.\n\nReturns\n\nNothing\n\nAdditional Keyword Arguments:\n\nuse_mumps::Bool = false:\nSet to true to use the MUMPS solver. Default is false.\nnprocs::Int = 1:\nNumber of processors to use if using the MUMPS solver. Default is 1.\n\nExample:\n\nTo run the :couette_flow_viscous_heating benchmark with output being sent to the present working  directory:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:couette_flow_viscous_heating);\n\nBenchmark Descriptions:\n\n:flexure_triangular_hole \n\nFlexure in response to a hole in a viscoelastic crustal layer.\n\n:channel_flow_variable_conductivity \n\nVertical constant-viscosity channel flow with temperature- dependent thermal conductivity and shear heating. Boundary conditions are defined using the :VerticalChannelFlowShearHeating boundary condition model type (See EarthBox.BoundaryConditions.initialize!). This benchmark tests the codes ability to handle strong thermal conductivity gradients and shear heating terms in the heat equation. Model parameters are as follows: L = 30 km, H = 11.25 km, eta = 10^19 Pa.s, P_beg = 3e7 Pa, P_end = 0, T_o = 298 K, k_o = 8 W/m/K, b = 1. Resolution is 51 x 11 nodes with 25 randomly distributed markers per cell. For details on the analytical solution see Gerya (2010), pg. 254-255.\n\n:viscoelastic_extension_depth_dependent \n\nSimple extension of a viscoelastic layer undergoing water- loaded symmetric depth-dependent extension with inflow along the top and bottom boundaries. Velocity inflow/outflow boundary conditions turned off to allow hydrostatic equilibration. The numerical solution is compared to an analytical solution for water-loaded local isostatic bathymetry.\n\n:channel_flow_non_newtonian \n\nVertical channel flow with non-Newtonian rheology. Boundary conditions are defined using the :VerticalChannelFlowNonNewtonian boundary condition model type (See EarthBox.BoundaryConditions.initialize!). This benchmark tests the codes ability to handle flows where effective viscosity is dependent on a power-law relationship with stress/strain rate. Model parameters are as follows: L = 10 km, H = 9.5 km, n = 3, C1 = 10^-37 Pa^{-3}s^{-1}, P_beg = 10^9 Pa, and P_end = 0. Resolution is 51 x 21 nodes with 25 randomly distributed markers per cell. markers per cell. For details on the analytical solution see Gerya (2010), pg. 246-247.\n\n:viscoelastic_contraction_asymmetric \n\nSimple contraction of a viscoelastic layer undergoing water- loaded asymmetric contraction with outflow along the top and bottom boundaries and constant inflow along side boundaries. Velocity inflow/outflow boundary conditions are turned off to allow hydrostatic equilibration. The numerical solution is compared to an analytical solution for water-loaded local isostatic bathymetry.\n\n:viscoelastic_extension_asymmetric \n\nSimple extension of a viscoelastic layer undergoing water- loaded asymmetric extension with inflow along the top and bottom boundaries. Velocity inflow/outflow boundary conditions turned off to allow hydrostatic equilibration. The numerical solution is compared to an analytical solution for water-loaded local isostatic bathymetry.\n\n:plasticity_benchmark_kaus10 \n\nExtension benchmark similar to Kaus (2010) with visco-elasto plastic rheology, single weak seed and free slip boundary condition along the base of the model.\n\n:rayleigh_taylor_instability \n\nTwo-layer periodic Rayleigh-Taylor instability with sharp contrast between density and viscosity fields. Constant viscosity and density is defined with each layer. Boundary conditions are no-slip along horizontal boundaries and symmetry along vertical walls. This benchmark test the codes ability to calculate velocity for gravity driven flows. Resolution is 51 x 51 nodes with 25 randomly distributed markers per cell. See Gerya (2010), pg. 242-244.\n\n:viscoelastic_extension \n\nSimple extension of a viscoelastic layer undergoing water- loaded symmetric extension with inflow along the top and bottom boundaries and constant outflow along side boundaries. Velocity inflow/outflow boundary conditions turned off to allow hydrostatic equilibration. The numerical solution is compared to an analytical solution for water-loaded local isostatic bathymetry.\n\n:elastic_slab \n\nRecovery of an elastic slab that is surrounded by a low-density, lower viscosity and higher shear modulus medium and attached to the left vertical boundary. The slab is deformed under a vertical gravity field (10 m/s/s) that is switched off after 20 Kyr to allow recovery. The visco-elastic slab has a density of 4000 kg/m3, viscosity of 10^27 Pa.s and a shear modulus of 10^10 Pa. The surrounding visco-elastic medium has a density of 1 kg/m3, viscosity of 10^21 Pa.s, shear modulus of 10^20 Pa. Boundary conditions are no-slip along the left vertical boundary and free slip along all other boundaries. This benchmark tests the codes ability to handle visco-elastic deformation and conservation of elastic stress. Resolution is 51 x 51 nodes with 25 randomly distributed markers per cell. For details on the analytical solution see Gerya (2010), pg. 261-263.\n\n:couette_flow_viscous_heating \n\nVertical Couette flow (simple shear in laterally limited planer zone) with temperature-dependent Newtonian rheology and viscous shear heating. Boundary conditions are defined using the :VerticalCouetteFlow boundary condition model type (See EarthBox.BoundaryConditions.initialize!). This benchmark tests how the code handles thermomechanical effects of shear heating with temperature dependent viscosity. Model parameters are as follows: L = 30 km, H = 11.25 km, A = 10^15 Pa.s, E_a = 150 kJ/mol, k = 2 W/m/K, T_o = 1000 K. Resolution is 51 x 11 nodes with 25 randomly distributed markers per cell. For details on the analytical solution see Gerya (2010), pg. 250-253.\n\n:simple_sedimentation \n\nSedimentation with compaction on a mantle substrate with a constant pelagic sedimentation rate of 20 mm/yr. The model domain is 140 km x 140 km with 251 x 71 nodes and 16 markers per cell in the horizontal and vertical directions. The topography marker chain has 561 uniformly spaced nodes. The model is initialized with a 10 km sticky layer with 5 km of sticky water and a constant sea level is used during the simulation. The Stokes-continuity and heat equation are not solved. This benchmark tests the codes ability to model sedimentation and compaction against a known analytical solution. \n\n:solid_body_rotation \n\nSolid body rotation of a 10 km wide square region that is 500 K hotter than the surrounding medium. Maximum velocity is 3.1536 cm/yr at a radius of 25 km centered in a 50 km x 50 km box. Plots show results after 1 rotation (blue circles) and after 3 rotation (black crosses) for cases with without subgrid diffusion and thermal conductivity set to 1e-6 W/m/K. This benchmark tests the code for numerical diffusion associated with the marker-in-cell advection scheme. Resolution is 51 x 51 nodes with 25 randomly distributed markers per cell. See Gerya, (2010), pg. 253.\n\n:viscoelastic_extension_inflow_and_outflow_along_sides \n\nSimple extension of a viscoelastic layer undergoing water- loaded symmetric extension with inflow along side and top boundaries and outflow along side boundaries. Velocity inflow/outflow boundary conditions along side boundaries are turned off to allow hydrostatic equilibration. The numerical solution is compared to an analytical solution for water-loaded local isostatic bathymetry.\n\n:channel_flow_non_steady_temperature \n\nVertical Newtonian constant-viscosity channel flow with non-steady temperature distribution. Boundary conditions are defined using the :VerticalChannelFlowIsoviscous boundary condition model type (See EarthBox.BoundaryConditions.initialize!). The initial condition is defined by a constant vertical temperature gradient and a constant temperature along bottom boundary. This benchmark tests the codes ability to handle coupled advective and conductive terms in the heat equation. Model parameters are as follows: L = 30 km, H = 11.25 km, eta = 10^19 Pa.s, P_beg = 1e5 Pa, P_end = 0, dTdy = 40 K/km, T(y=0) = 1000 K. Resolution is 51 x 11 nodes with 25 randomly distributed markers per cell. For details on the analytical solution see Gerya (2010), pg. 247-250. Note that a constant in equation 16.9 in (Gerya, 2010) had to be modified from 8 to 4 in order to match figure 16.5 in (Gerya, 2010).\n\n:seafloor_spreading \n\nSeafloor spreading via extension of lithospheric plate benchmark with melting and extraction at ridge.\n\n:viscoelastic_stress_buildup \n\nStress buildup in an incompressible visco-elastic Maxwell body undergoing uniform pure shear with constant strain rate. Boundary conditions involve constant inward velocity along the horizontal boundaries and constant outward velocity along the vertical boundaries. Velocity boundary conditions are defined as a function of a constant strain rate. This benchmark tests the codes ability to model elastic buildup and the transition from primarily elastic deformation to primarily viscous deformation. Model parameters: viscosity is 1e21 Pas, shear modulus is 1e10 Pa, strain rate is 1e-14s-1. Resolution is 51 x 51 nodes with 16 randomly distributed markers per cell. See Gerya, (2010), pg. 260-261.\n\n:box_convection_isoviscous_1a \n\nStationary convection within constant viscosity aspect ratio 1 box. Free slip boundary conditions are applied along all boundaries. Temperature boundary conditions are applied along the top and bottom boundaries. Reflecting temperature boundary conditions are applied along the vertical boundaries. This benchmark test the codes ability to handle coupled thermal diffusion and convection for gravity driven flows. Resolution is 51 x 51 nodes with 25 randomly distributed markers per cell and local refinement along boundaries. See Gerya (2010), pg. 255-260.\n\n:viscoelastic_contraction \n\nSimple contraction of a viscoelastic layer undergoing water- loaded symmetric contraction with outflow along the top and bottom boundaries and constant inflow along side boundaries. Velocity inflow/outflow boundary conditions are turned off to allow hydrostatic equilibration. The numerical solution is compared to an analytical solution for water-loaded local isostatic bathymetry.\n\n\n\n\n\n","category":"function"},{"location":"thermo_mechanical_algorithm/main_steps/#Main-Steps","page":"Main Steps","title":"Main Steps","text":"The main steps of the thermomechanical algorithm are as follows:\n\nInitialize grids and markers Model Initialization Steps\nRun time loop Time Loop Steps","category":"section"},{"location":"thermo_mechanical_algorithm/main_steps/#Model-Initialization-Steps","page":"Main Steps","title":"Model Initialization Steps","text":"","category":"section"},{"location":"thermo_mechanical_algorithm/main_steps/#Staggered-Grid-Initialization-Steps","page":"Main Steps","title":"Staggered Grid Initialization Steps","text":"[1] Initialize the x- and y-coordinates of the basic grid (x_bj y_bi) for model dimensions (x_size y_size) where j ranges from 1 to  N_xb and i ranges from 1 to N_yb and N_xb and  N_yb are the number of grid points in the x- and y-directions,  respectively. The convention used in this work is that y is the vertical  direction with values increasing with depth and x is the horizontal direction. Basic grid coordinates take into account local refinement.\n\n[2] Initialize basic grid spacings Delta x_bj and Delta y_bi  where j ranges from 1 to N_xb-1 and i ranges from 1 to N_yb-1.\n\n[3] Initialize pressure grid x- and y-coordinates (x_pj y_pi) where j ranges from 0 to N_xb-1 and i ranges from 1 to N_yb-1.\n\n[4] Initialize pressure grid spacings Delta x_pj and Delta y_pi where j ranges from 1 to N_xb-2 and i ranges from 1 to N_yb-2.\n\n[5] Initialize y-direction coordinates of v_x-grid  y_v_xi where i ranges from 1 to N_yb+1.\n\n[6] Initialize y-direction spacing of v_x-grid Delta y_v_xi where i ranges from 1 to N_yb.\n\n[7] Initialize x-direction coordinates of v_y-grid x_v_yj where j ranges from 1 to N_xb+1.\n\n[8] Initialize x-direction spacing of v_y-grid Delta x_v_yj where j ranges from 1 to N_xb.","category":"section"},{"location":"thermo_mechanical_algorithm/main_steps/#Initialize-Topography-Grid","page":"Main Steps","title":"Initialize Topography Grid","text":"The topography grid is initialized using the following steps:\n\n[1] Initialize Eulerian topography grid coordinates (x_tj y_tj)  where j ranges from 1 to N_t and N_t is the number of topography grid points with uniform spacing Delta x_t. [2] Initialize total volcanic extrusion thickness grid  (x_tj H_tj^vol) with H_tj^vol = 0.","category":"section"},{"location":"thermo_mechanical_algorithm/main_steps/#Marker-Initialization-Steps","page":"Main Steps","title":"Marker Initialization Steps","text":"[1] Initialize marker coordinates (x_m y_m) using equations eq:marker-coordinates.\n\n[2] Initialize marker composition C_m and marker temperature T_m based on initial conditions.\n\n[3] Initialize initial friction angle for marker theta_m^o using the initial friction angle of the material associated with the marker composition C_m.\n\n[4] Initialize initial cohesion for marker sigma_cm^o using the initial cohesion of the material associated with the marker composition C_m.\n\n[5] Initialize marker parameters:\n\nbeginsplit\n    textPressure  P_m = 0 \n    textDeviatoric normal stress  sigma_(xx)m = 0 \n    textDeviatoric shear stress  sigma_(xy)m = 0 \n    textDeviatoric normal strain rate  dotepsilon_xx(m) = 0 \n    textDeviatoric shear strain rate  dotepsilon_xy(m) = 0 \n    textMelt Fraction  M_m = 0 \n    textExtracted Melt Fraction  M_(extracted)m = 0 \n    textExtractable Melt Fraction M_(extractable)m = 0\n    textStrain  epsilon_m = 0 \n    textStrain-rate Ratio  R_sr(m) = 10\nendsplit\n\n[6] Initialize marker density rho_m based on C_m, T_m and P_m.\n\n[7] Initialize marker thermal conductivity k_m based on C_m, and T_m.\n\n[8] Initialize marker heat capacity C_p(m) based on C_m, and T_m.","category":"section"},{"location":"thermo_mechanical_algorithm/main_steps/#Time-Loop-Steps","page":"Main Steps","title":"Time Loop Steps","text":"[1] Set model time step Delta t equal to visco-elastic time step Delta t_ve.\n\n[2] Execute Pre-solver Steps including updating transient  boundary conditions, updating melt fraction and melt-related marker composition,  updating rock properties, updating frictional-plastic and creep rheologies, and  interpolating marker parameters to staggered grid arrays.\n\n[3] Create marker and grid output files at model time t.\n\n[4] Execute Stokes-solver Steps including solving the  visco-elasto-plastic Stokes-continuity equations on the staggered grid, adjusting time step  Delta t using the updated velocity solution to ensure maximum cell displacement limits are  not exceeded, updating marker stress taking grid and sub-grid changes and updating marker strain rate, marker strain rate ratio and marker pressure using updated grid velocity and  pressure solutions. \n\n[5] Execute Heat-solver Steps including updating marker  temperature for grid and sub-grid thermal diffusion using the updated time step Delta t.\n\n[6] Execute Advection-solver Steps using adjusted time step  Delta t including advecting markers and rotating stress tensors using a 4-th order Runge  Kutta scheme, updating marker total and plastic strain and correcting temperature in the sticky  air/water layer.\n\n[7] Execute Post-solver Steps including updating melt extraction, updating topography for deformation, sediment transport and lava flow, transforming marker composition for surface processes, updating sea level using isostasy, updating the next  eruption time, recycling markers that have exited the model domain, and updating marker  serpentinization.","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/sediment_transport/#Sediment-Transport-Update-Steps","page":"Sediment Transport","title":"Sediment Transport Update Steps","text":"[1] Copy the topography grid (x_topoi y_topoi) to (x_topoi y_topoi^o) to define the initial topography grid.\n\n[2] Calculate the initial thickness of sediments and volcanics H_sedi^o on the  topography grid by searching for the shallowest y-coordinates y_sedshallowi and deepest  y-coordinates y_seddeepi of sediment and volcanic markers at each x-coordinate x_topoi  of the topography grid. A low-pass filter is applied to remove high-frequency noise:","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/sediment_transport/#eq:low-pass-filter","page":"Sediment Transport","title":"eq:low-pass-filter","text":"    y_i^LP\n        = frac\n            displaystyle sum_k=0^2N_smooth\n                left(y_(i - N_smooth + k) right)\n            2N_smooth+1\n\nwhere y_i^LP is the i-th y-coordinate of either the top or bottom sediment grid grid with  a low-pass filter applied and N_smooth is the number of grid points that extend to the left  and right from the current grid point i that will be included in the running average. Initial  sediment thickness is calculated as H_sedi^o = y_seddeepi^LP - y_sedshallowi^LP .\n\n[3] Classify the shape of the topography at each x-coordinate x_topoi of the topography grid.  The shape of the topography is classified as either a sloping segment, a flat segment, local  minimum or local maximum.\n\n[4] Define drainage divides x_divides on the topography grid at each node classified as a  local minimum, local maximum or a flat segment.\n\n[5] Calculate downstream distances D_streami on the topography grid as the distances  between drainage divides located to the left and right of each topography grid node:","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/sediment_transport/#eq:downstream-distances","page":"Sediment Transport","title":"eq:downstream-distances","text":"    D_streami = x_dividesright - x_dividesleft\n\n[6] Calculate water depth W_i on the topography grid (x_topoi y_topoi) using the following equation:","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/sediment_transport/#eq:water-depth","page":"Sediment Transport","title":"eq:water-depth","text":"    W_i = y_topoi^o - y_sl text\n\nwhere y_sl is the y-coordinate of the seal level.\n\n[7] Run Sediment Transport Time Loop.\n\n[8] Set y-coordinate of topography grid y_topoi equal to y_toponewi.","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/sediment_transport/#Sediment-Transport-Time-Loop","page":"Sediment Transport","title":"Sediment Transport Time Loop","text":"For each sediment transport time step do:\n\n[1] Calculate transport diffusivity kappa_si using equation  eq:sediment-transport-diffusivity with water depth W_i and downstream distance D_streami.\n\n[2] Calculate the y-coordinate of topography grid after sediment transport y_topoi^trans by solving equation eq:sediment-transport with kappa_si and y_topoi^o as the  initial condition.\n\n[3] Calculate the shallowest y-coordinates y_stickyshallowi and deepest y-coordinates y_stickydeepi of sticky markers at each x-coordinate x_topoi of the topography grid, and apply Eq. to remove high-frequency noise.\n\n[4] Calculate the thickness of the sticky layer H_stickyi on the topography grid using H_stickyi = y_stickyshallowi - y_stickydeepi.\n\n[5] Calculate the newly deposited sediment thickness at maximum compaction state  Delta H_sedi^o using equation eq:depo-thickness-max-compaction with  y_topoi^o and y_topoi^trans.\n\n[6] De-compact newly deposited compacted sediment thickness Delta H_sedi^o to obtain the newly deposited sediment thickness Delta H_sedi^f by applying the conservation of mass and the porosity-depth relationship from equation eq:sediment-porosity.\n\n[7] Calculate the compacted initial sediment thickness H_sedi^f at a submud-depth  Delta H_sedi^f. To accomplish this, the sedimentary basin is discretized into vertical  1D meshes, and each 1D mesh is divided into 20 cells. Average properties for equation  eq:sediment-porosity including phi_o, lambda_comp and y_submud^max are  calculated for each cell using all markers contained within a given cell. For each 1D mesh cells are compacted using the conservation of mass and the porosity-depth relationship from equation eq:sediment-porosity starting with the top cell and moving downward. Cell  compaction only occurs if the new submud depth of the bottom of the cell exceeds the average maximum  submud depth encountered by all markers within the cell. H_sedi^f is calculated by summing the compacted thickness of all cells associated with 1D meshes at each topography grid node.\n\n[8] Calculate compaction displacement for cell of 1D compaction meshes by summing thickness changes for all cells below a given node. Compaction displacement for each marker  Delta y_compm is calculated by mapping compaction displacement from 1D meshes to  markers assuming a linear change in displacement within the cell.\n\n[9] Calculate the top of the y-coordinates of uncompacted sedimentary basin  Y_topoprecompi at topography grid nodes by searching for the shallowest sedimentary markers at each x-coordinate x_topoi and applying eq:low-pass-filter to remove  high-frequency noise.\n\n[10] Update y-coordinates of sediment markers y_m due to compaction displacement after  copying y_m to y_m^o using the following equation: \\begin{equation}     ym = ym^o + \\Delta y_{comp,m} \\quad \\text{if composition of marker m is sediment} \\end{equation}\n\n[11] Calculate the top of the y-coordinates of compacted sedimentary basin  y_topopostcompi at topography grid nodes by searching for the shallowest sedimentary markers at each x-coordinate x_topoi and applying Eq. to remove  high-frequency noise.\n\n[12] Calculate the compaction displacement at the sediment surface Delta y_compi at each node of the topography grid using the following equation: \\begin{equation}     \\Delta y{comp,i} = y{topo,postcomp,i} - y_{topo,precomp,i} \\end{equation}\n\n[13] Adjust sticky air and water markers assuming a linear change in the sticky layer with zero displacement at the top of the model domain and a maximum displacement at the top of the sediments equal to Delta y_compi.\n\n[14] Calculate the new y-coordinate of the topography grid y_toponewi taking into account compaction using equation eq:sediment-compaction-correction with H_sedi^o, Delta H_sedi^o, H_sedi^f and Delta H_sedi^f.\n\n[15] Set y_topoi^o equal to y_toponewi.\n\n[16] Calculate downstream distances D_streami using updated y-coordinates of  topography grid y_toponewi.\n\n[17] Calculate water depth W_i on the new topography grid using updated y-coordinates of  topography grid y_toponewi.","category":"section"},{"location":"api/markers/preexponential/#Marker-Pre-exponential-Terms","page":"MarkerPreexponential","title":"Marker Pre-exponential Terms","text":"","category":"section"},{"location":"api/markers/preexponential/#Initialization","page":"MarkerPreexponential","title":"Initialization","text":"","category":"section"},{"location":"api/markers/preexponential/#EarthBox.Markers.MarkerPreexponential.initialize!","page":"MarkerPreexponential","title":"EarthBox.Markers.MarkerPreexponential.initialize!","text":"initialize!(model::ModelData)::Nothing\n\nInitialize marker pre-exponential term for dislocation creep models. This  initializes the marker_preexp array in the model data container and is required for all models that use dislocation creep. The initialization of marker pre-exponential terms allows strain softening to be applied to the pre-exponential term.\n\nArguments\n\nmodel::ModelData: The model data container containing the model parameters and arrays.\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"model_data/collections/materials/","page":"Materials","title":"Materials","text":"Materials\n\nParameters\nMaterialDescription\nRandomFriction\nSoftening\nViscosityLimits\nStressLimitsYield\nStressLimitsPowerLaw\nHydrothermal\nCompaction\nBoundaryFriction\nSerpentinization\nMeltDamage\nArrays\nDicts","category":"section"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.Materials","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.Materials","text":"Materials <: CollectionContainer\n\nData structure containing parameter, array and dictionary objects associated with material properties.\n\nFields\n\nparameters::Parameters: Parameter groups for material properties\narrays::Arrays: Array groups containing material property values\ndicts::Dicts: Dictionary groups for mapping material names to IDs\ncolors::MaterialColors: Struct with material color information\n\nConstructor\n\nMaterials()::Materials\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.Parameters","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for material properties.\n\nFields\n\nmaterial_description::MaterialDescription: Parameters for material model identifiers\nrandom_friction::RandomFriction: Parameters for spatial and temporal variation of friction coefficient\nsoftening::Softening: Parameters for strain softening behavior whereby pre-exponential is modified with increasing strain\nviscosity_limits::ViscosityLimits: Minimum and maximum viscosity limits\nstress_limits_yield::StressLimitsYield: Stress limits for plastic yielding\nstress_limits_power_law::StressLimitsPowerLaw: Stress limits for power law creep\nhydrothermal::Hydrothermal: Parameters for hydrothermal circulation model used to mimic the effects of hydrothermal circulation on thermal structure\ncompaction::Compaction: Parameters for sediment compaction\nboundary_friction::BoundaryFriction: Parameters for boundary friction zones\nserpentinization::Serpentinization: Parameters for serpentinization model\nmelt_damage::MeltDamage: Parameters for melt-induced damage\n\nConstructor\n\nParameters()::Parameters\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.MaterialDescriptionGroup.MaterialDescription","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.MaterialDescriptionGroup.MaterialDescription","text":"MaterialDescription <: AbstractParameterGroup\n\nParameter group for material and plasticity model descriptions.\n\nFields\n\nitype_mat::ParameterInt: Material and marker initialization model option\nstype_mat::ParameterStr: Material and marker initialization model option name\nnmats::ParameterInt: Maximum number of materials allowed in model\nitype_plasticity::ParameterInt: Plasticity model type: 0 = viscoelastic; 1 = purely elastic\nstype_plasticity::ParameterStr: Plasticity model name\nobj_list::Vector{ParameterInt}: List of parameter objects\n\nNested Dot Access\n\nitype_mat = model.materials.parameters.description.itype_mat.value\nstype_mat = model.materials.parameters.description.stype_mat.value\nnmats = model.materials.parameters.description.nmats.value\nitype_plasticity = model.materials.parameters.description.itype_plasticity.value\nstype_plasticity = model.materials.parameters.description.stype_plasticity.value\n\nConstructor\n\nMaterialDescription()\n\nCreate a new MaterialDescription parameter group with default values.\n\nReturns\n\nMaterialDescription: New MaterialDescription parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.RandomFrictionGroup.RandomFriction","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.RandomFrictionGroup.RandomFriction","text":"RandomFriction <: AbstractParameterGroup\n\nParameter group for random friction properties.\n\nFields\n\niuse_random_fric::ParameterInt: Randomize initial friction coefficient using deltafriccoef: 0 off; 1 on\ndelta_fric_coef::ParameterFloat: Friction coefficient perturbation used to randomize initial marker friction coefficients\niuse_random_fric_time::ParameterInt: Randomize marker friction coefficients with each time step: 0 off; 1 on\nrandomization_factor::ParameterFloat: Randomization factor used to randomize marker friction coefficients with each time step\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\niuse_random_fric = model.materials.parameters.random_friction.iuse_random_fric.value\ndelta_fric_coef = model.materials.parameters.random_friction.delta_fric_coef.value\niuse_random_fric_time = model.materials.parameters.random_friction.iuse_random_fric_time.value\nrandomization_factor = model.materials.parameters.random_friction.randomization_factor.value\n\nConstructor\n\nRandomFriction()\n\nCreate a new RandomFriction parameter group with default values.\n\nReturns\n\nRandomFriction: New RandomFriction parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.SofteningGroup.Softening","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.SofteningGroup.Softening","text":"Softening <: AbstractParameterGroup\n\nParameter group for viscous strain softening properties.\n\nFields\n\niuse_viscous_strain_soft::ParameterInt: Viscous strain softening: 0 off; 1 on\nvsoftfac::ParameterFloat: Softening factor multiplied by power-law pre-exponential\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\niuse_viscous_strain_soft = model.materials.parameters.softening.iuse_viscous_strain_soft.value\nvsoftfac = model.materials.parameters.softening.vsoftfac.value\n\nConstructor\n\nSoftening()\n\nCreate a new Softening parameter group with default values.\n\nReturns\n\nSoftening: New Softening parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.ViscosityLimitsGroup.ViscosityLimits","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.ViscosityLimitsGroup.ViscosityLimits","text":"ViscosityLimits <: AbstractParameterGroup\n\nParameter group for viscosity limits.\n\nFields\n\nviscosity_min::ParameterFloat: Minimum viscosity\nviscosity_max::ParameterFloat: Maximum viscosity\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\nviscosity_min = model.materials.parameters.viscosity_limits.viscosity_min.value\nviscosity_max = model.materials.parameters.viscosity_limits.viscosity_max.value\n\nConstructor\n\nViscosityLimits()\n\nReturns\n\nViscosityLimits: New ViscosityLimits parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.StressLimitsYieldGroup.StressLimitsYield","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.StressLimitsYieldGroup.StressLimitsYield","text":"StressLimitsYield <: AbstractParameterGroup\n\nParameter group for yield stress limits and plastic failure properties.\n\nFields\n\nyield_stress_min::ParameterFloat: Minimum stress limit for plastic failure in Pa\nyield_stress_max::ParameterFloat: Maximum stress limit for plastic failure in Pa\niuse_fluid_pressure_for_yield::ParameterInt: Flag to use fluid pressure for yield stress calculation\nplastic_healing_rate::ParameterFloat: Rate of plastic healing in 1/s\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nyield_stress_min = model.materials.parameters.stress_limits_yield.yield_stress_min.value\nyield_stress_max = model.materials.parameters.stress_limits_yield.yield_stress_max.value\niuse_fluid_pressure_for_yield = model.materials.parameters.stress_limits_yield.iuse_fluid_pressure_for_yield.value\nplastic_healing_rate = model.materials.parameters.stress_limits_yield.plastic_healing_rate.value\n\nConstructor\n\nStressLimitsYield()\n\nCreate a new StressLimitsYield parameter group with default values.\n\nReturns\n\nStressLimitsYield: New StressLimitsYield parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.StressLimitsPowerLawGroup.StressLimitsPowerLaw","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.StressLimitsPowerLawGroup.StressLimitsPowerLaw","text":"StressLimitsPowerLaw <: AbstractParameterGroup\n\nParameter group for power-law stress limits.\n\nFields\n\npowerlaw_stress_min::ParameterFloat: Minimum stress limit for power law\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\npowerlaw_stress_min = model.materials.parameters.stress_limits_powerlaw.powerlaw_stress_min.value\n\nConstructor\n\nStressLimitsPowerLaw()\n\nReturns\n\nStressLimitsPowerLaw: New StressLimitsPowerLaw parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.HydrothermalGroup.Hydrothermal","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.HydrothermalGroup.Hydrothermal","text":"Hydrothermal <: AbstractParameterGroup\n\nParameter group for hydrothermal circulation properties.\n\nFields\n\niuse_hydrothermal::ParameterInt: Hydrothermal circulation: 0 off; 1 on (iuse_topo must be 1)\niuse_melt_lens::ParameterInt: Include shallow melt lens effect: 0 off; 1 on\nhydrothermal_smoothing_factor::ParameterFloat: Hydrothermal smoothing factor\nhydrothermal_nusselt_number::ParameterFloat: Hydrothermal Nusselt number\nhydrothermal_max_temperature::ParameterFloat: Hydrothermal max temperature in Celsius\nhydrothermal_max_depth::ParameterFloat: Hydrothermal max depth in meters\niuse_plastic_strain_rate_for_hydrothermal::ParameterInt: Use plastic strain rate for hydrothermal circulation: 0 off; 1 on\nhydrothermal_decay_length::ParameterFloat: Hydrothermal decay length in meters\nhydrothermal_buffer_distance::ParameterFloat: Hydrothermal buffer distance in meters\nhydrothermal_plastic_strain_rate_reference::ParameterFloat: Hydrothermal plastic strain rate reference in 1/s\niuse_plastic_strain_for_hydrothermal::ParameterInt: Use plastic strain for hydrothermal circulation: 0 off; 1 on\nhydrothermal_plastic_strain_reference::ParameterFloat: Hydrothermal plastic strain reference\nsediment_thickness_threshold::ParameterFloat: Sediment thickness threshold in meters\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of \n\nparameter objects\n\nNested Dot Access\n\niuse_hydrothermal = model.materials.parameters.hydrothermal.iuse_hydrothermal.value\niuse_melt_lens = model.materials.parameters.hydrothermal.iuse_melt_lens.value\nhydrothermal_smoothing_factor = model.materials.parameters.hydrothermal.hydrothermal_smoothing_factor.value\nhydrothermal_nusselt_number = model.materials.parameters.hydrothermal.hydrothermal_nusselt_number.value\nhydrothermal_max_temperature = model.materials.parameters.hydrothermal.hydrothermal_max_temperature.value\nhydrothermal_max_depth = model.materials.parameters.hydrothermal.hydrothermal_max_depth.value\niuse_plastic_strain_rate_for_hydrothermal = model.materials.parameters.hydrothermal.iuse_plastic_strain_rate_for_hydrothermal.value\nhydrothermal_decay_length = model.materials.parameters.hydrothermal.hydrothermal_decay_length.value\nhydrothermal_buffer_distance = model.materials.parameters.hydrothermal.hydrothermal_buffer_distance.value\nhydrothermal_plastic_strain_rate_reference = model.materials.parameters.hydrothermal.hydrothermal_plastic_strain_rate_reference.value\niuse_plastic_strain_for_hydrothermal = model.materials.parameters.hydrothermal.iuse_plastic_strain_for_hydrothermal.value\nhydrothermal_plastic_strain_reference = model.materials.parameters.hydrothermal.hydrothermal_plastic_strain_reference.value\nsediment_thickness_threshold = model.materials.parameters.hydrothermal.sediment_thickness_threshold.value\n\nConstructor\n\nHydrothermal()\n\nCreate a new Hydrothermal parameter group with default values.\n\nReturns\n\nHydrothermal: New Hydrothermal parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.CompactionGroup.Compaction","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.CompactionGroup.Compaction","text":"Compaction <: AbstractParameterGroup\n\nParameter group for sediment compaction and water properties.\n\nFields\n\niuse_sed_porosity::ParameterInt: Depth-dependent sediment porosity: 0 off; 1 on\nconductivity_water::ParameterFloat: Thermal conductivity of water\ndensity_water::ParameterFloat: Density of water\nheat_capacity_water::ParameterFloat: Heat capacity of water\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of \n\nparameter objects\n\nNested Dot Access\n\niuse_sed_porosity = model.materials.parameters.compaction.iuse_sed_porosity.value\nconductivity_water = model.materials.parameters.compaction.conductivity_water.value\ndensity_water = model.materials.parameters.compaction.density_water.value\nheat_capacity_water = model.materials.parameters.compaction.heat_capacity_water.value\n\nConstructor\n\nCompaction()\n\nCreate a new Compaction parameter group with default values.\n\nReturns\n\nCompaction: New Compaction parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.BoundaryFrictionGroup.BoundaryFriction","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.BoundaryFrictionGroup.BoundaryFriction","text":"BoundaryFriction <: AbstractParameterGroup\n\nParameter group for boundary friction zone properties.\n\nFields\n\nboundary_friction_width::ParameterFloat: Width of boundary friction zone\nboundary_friction_angle::ParameterFloat: Friction angle of boundary friction zone\nboundary_cohesion::ParameterFloat: Cohesion of boundary friction zone\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\nboundary_friction_width = model.materials.parameters.boundary_friction.boundary_friction_width.value\nboundary_friction_angle = model.materials.parameters.boundary_friction.boundary_friction_angle.value\nboundary_cohesion = model.materials.parameters.boundary_friction.boundary_cohesion.value\n\nConstructor\n\nBoundaryFriction()\n\nCreate a new BoundaryFriction parameter group with default values.\n\nReturns\n\nBoundaryFriction: New BoundaryFriction parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.SerpentinizationGroup.Serpentinization","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.SerpentinizationGroup.Serpentinization","text":"Serpentinization <: AbstractParameterGroup\n\nParameter group for serpentinization model properties.\n\nFields\n\niuse_serpentinization::ParameterInt: Serpentinization model: 0 off; 1 on. Topography must be activated for serpentinization (i.e. iuse_topo must be equal to 1). See EarthBox.SurfaceProcesses.Topography.initialize!) for more details on topography initialization.\nserpentinization_temperature::ParameterFloat: Temperature in Celsius that controls when serpentinization rate reaches maximum and then rapidly decreases. Typical values from the literature are around 613.15K (340.15C) (e.g. Mezri et al. (2024)).\nmaximum_serpentinization_depth::ParameterFloat: Maximum submud serpentinization depth in meters\nmaximum_serpentinization_rate::ParameterFloat: Maximum serpentinization rate (1/s). Typical values from the literature are around 1e-10 to 1e-11 1/s (e.g. Mezri et al. (2024)).\nnominal_strain_rate_serpentinization::ParameterFloat: Nominal plastic strain rate for serpentinization (1/s). Plastic strain rate beyond which the effect of plastic strain rate on serpentinization rate rapidly increases and then becomes constant (e.g. Merzi et al., 2024). Typical values from the literature are around 1e-12 to 1e-13 1/s (e.g. Mezri et al. (2024)).\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\niuse_serpentinization = model.materials.parameters.serpentinization.iuse_serpentinization.value\nserpentinization_temperature = model.materials.parameters.serpentinization.serpentinization_temperature.value\nmaximum_serpentinization_depth = model.materials.parameters.serpentinization.maximum_serpentinization_depth.value\nmaximum_serpentinization_rate = model.materials.parameters.serpentinization.maximum_serpentinization_rate.value\nnominal_strain_rate_serpentinization = model.materials.parameters.serpentinization.nominal_strain_rate_serpentinization.value\n\nConstructor\n\nSerpentinization()\n\nCreate a new Serpentinization parameter group with default values.\n\nReturns\n\nSerpentinization: New Serpentinization parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.MeltDamageGroup.MeltDamage","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ParameterCollection.MeltDamageGroup.MeltDamage","text":"MeltDamage <: AbstractParameterGroup\n\nParameter group for melt damage properties.\n\nFields\n\niuse_melt_damage::ParameterInt: Integer flag that activates melt damage model where the damage factor is calculated for markers in the melt damage zone above partially molten mantle.\nmelt_damage_distance::ParameterFloat: Distance in meters from the shallow partially molten mantle where the damage factor is calculated for markers in the melt damage zone.\nmelt_damage_factor::ParameterFloat: Maximum melt damage factor. Friction angle is divided by this factor to account for melt damage.\nmelt_damage_taper_distance::ParameterFloat: Distance in meters over which melt damage factor tapers to one.\niuse_probabilistic_melt_damage::ParameterInt: Integer flag that activates probabilistic melt damage model where the damage factor is calculated probabilistically for markers in the melt damage zone.\nmaximum_damage_probability::ParameterFloat: Maximum probability (fraction) of melt damage for markers in the central melt damage zone.\nmagmatic_crust_height_threshold::ParameterFloat: Threshold height in meters for magmatic crust used in linear melt damage probability model\nmagmatic_crust_height_minimum::ParameterFloat: Minimum height in meters for magmatic crust used in linear melt damage probability model\nmagmatic_crust_height_maximum::ParameterFloat: Maximum height in meters for magmatic crust used in linear melt damage probability model.\nmagmatic_crust_height_intermediate::ParameterFloat: Intermediate height in meters for magmatic crust used in linear melt damage probability model.\nintermediate_damage_probability::ParameterFloat: Intermediate probability (fraction) of melt damage for markers in the central melt damage zone.\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of \n\nparameter objects\n\nNested Dot Access\n\niuse_melt_damage = model.materials.parameters.melt_damage.iuse_melt_damage.value\nmelt_damage_distance = model.materials.parameters.melt_damage.melt_damage_distance.value\nmelt_damage_factor = model.materials.parameters.melt_damage.melt_damage_factor.value\nmelt_damage_taper_distance = model.materials.parameters.melt_damage.melt_damage_taper_distance.value\niuse_probabilistic_melt_damage = model.materials.parameters.melt_damage.iuse_probabilistic_melt_damage.value\nmaximum_damage_probability = model.materials.parameters.melt_damage.maximum_damage_probability.value\nmagmatic_crust_height_threshold = model.materials.parameters.melt_damage.magmatic_crust_height_threshold.value\nmagmatic_crust_height_minimum = model.materials.parameters.melt_damage.magmatic_crust_height_minimum.value\nmagmatic_crust_height_maximum = model.materials.parameters.melt_damage.magmatic_crust_height_maximum.value\nmagmatic_crust_height_intermediate = model.materials.parameters.melt_damage.magmatic_crust_height_intermediate.value\nintermediate_damage_probability = model.materials.parameters.melt_damage.intermediate_damage_probability.value\n\nConstructor\n\nMeltDamage()\n\nReturns\n\nMeltDamage: New MeltDamage parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.ArrayCollection.Arrays","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.ArrayCollection.Arrays","text":"Arrays\n\nCollection of material property arrays used in EarthBox.\n\nFields\n\nmat_rho::MaterialArrayFloat2DState: (nmats, 4) : Density-related properties\nColumn 1: Standard density (kg/m^3)\nColumn 2: Thermal expansion coefficient (1/K)\nColumn 3: Compressibility (1/Pa)\nColumn 4: Melt density (kg/m^3)\nmat_flow_type::MaterialArrayInt1DState: (nmats) : Flow law type integer ID for each material\nmat_flow::MaterialArrayFloat2DState: (nmats, 17) : Flow law parameters\nColumn 1: Viscosity for isoviscous models (Pa.s)\nColumn 2: Pre-exponential factor for power law (1/s/MPa^n)\nColumn 3: Power law stress exponent n\nColumn 4: Activation energy for power law (kJ/mol)\nColumn 5: Activation volume for power law (J/MPa/mol)\nColumn 6: Pre-exponential term for Peierls creep (s^-1*MPa^-2)\nColumn 7: Peierls creep stress exponent 1\nColumn 8: Peierls creep stress exponent 2\nColumn 9: Peierls stress (MPa)\nColumn 10: Pre-exponential terms for diffusion creep (1/s/MPa^n)\nColumn 11: Activation energy for diffusion creep (kJ/mol)\nColumn 12: Activation volume for diffusion creep (J/MPa/mol)\nColumn 13: Pre-exponential term for temperature-dependent viscosity (Pa.s)\nColumn 14: Activation energy for temperature-dependent viscosity (kJ/mol)\nColumn 15: Reference viscosity for flow law from Blankenbach (1989) (Pa.s)\nColumn 16: b term for flow law from Blankenbach (1989)\nColumn 17: c term for flow law from Blankenbach (1989)\nmat_mu::MaterialArrayFloat1DState: (nmats) : Shear modulus (Pa)\nColumn 1: Shear modulus (Pa)\nmat_plastic::MaterialArrayFloat2DState: (nmats, 7) : Plastic deformation parameters\nColumn 1: Cohesion (C0) at initial strain GAM0 (Pa)\nColumn 2: Cohesion (C1) at final strain GAM1 (Pa)\nColumn 3: Sine of friction angle at strain GAM0\nColumn 3: Sine of friction angle at strain GAM1\nColumn 5: Initial strain GAM0\nColumn 6: Final strain GAM1\nColumn 7: Dilatation angle\nmat_cp::MaterialArrayFloat1DState: (nmats) : Heat capacity (J/kg/K)\nmat_kt::MaterialArrayFloat2DState: (nmats, 2) : Thermal conductivity parameters\nColumn 1: Reference thermal conductivity k0 (W/m/k)\nColumn 2: Thermal conductivity term a (W/m)\nmat_hr::MaterialArrayFloat1DState: (nmats) : Radiogenic heat production rate (W/m^3)\nmat_melting_itypes::MaterialArrayInt2DState: (nmats, 2) : Melting model type IDs\nColumn 1: Integer type ID for solidus\nColumn 2: Integer type ID for liquidus\nmat_melting::MaterialArrayFloat2DState: (nmats, 2) : Melting model parameters\nColumn 1: Latent heat (J/kg)\nColumn 2: Shift in solidus and liquidus temperature to account for fractional crystallization above the Moho at spreading ridges. (K)\nmat_compaction::MaterialArrayFloat2DState: Compaction parameters\nColumn 1: Initial porosity at sediment-water interface (fraction)\nColumn 2: Porosity decay depth (meters)\n\nNested Dot Access\n\nmat_rho = model.materials.arrays.mat_rho.array\nmat_flow_type = model.materials.arrays.mat_flow_type.array\nmat_flow = model.materials.arrays.mat_flow.array\nmat_mu = model.materials.arrays.mat_mu.array\nmat_plastic = model.materials.arrays.mat_plastic.array\nmat_cp = model.materials.arrays.mat_cp.array\nmat_kt = model.materials.arrays.mat_kt.array\nmat_hr = model.materials.arrays.mat_hr.array\nmat_melting_itypes = model.materials.arrays.mat_melting_itypes.array\nmat_melting = model.materials.arrays.mat_melting.array\nmat_compaction = model.materials.arrays.mat_compaction.array\n\nConstructor\n\nArrays(nmats::Int)\n\nArguments\n\nnmats::Int: Number of materials\n\nReturns\n\nArrays: New Arrays collection with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/materials/#EarthBox.ModelDataContainer.MaterialContainer.DictCollection.Dicts","page":"Materials","title":"EarthBox.ModelDataContainer.MaterialContainer.DictCollection.Dicts","text":"Dicts\n\nCollection of material property dictionaries.\n\nFields\n\nmatid_domains::Dict{String, Int64}: Dictionary mapping domain name to a single material ID\nmatid_types::Dict{String, Vector{Int64}}: Dictionary mapping type name to multiple material IDs\n\nNested Dot Access\n\nmatid_domains = model.materials.dicts.matid_domains\nmatid_types = model.materials.dicts.matid_types\n\n\n\n\n\n","category":"type"},{"location":"models/lithospheric_extension/polyphase_extension_n17/#Polyphase-Lithospheric-Extension","page":"Polyphase Extension n17","title":"Polyphase Lithospheric Extension","text":"Lithospheric extension with a weak central zone and polyphase extensional  velocities starting with very slow extension followed by faster extension. Boundary conditions, model domain and rheology are similar to Naliboff et al.  (2017).\n\nsee EarthBox/models/lithospheric_extension/polyphase_extension_n17","category":"section"},{"location":"api/material_geometry/fracture_zone/#FractureZone","page":"FractureZone","title":"FractureZone","text":"The FractureZone material geometry is composed of lithospheric domains with different thicknesses separated by a weak zone superimposed by oceanic crust and a layer of sediment.","category":"section"},{"location":"api/material_geometry/fracture_zone/#Initialization","page":"FractureZone","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/fracture_zone/#EarthBox.MaterialGeometry.FractureZone.initialize!","page":"FractureZone","title":"EarthBox.MaterialGeometry.FractureZone.initialize!","text":"Initialize fracture zone geometry.\n\nKeyword arguments:\n\nsediment_thickness::Float64:\nThickness in meters of sediment layer\nbasaltic_oceanic_crust_thickness::Float64:\nThickness in meters of basaltic oceanic crust layer\ngabbroic_oceanic_crust_thickness::Float64:\nThickness in meters of gabbroic oceanic crust layer\nthickness_of_younger_lithosphere::Float64:\nThickness in meters of younger lithosphere\nthickness_of_older_lithosphere::Float64:\nThickness in meters of older lithosphere\nthickness_of_weak_lithosphere::Float64:\nThickness in meters of weak lithosphere\nx_fracture_zone_start::Float64:\nStart of fracture zone in x-direction in meters\nx_fracture_zone_end::Float64:\nEnd of fracture zone in x-direction in meters\n\n\n\n\n\n","category":"function"},{"location":"methods/discretization/heat_bcs/#Heat-Conduction-Equation-Boundary-Conditions","page":"Heat Boundary Conditions","title":"Heat Conduction Equation Boundary Conditions","text":"Earthbox uses the approach of Gerya (2010) for specifying boundary conditions   for the heat-conduction equations on a basic grid whereby simple coefficients are used that control type of boundary condition. ","category":"section"},{"location":"methods/discretization/heat_bcs/#Heat-Boundary-Conditions:-Top-and-Bottom-Boundaries","page":"Heat Boundary Conditions","title":"Heat Boundary Conditions: Top and Bottom Boundaries","text":"Boundary conditions for the heat conduction equation are implemented along the top and bottom  boundaries using the following equations:","category":"section"},{"location":"methods/discretization/heat_bcs/#eq:heat-bc-top-bottom","page":"Heat Boundary Conditions","title":"eq:heat-bc-top-bottom","text":"beginsplit\n    T_(1j)_b  = T_top + f_T^topT_(2j)_b \n    T_(N_ybj)_b  = T_bot + f_T^botT_(N_yb-1j)_b \nendsplit\n\nwhere j ranges from 1 to N_xb, f_T^top and f_T^bot are the boundary  condition coefficients for the top boundary and bottom boundaries, respectively, and T_top  and T_bot are the prescribed temperature or gradient values at nodes along the top and  bottom boundaries, respectively. The coefficients f_T^top and f_T^bot control how  the temperature at boundary nodes is related to the internal temperature and can have a value  of -1, 0 or 1 depending on the type of boundary condition.","category":"section"},{"location":"methods/discretization/heat_bcs/#Heat-Boundary-Conditions:-Left-and-Right-Boundaries","page":"Heat Boundary Conditions","title":"Heat Boundary Conditions: Left and Right Boundaries","text":"Boundary conditions for the heat conduction equation are implemented along the left and right  boundaries using the following equations:","category":"section"},{"location":"methods/discretization/heat_bcs/#eq:heat-bc-left-right","page":"Heat Boundary Conditions","title":"eq:heat-bc-left-right","text":"beginsplit\n    T_(i1)_b  = T_left + f_T^leftT_(i2)_b \n    T_(iN_xb)_b  = T_right + f_T^rightT_(iN_xb-1)_b \nendsplit\n\nwhere i ranges from 1 to N_yb, f_T^left and f_T^right are the  boundary condition coefficients for the left boundary and right boundaries, respectively, and  T_left and T_right are the prescribed temperature or gradient values at nodes along  the left and right boundaries, respectively. The coefficients f_T^left and f_T^right  control how the temperature at boundary nodes is related to the internal temperature and can  have a value of 0 or 1 depending on the type of boundary condition.\n\nBoundary nodes have a large matrix coefficient of 1 for the unknown temperature T and a right  hand side value equal to the prescribed temperature value T_top, T_bot, T_left  or T_right for the top, bottom, left and right boundaries, respectively. The internal nodes  used in equations Eq. and Eq. are associated with unknowns that have coefficients equal to -f_T^top, -f_T^bot,  -f_T^left and -f_T^right for the top, bottom, left and right boundaries, respectively,  after rearranging unknowns to the left hand side of equations Eq.  and Eq..","category":"section"},{"location":"methods/discretization/heat_bcs/#Constant-Temperature-Boundary-Conditions","page":"Heat Boundary Conditions","title":"Constant Temperature Boundary Conditions","text":"Constant temperature boundary conditions are implemented by setting f_T^top, f_T^bot,  f_T^left and f_T^right to 0 and setting T_top, T_bot, T_left and  T_right to the prescribed temperature values at the top, bottom, left and right boundaries,  respectively. Constant gradient boundary conditions are implemented by setting f_T^top,  f_T^bot, f_T^left and f_T^right to 1 and setting T_top, T_bot,  T_left and T_right to the prescribed temperature gradient values at the top, bottom,  left and right boundaries, respectively. ","category":"section"},{"location":"methods/discretization/heat_bcs/#Zero-Flux-Boundary-Conditions","page":"Heat Boundary Conditions","title":"Zero Flux Boundary Conditions","text":"Zero heat flux boundary conditions are implemented by setting f_T^top, f_T^bot,  f_T^left and f_T^right to 1 and setting T_top, T_bot, T_left and  T_right to zero at the top, bottom, left and right boundaries, respectively. ","category":"section"},{"location":"methods/discretization/heat_bcs/#Heat-Boundary-Conditions-for-Extensional-Models","page":"Heat Boundary Conditions","title":"Heat Boundary Conditions for Extensional Models","text":"For extensional models constant temperature boundary conditions are used along the top and bottom  boundaries and zero heat flux boundary conditions are used along the left and right boundaries as  described in the following equations:","category":"section"},{"location":"methods/discretization/heat_bcs/#eq:heat-bc-extension-models","page":"Heat Boundary Conditions","title":"eq:heat-bc-extension-models","text":"beginsplit\n    T_(1j)_b  = T_top \n    T_(N_ybj)_b  = T_bot \n    T_(i1)_b  = T_(i2)_b \n    T_(iN_xb)_b  = T_(iN_xb-1)_b text \nendsplit","category":"section"},{"location":"api/markers/coordinates/#MarkerCoordinates","page":"MarkerCoordinates","title":"MarkerCoordinates","text":"","category":"section"},{"location":"api/markers/coordinates/#Initialization","page":"MarkerCoordinates","title":"Initialization","text":"","category":"section"},{"location":"api/markers/coordinates/#Accessing-Option-Names","page":"MarkerCoordinates","title":"Accessing Option Names","text":"Available marker distribution options can be accessed programmatically:\n\nMarkers.MarkerCoordinates.option_names.Regular\nMarkers.MarkerCoordinates.option_names.Randomized","category":"section"},{"location":"api/markers/coordinates/#Example:-Initializing-a-model-with-a-randomized-marker-distribution","page":"MarkerCoordinates","title":"Example: Initializing a model with a randomized marker distribution","text":"using EarthBox\nusing CairoMakie\n\neb = EarthBoxState(\n    xnum = 100, ynum = 100, \n    xsize = 100000.0, ysize = 100000.0, \n    dx_marker = 1000.0, dy_marker = 1000.0);\n\nmodel = eb.model_manager.model;\n\noption_names = Markers.MarkerCoordinates.option_names;\nMarkers.MarkerCoordinates.initialize!(model, marker_distribution=option_names.Randomized);\n\nmarker_x = model.markers.arrays.location.marker_x.array;\nmarker_y = model.markers.arrays.location.marker_y.array;\n\nfig, ax, plt = scatter(\n    marker_x ./ 1000.0, marker_y ./ 1000.0; \n    color = :dodgerblue, markersize = 2, \n    axis = (; aspect = 1, xlabel = \"X (km)\", ylabel = \"Y (km)\", limits=(0.0, 100.0, 0.0, 100.0)),\n    );\nfig\n","category":"section"},{"location":"api/markers/coordinates/#EarthBox.Markers.MarkerCoordinates.initialize!","page":"MarkerCoordinates","title":"EarthBox.Markers.MarkerCoordinates.initialize!","text":"initialize!(\n    model::ModelData;\n    marker_distribution::Union{Int, String, Symbol, Nothing}=nothing\n)::Nothing\n\nInitialize marker coordinates.\n\nArguments\n\nmodel::ModelData: The model data object containing model parameters and arrays.\nmarker_distribution::Union{Int, String, Symbol, Nothing}: Controls the type of initial    marker distribution. The marker distribution type is stored in the model data container    as an integer ID (iuse_random). If marker_distribution is nothing the current    marker distribution type defined in the model data container will be used. \n\nAvailable options for marker_distribution are as follows:\n\n\"Regular\", :Regular, or 0\nInitial marker distribution is regular.\n\"Randomized\", :Randomized, or 1\nInitial marker distribution is randomized.\n\nMarker distribution type can be accessed from the model data container as follows:\n\niuse_random = model.markers.parameters.distribution.iuse_random.value\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"api/model_manager/model_manager/#Model-Manager","page":"ModelManager","title":"Model Manager","text":"The model manager coordinates model initialization and stores the main data  structures used by EarthBox including the model data struct ModelData that  stores collections of arrays and parameters.","category":"section"},{"location":"api/model_manager/model_manager/#EarthBox.ModelManager","page":"ModelManager","title":"EarthBox.ModelManager","text":"ModelManager\n\nModule responsible for managing the lifecycle and execution of the numerical model.\n\nThis module handles:\n\nModel initialization and setup\nBackup and restart functionality\nModel state management\nTime step progression\nOutput management through XDMF files\n\nThe ModelManager acts as the central coordinator for the simulation, orchestrating the interaction between various components like the grid, markers, solvers, and output handlers.\n\n\n\n\n\n","category":"module"},{"location":"api/model_manager/model_manager/#EarthBox.ModelManager.ModelManagerState","page":"ModelManager","title":"EarthBox.ModelManager.ModelManagerState","text":"ModelManagerState\n\nState object for the model manager.\n\nFields\n\nrestart_from_backup::Bool\nControls whether to restart from a backup file called model_backup.jld   located in the model output directory.\npaths::Dict{String, String}\nDictionary of paths including model input file path (model_input_file), materials   input file path (materials_input_file), materials library file path   (materials_library_file), output directory path (output_dir), and storage   directory path (storage_dir).\nrun_paths::Dict{String, String}\nDictionary of paths used to run the model including the model input file path   (model_file), materials input file path (materials_file), materials library   file path (materials_library_file), model output directory path (output_dir),   source directory (src_dir), and model output directory (plots_dir).\nconfig::Configuration\nConfiguration object for the model.\nxdmf_time_steps::XdmfTimeSteps\nXDMF time steps object used to manage the export of XDMF files.\nmodel::ModelData\nModel data object containing collections arrays and parameters.\noutput_lists::Union{OutputLists, Nothing}\nOutput lists object used to manage the export of output files.\nmake_backup::Bool\nControls whether to make a backup file called model_backup.jld   located in the model output directory after each output time step..\nloop_time_start::Float64\nStart time of the loop.\n\nConstructor\n\nModelManagerState(\n    restart_from_backup::Bool,\n    paths::Dict{String, String},\n    run_paths::Dict{String, String},\n    initialization_params::Union{ParametersDictType, Nothing},\n    use_mumps::Bool,\n    nprocs::Int,\n    use_internal_mumps::Bool,\n    mpi_comm::Union{MPI.Comm, Nothing},\n    mpi_initialized::Bool,\n    mpi_rank::Int,\n    pass_large_arrays_via_mpi::Bool\n)\n\nMain state constructor for the model manager.\n\nInputs\n\nrestart_from_backup::Bool\nControls whether to restart from a backup file called model_backup.jld   located in the model output directory.\npaths::Dict{String, String}\nDictionary of paths.\nrun_paths::Dict{String, String}\nDictionary of paths used to run the model.\ninitialization_params::Union{ParametersDictType, Nothing}\nDictionary of initialization parameters provided as inputs.\nuse_mumps::Bool\nControls whether to use the MUMPS solver.\nnprocs::Int\nNumber of MPI processes to use for the MUMPS solver.\nuse_internal_mumps::Bool\nControls whether to use the internal MUMPS solver..\nmpi_comm::Union{MPI.Comm, Nothing}\nMPI communicator.\nmpi_initialized::Bool\nIndicates whether MPI is initialized.\nmpi_rank::Int\nThe MPI rank of the current process.\npass_large_arrays_via_mpi::Bool\nControls whether to pass large arrays via MPI between a parent and spawned   child process. If false arrays are passed via file IO. Passing large arrays   via MPI between a parent and spawned child process does not work on all systems   and is therefore tuned off by default.\n\n\n\n\n\n","category":"type"},{"location":"models/model_execution/input_file_execution/#Executing-Models-Using-Input-Files","page":"Using Input Files","title":"Executing Models Using Input Files","text":"The run_model function can be used in a script with arguments based on user  defined functions or via command line.","category":"section"},{"location":"models/model_execution/input_file_execution/#Execution-Using-run_model-and-Command-line-Arguments-(CLIRun.jl)","page":"Using Input Files","title":"Execution Using run_model and Command-line Arguments (CLIRun.jl)","text":"A command-line based script, typically named CLIRun.jl, can be developed using  the run_model function and functions from the GetArgs:\n\nmodule CLIRun\n\nusing EarthBox\n\nfunction cl_run()\n    run_model(\n       make_backup             = GetArgs.get_make_backup_from_args(), \n       restart_from_backup     = GetArgs.get_restart_from_backup_from_args(), \n       use_mumps               = GetArgs.get_use_mumps_from_args(), \n       use_mumps_internal      = GetArgs.get_use_mumps_internal_from_args(), \n       nprocs                  = GetArgs.get_nprocs_from_args(), \n       marker_output_from_user = GetArgs.get_marker_output_dict_from_args(),\n       model_input_file        = GetArgs.get_model_input_file_from_args(), \n       materials_input_file    = GetArgs.get_materials_input_file_from_args(), \n       materials_library_file  = GetArgs.get_materials_library_file_from_args(), \n       model_output_path       = GetArgs.get_model_output_path_from_args()\n    )\n    return nothing\nend\n\nfunction main()::Nothing\n    cl_run()\n    return nothing\nend\n\nend # module\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    CLIRun.main()\nend\n\nIf model.yml and materials.yml are in the same directory as CLRun.jl then the model can be run with the following command:\n\n% julia CLIRun.jl model_input_file=\"model.yml\" materials_input_file=\"materials.yml\" materials_library_file=\"/path/to/materials_collection_file.yml\" model_output_path=\"path/to/model_output marker_output='{marker_x=false, marker_y=true}'\" \n\ntip: `model_output_path`\nIf you omit the model_output_path argument output will be sent to a directory  called output in the current working directory.\n\ntip: material collection files\nMaterial collection files are stored in src/material_library/registries.\n\nwarning: marker_output\nWhen defining the marker output flag dictionary via command line ensure that either no spaces exist on either side of the = sign or use a space on both  sides of the = sign. For example, the following are valid command-line  arguments:marker_output={marker_x=true, marker_y=true}\nmarker_output = {marker_x=true, marker_y=true}","category":"section"},{"location":"models/model_execution/input_file_execution/#Execution-Using-run_model-and-User-defined-Functions-(ReadRun.jl)","page":"Using Input Files","title":"Execution Using run_model and User-defined Functions (ReadRun.jl)","text":"module ReadRun\n\nusing EarthBox\n\nconst MODEL_PATH = joinpath(@__DIR__, \"model.yml\")\nconst MATERIAL_MODEL_PATH = joinpath(@__DIR__, \"materials.yml\")\nconst MATERIAL_COLLECTION = MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1\nconst MODEL_OUTPUT_PATH = \"/mnt/extradrive1/earthbox_output/extension_to_sfs/sdr_formation_output\"\n\nfunction read_run()::Nothing\n    marker_output_from_user = Dict{String, Bool}(\n        \"marker_age\" => true,\n        \"marker_rho\" => true,\n        \"marker_serpentinization\" => true,\n        \"marker_extractable_meltfrac\" => false,\n        \"marker_extracted_meltfrac\" => false,\n        \"marker_strain_rate_plastic\" => true,\n    )\n    run_model(\n        make_backup            = false, \n        restart_from_backup    = false, \n        use_mumps              = false, \n        use_mumps_internal     = true, \n        nprocs                 = 1, \n        marker_output_from_user = marker_output_from_user,\n        model_input_file       = MODEL_PATH, \n        materials_input_file   = MATERIAL_MODEL_PATH, \n        materials_library_file = MATERIAL_COLLECTION.path, \n        model_output_path      = MODEL_OUTPUT_PATH\n        )\n    return nothing\nend\n\nfunction main()::Nothing\n    read_run()\n    return nothing\nend\n\nend # module\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    ReadRun.main()\nend\n\nThe script above can be executed via command line:\n\n%julia ReadRun.jl\n\nor from the REPL,\n\ninclude(\"ReadRun.jl\")\nReadRun.read_un()","category":"section"},{"location":"models/model_execution/input_file_execution/#EarthBox.run_model","page":"Using Input Files","title":"EarthBox.run_model","text":"run_model(; kwargs...)\n\nRun EarthBox model using user specified paths.\n\nKeyword arguments\n\nmake_backup::Bool\nWhether to make a backup of the model state at each output time step.\nrestart_from_backup::Bool\nWhether to restart from a backup file.\nuse_mumps::Bool\nWhether to use MUMPS for solving the linear system of equations.\nuse_mumps_internal::Bool\nWhether to use the internal MUMPS solver.\nnprocs::Int\nNumber of MPI processes to use.\nmarker_output_from_user::Union{Dict{String, Bool}, Nothing}\nDictionary of marker output keys and values from user input. See list of   marker output keys below.\nmodel_input_file::String\nPath to the model input file.\nmaterials_input_file::String\nPath to the materials input file.\nmaterials_library_file::String\nPath to the materials library file.\nmodel_output_path::Union{String, Nothing}\nPath to the model output directory. If not provided, the model output   directory is set to \"output\" and is created in the current working   directory.\n\nList of marker output keys\n\nmarker_x\nmarker_y\nmarker_matid\nmarker_GII\nmarkerstrainplastic\nmarkerstrainrate_plastic\nmarker_meltfrac\nmarkerextractablemeltfrac\nmarkerextractedmeltfrac\nmarker_serpentinization\nmarker_pfailure\nmarker_TK\nmarker_xn\nmarker_yn\nmarker_sxx\nmarker_sxy\nmarker_eta\nmarker_exx\nmarker_exy\nmarker_pr\nmarkersrratio\nmarker_age\nmarkerfricini\nmarker_fric\nmarker_cohesion\nmarker_preexp\nmarker_rho\n\nReturns\n\nnothing\n\n\n\n\n\n","category":"function"},{"location":"api/marker_materials/materials/#MarkerMaterials","page":"MarkerMaterials","title":"MarkerMaterials","text":"The MarkerMaterials module is used to initialize the material model used in the EarthBox simulation.","category":"section"},{"location":"api/marker_materials/materials/#Material-Models","page":"MarkerMaterials","title":"Material Models","text":"using EarthBox\nimport Markdown\noptions = Markers.MarkerMaterials.get_options()\nliststr = join([\"- $(options[id].option_name)\" for id in keys(options)], \"\\n\")\nMarkdown.parse(liststr)\n\ntip: quick search for material model\nHighlight a material model name in the list above and use Ctl-F + Enter to navigate to a detailed description in the Material Models section below.","category":"section"},{"location":"api/marker_materials/materials/#Initialization","page":"MarkerMaterials","title":"Initialization","text":"","category":"section"},{"location":"api/marker_materials/materials/#Example","page":"MarkerMaterials","title":"Example","text":"This example illustrates how to initialize marker material definitions for a case using the LithosphericExtensionLateralStrongZones material model with an upper  and lower continental crust, layered continental mantle lithosphere, and lateral  zones with stronger frictional plastic properties. Note that this material model requires certain material domains and material geometry input parameters. See  description provided for LithosphericExtensionLateralStrongZones in the  Material Models section of MarkerMaterials.initialize!  for more details. Also see Material Domains and Material Types for more information about material domains and types, respectively.\n\n# Copy and paste this code into the Julia REPL.\nusing EarthBox\nusing CairoMakie\n# Initialize EarthBox including model data container.\neb = EarthBoxState(\n    xsize=500000.0, ysize=160000.0, \n    xnum=250, ynum=80, \n    dx_marker=500.0, dy_marker=500.0);\n# Unpack the model data container.\nmodel = eb.model_manager.model;\n# Initialize the staggered grid.\nStaggeredGrid.initialize!(model, grid_type=:UniformGrid);\n# Initialize marker coordinates.\nMarkers.MarkerCoordinates.initialize!(model, marker_distribution=:Regular);\n# Define the material collection with material names and associated properties\ncollection =  MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1;\n# You can inspect the material collection being used by opening the collection\n# file associated with the following path. You can also make a local copy of this\n# file and create a custom material collection. For this custom case the you will\n# need to update the custom_path variable to your custom location.\ncollection_path = collection.path\n# Unpack material names from the collection, names for material types and names\n# for material domains.\nmat_names = collection.materials;\ntypes = MaterialTypesRegistry();\ndomains = MaterialDomainsRegistry();\n# Define the material input taking into account the required material domains\n# for the LithosphericExtensionLateralStrongZones material model that will be\n# initialize during material initialization.\nmaterials_input_dict = MaterialsDictType(\n    # Sticky Domain\n    Int16(1) => MaterialDictType(\n        \"mat_name\" => mat_names.sticky_air,\n        \"mat_type\" => types.sticky_air,\n        \"mat_domain\" => domains.atmosphere,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 255/255,\n        \"blue_fraction\" => 255/255,\n    ),\n    Int16(2) => MaterialDictType(\n        \"mat_name\" => mat_names.sticky_water,\n        \"mat_type\" => types.sticky_water,\n        \"mat_domain\" => domains.ocean,\n        \"red_fraction\" => 0/255,\n        \"green_fraction\" => 255/255,\n        \"blue_fraction\" => 255/255,\n    ),\n    # Felsic Continental Crust\n    Int16(3) => MaterialDictType(\n        \"mat_name\" => mat_names.felsic_continental_crust,\n        \"mat_type\" => types.felsic_continental_crust_fertile,\n        \"mat_domain\" => domains.upper_continental_crust,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 153/255,\n        \"blue_fraction\" => 153/255,\n    ),\n    Int16(4) => MaterialDictType(\n        \"mat_name\" => mat_names.felsic_continental_crust_strong_zone,\n        \"mat_type\" => types.felsic_continental_crust_fertile,\n        \"mat_domain\" => domains.upper_continental_crust_strong_zone,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 163/255,\n        \"blue_fraction\" => 163/255,\n    ),\n    # Mafic Continental Crust\n    Int16(5) => MaterialDictType(\n        \"mat_name\" => mat_names.mafic_continental_crust,\n        \"mat_type\" => types.mafic_continental_crust_fertile,\n        \"mat_domain\" => domains.lower_continental_crust,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 200/255,\n        \"blue_fraction\" => 200/255,\n    ),\n    Int16(6) => MaterialDictType(\n        \"mat_name\" => mat_names.mafic_continental_crust_strong_zone,\n        \"mat_type\" => types.mafic_continental_crust_fertile,\n        \"mat_domain\" => domains.lower_continental_crust_strong_zone,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 210/255,\n        \"blue_fraction\" => 210/255,\n    ),\n    # Continental Mantle Lithosphere\n    Int16(7) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_continental_lithosphere,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.upper_mantle_lithosphere,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 153/255,\n        \"blue_fraction\" => 153/255,\n    ),\n    Int16(8) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_continental_lithosphere,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.middle_mantle_lithosphere,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 153/255,\n        \"blue_fraction\" => (153+25)/255,\n    ),\n    Int16(9) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_continental_lithosphere,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.lower_mantle_lithosphere,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 153/255,\n        \"blue_fraction\" => 153/255,\n    ),\n    Int16(10) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_continental_lithosphere_strong_zone,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.lithospheric_mantle_strong_zone,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 163/255,\n        \"blue_fraction\" => 163/255,\n    ),\n    # Asthenosphere\n    Int16(11) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_asthenosphere_dry_fertile,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.asthenosphere,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 200/255,\n        \"blue_fraction\" => 153/255,\n    )\n);\n# Initialize the required material geometry parameters for the \n# LithosphericExtensionLateralStrongZones material model\nMaterialGeometry.StickyAirGeometry.initialize!(model, thick_air=10000.0);\nMaterialGeometry.EarthLayering.initialize!(\n    model, thick_lith=125000.0, thick_crust=35000.0, thick_upper_crust=22000.0);\nMaterialGeometry.LithoStrongZones.initialize!(\n    model, iuse_strong_zones=1, x_left_strong=150000.0, x_right_strong=350000.0);\n# Initialize the material model\nMarkers.MarkerMaterials.initialize!(\n    model, \n    material_model       = material_model_names.LithosphericExtensionLateralStrongZones,\n    paths                = Dict(\"materials_library_file\" => collection_path),\n    materials_input_dict = materials_input_dict,\n    viscosity_min        = 1e18,\n    viscosity_max        = 1e25 \n);\n# Get the marker arrays for material ID's and x- and y-coordinates and convert\n# from meters to kilometers\nmarker_matid = model.obj_dict[\"marker_matid\"].array;\nmarker_x_km = model.obj_dict[\"marker_x\"].array./1000.0;\nmarker_y_km = model.obj_dict[\"marker_y\"].array./1000.0;\n# Get size parameters and convert from meters to kilometers\nxsize_km = model.obj_dict[\"xsize\"].value/1000.0;\nysize_km = model.obj_dict[\"ysize\"].value/1000.0;\n# Decimate the marker arrays for faster plotting\ndecimation_factor = 2;\nindices = 1:decimation_factor:length(marker_matid);\nmarker_matid = marker_matid[indices];\nmarker_x_km = marker_x_km[indices];\nmarker_y_km = marker_y_km[indices];\n# Plot using CairoMakie\ndpi = 150.0;\nfig = Figure(size = (10.0*dpi, 3.0*dpi)); # 10 inches x 3 inches @ 150 dpi\nax = Axis(\n    fig[1, 1]; limits = (0.0, xsize_km, 0.0, ysize_km), yreversed = true,\n    xticks = collect(0.0:25.0:xsize_km), yticks = collect(0.0:10.0:ysize_km),\n    xlabel = \"X (km)\", ylabel = \"Y (km)\", \n    title = \"Earth Layering with Lateral Strong Zones\", \n    titlesize = 12, xlabelsize = 12, ylabelsize = 12, \n    xticklabelsize = 12, yticklabelsize = 12\n);\nplt = scatter!(\n    ax, marker_x_km, marker_y_km, color = marker_matid, \n    colormap = model.materials.colors.color_map,\n    colorrange = model.materials.colors.colorrange,\n    marker=:circle, markersize = 4, rasterize = true\n);\ncb = Colorbar(\n    fig[1,2], plt; label = \"Marker Materials\",\n    ticks = (model.materials.colors.ticks, model.materials.colors.labels),\n    ticklabelsize = 10\n);\nfig\n","category":"section"},{"location":"api/marker_materials/materials/#EarthBox.Markers.MarkerMaterials.initialize!","page":"MarkerMaterials","title":"EarthBox.Markers.MarkerMaterials.initialize!","text":"initialize!(\n    model::ModelData;\n    material_model::Union{Int, String, Symbol, Nothing}=nothing,\n    paths::Union{Dict{String, String}, Nothing}=nothing,\n    materials_input_dict::Union{MaterialsDictType, Nothing}=nothing,\n    kwargs...\n)::Nothing\n\nInitialize marker materials.\n\nArguments\n\nmodel::ModelData: The model data object containing model parameters and arrays.\nmaterial_model::Union{Int, String, Symbol, Nothing}: Controls the type of    material model used to define material properties for each marker. See the Material Models    section below for information on available material models. The material model is stored in the    model data container as an integer ID (itype_mat) and a corresponding string name    (stype_mat). If material_model is nothing, the current material model defined in the model    data container will be used. Material model parameters can be accessed from the model data    container as follows:\nitype_mat = model.materials.parameters.material_description.itype_mat.value\nstype_mat = model.materials.parameters.material_description.stype_mat.value\npaths::Union{Dict{String, String}, Nothing}: The paths to the materials    library and material input files. Dictionary keys and value descriptions are as follows:\n\"materials_library_file\": Path to a yaml formatted material collection library file with    material properties for each material. The materiallibraryfile path is required. See     MaterialLibrary for more     information about using material collection packaged with EarthBox. See     Material Collection Files for more information about creating a custom material     collection file.\n\"materials_input_file\": Path to a material input file with yaml     formatted material input definitions for each material used in the model including     material ID, material name from the material library, material type, material     domain, and red, green and blue color values. This key is optional. If not provided,    the materials_input_dict must be provided. See Material Input Files for more information     about material input files.\nmaterials_input_dict::Union{MaterialsDictType, Nothing}: The materials input dictionary   containing material input definitions for each material used in the model including    material ID, material name from the material library, material type, material    domain, and red, green and blue color values. This key is optional. If not provided,   the materials_input_file must be provided. See Material Input Dictionaries for more information    about material input dictionaries.\n\nKeyword Arguments\n\nviscosity_min::Float64: \nMinimum viscosity\nviscosity_max::Float64:\nMaximum viscosity\niuse_fluid_pressure_for_yield::Int:\nFlag to use fluid pressure for yield stress calculation\nplastic_healing_rate::Float64:\nRate of plastic healing in 1/s\n\n\n\nMaterial Models\n\n\n\nThis section provides a detailed description of each material model available in EarthBox including alternative material_model values that can be used to initialize the material model, a description of the material model, and the required domains and geometries for each material model. For more information about required domains see  MaterialDomainsRegistry. See the links for required geometries for more information about setting required geometric  parameters for each material model.\n\nIf the domain \"MantleLithosphere\" is defined in the material model then the domains  \"UpperMantleLithosphere\", \"MiddleMantleLithosphere\" and \"LowerMantleLithosphere\" will have properties assigned to them automatically from the \"MantleLithosphere\" domain.\n\nUniformComposition\n\nmaterial_model value: \"UniformComposition\", :UniformComposition, or 0\nDescription: Material model type with uniform composition.\nRequired Domains: GeneralDomain\nRequired Geometries:\nNone\n\nRayleighTaylorInstabilityBenchmark\n\nmaterial_model value: \"RayleighTaylorInstabilityBenchmark\", :RayleighTaylorInstabilityBenchmark, or 1\nDescription: Material model type for the Rayleigh-Taylor instability benchmark from Ramberg.\nRequired Domains: Layer1RayleighTaylor, Layer2RayleighTaylor\nRequired Geometries:\nRayleighTaylor.initialize!\n\nViscousBlockBenchmark\n\nmaterial_model value: \"ViscousBlockBenchmark\", :ViscousBlockBenchmark, or 2\nDescription: Material model type for viscous block benchmark.\nRequired Domains: GeneralDomain\nRequired Geometries:\nNone\n\nSandboxShortening\n\nmaterial_model value: \"SandboxShortening\", :SandboxShortening, or 3\nDescription: Material model type for sandbox shortening experiments.\nRequired Domains: Atmosphere, SandA, SandB, Microbeads, MobileWall\nRequired Geometries:\nSandbox.initialize!\nMobileWall.initialize!\n\nSandboxExtension\n\nmaterial_model value: \"SandboxExtension\", :SandboxExtension, or 4\nDescription: Material model type for sandbox extension experiments.\nRequired Domains: Atmosphere, SandA, SandB, PDMSLayer, MobileWall, PlateExtension\nRequired Geometries:\nSandbox.initialize!\nMobileWall.initialize!\n\nElasticSlab\n\nmaterial_model value: \"ElasticSlab\", :ElasticSlab, or 5\nDescription: Material model type for elastic slab benchmark. This material involves an elastic slab with a checkerboard structure composed of two material domains called ElasticSlabA and ElasticSlabB surrounded by two fluid domains called FluidAroundElasticSlabA and FluidAroundElasticSlabB. Materials A and B have equivalent properties but different colors to visualize the checkerboard structure\nRequired Domains: FluidAroundElasticSlabA, FluidAroundElasticSlabB, ElasticSlabA, ElasticSlabB\nRequired Geometries:\nNone\n\nLithosphericExtensionWeakSeed\n\nmaterial_model value: \"LithosphericExtensionWeakSeed\", :LithosphericExtensionWeakSeed, or 6\nDescription: Material model type for lithospheric extension similar to Liao et al. (2014)\nRequired Domains: Atmosphere, Ocean, UpperContinentalCrust, LowerContinentalCrust, UpperMantleLithosphere, MiddleMantleLithosphere, LowerMantleLithosphere, Asthenosphere, WeakSeedMantle\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\nWeakSeed.initialize!\n\nLithosphericExtensionNoSeed\n\nmaterial_model value: \"LithosphericExtensionNoSeed\", :LithosphericExtensionNoSeed, or 7\nDescription: Material model type for lithospheric extension model similar to Brune et al. (2014).\nRequired Domains: Atmosphere, Ocean, UpperContinentalCrust, LowerContinentalCrust, UpperMantleLithosphere, MiddleMantleLithosphere, LowerMantleLithosphere, Asthenosphere\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\n\nPlasticityBenchmark\n\nmaterial_model value: \"PlasticityBenchmark\", :PlasticityBenchmark, or 8\nDescription: Material model type for plasticity benchmark.\nRequired Domains: Atmosphere, UpperContinentalCrust, LowerContinentalCrust, UpperMantleLithosphere, MiddleMantleLithosphere, LowerMantleLithosphere, Asthenosphere, WeakSeedMantle\nRequired Geometries:\nNone\n\nPlasticityBenchmarkWeakNotchKaus10\n\nmaterial_model value: \"PlasticityBenchmarkWeakNotchKaus10\", :PlasticityBenchmarkWeakNotchKaus10, or 9\nDescription: Material model type for plasticity benchmark of Kaus (2010) with sticky air, crust and weak notch\nRequired Domains: Atmosphere, UpperContinentalCrust, LowerContinentalCrust, UpperMantleLithosphere, MiddleMantleLithosphere, LowerMantleLithosphere, Asthenosphere, WeakSeedMantle\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\nWeakSeed.initialize!\n\nFlexureTriangularHole\n\nmaterial_model value: \"FlexureTriangularHole\", :FlexureTriangularHole, or 10\nDescription: Material model type for flexure with a triangular hole benchmark.\nRequired Domains: Atmosphere, Ocean, UpperContinentalCrust, LowerContinentalCrust, UpperMantleLithosphere, MiddleMantleLithosphere, LowerMantleLithosphere, Asthenosphere\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\nCrustalHole.initialize!\n\nLithosphericExtensionWeakFault\n\nmaterial_model value: \"LithosphericExtensionWeakFault\", :LithosphericExtensionWeakFault, or 11\nDescription: Material model type for lithospheric extension using a weak fault similar to Davis et al. (2017).\nRequired Domains: Atmosphere, Ocean, UpperContinentalCrust, LowerContinentalCrust, UpperMantleLithosphere, MiddleMantleLithosphere, LowerMantleLithosphere, Asthenosphere, WeakMantleFaultZone, WeakCrustalFaultZone\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\nWeakFault.initialize!\n\nLithosphericExtensionLateralStrongZones\n\nmaterial_model value: \"LithosphericExtensionLateralStrongZones\", :LithosphericExtensionLateralStrongZones, or 12\nDescription: Material model type for lithospheric extension using lateral strong zones similar to (Naliboff et al., 2017).\nRequired Domains: Atmosphere, Ocean, UpperContinentalCrust, UpperContinentalCrustStrongZone, LowerContinentalCrust, LowerContinentalCrustStrongZone, UpperMantleLithosphere, MiddleMantleLithosphere, LowerMantleLithosphere, LithosphericMantleStrongZone, Asthenosphere\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\nLithoStrongZones.initialize!\n\nLithosphericExtensionMantlePlume\n\nmaterial_model value: \"LithosphericExtensionMantlePlume\", :LithosphericExtensionMantlePlume, or 13\nDescription: Material model type for lithospheric extension with mantle plume.\nRequired Domains: Atmosphere, Ocean, SedimentaryBasin, UpperContinentalCrust, UpperContinentalCrustStrongZone, LowerContinentalCrust, LowerContinentalCrustStrongZone, UpperMantleLithosphere, MiddleMantleLithosphere, LowerMantleLithosphere, LithosphericMantleStrongZone, Asthenosphere, WeakSeedMantle, MantlePlume\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\nLithoStrongZones.initialize!\nWeakSeed.initialize!\nPlume.initialize!\n\nSeafloorSpreading\n\nmaterial_model value: \"SeafloorSpreading\", :SeafloorSpreading, or 14\nDescription: Material model type for seafloor spreading benchmark.\nRequired Domains: Atmosphere, Ocean, MantleLithosphere, Asthenosphere\nRequired Geometries:\nEarthLayering.initialize!\nStickyAirGeometry.initialize!\n\nSimplePlume\n\nmaterial_model value: \"SimplePlume\", :SimplePlume, or 15\nDescription: Material model for a simple plume head.\nRequired Domains: Atmosphere, Ocean, Asthenosphere, MantlePlume\nRequired Geometries:\nPlume.initialize!\n\nFractureZone\n\nmaterial_model value: \"FractureZone\", :FractureZone, or 16\nDescription: Material model type for a fracture zone.\nRequired Domains: Atmosphere, Ocean, SedimentaryBasin, BasalticOceanicCrust, GabbroicOceanicCrust, MantleLithosphere, WeakMantleLithosphere, Asthenosphere\nRequired Geometries:\nFractureZone.initialize!\nStickyAirGeometry.initialize!\n\nSimpleSediment\n\nmaterial_model value: \"SimpleSediment\", :SimpleSediment, or 17\nDescription: Material model for simple sediment on mantle setup.\nRequired Domains: Atmosphere, SedimentaryBasin, Asthenosphere\nRequired Geometries:\nPlume.initialize!\n\nStickyOnMantle\n\nmaterial_model value: \"StickyOnMantle\", :StickyOnMantle, or 18\nDescription: Material model for sticky air/water on mantle.\nRequired Domains: Ocean, Asthenosphere\nRequired Geometries:\nStickyAirGeometry.initialize!\n\n\n\n\n\n","category":"function"},{"location":"models/model_execution/api_building_and_execution/#Building-and-Executing-Models-with-the-EarthBox-API","page":"Model Building, Execution and Plotting","title":"Building and Executing Models with the EarthBox API","text":"EarthBox models can be constructed and executed using an API. The recommended way to do this is by calling API functions (see EarthBox API Overview) from a  script called Model.jl that includes a module called Model containing the  API calls and a function called run_case() that can be executed via command  line. A script called Plot.jl is built by the user for plotting output  files using customizable functions for scalar grids, markers, yield strength profiles and convergence of the non-linear Picard iterations. \n\nThe following scripts are commonly used to build, initialize and execute EarthBox models using the API:\n\nModel.jl\nMaterials.jl\nPlot.jl\n\nnote: `run_earthbox()`\nThe Model.jl and Plot.jl scripts are required by the  run_earthbox() function used for sequential background command-line execution  (see Background Command-line Execution) and for execution on remote  machines (see Batch Remote Execution).","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Model.jl","page":"Model Building, Execution and Plotting","title":"Model.jl","text":"The Model.jl script defines key paths, executes initialization API functions and runs model time steps. The example below is for an extensional model using  a weak fault zone to localize deformation. Material input is defined  by importing a function from a script called Materials.jl that defines  the a dictionary called materials_input_dict with types, domains, colors and  material names from a material library where properties are defined. Alternatively, material input could be defined using a yamal formatted file (See  MarkerMaterials and Material Input for more details).\n\nThe Model.jl script should be setup to manage model case names using EarthBox  API functions (see [EarthBox.GetArgs.getcasenamefromclargs]). The format  used for model cases is case0, case1, case2, etc (default=case0). Model  output is sent to the model output directory named `<casename>outputwhere<casename>` is the name of the model case. \n\nThe model output path is defined using the case_name and the ROOT_PATH_OUTPUT constant unless the model_output_path is provided via command line argument.\n\nThe Model.jl can be used with the module CaseInputs.jl to define model input  parameters based on the model case name (see Case Management). This is  accomplished by including the CaseInputs.jl module and calling the  define_case_inputs function with the case_name as an argument.","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Command-line-Arguments-for-Model.jl","page":"Model Building, Execution and Plotting","title":"Command-line Arguments for Model.jl","text":"case_name=<case_name>\nThe name of the model case like \"case0\", \"case1\", \"case2\", etc. Default is    \"case0\". The case name will be used to define inputs if this script is   integrated with the CaseInputs.jl module. The case name is also used to   define the model output path if the model output path is not provided via a    command line argument. If the case name is passed as an argument to the    run_case function, the case_name command line argument will be ignored.\n\n-model_output_path=<model_output_path>     - The path to the model output directory. If not provided, then the model output        path is defined using the case_name and the ROOT_PATH_OUTPUT.","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Using-Model.jl-From-the-REPL","page":"Model Building, Execution and Plotting","title":"Using Model.jl From the REPL","text":"include(\"Model.jl\")\nModel.run_case(case_name=<case_name>)\n\nIf no <case_name> is provided, then the default case name is case0.","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Using-Model.jl-From-Command-line","page":"Model Building, Execution and Plotting","title":"Using Model.jl From Command-line","text":"julia Model.jl case_name=<case_name>\n\nwhere <case_name> is the name of the model case and the model output path is  defined automatically using the case_name and the constant ROOT_PATH_OUTPUT.\n\nYou can also specify the model output path via a command line argument:\n\njulia Model.jl case_name=<case_name> model_output_path=<model_output_path>","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Example-Model.jl:-Extension-with-Weak-Fault","page":"Model Building, Execution and Plotting","title":"Example Model.jl: Extension with Weak Fault","text":"module Model\n\nusing EarthBox\ninclude(\"Materials.jl\")\nimport .Materials: get_materials_input_dict\n\nconst ROOT_PATH_OUTPUT = \"/mnt/extradrive1/earthbox_output/extension_to_sfs/extension_strong_zones\"\nconst MATERIAL_COLLECTION_PATH = MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1.path\n\n# Get the input parameters object so names can be accessed programmatically\nconst PARAMS = get_eb_parameters()\n\n# Constants are defined for parameters used in multiple initialization functions\nconst adiabatic_gradient       = 0.4 # K/km\nconst xsize                    = 500_000.0 # meters\nconst ysize                    = 160_000.0 # meters\nconst thick_air                = 10_000.0 # meters\nconst thick_crust              = 32_000.0 # meters\nconst thick_upper_crust        = 22_000.0 # meters\nconst thick_lith               = 125_000.0 # meters\nconst marker_spacing           = 100.0 # meters (50 m for high resolution case)\nconst grid_spacing_high_res    = 500.0 # meters (200 m for high resolution case)\nconst avg_grid_spacing_low_res = 2000.0 # meters\nconst temperature_base_lith_celsius = 1330.0\n\nfunction run_case(;case_name::String=\"case0\")::Nothing\n    print_info(\"Running model for case: $case_name\")\n    # model output directories are named <case_name>_output where <case_name> is \n    # the name of the model case\n    model_output_path = get_model_output_path(case_name, ROOT_PATH_OUTPUT)\n    eb = setup_model(model_output_path=model_output_path)\n    PRINT_SETTINGS.print_performance = false\n    # Here we specify model duration and let EarthBox calculate the viscoelastic\n    # time step based on minimum grid spacing and extension rate. The number of\n    # time steps is estimated based on the `model_duration_myr` parameter, velocity \n    # stepping and the calculated viscoelastic time step. Alternatively, you could specify \n    # `timestep_viscoelastic` in seconds and `ntimestep_max`. This will deactivate\n    # the automated calculations and requires a bit of math to define adequate values.\n    # If the calculated velocity is higher than the half-spreading rate leading to\n    # a reduced time step , you may may have to set the model duration to a\n    # larger value to achieve the desired actual model duration.\n    run_time_steps(\n        eb,\n        make_backup           = true,\n        model_duration_myr    = 50.0,\n        timestep_out          = ConversionFuncs.years_to_seconds(500_000.0)\n    )\n    return nothing\nend\n\nfunction setup_model(;model_output_path::String)::EarthBoxState\n    # Number of basic nodes in x- and y-directions (xnum, ynum) are calculated \n    # from the T-type refinement parameters and used to initialize the staggered \n    # grid. Alternatively, you could define xnum and ynum directly as input \n    # parameters and provided t-type parameters during Staggered grid initialization.\n    # However, this will require putting some thought into defining a sufficient\n    # number of basic nodes in x- and y-directions.\n    ttype_refinement_parameters = Dict(\n        PARAMS.xo_highres.name => 150_000.0, # meters\n        PARAMS.xf_highres.name => 350_000.0, # meters\n        PARAMS.yf_highres.name => 50_000.0, # meters\n        PARAMS.dx_highres.name => grid_spacing_high_res, # meters (200 m for high resolution case)\n        PARAMS.dx_lowres.name  => avg_grid_spacing_low_res, # meters\n        PARAMS.dy_highres.name => grid_spacing_high_res, # meters (200 m for high resolution case)\n        PARAMS.dy_lowres.name  => avg_grid_spacing_low_res # meters\n    )\n    eb = EarthBoxState(\n        restart_from_backup         = false,\n        xsize                       = xsize, # meters\n        ysize                       = ysize, # meters\n        dx_marker                   = marker_spacing, # meters (50 m for high resolution case)\n        dy_marker                   = marker_spacing, # meters (50 m for high resolution case)\n        ttype_refinement_parameters = ttype_refinement_parameters,\n        use_mumps                   = false,\n        nprocs                      = 8,\n        use_internal_mumps          = true,\n        paths                       = Dict(\"output_dir\" => model_output_path)\n    )\n    initialize_model_input(eb)\n    return eb\nend\n\nfunction initialize_model_input(eb::EarthBoxState)::Nothing\n    initialize_staggered_grid(eb)\n    initialize_geometry(eb)\n    initialize_boundary_conditions(eb)\n    initialize_marker_coordinates(eb)\n    initialize_marker_materials(eb)\n    initialize_marker_temperature(eb)\n    initialize_marker_plasticity(eb)\n    initialize_rock_properties(eb)\n    initialize_stokes_continuity_solver(eb)\n    initialize_heat_solver(eb)\n    initialize_advection_model(eb)\n    initialize_interpolation_model(eb)\n    initialize_surface_processes_model(eb)\n    return nothing\nend\n\nfunction initialize_staggered_grid(eb::EarthBoxState)::Nothing\n    # T-type refinement parameters are used from EarthBoxState initialization\n    # and not required to be set here. However, if T-type refinement parameters\n    # were not previously defined, they must be set here.\n    StaggeredGrid.initialize!(\n        eb.model_manager.model, grid_type = grid_type_names.TtypeRefinedGrid)\n    return nothing\nend\n\nfunction initialize_geometry(eb::EarthBoxState)::Nothing\n    model = eb.model_manager.model\n    MaterialGeometry.StickyAirGeometry.initialize!(model, thick_air=thick_air)\n    MaterialGeometry.EarthLayering.initialize!(\n        model,\n        thick_lith        = thick_lith, # meters\n        thick_crust       = thick_crust, # meters\n        thick_upper_crust = thick_upper_crust, # meters\n    )\n    # The strong zone boundaries are set using T-type refinement parameters\n    # and not required to be set here. However, if T-type refinement parameters\n    # were not previously defined, `x_left_strong` and `x_right_strong` must be set \n    # here.\n    MaterialGeometry.LithoStrongZones.initialize!(model, iuse_strong_zones = 1)\n    return nothing\nend\n\nfunction initialize_boundary_conditions(eb::EarthBoxState)::Nothing\n    model = eb.model_manager.model\n    BoundaryConditions.initialize!(\n        model, model_type = bc_model_type_names.LithosphericExtensionFixedBoundaries)\n    BoundaryConditions.Pressure.initialize!(model, pressure_bc=1e5)\n    BoundaryConditions.Temperature.initialize!(\n        model,\n        temperature_top    = ConversionFuncs.celsius_to_kelvin(0.0),\n        temperature_bottom = ConversionFuncs.celsius_to_kelvin(\n            temperature_base_lith_celsius \n            + adiabatic_gradient*(ysize - thick_air - thick_lith)/1000.0\n        )\n    )\n    BoundaryConditions.Velocity.initialize!(\n        model,\n        full_velocity_extension = ConversionFuncs.cm_yr_to_m_s(0.1),\n        full_velocity_extension_step1 = ConversionFuncs.cm_yr_to_m_s(0.5),\n        )\n    # It is often required to start extension models with a relatively low extension rate\n    # and then later increase the extension rate to avoid numerical issues that\n    # may manifest themselves as erroneous high strain zones. This issue is\n    # overcome by using velocity stepping. In this example we turn on velocity stepping,\n    # specify and step time and let EarthBox calculate the the velocity step factor \n    # (`velocity_step_factor`) and time step adjustment factor (`timestep_adjustment_factor`).\n    # based on the extension velocities specified above (`full_velocity_extension` and \n    # `full_velocity_extension_step1`). Alternatively, you could specify the velocity step\n    # factor (`velocity_step_factor`) and time step adjustment factor (`timestep_adjustment_factor`) \n    # directly.\n    BoundaryConditions.VelocityStep.initialize!(\n        model,\n        iuse_velocity_step = 1,\n        velocity_step_time = 0.5, # Myr\n    )\n    return nothing\nend\n \nfunction initialize_marker_coordinates(eb::EarthBoxState)::Nothing\n    Markers.MarkerCoordinates.initialize!(\n        eb.model_manager.model, \n        marker_distribution=marker_distribution_names.Randomized\n        )\n    return nothing\nend\n\nfunction initialize_marker_materials(eb::EarthBoxState)::Nothing\n    model = eb.model_manager.model\n    Markers.MarkerMaterials.initialize!(\n        model,\n        material_model       = material_model_names.LithosphericExtensionLateralStrongZones,\n        paths                = Dict(\"materials_library_file\" => MATERIAL_COLLECTION_PATH),\n        materials_input_dict = get_materials_input_dict(),\n        viscosity_min        = 1e18, # Pa.s\n        viscosity_max        = 1e26 # Pa.s\n    )\n    Markers.MarkerMaterials.MarkerStressLimits.initialize!(\n        model, \n        powerlaw_stress_min = 1e4, # Pa\n        yield_stress_min    = 0.0, # Pa\n        yield_stress_max    = 1e32 # Pa\n    )\n    return nothing\nend\n\nfunction initialize_marker_temperature(eb::EarthBoxState)::Nothing\n    Markers.MarkerTemperature.initialize!(\n        eb.model_manager.model,\n        initial_temperature_model=initial_temperature_names.AnalyticalThreeLayer,\n        parameters=Dict(\n            PARAMS.temperature_base_lith.name       => (\n                ConversionFuncs.celsius_to_kelvin(temperature_base_lith_celsius)),\n            PARAMS.amplitude_perturbation.name      => 4000.0, # meters\n            PARAMS.width_perturbation.name          => 10_000.0, # meters\n            PARAMS.thick_thermal_lithosphere.name   => thick_lith, # meters\n            PARAMS.adiabatic_gradient.name          => adiabatic_gradient, # K/km\n            PARAMS.conductivity_upper_crust.name    => 2.25, # W/m/K\n            PARAMS.conductivity_lower_crust.name    => 2.2, # W/m/K\n            PARAMS.conductivity_mantle.name         => 2.0, # W/m/K\n            PARAMS.heat_production_upper_crust.name => 1.25e-6, # W/m^3\n            PARAMS.heat_production_lower_crust.name => 0.2e-6, # W/m^3\n            PARAMS.heat_production_mantle.name      => 0.0, # W/m^3\n        )\n    )\n    return nothing\nend\n\nfunction initialize_marker_plasticity(eb::EarthBoxState)::Nothing\n    model = eb.model_manager.model\n    Markers.MarkerFriction.initialize!(\n        model, initialization_model = friction_init_names.Regular)\n    Markers.MarkerCohesion.initialize!(model)\n    Markers.MarkerPreexponential.initialize!(model)\n    return nothing\nend\n\nfunction initialize_rock_properties(eb::EarthBoxState)::Nothing\n    model = eb.model_manager.model\n    RockProperties.initialize!(\n        model,\n        density_model              = density_model_names.Liao14,\n        thermal_conductivity_model = thermal_conductivity_model_names.SekiguchiWaples,\n        rhocp_model                = rhocp_model_names.TemperatureDependentWaples,\n        iuse_sed_porosity          = 1\n    )\n    return nothing\nend\n\nfunction initialize_stokes_continuity_solver(eb::EarthBoxState)::Nothing\n    model = eb.model_manager.model\n    StokesContinuitySolver.initialize!(\n        model,\n        velocity_type                = velocity_type_names.VelocityFromStokesSolver,\n        gravity_y                    = 9.8, # m/s^2\n        iuse_interface_stabilization = 1\n    )\n    GlobalPlasticityLoop.initialize!(\n        model,\n        global_plasticity_loop = global_plasticity_names.NodalPlasticityLoop,\n        tolerance_picard       = 1e-2,\n        nglobal                = 3\n    )\n    return nothing\nend\n\nfunction initialize_heat_solver(eb::EarthBoxState)::Nothing\n    HeatSolver.initialize!(\n        eb.model_manager.model,\n        iuse_heat              = 1,\n        iuse_adiabatic_heating = 1,\n        iuse_shear_heating     = 1,\n        iuse_sticky_correction = 1,\n        # The max_temp_change is used for the adaptive time stepping scheme used\n        # to solve the heat equation.\n        max_temp_change        = 70.0 # K\n    )\n    return nothing\nend\n\nfunction initialize_advection_model(eb::EarthBoxState)::Nothing\n    Advection.initialize!(\n        eb.model_manager.model,\n        advection_scheme         = advection_scheme_names.RungeKutta4thOrder,\n        # Decreasing the marker_cell_displ_max can increase numerical accuracy.\n        marker_cell_displ_max    = 0.75, # fraction\n        subgrid_diff_coef_temp   = 1.0,\n        subgrid_diff_coef_stress = 1.0\n    )    \n    return nothing\nend\n\nfunction initialize_interpolation_model(eb::EarthBoxState)::Nothing\n    Interpolation.initialize!(\n        eb.model_manager.model,\n        iuse_harmonic_avg_normal_viscosity = 1,\n        iuse_initial_temp_interp           = 1\n    )\n    return nothing\nend\n\nfunction initialize_surface_processes_model(eb::EarthBoxState)::Nothing\n    model = eb.model_manager.model\n    \n    SurfaceProcesses.Topography.initialize!(\n        model,\n        iuse_topo            = 1,\n        node_advection       = topo_node_advection_names.RungeKuttaWithInterp,\n        dx_topo              = 200.0, # meters\n        topo_xsize           = xsize, # meters\n        nsmooth_top_bottom   = 2,\n        marker_search_factor = 2.0    \n    )\n    \n    SurfaceProcesses.Sealevel.initialize!(\n        model,\n        option_name               = sealevel_option_names.AveragePressure,\n        y_sealevel                = thick_air, # meters\n        base_level_shift_end_time = 16.0, # Myr\n        base_level_shift          = 0.0, # meters\n    )\n\n    SurfaceProcesses.Sealevel.RelativeBaseLevel.initialize!(\n        model,\n        iuse_linear_segments                   = 0,\n        thickness_upper_continental_crust_ref = thick_upper_crust, # meters\n        thickness_lower_continental_crust_ref = thick_crust - thick_upper_crust, # meters\n        thickness_lithosphere_ref             = thick_lith, # meters\n        gridy_spacing_ref                     = 100.0, # meters\n        temperature_top_ref                   = 0.0, # Celsius\n        temperature_moho_ref                  = 600.0, # Celsius\n        temperature_base_lith_ref             = temperature_base_lith_celsius, # Celsius\n        adiabatic_gradient_ref                = adiabatic_gradient, # K/km\n    )\n    return nothing\n\nend\n\nfunction main()::Nothing\n    run_case(case_name=get_case_name_from_cl_args())\n    return nothing\nend\n\nend # module\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    Model.main()\nend\n","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Materials.jl","page":"Model Building, Execution and Plotting","title":"Materials.jl","text":"The Materials.jl script is used to define the material inputs used in the model. This script is not required as material input dictionaries could be built in Model.jl or material input could be defined using a yamal file (See  MarkerMaterials and Material Input for more details).\n\nmodule Materials\n\nusing EarthBox\n\nfunction get_materials_input_dict()::MaterialsDictType\n    mat_names = MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1.materials\n    types = MaterialTypesRegistry()\n    domains = MaterialDomainsRegistry()\n\n    return MaterialsDictType(\n        # Sticky Domain\n        Int16(1) => MaterialDictType(\n            \"mat_name\" => mat_names.sticky_air,\n            \"mat_type\" => types.sticky_air,\n            \"mat_domain\" => domains.atmosphere,\n            \"red_fraction\" => 255/255,\n            \"green_fraction\" => 255/255,\n            \"blue_fraction\" => 255/255,\n        ),\n        Int16(2) => MaterialDictType(\n            \"mat_name\" => mat_names.sticky_water,\n            \"mat_type\" => types.sticky_water,\n            \"mat_domain\" => domains.ocean,\n            \"red_fraction\" => 0/255,\n            \"green_fraction\" => 255/255,\n            \"blue_fraction\" => 255/255,\n        ),\n        # Sedimentary Basin\n        Int16(3) => MaterialDictType(\n            \"mat_name\" => mat_names.clastic_sediment,\n            \"mat_type\" => types.sediment,\n            \"mat_domain\" => domains.sedimentary_basin,\n            \"red_fraction\" => 0.89411765,\n            \"green_fraction\" => 0.58039216,\n            \"blue_fraction\" => 0.28627451,\n        ),\n        # Felsic Continental Crust\n        Int16(4) => MaterialDictType(\n            \"mat_name\" => mat_names.felsic_continental_crust,\n            \"mat_type\" => types.general,\n            \"mat_domain\" => domains.upper_continental_crust,\n            \"red_fraction\" => 255/255,\n            \"green_fraction\" => 153/255,\n            \"blue_fraction\" => 153/255,\n        ),\n        Int16(5) => MaterialDictType(\n            \"mat_name\" => mat_names.felsic_continental_crust_strong_zone,\n            \"mat_type\" => types.general,\n            \"mat_domain\" => domains.upper_continental_crust_strong_zone,\n            \"red_fraction\" => 255/255,\n            \"green_fraction\" => 163/255,\n            \"blue_fraction\" => 163/255,\n        ),\n        # Mafic Continental Crust\n        Int16(6) => MaterialDictType(\n            \"mat_name\" => mat_names.mafic_continental_crust,\n            \"mat_type\" => types.general,\n            \"mat_domain\" => domains.lower_continental_crust,\n            \"red_fraction\" => 255/255,\n            \"green_fraction\" => 200/255,\n            \"blue_fraction\" => 200/255,\n        ),\n        Int16(7) => MaterialDictType(\n            \"mat_name\" => mat_names.mafic_continental_crust_strong_zone,\n            \"mat_type\" => types.general,\n            \"mat_domain\" => domains.lower_continental_crust_strong_zone,\n            \"red_fraction\" => 255/255,\n            \"green_fraction\" => 210/255,\n            \"blue_fraction\" => 210/255,\n        ),\n        # Continental Mantle Lithosphere\n        Int16(8) => MaterialDictType(\n            \"mat_name\" => mat_names.ultramafic_continental_lithosphere,\n            \"mat_type\" => types.general,\n            \"mat_domain\" => domains.mantle_lithosphere,\n            \"red_fraction\" => 0.0,\n            \"green_fraction\" => 153/255,\n            \"blue_fraction\" => 153/255,\n        ),\n        Int16(9) => MaterialDictType(\n            \"mat_name\" => mat_names.ultramafic_continental_lithosphere_strong_zone,\n            \"mat_type\" => types.general,\n            \"mat_domain\" => domains.lithospheric_mantle_strong_zone,\n            \"red_fraction\" => 0.0,\n            \"green_fraction\" => 163/255,\n            \"blue_fraction\" => 163/255,\n        ),\n        # Asthenosphere\n        Int16(10) => MaterialDictType(\n            \"mat_name\" => mat_names.ultramafic_asthenosphere_dry_fertile,\n            \"mat_type\" => types.general,\n            \"mat_domain\" => domains.asthenosphere,\n            \"red_fraction\" => 0.0,\n            \"green_fraction\" => 200/255,\n            \"blue_fraction\" => 153/255,\n        )\n    )\nend\n\nend # module","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Plot.jl","page":"Model Building, Execution and Plotting","title":"Plot.jl","text":"The Plot.jl script is a customized plotting module with user defined plotting  functions and command-line plotter that plots output files stored in the model  output directory. Note that model output directories are named <case_name>_output  where <case_name> is the name of the model case like case0, case1, case2, etc (default=case0).\n\nFor details on command-line arguments and examples, see Command-line Plotter.","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Using-Plot.jl-From-Command-line:","page":"Model Building, Execution and Plotting","title":"Using Plot.jl From Command-line:","text":"julia Plot.jl <plot_option_name> case_name=<case_name> istart=1 iend=100\n\nwhere istart and iend are the starting and ending time steps, <case_name>  is the name of the model case and <plot_option_name> is the name of the plot  option that can be set equal to one of the following values:\n\nmarker_plots: Plot markers.\nscalar_plots: Plot scalars.\nvelocity_plots: Plot velocity.\nstokes_convergence_plots: Plot Stokes convergence.\nyield_strength_plots: Plot yield strength.","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Using-Plot.jl-From-REPL","page":"Model Building, Execution and Plotting","title":"Using Plot.jl From REPL","text":"include(\"Plot.jl\")\nPlot.marker_plots(\n    model_output_path = \"/path/to/model_output\",\n    istart = 1,\n    iend = 100\n);\n\nnote: istart and iend\nistart and iend are not used by the stokes convergence and yield  strength plotting functions.","category":"section"},{"location":"models/model_execution/api_building_and_execution/#Example-Plot.jl:-Extension-with-Weak-Fault","page":"Model Building, Execution and Plotting","title":"Example Plot.jl: Extension with Weak Fault","text":"module Plot\n\nusing EarthBox\n\ninclude(\"Model.jl\")\ninclude(\"Materials.jl\")\nimport .Model: MATERIAL_COLLECTION_PATH, ROOT_PATH_OUTPUT\nimport .Materials: get_materials_input_dict \n\nconst dimensions = (0.0, 500.0, 0.0, 160.0)\nconst xyspacing = (50.0, 10.0)\nconst model_figsize = (10.0, 5.0)\n\nfunction scalar_plots(;\n    model_output_path::String,\n    istart::Int64 = 1,\n    iend::Union{Int64, Nothing} = nothing\n)::Nothing\n    plot_scalars(\n        scalar_name = :temperature,\n        model_output_path = model_output_path,\n        dimensions = dimensions,\n        xyspacing = xyspacing,\n        istart = istart,\n        iend = iend,\n        figsize = model_figsize\n    )\n    plot_scalars(\n        scalar_name = :viscosity,\n        model_output_path = model_output_path,\n        dimensions = dimensions,\n        xyspacing = xyspacing,\n        istart = istart,\n        iend = iend,\n        figsize = model_figsize\n    )\n    return nothing\nend\n\nfunction velocity_plots(;\n    model_output_path::String,\n    istart::Int64 = 1,\n    iend::Union{Int64, Nothing} = nothing\n)::Nothing\n    plot_velocity(\n        model_output_path = model_output_path,\n        dimensions        = dimensions,\n        xyspacing         = xyspacing,\n        istart            = istart,\n        iend              = iend,\n        decimation_factor = 8,\n        scale_factor      = 10.0,\n        figsize = model_figsize\n    )\n    return nothing\nend\n\nfunction marker_plots(;\n    model_output_path::String,\n    istart::Int64 = 1,\n    iend::Union{Int64, Nothing} = nothing\n)::Nothing\n    plot_markers(\n        plot_type=:CompositionHeatFlowGravity,\n        model_output_path=model_output_path,\n        material_library_file_path=MATERIAL_COLLECTION_PATH,\n        materials_input_dict=get_materials_input_dict(),\n        # General plotting parameters\n        dimensions=dimensions,\n        xyspacing=xyspacing,\n        istart=istart, iend=iend,\n        figsize = model_figsize,\n        xy_location_contour_legend = (1.0, 5.0),\n        text_box_font_size = 5,\n        # General marker parameters\n        # (reducing the decimation factor reduces pixelation of the plot)\n        marker_size=2.0, decimation_factor=5,\n        plot_mesh=0, mesh_line_width=0.1,\n        plot_contour_labels=1, contour_line_width=1.0, contour_line_color=\"black\",\n        # Topography parameters\n        plot_topography=1, topo_line_width=1.0, \n        topo_line_color=\"red\",\n        # Base level parameters\n        plot_base_level=1, base_level_line_width=1.0,\n        base_level_line_color=\"blue\",\n        # Plastic strain parameters\n        plot_plastic_strain = true,\n        strain_min = 1.0, strain_max = 6.0,\n        strain_contour_interval = 0.25, strain_cmap=\"inferno\",\n        # Plastic strain rate parameters\n        plot_plastic_strain_rate = 1,\n        strain_rate_min = -18, strain_rate_max = -12,\n        strain_rate_contour_interval = 0.5, strain_rate_cmap = \"Reds\",\n        # Temperature contours parameters\n        plot_temperature_contours=1,\n        temperature_min=100.0, temperature_max=1400.0,\n        temperature_contour_interval=100.0,\n        temperature_number_format=\"%6.0f\",\n        temperature_contour_color=\"black\",\n        # Heat flow parameters\n        heatflow_min=0.0, heatflow_max=200.0,\n        heatflow_spacing=50.0,\n        # Gravity Parameters (mgal)\n        gravity_min=-1000.0, gravity_max=1000.0,\n        gravity_spacing=200.0\n    )\n    return nothing\nend\n\nfunction yield_strength_plots(;\n    model_output_path::String\n)::Nothing\n    plot_yield_strength(\n        model_output_path=model_output_path,\n        material_library_file_path=MATERIAL_COLLECTION_PATH,\n        materials_input_dict=get_materials_input_dict(),\n        depth_plot_limit=150.0,\n        depth_axis_spacing=10.0,\n        temperature_plot_limit=1400.0,\n        temperature_axis_spacing=200.0,\n        yield_stress_plot_limit=600.0,\n        yield_stress_axis_spacing=50.0,\n        strain_rate=1e-15,\n        thickness_upr_cont_crust_meters=22_000.0,\n        thickness_lwr_cont_crust_meters=10_000.0,\n        thickness_lithosphere_meters=125_000.0,\n        thickness_asthenosphere_meters=25_000.0,\n        dy_meters=100.0,\n        expansivity=3e-5,\n        compressibility=1e-11,\n        density_upper_continental_crust=2822.72,\n        density_lower_continental_crust=2900.0,\n        density_mantle_lithosphere=3250.0,\n        density_asthenosphere=3300.0,\n        iuse_linear_segments=false,\n        temperature_top_celsius=0.0,\n        temperature_moho_celsius=600.0,\n        temperature_base_lith_celsius=1330.0,\n        adiabatic_gradient_kelvin_km=0.4,\n        conductivity_upper_crust=2.25,\n        conductivity_lower_crust=2.2,\n        conductivity_mantle=2.0,\n        heat_production_upper_crust=1.8e-6,\n        heat_production_lower_crust=0.5e-6,\n        heat_production_mantle=0.0,\n        thickness_thermal_lithosphere=125_000.0,\n        iuse_fluid_pressure_for_yield=1,\n        log10_viscosity_plot_min=20.0,\n        log10_viscosity_plot_max=26.0,\n        extension=\".pdf\",\n        figsize=(3.0, 6.0)\n        )\n    return nothing\nend\n\nfunction stokes_convergence_plots(;\n    model_output_path::String\n)::Nothing\n    plot_stokes_convergence(\n        model_output_path=model_output_path,\n        figsize=(16, 4),\n        xmin=0,\n        xmax=200,\n        xspacing=50,\n        log_l2_ymin=-7,\n        log_l2_ymax=1,\n        log_l2_yspacing=1,\n        plot_title=\"TestCase\",\n        axis_label_size=8,\n        axis_title_size=8,\n        legend_font_size=8,\n        xtick_label_size=6,\n        ytick_label_size=6,\n        annotation_font_size=4\n        )\n    return nothing\nend\n\nfunction main()::Nothing\n    run_cl_plotter(\n        root_path_output              = ROOT_PATH_OUTPUT,\n        marker_plots_func             = marker_plots,\n        scalar_plots_func             = scalar_plots,\n        velocity_plots_func           = velocity_plots,\n        stokes_convergence_plots_func = stokes_convergence_plots,\n        yield_strength_plots_func     = yield_strength_plots\n    )\n    return nothing\nend\n\nend # module\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    Plot.main()\nend\n","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/topography/#Topography-Grid-Update-Steps","page":"Topography","title":"Topography Grid Update Steps","text":"[1] Advect Eulerian topography marker chain nodes (x_t y_t) using 4th order Runge-Kutta scheme and the current velocity field v_x(ij)_v_x and v_y(ij)_v_y to obtain (x_t y_t).\n\n[2] Interpolate advected topography nodes (x_tadv y_tadv) to the Eulerian topography grid the to obtain new y-coordinates y_t^new for the Eulerian grid at x-coordinates x_t.\n\n[3] Update topography marker chain nodes (x_t y_t) by setting y_t equal to y_t^new.","category":"section"},{"location":"api/material_geometry/crustal_hole/#CrustalHole","page":"CrustalHole","title":"CrustalHole","text":"The CrustalHole material geometry defines a simple triangular notch within the crustal domain used  for benchmarking flexural calculations.","category":"section"},{"location":"api/material_geometry/crustal_hole/#Initialization","page":"CrustalHole","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/crustal_hole/#EarthBox.MaterialGeometry.CrustalHole.initialize!","page":"CrustalHole","title":"EarthBox.MaterialGeometry.CrustalHole.initialize!","text":"Initialize crustal hole geometry.\n\nKeyword arguments:\n\nxhole_start::Union{Float64, Nothing}:\nx-coordinate in meters of the start of the crustal hole\nxhole_middle::Union{Float64, Nothing}:\nx-coordinate in meters of the middle of the crustal hole\nxhole_end::Union{Float64, Nothing}:\nx-coordinate in meters of the end of the crustal hole\nxhole_depth::Union{Float64, Nothing}:\nDepth in meters of the crustal hole\n\n\n\n\n\n","category":"function"},{"location":"api/surface_processes/sediment_transport/#SedimentTransport","page":"SedimentTransport","title":"SedimentTransport","text":"","category":"section"},{"location":"api/surface_processes/sediment_transport/#Initialization","page":"SedimentTransport","title":"Initialization","text":"","category":"section"},{"location":"api/surface_processes/sediment_transport/#EarthBox.SurfaceProcesses.SedimentTransport.initialize!","page":"SedimentTransport","title":"EarthBox.SurfaceProcesses.SedimentTransport.initialize!","text":"initialize!(\n    model::Union{ModelData, Nothing}; \n    kwargs...\n)::Union{SedimentTransportModel, Nothing}\n\nInitialize sediment transport model parameters.\n\nArguments\n\nmodel::ModelData\nThe model data container containing the model parameters and arrays.\n\nKeyword Arguments\n\niuse_downhill_diffusion::Int64\nInteger flag that activates sediment transport model with downhill diffusion (0 = off, 1 = on). If option is set to off uniform erosion and deposition rates will be used\nsubaerial_slope_diffusivity::Float64\nSubaerial slope diffusivity in m^2/s. Typical value used in the literature is 0.25 m^2/yr (7.9e-9 m^2/s) (e.g. Andres-Martinez et al., 2019; Armitage et al., 2015)\nprecipitation_rate::Float64\nPrecipitation rate in m/s used to calculate water flux in drainage basins for fluvial transport diffusivity model. Precipitation rate (m/s). Used to calculate water flux in drainage basins. Typical value used in the literature is 1 m/yr (3.2e-8 m/s) (e.g. Andres-Martinez et al.; 2019; Huffman et al., 2009).\nsubaerial_transport_coefficient::Float64\nSubaerial discharge transport coefficient. Used to calculate effective subaerial fluvial transport diffusivity that includes slope diffusivity, precipitation rate and downstream distances. Typical values used in the literature are 1e-4 (low transport) to 1e-2 (high transport) (e.g. Andres-Martinez et al., 2019; Armitage et al., 2015).\nsubmarine_slope_diffusivity::Float64\nMaximum submarine slope diffusivity in m^2/s used in diffusivity model that decays exponentially with water depth. Typical value used in the literature is 100 m^2/yr (3.2e-9 m^2/s) (e.g. Andres-Martinez et al., 2019; Kaufman et al., 1991).\nsubmarine_diffusion_decay_depth::Float64\nSubmarine diffusion decay depth (m). Typical value used in the literature is 1000-2000 m (e.g. Andres-Martinez et al., 2019; Kaufmanet al., 1991; Perez-Gussinye et al., 2020).\ntransport_timestep::Float64\nTransport timestep (s). Typical value used in the literature is 1000 years (3.1536e10 s) (e.g. Andres-Martinez et al., 2019).\npelagic_sedimentation_rate::Float64\nPelagic sedimentation rate (m/s). Typical value used in the literature are 0.3 mm/yr (syn-rift) to 0.01 mm/yr (post-rift) (e.g. Perez-Gussinye et al., 2020)\npelagic_sedimentation_rate_reduction_factor::Float64\nThe pelagic sedimentation rate is divided by this factor after the specified pelagic sedimentation rate reduction time.\npelagic_sedimentation_rate_reduction_time::Float64\nTime in Myr after which the pelagic sedimentation rate is reduced by the pelagicsedimentationratereductionfactor.\niuse_compaction_correction::Int64\nInteger flag activating compaction correction during sediment transport where newly deposited sediment thickness and pre-existing sediment thickness are corrected for compaction.\n\n\n\n\n\n","category":"function"},{"location":"model_data/collections/markers/","page":"Markers","title":"Markers","text":"Markers\n\nParameters\nDistribution\nAdvection\nSubgridDiffusion\nRecycling\nArrays\nStratigraphy\nRheology\nThermal\nMaterial\nStress\nStrain\nPressure\nLocation\nGridMarkerRelationship\nMelt","category":"section"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.Markers","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.Markers","text":"Markers <: CollectionContainer\n\nData structure containing parameter and array collections for markers.\n\nFields\n\nparameters::Parameters: Parameter groups for marker including distribution, advection,    diffusion, and recycling settings\narrays::Arrays: Array groups for marker arrays containing material properties,    state variables, and location information\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.Parameters","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nCollection of marker parameters.\n\nFields\n\ndistribution::Distribution: Marker distribution parameters\nadvection::Advection: Marker advection parameters\nsubgrid_diffusion::SubgridDiffusion: Subgrid diffusion parameters\nrecycling::Recycling: Marker recycling parameters\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.DistributionGroup.Distribution","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.DistributionGroup.Distribution","text":"Distribution <: AbstractParameterGroup\n\nParameter group for marker distribution configuration.\n\nFields\n\niuse_random::ParameterInt: Randomize initial marker distribution: 0 off; 1 on\ndx_marker::ParameterFloat: Initial average marker spacing in horizontal direction in meters\ndy_marker::ParameterFloat: Initial average marker spacing in vertical direction in meters\nnmarkers_cell_x::ParameterFloat: Number of markers per cell in horizontal direction\nnmarkers_cell_y::ParameterFloat: Number of markers per cell in vertical direction\nmxnum::ParameterInt: Total number of markers in horizontal direction\nmynum::ParameterInt: Total number of markers in vertical direction\nmarknum::ParameterInt: Number of markers\nmxstep::ParameterFloat: Distance between markers in horizontal direction in meters\nmystep::ParameterFloat: Distance between markers in vertical direction in meters\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects.\n\nNested Dot Access\n\niuse_random = model.markers.parameters.distribution.iuse_random.value\ndx_marker = model.markers.parameters.distribution.dx_marker.value\ndy_marker = model.markers.parameters.distribution.dy_marker.value\nnmarkers_cell_x = model.markers.parameters.distribution.nmarkers_cell_x.value\nnmarkers_cell_y = model.markers.parameters.distribution.nmarkers_cell_y.value\nmxnum = model.markers.parameters.distribution.mxnum.value\nmynum = model.markers.parameters.distribution.mynum.value\nmarknum = model.markers.parameters.distribution.marknum.value\nmxstep = model.markers.parameters.distribution.mxstep.value\nmystep = model.markers.parameters.distribution.mystep.value\n\nConstructor\n\nDistribution(marker_parameters::NamedTuple)\n\nInitializes marker distribution parameters from the provided named tuple.\n\nArguments\n\nmarker_parameters::NamedTuple: Named tuple containing marker distribution    parameters.\n\nThe named tuple marker_parameters must contain the following parameters:\n\ndx_marker: Initial average marker spacing in horizontal direction in meters.\ndy_marker: Initial average marker spacing in vertical direction in meters.\nnmarkers_cell_x: Number of markers per cell in horizontal direction.\nnmarkers_cell_y: Number of markers per cell in vertical direction.\nmynum: Total number of markers in vertical direction.\nmxnum: Total number of markers in horizontal direction.\nmarknum: Total number of markers.\nmystep: Distance between markers in vertical direction in meters.\nmxstep: Distance between markers in horizontal direction in meters.\n\nReturns\n\nA new Distribution struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.AdvectionGroup.Advection","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.AdvectionGroup.Advection","text":"Advection <: AbstractParameterGroup\n\nParameter group for marker advection configuration.\n\nFields\n\nmarker_cell_displ_max::ParameterFloat: Maximum marker displacement as a fraction of cell size in meters\nitype_move_markers::ParameterInt: Displacement Options: 0 no motion 1 simp. advection; 4 4-th order Runge-Kutta\nstype_move_markers::ParameterStr: Displacement options name\niuse_local_adaptive_time_stepping::ParameterInt: Activate local adaptive time stepping where displacement is calculated at staggered grid nodes. The default value is 0 (off). If deactivated then adaptive time stepping using average grid spacing.\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects.\n\nNested Dot Access\n\nmarker_cell_displ_max = model.markers.parameters.advection.marker_cell_displ_max.value\nitype_move_markers = model.markers.parameters.advection.itype_move_markers.value\nstype_move_markers = model.markers.parameters.advection.stype_move_markers.value\niuse_local_adaptive_time_stepping = model.markers.parameters.advection.iuse_local_adaptive_time_stepping.value\n\nConstructor\n\nAdvection()\n\nReturns\n\nA new Advection struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.SubgridDiffusionGroup.SubgridDiffusion","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.SubgridDiffusionGroup.SubgridDiffusion","text":"SubgridDiffusion <: AbstractParameterGroup\n\nParameter group for subgrid diffusion coefficients.\n\nFields\n\nsubgrid_diff_coef_stress::ParameterFloat: Numerical subgrid stress diffusion coefficient\nsubgrid_diff_coef_temp::ParameterFloat: Numerical subgrid temperature diffusion coefficient\nobj_list::Vector{ParameterFloat}: List of parameter objects.\n\nNested Dot Access\n\nsubgrid_diff_coef_stress = model.markers.parameters.subgrid_diffusion.subgrid_diff_coef_stress.value\nsubgrid_diff_coef_temp = model.markers.parameters.subgrid_diffusion.subgrid_diff_coef_temp.value\n\nConstructor\n\nSubgridDiffusion()\n\nReturns\n\nA new SubgridDiffusion struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.RecyclingGroup.Recycling","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ParameterCollection.RecyclingGroup.Recycling","text":"Recycling <: AbstractParameterGroup\n\nParameter group for marker recycling configuration.\n\nFields\n\nimantle::ParameterInt: Material ID of the mantle. This is no longer used and will be removed in the future\nobj_list::Vector{ParameterInt}: List of numerical parameter objects\n\nNested Dot Access\n\nimantle = model.markers.parameters.recycling.imantle.value\n\nConstructor\n\nRecycling()\n\nReturns\n\nA new Recycling struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.Arrays","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.Arrays","text":"Arrays <: AbstractArrayCollection\n\nCollection of marker arrays.\n\nFields\n\nstrat::Stratigraphy: Stratigraphy marker arrays\nrheology::Rheology: Rheology marker arrays\nthermal::Thermal: Thermal marker arrays\nmaterial::Material: Material marker arrays\nstress::Stress: Stress marker arrays\nstrain::Strain: Strain marker arrays\npressure::Pressure: Pressure marker arrays\nlocation::Location: Location marker arrays\ngrid_marker_relationship::GridMarkerRelationship: Grid-marker relationship arrays\nmelt::Melt: Melt marker arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.StratigraphyGroup.Stratigraphy","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.StratigraphyGroup.Stratigraphy","text":"Stratigraphy <: AbstractArrayGroup\n\nArray group for marker stratigraphic properties.\n\nFields\n\nmarker_age::MarkerArrayFloat1DState Float64: (marknum) : Age of marker in million years.\n\nNested Dot Access\n\nmarker_age = model.markers.arrays.stratigraphy.marker_age.array\n\nConstructor\n\nStratigraphy(marknum::Int)\n\nInitializes marker age array with zero values.\n\nArguments\n\nmarknum::Int: Number of markers\n\nReturns\n\nA new Stratigraphy struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.RheologyGroup.Rheology","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.RheologyGroup.Rheology","text":"Rheology <: AbstractArrayGroup\n\nArray group for marker rheological properties.\n\nFields\n\nmarker_eta::MarkerArrayFloat1DState Float64: (marknum) : Marker viscoplastic viscosity in Pa.s.\nmarker_fric_ini::MarkerArrayFloat1DState Float64: (marknum) : Initial friction coefficient (sine of friction angle) of marker.\nmarker_fric::MarkerArrayFloat1DState Float64: (marknum) : Friction coefficient (sine of friction angle) of marker.\nmarker_cohesion::MarkerArrayFloat1DState Float64: (marknum) : Cohesion of marker in Pa.\nmarker_preexp::MarkerArrayFloat1DState Float64: (marknum) : Pre-exponential factor for dislocation creep of marker in 1/s/MPa^n.\nmarker_pfailure::MarkerArrayFloat1DState Float32: (marknum) : Flag indicating plastic failure of marker.\nmarker_eta_flow::MarkerArrayFloat1DState Float64: (marknum) : Marker viscosity from flow law in Pa.s.\nmarker_dilatation_angle::MarkerArrayFloat1DState Float32: (marknum) : Marker dilatation angle in Degrees.\n\nNested Dot Access\n\nmarker_eta = model.markers.arrays.rheology.marker_eta.array\nmarker_fric_ini = model.markers.arrays.rheology.marker_fric_ini.array\nmarker_fric = model.markers.arrays.rheology.marker_fric.array\nmarker_cohesion = model.markers.arrays.rheology.marker_cohesion.array\nmarker_preexp = model.markers.arrays.rheology.marker_preexp.array\nmarker_pfailure = model.markers.arrays.rheology.marker_pfailure.array\nmarker_eta_flow = model.markers.arrays.rheology.marker_eta_flow.array\nmarker_dilatation_angle = model.markers.arrays.rheology.marker_dilatation_angle.array\n\nConstructor\n\nRheology(marknum::Int)\n\nArguments\n\nmarknum::Int: Number of markers\n\nReturns\n\nA new Rheology struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.ThermalGroup.Thermal","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.ThermalGroup.Thermal","text":"Thermal <: AbstractArrayGroup\n\nArray group for marker thermal properties.\n\nFields\n\nmarker_TK::MarkerArrayFloat1DState Float64: (marknum) : Temperature of marker in Kelvin.\nmarker_rhocp::MarkerArrayFloat1DState Float64: (marknum) : Marker density multiplied by heat capacity in J/K/m^3.\nmarker_kt::MarkerArrayFloat1DState Float64: (marknum) : Marker thermal conductivity in W/m/K.\nmarker_ha::MarkerArrayFloat1DState Float64: (marknum) : Marker adiabatic heating term (expansivity x temperature).\n\nNested Dot Access\n\nmarker_TK = model.markers.arrays.thermal.marker_TK.array\nmarker_rhocp = model.markers.arrays.thermal.marker_rhocp.array\nmarker_kt = model.markers.arrays.thermal.marker_kt.array\nmarker_ha = model.markers.arrays.thermal.marker_ha.array\n\nConstructor\n\nThermal(marknum::Int)\n\nArguments\n\nmarknum::Int: Number of markers\n\nReturns\n\nA new Thermal struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.MaterialGroup.Material","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.MaterialGroup.Material","text":"Material <: AbstractArrayGroup\n\nArray group for marker material properties.\n\nFields\n\nmarker_matid::MarkerArrayInt1DState Int16: (marknum) : Material ID of marker.\nmarker_rho::MarkerArrayFloat1DState Float64: (marknum) : Marker density in kg/m^3.\nmarker_porosity_initial::MarkerArrayFloat1DState Float32: (marknum) : Initial porosity at sediment-water interface used in Athy's law in fraction.\nmarker_decay_depth::MarkerArrayFloat1DState Float32: (marknum) : Porosity decay depth used in Athy's law in meters.\nmarker_max_burial_depth::MarkerArrayFloat1DState Float32: (marknum) : Maximum burial depth of marker in meters.\nmarker_serpentinization::MarkerArrayFloat1DState Float32: (marknum) : Serpentinization fraction of marker in fraction.\nmarker_serpentinization_heat_production::MarkerArrayFloat1DState Float32: (marknum) : Serpentinization heat production of marker in W/m^3.\n\nNested Dot Access\n\nmarker_matid = model.markers.arrays.material.marker_matid.array\nmarker_rho = model.markers.arrays.material.marker_rho.array\nmarker_porosity_initial = model.markers.arrays.material.marker_porosity_initial.array\nmarker_decay_depth = model.markers.arrays.material.marker_decay_depth.array\nmarker_max_burial_depth = model.markers.arrays.material.marker_max_burial_depth.array\nmarker_serpentinization = model.markers.arrays.material.marker_serpentinization.array\nmarker_serpentinization_heat_production = model.markers.arrays.material.marker_serpentinization_heat_production.array\n\nConstructor\n\nMaterial(marknum::Int)\n\nArguments\n\nmarknum::Int: Number of markers\n\nReturns\n\nA new Material struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.StressGroup.Stress","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.StressGroup.Stress","text":"Stress <: AbstractArrayGroup\n\nArray group for marker stress components.\n\nFields\n\nmarker_sxx::MarkerArrayFloat1DState Float64: (marknum) : Deviatoric normal stress of marker in Pa.\nmarker_sxy::MarkerArrayFloat1DState Float64: (marknum) : Deviatoric shear stress of marker in Pa.\n\nNested Dot Access\n\nmarker_sxx = model.markers.arrays.stress.marker_sxx.array\nmarker_sxy = model.markers.arrays.stress.marker_sxy.array\n\nConstructor\n\nStress(marknum::Int)\n\nInitializes marker stress arrays with zero values.\n\nArguments\n\nmarknum::Int: Number of markers\n\nReturns\n\nA new Stress struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.StrainGroup.Strain","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.StrainGroup.Strain","text":"Strain <: AbstractArrayGroup\n\nArray group for marker strain and strain rate.\n\nFields\n\nmarker_GII::MarkerArrayFloat1DState Float64: (marknum) : Accumulated strain of marker.\nmarker_strain_plastic::MarkerArrayFloat1DState Float64: (marknum) : Accumulated plastic strain of marker.\nmarker_exx::MarkerArrayFloat1DState Float64: (marknum) : Normal strain rate of marker in 1/s.\nmarker_exy::MarkerArrayFloat1DState Float64: (marknum) : Shear strain rate of marker in 1/s.\nmarker_sr_ratio::MarkerArrayFloat1DState Float64: (marknum) : Ratio of nodal-stress-based to nodal-velocity-based strain rate invariant for each marker.\nmarker_strain_rate_plastic::MarkerArrayFloat1DState Float64: (marknum) : Plastic strain rate of marker in 1/s.\nmarker_melt_damage::MarkerArrayFloat1DState Float32: (marknum) : Damage factor of marker associated with melt intrusion.\n\nNested Dot Access\n\nmarker_GII = model.markers.arrays.strain.marker_GII.array\nmarker_strain_plastic = model.markers.arrays.strain.marker_strain_plastic.array\nmarker_exx = model.markers.arrays.strain.marker_exx.array\nmarker_exy = model.markers.arrays.strain.marker_exy.array\nmarker_sr_ratio = model.markers.arrays.strain.marker_sr_ratio.array\nmarker_strain_rate_plastic = model.markers.arrays.strain.marker_strain_rate_plastic.array\nmarker_melt_damage = model.markers.arrays.strain.marker_melt_damage.array\n\nConstructor\n\nStrain(marknum::Int)\n\nArguments\n\nmarknum::Int: Number of markers\n\nReturns\n\nA new Strain struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.PressureGroup.Pressure","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.PressureGroup.Pressure","text":"Pressure <: AbstractArrayGroup\n\nArray group for marker pressure values.\n\nFields\n\nmarker_pr::MarkerArrayFloat1DState Float64: (marknum) : Pressure of marker in Pa.\n\nNested Dot Access\n\nmarker_pr = model.markers.arrays.pressure.marker_pr.array\n\nConstructor\n\nPressure(marknum::Int)\n\nInitializes marker pressure array with zero values.\n\nArguments\n\nmarknum::Int: Number of markers\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.LocationGroup.Location","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.LocationGroup.Location","text":"Location <: AbstractArrayGroup\n\nArray group for marker spatial coordinates.\n\nFields\n\nmarker_x::MarkerArrayFloat1DState Float64: (marknum) : x-coordinate of marker in meters.\nmarker_y::MarkerArrayFloat1DState Float64: (marknum) : y-coordinate of marker in meters.\n\nNested Dot Access\n\nmarker_x = model.markers.arrays.location.marker_x.array\nmarker_y = model.markers.arrays.location.marker_y.array\n\nConstructor\n\nLocation(marknum::Int)\n\nInitializes marker location arrays with zero values.\n\nArguments\n\nmarknum::Int: Number of markers\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.GridMarkerRelationshipGroup.GridMarkerRelationship","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.GridMarkerRelationshipGroup.GridMarkerRelationship","text":"GridMarkerRelationship <: AbstractArrayGroup\n\nArray group for grid-marker spatial relationships.\n\nFields\n\nmarker_xn::MarkerArrayInt1DState Int32: (marknum) : Horizontal index of upper left node of basic grid cell containing marker.\nmarker_yn::MarkerArrayInt1DState Int32: (marknum) : Vertical index of upper left node of basic grid cell containing marker.\nmarker_dx::MarkerArrayFloat1DState Float64: (marknum) : Normalized x-distance between marker and upper-left basic grid node in meters.\nmarker_dy::MarkerArrayFloat1DState Float64: (marknum) : Normalized y-distance between marker and upper-left basic grid node in meters.\nmarker_xn_vy::MarkerArrayInt1DState Int32: (marknum) : Horizontal index of upper left node of staggered vy grid cell containing marker.\nmarker_yn_vy::MarkerArrayInt1DState Int32: (marknum) : Vertical index of upper left node of staggered vy grid cell containing marker.\nmarker_dx_vy::MarkerArrayFloat1DState Float64: (marknum) : Normalized x-distance between marker and upper-left grid node of staggered vy grid in meters.\nmarker_dy_vy::MarkerArrayFloat1DState Float64: (marknum) : Normalized y-distance between marker and upper-left grid node of staggered vy grid in meters.\n\nNested Dot Access\n\nmarker_xn = model.markers.arrays.grid_marker_relationship.marker_xn.array\nmarker_yn = model.markers.arrays.grid_marker_relationship.marker_yn.array\nmarker_dx = model.markers.arrays.grid_marker_relationship.marker_dx.array\nmarker_dy = model.markers.arrays.grid_marker_relationship.marker_dy.array\nmarker_xn_vy = model.markers.arrays.grid_marker_relationship.marker_xn_vy.array\nmarker_yn_vy = model.markers.arrays.grid_marker_relationship.marker_yn_vy.array\nmarker_dx_vy = model.markers.arrays.grid_marker_relationship.marker_dx_vy.array\nmarker_dy_vy = model.markers.arrays.grid_marker_relationship.marker_dy_vy.array\n\nConstructor\n\nGridMarkerRelationship(marknum::Int)\n\nArguments\n\nmarknum::Int: Number of markers\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/markers/#EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.MeltGroup.Melt","page":"Markers","title":"EarthBox.ModelDataContainer.MarkerContainer.ArrayCollection.MeltGroup.Melt","text":"Melt <: AbstractArrayGroup\n\nArray group for marker melt fractions.\n\nFields\n\nmarker_meltfrac::MarkerArrayFloat1DState Float64: (marknum) : Melt fraction of marker in fraction.\nmarker_extracted_meltfrac::MarkerArrayFloat1DState Float64: (marknum) : Extracted melt fraction of marker in fraction.\nmarker_extractable_meltfrac::MarkerArrayFloat1DState Float64: (marknum) : Extractable melt fraction of marker in fraction.\n\nNested Dot Access\n\nmarker_meltfrac = model.markers.arrays.melt.marker_meltfrac.array\nmarker_extracted_meltfrac = model.markers.arrays.melt.marker_extracted_meltfrac.array\nmarker_extractable_meltfrac = model.markers.arrays.melt.marker_extractable_meltfrac.array\n\nConstructor\n\nMelt(marknum::Int)\n\nArguments\n\nmarknum::Int: Number of markers\n\nReturns\n\nA new Melt struct with the given marker parameters.\n\n\n\n\n\n","category":"type"},{"location":"models/regional/catl/#Magmatic-Crust-Formation:-Central-Atlantic","page":"Magmatic Crust Formation: Central Atlantic","title":"Magmatic Crust Formation: Central Atlantic","text":"see EarthBox/regional/catl","category":"section"},{"location":"methods/discretization/large_matrix/large_matrix/#Example-Matrix","page":"Example Matrix","title":"Example Matrix","text":" 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26\n x y p x y p x y p x y p x y p x y p x y p x y p x y p\n0 x C LL L D    UR  R LR R               \n1 y UR C U LR D D     R                \n2 p R D 1                        \n3 x U UL  C LL L D    UR  R LR R            \n4 y  U  UR C U LR D D     R             \n5 p  U  R D 0                     \n6 x    U UL  C LL L D    UR  R LR R         \n7 y        1                   \n8 p L    U  R D 0                  \n9 x L      U UL  C LL L D    UR  R LR R      \n10 y UL L  LL    U  UR C U LR D D     R       \n11 p    L    U  R D 0               \n12 x    L      U UL  C LL L D    UR  R LR R   \n13 y    UL L  LL    U  UR C U LR D D     R    \n14 p       L    U  R D 0            \n15 x       L      U UL  C LL L D    UR  R LR R\n16 y                 1          \n17 p          L    U  R D 0         \n18 x                   1        \n19 y          UL L  LL    U  UR C U LR D D   \n20 p             L    U  R D 0      \n21 x                      1     \n22 y             UL L  LL    U  UR C U LR D D\n23 p                L    U  R D 0   \n24 x                         1  \n25 y                          1 \n26 p                   L    U  R D 0\n\nTable: Sparse matrix for discretized Stokes-continuity equations where N_xb = N_yb = 4.  For this case Delta I_v_xR is equal to 9. Unknowns for v_x, v_y and P are  denoted along the horizontal and vertical matrix axes as x, y, and p, respectively. The associated  stencil is applied to each row of the matrix where the x-Stokes stencil is applied to rows labeled  as x, the y-Stokes stencil is applied to rows labeled as y, and the continuity stencil is applied  to rows labeled as p. Coefficients for unknowns associated with the equation generated from a given  stencil are applied to the appropriate column of the matrix. Locations of unknowns relative to a  main central node denoted by C are denoted as U, D, L, R, UL, UR, LL, LR which represent up, down,  left, right, upper-left, upper-right, lower-left, and lower-right, respectively. Coefficients with  bold font are equal to zero since the product of the prescribed unknown and associated coefficient  from the x-stokes-coeff equation is moved to the right-hand-side term. Central main nodes  associated with a given stencil with coefficients with values not equal to 0 or 1 are denoted as C.  Matrix values equal one in the central node location are associated with prescribed boundary  unknowns. Zeros along the diagonal represent pressure coefficients that are equal to zero since  pressure does not appear in the incompressible continuity equation. Blank spaces are zero-value  coefficients for non-diagonal unknowns. Note that the central pressure node P has one non-zero  coefficient equal to 1 at matrix location (22) where the pressure boundary condition is  applied.","category":"section"},{"location":"benchmarks/models/channel_flow_non_newtonian/#Channel-Flow-Non-Newtonian","page":"Channel Flow Non Newtonian","title":"Channel Flow Non-Newtonian","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:channel_flow_non_newtonian);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 0.08735\nMax relative error: 1.008 %\nMax relative error limit: 1.100 %\n\nTest Successful: max relative error is not greater than limit: 1.008% <= 1.100%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_16-49-28/channel_flow_non_newtonian_output\n\n(Image: Channel Flow Non-Newtonian Benchmark (Velocity))","category":"section"},{"location":"benchmarks/models/channel_flow_non_newtonian/#fig:channel-flow-non-newtonian-velocity","page":"Channel Flow Non Newtonian","title":"fig:channel-flow-non-newtonian-velocity","text":"Benchmark result for velocity using EarthBox version 0.1.0\n\n(Image: Channel Flow Non-Newtonian Benchmark (Viscosity))","category":"section"},{"location":"benchmarks/models/channel_flow_non_newtonian/#fig:channel-flow-non-newtonian-viscosity","page":"Channel Flow Non Newtonian","title":"fig:channel-flow-non-newtonian-viscosity","text":"Benchmark result for effective viscosity using EarthBox version 0.1.0","category":"section"},{"location":"model_data/collections/grids/","page":"Grids","title":"Grids","text":"Grids\n\nParameters\nGridOptions\nGridGeometry\nGridRefinement\nArrays\nBasicGrid\nStaggeredVyGrid\nStaggeredVxGrid\nPressureGrid","category":"section"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.Grids","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.Grids","text":"Grids <: CollectionContainer\n\nData structure containing parameter and array objects associated with 2D staggered grids.\n\nFields\n\nparameters::Parameters: Parameter groups for basic and staggered grids\narrays::Arrays: Array groups containing coordinates and spacing for basic and staggered \n\nConstructor\n\nGrids(ynum::Int, xnum::Int, ysize::Float64, xsize::Float64)::Grids\n\nCreate a new Grids collection with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\nysize::Float64: Domain size in y-direction in meters\nxsize::Float64: Domain size in x-direction in meters\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ParameterCollection.Parameters","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for 2D staggered grids.\n\nFields\n\ngrid_options::GridOptions: Grid type options\ngeometry::GridGeometry: Dimensions and resolution of basic grids\nrefinement::GridRefinement: T-type grid refinement parameters\n\nConstructor\n\nParameters(ynum::Int, xnum::Int, ysize::Float64, xsize::Float64)\n\nCreate a new Parameters collection with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction  \nysize::Float64: Domain size in y-direction in meters\nxsize::Float64: Domain size in x-direction in meters\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ParameterCollection.GridOptionsGroup.GridOptions","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ParameterCollection.GridOptionsGroup.GridOptions","text":"GridOptions <: AbstractParameterGroup\n\nParameter group for grid options.\n\nFields\n\nitype_grid::ParameterInt: Grid option ID\nstype_grid::ParameterStr: Grid option name\nobj_list::Vector{ParameterInt}: List of parameter objects\n\nNested Dot Access\n\nitype_grid = model.grids.parameters.grid_options.itype_grid.value\nstype_grid = model.grids.parameters.grid_options.stype_grid.value\n\nConstructor\n\nGridOptions()\n\nCreate a new GridOptions parameter group with default values.\n\nReturns\n\nGridOptions: New GridOptions parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ParameterCollection.GridGeometryGroup.GridGeometry","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ParameterCollection.GridGeometryGroup.GridGeometry","text":"GridGeometry <: AbstractParameterGroup\n\nParameter group for basic grid geometry parameters.\n\nFields\n\nynum::ParameterInt: Number of basic grid points in y-direction\nxnum::ParameterInt: Number of basic grid points in x-direction\nysize::ParameterFloat: Height of model in meters\nxsize::ParameterFloat: Width of model in meters\nystpavg::ParameterFloat: Average spacing of basic grid in y-direction in meters\nxstpavg::ParameterFloat: Average spacing of basic grid in x-direction in meters\nymin::ParameterFloat: Minimum y-coordinate of model domain in meters\nymax::ParameterFloat: Maximum y-coordinate of model domain in meters\nxmin::ParameterFloat: Minimum x-coordinate of model domain in meters\nxmax::ParameterFloat: Maximum x-coordinate of model domain in meters\nxsize_start::ParameterFloat: Initial width of model in meters\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nynum = model.grids.parameters.geometry.ynum.value\nxnum = model.grids.parameters.geometry.xnum.value\nysize = model.grids.parameters.geometry.ysize.value\nxsize = model.grids.parameters.geometry.xsize.value\nystpavg = model.grids.parameters.geometry.ystpavg.value\nxstpavg = model.grids.parameters.geometry.xstpavg.value\nymin = model.grids.parameters.geometry.ymin.value\nymax = model.grids.parameters.geometry.ymax.value\nxmin = model.grids.parameters.geometry.xmin.value\nxmax = model.grids.parameters.geometry.xmax.value\nxsize_start = model.grids.parameters.geometry.xsize_start.value\n\nConstructor\n\nGridGeometry(ynum::Int, xnum::Int, ysize::Float64, xsize::Float64)\n\nCreate a new GridGeometry parameter group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\nysize::Float64: Domain size in y-direction in meters\nxsize::Float64: Domain size in x-direction in meters\n\nReturns\n\nGridGeometry: New GridGeometry parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ParameterCollection.GridRefinementGroup.GridRefinement","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ParameterCollection.GridRefinementGroup.GridRefinement","text":"GridRefinement <: AbstractParameterGroup\n\nParameter group for grid refinement parameters.\n\nFields\n\ndx_highres::ParameterFloat: Constant horizontal grid resolution in high-resolution area in meters\ndx_lowres::ParameterFloat: Average horizontal grid resolution in low-resolution area in meters\nxo_highres::ParameterFloat: x-location of first node of high-resolution area in meters\nixo_highres::ParameterInt: x-index of first node of high-resolution area\nxf_highres::ParameterFloat: x-location of last node of high-resolution area in meters\ndy_highres::ParameterFloat: Constant vertical grid resolution in high-resolution area in meters\ndy_lowres::ParameterFloat: Average vertical grid resolution in low-resolution area in meters\nyf_highres::ParameterFloat: y-location of last node of high-resolution area in meters\niuse_trench::ParameterInt: Flag to use trench location for refinement\ntrench_location::ParameterFloat: x-location of trench in meters\niuse_refinement_delay::ParameterInt: Flag to delay grid refinement\nrefinement_time::ParameterFloat: Time to start grid refinement in Myr\nrefinement_flag::ParameterInt: Flag indicating if grid is currently refined\niuse_refinement_gap::ParameterInt: Flag to temporarily disable refinement\nrefinement_gap_start_time::ParameterFloat: Time to start refinement gap in Myr\nrefinement_gap_end_time::ParameterFloat: Time to end refinement gap in Myr\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\ndx_highres = model.grids.parameters.refinement.dx_highres.value\ndx_lowres = model.grids.parameters.refinement.dx_lowres.value\nxo_highres = model.grids.parameters.refinement.xo_highres.value\nixo_highres = model.grids.parameters.refinement.ixo_highres.value\nxf_highres = model.grids.parameters.refinement.xf_highres.value\ndy_highres = model.grids.parameters.refinement.dy_highres.value\ndy_lowres = model.grids.parameters.refinement.dy_lowres.value\nyf_highres = model.grids.parameters.refinement.yf_highres.value\niuse_trench = model.grids.parameters.refinement.iuse_trench.value\ntrench_location = model.grids.parameters.refinement.trench_location.value\niuse_refinement_delay = model.grids.parameters.refinement.iuse_refinement_delay.value\nrefinement_time = model.grids.parameters.refinement.refinement_time.value\nrefinement_flag = model.grids.parameters.refinement.refinement_flag.value\niuse_refinement_gap = model.grids.parameters.refinement.iuse_refinement_gap.value\nrefinement_gap_start_time = model.grids.parameters.refinement.refinement_gap_start_time.value\nrefinement_gap_end_time = model.grids.parameters.refinement.refinement_gap_end_time.value\n\nConstructor\n\nGridRefinement()\n\nCreate a new GridRefinement parameter group with default values.\n\nReturns\n\nGridRefinement: New GridRefinement parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.Arrays","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.Arrays","text":"Arrays <: AbstractArrayCollection\n\nData structure containing array groups for basic and staggered grids.\n\nFields\n\nbasic::BasicGrid: Coordinate and nodal spacing arrays for basic grid\nstaggered_vy::StaggeredVyGrid: Coordinate and nodal spacing arrays for staggered Vy grid\nstaggered_vx::StaggeredVxGrid: Coordinate and nodal spacing arrays for staggered Vx grid  \npressure::PressureGrid: Coordinate and nodal spacing arrays for pressure nodes\n\nConstructor\n\nArrays(ynum::Int, xnum::Int)::Arrays\n\nCreate a new Arrays collection with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.BasicGridGroup.BasicGrid","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.BasicGridGroup.BasicGrid","text":"BasicGrid <: AbstractArrayGroup\n\nArray group containing coordinates and spacing for basic grid.\n\nFields\n\ngridx_b::GridArray1DState: (xnum) : x-coordinates of basic grid nodes in meters.\nxstp_b::GridArray1DState: (xnum - 1) : Width of cells in x-direction for basic grid in meters.\ngridy_b::GridArray1DState: (ynum) : y-coordinates of basic grid nodes in meters.\nystp_b::GridArray1DState: (ynum - 1) : Width of cells in y-direction for basic grid in meters.\n\nNested Dot Access\n\ngridx_b = model.grids.arrays.basic.gridx_b.array\nxstp_b = model.grids.arrays.basic.xstp_b.array\ngridy_b = model.grids.arrays.basic.gridy_b.array\nystp_b = model.grids.arrays.basic.ystp_b.array\n\nConstructor\n\nBasicGrid(ynum::Int, xnum::Int)\n\nCreate a new BasicGrid array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nBasicGrid: New BasicGrid array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.StaggeredVyGridGroup.StaggeredVyGrid","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.StaggeredVyGridGroup.StaggeredVyGrid","text":"StaggeredVyGrid <: AbstractArrayGroup\n\nArray group containing coordinates and spacing for staggered Vy grid.\n\nFields\n\ngridx_vy::GridArray1DState: (xnum + 1) : x-locations of staggered Vy grid nodes including ghost nodes in meters.\nxstp_vy::GridArray1DState: (xnum) : Width of staggered vy grid cells in x-direction in meters.\n\nNested Dot Access\n\ngridx_vy = model.grids.arrays.staggered_vy.gridx_vy.array\nxstp_vy = model.grids.arrays.staggered_vy.xstp_vy.array\n\nConstructor\n\nStaggeredVyGrid(xnum::Int)\n\nCreate a new StaggeredVyGrid array group with the given grid dimensions.\n\nArguments\n\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nStaggeredVyGrid: New StaggeredVyGrid array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.StaggeredVxGridGroup.StaggeredVxGrid","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.StaggeredVxGridGroup.StaggeredVxGrid","text":"StaggeredVxGrid <: AbstractArrayGroup\n\nArray group containing coordinates and spacing for staggered Vx grid.\n\nFields\n\ngridy_vx::GridArray1DState: (ynum + 1) : y-locations of staggered Vx grid nodes including ghost nodes in meters.\nystp_vx::GridArray1DState: (ynum) : Width of staggered vx grid cells in y-direction in meters.\n\nNested Dot Access\n\ngridy_vx = model.grids.arrays.staggered_vx.gridy_vx.array\nystp_vx = model.grids.arrays.staggered_vx.ystp_vx.array\n\nConstructor\n\nStaggeredVxGrid(ynum::Int)\n\nCreate a new StaggeredVxGrid array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\n\nReturns\n\nStaggeredVxGrid: New StaggeredVxGrid array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/grids/#EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.PressureGridGroup.PressureGrid","page":"Grids","title":"EarthBox.ModelDataContainer.Grids2dContainer.ArrayCollection.PressureGridGroup.PressureGrid","text":"PressureGrid <: AbstractArrayGroup\n\nArray group containing coordinates and spacing for pressure grid.\n\nFields\n\ngridy_pr::GridArray1DState: (ynum - 1) : y-locations of pressure grid nodes in meters.\nystp_pr::GridArray1DState: (ynum - 2) : Width of pressure cells in y-direction in meters.\ngridx_pr::GridArray1DState: (xnum - 1) : x-locations of pressure grid nodes in meters.\nxstp_pr::GridArray1DState: (xnum - 2) : Width of pressure cells in x-direction in meters.\n\nNested Dot Access\n\ngridy_pr = model.grids.arrays.pressure.gridy_pr.array\nystp_pr = model.grids.arrays.pressure.ystp_pr.array\ngridx_pr = model.grids.arrays.pressure.gridx_pr.array\nxstp_pr = model.grids.arrays.pressure.xstp_pr.array\n\nConstructor\n\nPressureGrid(ynum::Int, xnum::Int)\n\nCreate a new PressureGrid array group with the given grid dimensions.\n\nArguments\n\nynum::Int: Number of grid points in y-direction\nxnum::Int: Number of grid points in x-direction\n\nReturns\n\nPressureGrid: New PressureGrid array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"api/interpolation/interpolation/#Interpolation","page":"Interpolation","title":"Interpolation","text":"","category":"section"},{"location":"api/interpolation/interpolation/#Initialization","page":"Interpolation","title":"Initialization","text":"","category":"section"},{"location":"api/interpolation/interpolation/#EarthBox.Interpolation.initialize!","page":"Interpolation","title":"EarthBox.Interpolation.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize interpolation option parameter flags.\n\nArguments\n\nmodel::ModelData: The model data container containing the    model parameters and arrays.\n\nKeyword Arguments\n\niuse_harmonic_avg_normal_viscosity::Int64:\nHarmonic averaging of shear viscosity for normal viscosity: 0 off; 1 on\niuse_initial_temp_interp::Int64:\nInterpolate nodal temperatures back to markers at start: 0 off; 1 on\n\n\n\n\n\n","category":"function"},{"location":"installation/MUMPS_custom/#Installing-Custom-MUMPS-Libraries","page":"Using Custom MUMPS Libraries","title":"Installing Custom MUMPS Libraries","text":"Using a compiled version of MUMPS that link to system libraries can lead to significant performance improvements when solving large systems of equations especially for the analysis phase of the MUMPS solver and enable additional parallel ordering methods that may not be available with the Julia binaries.\n\nThe instructions here assume (1) you are working on a Debian Linux OS (e.g. Ubuntu and  PopOS), (2) you are working with a local copy of the EarthBox project where MUMPS has  already been installed and (3) the EarthBox project has been put in development mode in  the base Julia environment so EarthBox can be accessed  via using EarthBox (see EarthBox Installation for Development and Experimentation).\n\nIf you are working with a version of EarthBox installed from the registry you can perform a similar set of steps in the base Julia environment. This will require installing MUMPS.jl in the base environment first using a similar version to the one used by EarthBox.\n\n[1] Set the environment variable JULIA_MUMPS_LIBRARY_PATH to the path of the directory  that contains the local MUMPS libraries. This should be set in your ~/.bashrc as follows:\n\nexport JULIA_MUMPS_LIBRARY_PATH=\"/path/to/MUMPS_x.x.x/lib\"\n\nThis path will be used to recompile the MUMPS package for Julia. For guidance on compiling MUMPS and generated the MUMPS library directory see Building MUMPS Libraries.\n\n[2] Define the LD_LIBRARY_PATH path to ensure that all system libraries are found  when MUMPS.jl is re-built:\n\nexport LD_LIBRARY_PATH=\"$JULIA_MUMPS_LIBRARY_PATH:$LD_LIBRARY_PATH\"\n\n[3] Source your ~/.bashrc file:\n\nsource ~/.bashrc\n\n[4] Navigate to the EarthBox project directory and make a development copy of MUMPS:\n\njulia --project=.\n\nPkg.develop(\"MUMPS\")\n\n[5] Rebuild MUMPS.jl using the development package:\n\nPkg.build(\"MUMPS\")\n\nThe development package looks for environment variable JULIAMUMPSLIBRARY_PATH. If this variable is found it will be used to recompile MUMPS.jl using the  system MUMPS libraries.\n\n[6] Ensure all dependencies are resolved and instantiated:\n\nPkg.resolve()\nPkg.instantiate()","category":"section"},{"location":"installation/MUMPS_custom/#Building-MUMPS-Libraries","page":"Using Custom MUMPS Libraries","title":"Building MUMPS Libraries","text":"Installing MUMPS involves downloading the MUMPS source code, copying the relevant  Makefile.inc file from the collection for different setups, editing this file  using desired options and library locations, and then compiling the MUMPS  libraries using make all. However, in reality a lot of editing of the  Makefile.inc and editing of Makefiles in the src directory is often needed to  get compilation to work. MUMPS also uses a variety of other libraries that  can be installed with the system package manager (see the relevant  Makefile.inc). The AI chat assistant in Cursor is very useful for figuring out how to do this if you allow the system to perform trial and error and iterate  on the compilation process. See the following site to download different  versions of the MUMPS source code including the most recent release at the  time of writing this script (5.7.3):\n\nThirdParty-Mumps\n\nThe instructions provided here assume you are working on a Debian-based Linux OS (e.g. Ubuntu/PopOS), MUMPS version is 5.7.3 and that core dependencies have  been installed on the system via:\n\napt-get install libmetis-dev libparmetis-dev libscotch-dev libptscotch-dev libatlas-base-dev openmpi-bin libopenmpi-dev liblapack-dev libscalapack-openmpi-dev\n\nAfter installation these libraries will be located at /usr/lib/x86_64-linux-gnu,  and associated include files are located at /usr/include after installation.\n\nNext the instructions in the MUMPS distribution will have to be consulted and Makefiles will have to be edited. The required edits are very system dependent  and will most likely require trial and error. \n\nHowever, here key edits that were made to Makefiles for MUMPS 5.7.3 in order to get compilation to work for a parallel version of MUMPS that worked well with MUMPS.jl version 1.5.1:\n\nUncomment the parallel library option setup in Makefile.inc and   comment out the serial library option setup if parallel capability is   desired.\nSet LIBEXT to .so in the Makefile.inc file for shared instead of static   libraries which is required for the MUMPS.jl package.\nSet PATH_OPT = -Wl,-rpath,$(topdir)/lib in Makefile.inc. This option embeds  the runtime library search path directly into the executable or shared   library being built. This means the system will know where to find the   required libraries at runtime without needing to modify the LD_LIBRARY_PATH   environment variable.\nSpecial care must be taken with the so called optimized options. One   approach is use the edits described in Optimization Options.","category":"section"},{"location":"installation/MUMPS_custom/#Optimization-Options","page":"Using Custom MUMPS Libraries","title":"Optimization Options","text":"The following optimization options in the Makefile.inc led to successful compilation:\n\nOPTF    = -O -fopenmp -fallow-argument-mismatch\nOPTL    = -O -fopenmp\nOPTC    = -O -fopenmp\n\nHowever, this required also editing the Makefile in the src directory by changing $(FPIC) to $(FPIC_OPT) in the following lines starting at line 450:\n\n.SUFFIXES: .c .F .o\n.F.o:\n$(FC) $(OPTF) $(FPIC_OPT) -I. -I../include $(INCS) $(IORDERINGSF) $(ORDERINGSF) -c $*.F $(OUTF)$*.o\n.c.o:\n$(CC) $(OPTC) $(FPIC_OPT) -I../include $(INCS) $(CDEFS) $(IORDERINGSC) $(ORDERINGSC) -c $*.c $(OUTC)$*.o\n\n$(ARITH)mumps_c.o:\tmumps_c.c\n$(CC) $(OPTC) $(FPIC_OPT) -I../include $(INCS) $(CDEFS) -DMUMPS_ARITH=MUMPS_ARITH_$(ARITH) \\\n        $(IORDERINGSC) $(ORDERINGSC) -c mumps_c.c $(OUTC)$@\n\nAlternatively, this could have been accomplished in the Makefile.inc by setting  the following:\n\nOPTF    = -O -fopenmp -fallow-argument-mismatch $(FPIC_OPT)\nOPTC    = -O -fopenmp $(FPIC_OPT)","category":"section"},{"location":"model_data/collections/carbonate/","page":"Carbonate","title":"Carbonate","text":"Carbonate\n\nParameters\nArrays","category":"section"},{"location":"model_data/collections/carbonate/#EarthBox.ModelDataContainer.CarbonateContainer.Carbonate","page":"Carbonate","title":"EarthBox.ModelDataContainer.CarbonateContainer.Carbonate","text":"Carbonate <: CollectionContainer\n\nCollection container for carbonate deposition configuration.\n\nFields\n\nparameters::Parameters: Parameter groups for carbonate deposition configuration\narrays::Arrays: Carbonate arrays containing grid nodes and properties\n\nConstructor\n\nCarbonate(toponum::Int64)::Carbonate\n\nReturns\n\nCarbonate: New Carbonate collection with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/carbonate/#EarthBox.ModelDataContainer.CarbonateContainer.ParameterCollection.Parameters","page":"Carbonate","title":"EarthBox.ModelDataContainer.CarbonateContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for carbonate deposition configuration.\n\nFields\n\niuse_carb::ParameterInt: 0 = uniform deposition; 1 = deposition on highs\nphotic_thick_m::ParameterFloat: Depth of photic zone\ncarb_growth_rad::ParameterFloat: Carbonate growth radius\ncarb_base_rate::ParameterFloat: Probability of nucleation\ncarb_time_myr::ParameterFloat: Carbonate growth delay time relative to model start\ncarb_jump_time_myr::ParameterFloat: Time of jump in carbonate base rate\ncarb_base_rate_jump::ParameterFloat: Carbonate base rate jump\n\nNested Dot Access\n\niuse_carb = model.carbonate.parameters.iuse_carb.value\nphotic_thick_m = model.carbonate.parameters.photic_thick_m.value\ncarb_growth_rad = model.carbonate.parameters.carb_growth_rad.value\ncarb_base_rate = model.carbonate.parameters.carb_base_rate.value\ncarb_time_myr = model.carbonate.parameters.carb_time_myr.value\ncarb_jump_time_myr = model.carbonate.parameters.carb_jump_time_myr.value\ncarb_base_rate_jump = model.carbonate.parameters.carb_base_rate_jump.value\n\nConstructor\n\nParameters()\n\nReturns\n\nParameters: New Parameters collection with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/carbonate/#EarthBox.ModelDataContainer.CarbonateContainer.ArrayCollection.Arrays","page":"Carbonate","title":"EarthBox.ModelDataContainer.CarbonateContainer.ArrayCollection.Arrays","text":"Arrays <: AbstractArrayCollection\n\nArray collection for carbonate deposition configuration.\n\nFields\n\ngrid_carb::CarbArray2DState: (7, toponum) Carbonate grid array\nROW 1: x-coordinates of carbonate grid nodes.\nROW 2: Elevation at carbonate grid nodes.\nROW 3: Not used.\nROW 4: x-component of velocity at carbonate grid nodes.\nROW 5: y-component of velocity at carbonate grid nodes.\nROW 6: Not used.\nROW 7: Carbonate nucleation probability.\n\nNested Dot Access\n\nmodel.carbonate.arrays.grid_carb.array\n\nConstructor\n\nArrays(toponum::Int)::Arrays\n\nCreate a new Arrays collection with the given carbonate grid resolution.\n\nArguments\n\ntoponum::Int: Number of carbonate grid points\n\n\n\n\n\n","category":"type"},{"location":"benchmarks/models/viscoelastic_extension/#Viscoelastic-Extension","page":"Viscoelastic Extension","title":"Viscoelastic Extension","text":"See description at EarthBox.BenchmarksManager.run_benchmark.","category":"section"},{"location":"benchmarks/models/viscoelastic_extension/#Symmetric","page":"Viscoelastic Extension","title":"Symmetric","text":"This benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:viscoelastic_extension);\n\nFrom test_results.yml\n\nrelative error limit %: 3.0\nmax relative error percentage: 0.2764\nmessage: \"Test Successful: max relative error is not greater than limit: 0.276% <= 3.000%\"\nresult: \"Success\"\n\n(Image: Viscoelastic Extension Benchmark)","category":"section"},{"location":"benchmarks/models/viscoelastic_extension/#fig:viscoelastic-extension","page":"Viscoelastic Extension","title":"fig:viscoelastic-extension","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"benchmarks/models/viscoelastic_extension/#Asymmetric","page":"Viscoelastic Extension","title":"Asymmetric","text":"This benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:viscoelastic_extension_asymmetric);\n\nFrom test_results.yml\n\nrelative error limit %: 3.0\nmax relative error percentage: 0.2243\nmessage: \"Test Successful: max relative error is not greater than limit: 0.224% <= 3.000%\"\nresult: \"Success\"\n\n(Image: Viscoelastic Extension Benchmark (Asymmetric))","category":"section"},{"location":"benchmarks/models/viscoelastic_extension/#fig:viscoelastic-extension-asymmetric","page":"Viscoelastic Extension","title":"fig:viscoelastic-extension-asymmetric","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"benchmarks/models/viscoelastic_extension/#Inflow-and-Outflow-Along-Side-Boundaries","page":"Viscoelastic Extension","title":"Inflow and Outflow Along Side Boundaries","text":"This benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:viscoelastic_extension_inflow_and_outflow_along_sides);\n\nFrom test_results.yml\n\nrelative error limit %: 3.0\nmax relative error percentage: 0.5077\nmessage: \"Test Successful: max relative error is not greater than limit: 0.508% <= 3.000%\"\nresult: \"Success\"\n\n(Image: Viscoelastic Extension Inflow/Outflow Along Sides Benchmark)","category":"section"},{"location":"benchmarks/models/viscoelastic_extension/#fig:viscoelastic-extension-inflow-outflow","page":"Viscoelastic Extension","title":"fig:viscoelastic-extension-inflow-outflow","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"benchmarks/models/viscoelastic_extension/#Depth-dependent","page":"Viscoelastic Extension","title":"Depth-dependent","text":"This benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:viscoelastic_extension_depth_dependent);\n\nFrom test_results.yml\n\nrelative error limit %: 3.0\nmax relative error percentage: 0.2744\nmessage: \"Test Successful: max relative error is not greater than limit: 0.274% <= 3.000%\"\nresult: \"Success\"\n\n(Image: Viscoelastic Extension Depth-dependent Benchmark)","category":"section"},{"location":"benchmarks/models/viscoelastic_extension/#fig:viscoelastic-extension-depth-dependent","page":"Viscoelastic Extension","title":"fig:viscoelastic-extension-depth-dependent","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"models/sandbox/sandbox_shortening/#Sandbox-Shortening-Analogue-Benchmark","page":"Sandbox Shortening","title":"Sandbox Shortening Analogue Benchmark","text":"see EarthBox/models/sandbox/sandbox_shortening","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/pre_solver_steps/#Pre-solver-Steps","page":"Pre-solver Steps","title":"Pre-solver Steps","text":"[1] Update boundary conditions for velocity stepping and transient temperature along the lower boundary of the model.\n\n[2] Randomize initial marker friction angles theta_m^o using equation  eq:friction-angle-randomization.\n\n[3] Update marker composition C_m to account for compositional effects associated  with fractionation of normal gabbroic melt by transforming gabbroic magma markers to  fractionated gabbroic melt if the distance between the marker and the Moho is 2km or  less.\n\n[4] Update marker melt fraction M_m based on marker temperature T_m and marker  pressure P_m using equation eq:melt-fraction.\n\n[5] Update marker composition C_m by transforming purely molten markers that have  cooled below the liquidus temperature to a solid state using equations  eq:liquidus-mantle, eq:solidus-liquidus-gabbro and  eq:solidus-liquidus-fractionated-gabbro.\n\n[6] Update marker composition C_m by transforming solid markers with temperature  between the solidus and liquidus temperatures to a partially molten state using  equations eq:solidus-mantle, eq:liquidus-mantle,  eq:solidus-liquidus-gabbro and eq:solidus-liquidus-fractionated-gabbro.\n\n[7] Update marker composition C_m by transforming partially molten markers that have  cooled below the solidus to a solid state by updating C_m using equations  eq:solidus-mantle, eq:solidus-liquidus-gabbro and  eq:solidus-liquidus-fractionated-gabbro.\n\n[8] Update rock properties for density rho_m, heat capacity C_pm, thermal  conductivity k_m, adiabatic coefficient c_adim for each marker m taking into  account temperature, pressure, sediment porosity, serpentinization, partial melt and  melt depletion (Rock Property Update Steps).\n\n[9] Include the effects of latent heat in the energy equation by adding latent heat  terms in the adiabatic coefficient c_adim and heat capacity C_pm for each  marker m (Latent Heat Update Steps).\n\n[10] Include the effects of hydrothermal cooling on regional thermal structure by  modifying the marker thermal conductivity k_m  (Hydrothermal Update Steps).\n\n[11] Initialize bilinear interpolation parameters for each marker m including indices  and distances for the upper-left basic node and weights of the four basic nodes of  the cell containing marker m and summed marker weights on basic nodes, pressure nodes  and v_y grid nodes used in the denominator of equation  eq:bilinear_interp2grid.\n\n[12] Interpolate thermal parameters from markers to basic grids:\n\nbeginsplit\ntextTemperature (inclusive)   T_m rightarrow T_(ij)_b \ntextDensity x Heat Capacity (inclusive)   rho_m C_pm rightarrow \nrho_(ij)_b C_p(ij)_b \ntextThermal conductivity (inclusive)   k_m rightarrow k_(ij)_b \ntextRadiogenic Heat Production (inclusive)   H_m^rad rightarrow \nH_(ij)_b^rad \ntextAdiabatic Coefficient (inclusive)   c_adim rightarrow c_adi(ij)_b\nendsplit\n\n[13] Update marker failure properties including cohesion sigma_cm and friction  angle theta_m including the effects of randomized initial friction angle theta_m^o,  strain weakening and melt damage (Marker Failure Properties Update Steps).\n\n[14] Update marker viscosity including non-linear effective creep viscosity  eta_creepm and initialized visco-plastic viscosity eta_vpm taking into  account partial melt (Marker Creep Viscosity Update Steps).\n\n[15] Update melt damage factor f_damage(m) (Melt Damage Update Steps).\n\n[16] Interpolate Stokes-continuity parameters from markers to staggered grids:\n\ntextDensity (inclusive)  rho_m rightarrow rho_(ij)_b \ntextCohesion (exclusive)  C_m rightarrow C_(ij)_b \ntextFriction Angle (exclusive)  theta_m rightarrow theta_(ij)_b \ntextCreep Viscosity (exclusive)  eta_creepm rightarrow eta_creep(ij)_b \ntextVisco-Plastic Shear Viscosity (exclusive)  eta_vpm rightarrow eta_vp(ij)_b \ntextVisco-plastic Normal Viscosity (exclusive)  eta_vpm rightarrow eta_vp(ij)_p \ntextShear Modulus on basic nodes (exclusive)  mu_m rightarrow mu_(ij)_b \ntextShear modulus on pressure nodes (inclusive)  mu_m rightarrow mu_(ij)_p \ntextDeviatoric shear stress (exclusive)  sigma_xym rightarrow sigma_xy(ij)_b1 \ntextDeviatoric normal stress (inclusive)  sigma_xxm rightarrow sigma_xx(ij)_p1 ","category":"section"},{"location":"api/markers/cohesion/#MarkerCohesion","page":"MarkerCohesion","title":"MarkerCohesion","text":"","category":"section"},{"location":"api/markers/cohesion/#Initialization","page":"MarkerCohesion","title":"Initialization","text":"","category":"section"},{"location":"api/markers/cohesion/#EarthBox.Markers.MarkerCohesion.initialize!","page":"MarkerCohesion","title":"EarthBox.Markers.MarkerCohesion.initialize!","text":"initialize!(model::ModelData)::Nothing\n\nInitialize marker cohesion for plasticity models. This initializes the marker_cohesion array in the model data container and is required for all models that use plasticity.\n\nArguments\n\nmodel::ModelData: The model data container containing the model parameters and arrays.\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"installation/MPI_system/#Configuring-MPI.jl-to-Use-System-Binaries","page":"Using System MPI Binaries","title":"Configuring MPI.jl to Use System Binaries","text":"Performance can often be improved by configuring MPI.jl to use system MPI  libraries. This section provides guidance on how to do this on Debian Linux  operating systems (e.g. Ubuntu/PopOS) assuming that MPI.jl and MPIPreferences.jl have already been installed for EarthBox and the base Julia environment (see  EarthBox Installation): \n\n[1] Install required System libraries (OpenMPI)\n\nA system-level OpenMPI MPI implementation can be installed on Debian Linux systems  (Ubuntu/PopOS systems) using the following command:\n\nsudo apt-get install openmpi-bin openmpi-common libopenmpi-dev libopenmpi3\n\n[2] Use MPIPreferences to configure MPI.jl to use the system binary:\n\nIf you are working with a development version of the EarthBox project,  navigate to the project directory and run the REPL with the project activated:\n\njulia --project=.\n\nNow change the MPI configuration to use system binaries:\n\nusing MPIPreferences\nMPIPreferences.use_system_binary()\n\nWhich will generate output that looks like the following:\n\n Info: MPI implementation identified\n   libmpi = \"libmpi\"\n   version_string = \"Open MPI v4.1.2, package: Debian OpenMPI, ident: 4.1.2, repo rev: v4.1.2, Nov 24, 2021\\0\"\n   impl = \"OpenMPI\"\n   version = v\"4.1.2\"\n   abi = \"OpenMPI\"\n Info: MPIPreferences changed\n   binary = \"system\"\n   libmpi = \"libmpi\"\n   abi = \"OpenMPI\"\n   mpiexec = \"mpiexec\"\n   preloads = Any[]\n   preloads_env_switch = nothing\n\ntip: going back to JLL binaries\nMPIPreferences.usejllbinary(\"OpenMPI_jll\")\n\n[3] Re-instantiate your project:\n\nPkg.resolve()\nPkg.instantiate()","category":"section"},{"location":"api/material_geometry/weak_seed/#WeakSeed","page":"WeakSeed","title":"WeakSeed","text":"The WeakSeed material geometry involves a weak seed in the lithosphere used to initiate localization.","category":"section"},{"location":"api/material_geometry/weak_seed/#Initialization","page":"WeakSeed","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/weak_seed/#EarthBox.MaterialGeometry.WeakSeed.initialize!","page":"WeakSeed","title":"EarthBox.MaterialGeometry.WeakSeed.initialize!","text":"Initialize weak seed geometry.\n\nKeyword arguments:\n\nw_seed::Float64:\nWidth in meters of weak seed\nx_seed::Float64:\nx-location in meters of weak seed\ny_seed::Float64:\ny-location in meters of weak seed\n\n\n\n\n\n","category":"function"},{"location":"api/boundary_conditions/bc_managers/transient_bottom_temperature/#EarthBox.BoundaryConditions.TransientBottomTemperature.initialize!","page":"TransientBottomTemperature","title":"EarthBox.BoundaryConditions.TransientBottomTemperature.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize transient bottom temperature boundary conditions by performing the following calculations:\n\nCalculate the distance from the base of the lithosphere to the bottom of the model.\nCalculate the final cooler temperature at the bottom of the model   temperature_bottom_cooler_final using the temperature at the base of the   lithosphere temperature_base_lith, the adiabatic gradient adiabatic_gradient,   and the distance from the base of the lithosphere to the bottom of the model.\nCalculate the initial elevated temperature at the base of the lithosphere  temperature_base_lith_warmer_initial using the temperature at the base of the   temperature_base_lith' and the elevated temperature anomalydeltatemperaturetransient`.\nCalculate the initial elevated temperature at the bottom of the model   temperature_bottom_warmer_initial using the initial elevated temperature   at the base of the lithosphere temperature_base_lith_warmer_initial, the   distance from the base of the lithosphere to the bottom of the model, and the   adiabatic gradient adiabatic_gradient.\n\nThe transient temperature will be the final cooler temperature at the bottom of the model  temperature_bottom_cooler_final which will be applied between the start and end times  specified by the user. This is used to approximate the effects of a plume that rapidly ascends through the lithosphere, spreads out at the base of the lithosphere, and  cools over time.\n\nArguments\n\nmodel::ModelData: Model data object containing model parameters and arrays.\n\nOptional Keyword Arguments\n\niuse_bottom_transient::Int64: \nFlag to use transient temperature at the bottom boundary\ndelta_temperature_transient::Float64: \nTemperature perturbation for initial transient temperature at the bottom boundary\ntemperature_base_lith::Float64: \nInitial temperature at the base of the lithosphere in Kelvin\nFor cases where an transient bottom temperatures this parameter is the final cooler temperature   at the base of the lithosphere. If an AnalyticalThreeLayer model is used, the temperature  at the base of the lithosphere (temperature_base_lith) is updated to the warmer value  when calculating the initial geotherm.\nstart_time_bottom_transient::Float64: \nStart time (Myr) for transient temperature at the bottom boundary\nend_time_bottom_transient::Float64: \nEnd time (Myr) for transient temperature at the bottom boundary\nadiabatic_gradient::Float64: \nAdiabatic gradient in K/km\n\n\n\n\n\n","category":"function"},{"location":"api/material_geometry/sandbox/#Sandbox","page":"Sandbox","title":"Sandbox","text":"The Sandbox material geometry is composed of sand layers, ramps, and weak boundary layers used in contractional and extensional sandbox models.","category":"section"},{"location":"api/material_geometry/sandbox/#Initialization","page":"Sandbox","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/sandbox/#EarthBox.MaterialGeometry.Sandbox.initialize!","page":"Sandbox","title":"EarthBox.MaterialGeometry.Sandbox.initialize!","text":"Initialize sandbox geometry.\n\nKeyword arguments:\n\nnsand_layers::Int:\nNumber of sand layers used in sandbox extension and shortening models\ny_sand_air_interface::Float64:\nY-location in meters of interface between sand and air along the left boundary used in sandbox extension and shortening models\ny_top_microbeads::Union{Float64, Nothing}:\nY-location in meters of top of microbeads used in sandbox shortening models\ny_bottom_microbeads::Union{Float64, Nothing}:\nY-location in meters of bottom of microbeads used in sandbox shortening models\nx_left_ramp::Union{Float64, Nothing}:\nX-location in meters of left-edge of ramp used in sandbox shortening models\nx_right_ramp::Union{Float64, Nothing}:\nX-location in meters of right-edge of ramp used in sandbox shortening models\nramp_dip_deg::Union{Float64, Nothing}:\nDip of ramp in degrees used in sandbox shortening models used in sandbox shortening models\npdms_layer_width::Union{Float64, Nothing}:\nWidth in meters of PDMS (polydimethylsiloxane) layer located in the central bottom part of model used in sandbox extension models\npdms_layer_thickness::Union{Float64, Nothing}:\nThickness in meters of PDMS (polydimethylsiloxane) layer used in sandbox extension models\n\n\n\n\n\n","category":"function"},{"location":"api/material_geometry/rayleigh_taylor/#RayleighTaylor","page":"RayleighTaylor","title":"RayleighTaylor","text":"The RayleighTaylor material geometry is composed of a interface perturbation used to initialize an instability in benchmarks of compositional convection.","category":"section"},{"location":"api/material_geometry/rayleigh_taylor/#Initialization","page":"RayleighTaylor","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/rayleigh_taylor/#EarthBox.MaterialGeometry.RayleighTaylor.initialize!","page":"RayleighTaylor","title":"EarthBox.MaterialGeometry.RayleighTaylor.initialize!","text":"Initialize Rayleigh Taylor geometry.\n\nKeyword arguments:\n\ndepth_interface_h1::Float64:\nDepth in meters of the interface for Rayleigh-Taylor instability\nwave_length_lambda::Float64:\nWavelength in meters of the perturbation for Rayleigh-Taylor instability\namplitude_initial::Float64:\nInitial amplitude in meters of the perturbation for Rayleigh-Taylor instability\n\n\n\n\n\n","category":"function"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/marker_failure_prop_update/#Marker-Failure-Properties-Update-Steps","page":"Marker Failure Properties Update Steps","title":"Marker Failure Properties Update Steps","text":"[1] Update cohesion sigma_cm and friction angle theta_m for each marker m using  equation eq:strain-weakening with marker plastic strain epsilon_m^plastic, initial  fraction angle theta_m^o final fraction angle theta_m^f as described in  eq:final-friction-angle.\n\n[2] Update Update cohesion sigma_cm and friction angle theta_m for melt damage using  equations eq:melt-damage-weakening.","category":"section"},{"location":"benchmarks/models/simple_sedimentation/#Simple-Sedimentation","page":"Simple Sedimentation","title":"Simple Sedimentation","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:simple_sedimentation);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 1.92316\nMax relative error: 0.060 %\nMax relative error limit: 10.000 %\n\nTest Successful: max relative error is not greater than limit: 0.060% <= 10.000%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_17-20-26/simple_sedimentation_output\n\n(Image: Simple Sedimentation Benchmark (Topography))","category":"section"},{"location":"benchmarks/models/simple_sedimentation/#fig:simple-sedimentation","page":"Simple Sedimentation","title":"fig:simple-sedimentation","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/melt_extraction/#Melt-Extraction-Update-Steps","page":"Melt Extraction","title":"Melt Extraction Update Steps","text":"[1] Calculate melt drainage divides (Drainage Steps)\n\n[2] Update extractable melt fraction M_extractablem for each marker m using equation  eq:extractable-melt-fraction with melt fraction M_m and and extracted melt fraction M_extractedm.\n\n[3] Update extracted melt fraction M_extractedm for each marker using equation  eq:extracted-melt-fraction after copying current extracted melt fraction to M_extracted^o.\n\n[4] Calculate melt volumetrics for each drainage basin k including number  of magma markers N_magma(k), volume of extrusive volcanic markers V_volcanic(k), and the width of the injection domain W_inj(k) (Melt Volumetrics Steps).\n\n[5] Inject magma at the base of the Moho above melt focusing point in each drainage basin k  (Magma Injection Steps).\n\n[6] Calculate the dimensions of molten domain for each drainage basin k including the width of the molten zone W_moltenk, the mid point of the molten zone x_moltenk, and the depth of the molten zone at the mid point y_moltenk. The molten zone includes all markers within the drainage basin k that have a composition of normal gabbroic magma, partially molten gabbro, fractionated gabbroic magma and partially molten fractionated gabbro.\n\n[7] Update marker composition C_m by transforming all mantle markers to a refractory state if M_extractable  0. ","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/melt_extraction/#Drainage-Steps","page":"Melt Extraction","title":"Drainage Steps","text":"[1] Calculate the coordinates (X_topo Y_pm) of the top of the  partially molten zone in the mantle by searching for the shallowest  partially molten mantle marker at each topography grid point.\n\n[2] Apply a low-pass filter similar to eq:low-pass-filter to the  topography grid Y_topo to remove high-frequency noise.\n\n[3] Calculate x-coordinates, X_divides, of N_divides drainage divides,  defined as local low points along the top of the partially molten zone  (X_topo Y_pm^lowpass). For each grid point calculate the slope to  the left s_left and the slope to the right s_right. The right slope  is defined as the next non-zero slope to the right of the grid point. If the  left slope is positive and the right slope is negative, the midpoint between the current grid point and the next grid point where the right slope is  negative is a drainage divide. Note that the convention used here involves  the y-coordinates increasing downward. Drainage divides are assumed at the  left and right boundaries of the model. ","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/melt_extraction/#Melt-Volumetrics-Steps","page":"Melt Extraction","title":"Melt Volumetrics Steps","text":"[1] Calculate the number of partially molten mantle markers.\n\n[2] Calculate the total number of magma markers N_magmatotk in  drainage basin k if all extractable melt were consolidated into a single  body using equation eq:total-magma-markers with M_extractablem and R_meltk^o.\n\n[3] Calculate the number of magma markers available for emplacement or extrusion N_magmak using equation eq:available-magma-markers with N_magmatotk.\n\n[4] Update the residual fractional melt R_melt(k) using equation eq:residual-melt with N_magmatotk and N_magmak.\n\n[5] Calculate the total extractable magma volume V_magmak using equation eq:total-extractable-magma-volume with N_magmak.\n\n[6] Calculate the characteristic magmatic crust height H_mck using equation eq:char-magmatic-crust-height with V_magmak.\n\n[7] Calculate the number of volcanic markers that are available for extrusion N_volcanick using equation eq:volcanic-markers with N_magmak and H_mck.\n\n[8] Calculate the volcanic extrusion volume V_volk for the current  drainage basin k using equation eq:volcanic-extrusion-volume with N_volcanick.\n\n[9] Update the number of magma markers N_magmak to account for the number of marker that will be extruded N_volcanick using equation  eq:magma-markers-final.\n\n[10] Calculate the volume of magma available for emplacement V_magmak using equation eq:magma-volume-final with N_magmak.\n\n[11] Calculate the injection height H_inj using equation eq:injection-height with V_magmak.\n\n[12] Calculate the injection width W_injk for magma emplacement at the base of the Moho taking into account the injection height limit H_injlimit using equation eq:injection-width with V_magmak and H_inj. ","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/melt_extraction/#Magma-Injection-Steps","page":"Melt Extraction","title":"Magma Injection Steps","text":"For N_magma(k) markers do:\n\n[1] Determine the coordinates (x_shallow y_shallow) of the shallowest partially molten mantle marker in drainage basin k.\n\n[2] Determine the coordinates (x_shallow y_shallow) of the shallowest marker with index m_shallow below the Moho within a subdomain of the injection domain centered on  (x_shallow y_shallow) with width W_injk. The injection domain is divided into N_sub subdomains that are selected based on a normal  probability distribution.\n\n[3] Update marker composition C_m by transforming marker with  index m_shallow to a gabbroic magma marker. Adjust marker  parameters for transformation to magma and injection conditions:","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/melt_extraction/#eq:magma-parameter-adjustment","page":"Melt Extraction","title":"eq:magma-parameter-adjustment","text":"beginsplit\n    sigma_xxm = sigma_xym =  epsilon_m = \n    epsilon_plasticm = dotepsilon_xxm = dotepsilon_xym = \n    M_m = M_extractablem = M_extractedm = R_serp = 0\n    theta_m = theta_mattext quad R_sr = 1text\n    quad T_m = T_injection\nendsplit\n\nwhere theta_mat is the initial friction angle for the material  associated with the marker and T_injection is the melt injection  temperature.","category":"section"},{"location":"benchmarks/benchmarks/#Benchmarks","page":"Benchmarks","title":"Benchmarks","text":"Benchmarks can be run for each individual benchmark case or in batch mode.\n\nFor single execution and a description of each benchmark see  Single Benchmark Execution. For batch execution see  Batch Benchmark Execution.\n\nwarning: execution time\nSome benchmarks (e.g. couette flow and channel flow cases) may only take a few minutes to run on modern multithreaded hardware while other may take a half an hour to multiple hours.\n\nThe links provide more details about each benchmark packaged with EarthBox including results:\n\nCouette Flow with Viscous Heating\nChannel Flow Variable Conductivity\nChannel Flow Non-steady Temperature\nChannel Flow Non-Newtonian\nSolid Body Rotation\nRayleigh Taylor Instability\nElastic Slab\nViscoelastic Stress Buildup\nBox Convection Isoviscous 1a\nPlasticity Benchmark Kaus10\nSeafloor Spreading\nFlexure Triangular Hole\nViscoelastic Extension\nViscoelastic Contraction\nSimple Sedimentation","category":"section"},{"location":"benchmarks/benchmarks/#Benchmark-Model-Inputs","page":"Benchmarks","title":"Benchmark Model Inputs","text":"All benchmarks packages with EarthBox are located in src/benchmarks/models. Inputs are defined using yaml formatted input files model.yaml and materials.yaml. The material library used for benchmarks is located at  src/material_library/registries/benchmarks/benchmarks.yml.","category":"section"},{"location":"models/regional/iberia/#Magma-poor-Extension:-Iberia","page":"Magma Poor Margin: Iberia","title":"Magma-poor Extension: Iberia","text":"see EarthBox/regional/iberia","category":"section"},{"location":"api/melt_model/melt_extraction/#MeltExtraction","page":"MeltExtraction","title":"MeltExtraction","text":"Melt is incrementally extracted from migration domains defined by local  maxima (-y is in upward direction) along the top of the partially molten region of the mantle. The top of the partially molten region can be  smoothed using the parameter smoothing_radius_drainage. \n\nThe total volume of melt to be extracted is calculated based on the  volume of melt in the partially molten mantle region and the extraction  fraction.\n\nExtracted melt is instantaneously emplaced using one of two models:     1. Partially Molten Emplacement (iuse_shallow_mantle_emplacement = 0):          melt is emplaced at the shallowest marker of the partially molten mantle          in a given migration domain.     2. Mantle Emplacement (iuse_shallow_mantle_emplacement = 1): melt is          emplaced at the shallowest marker of the mantle located within an          injection width centered on the local maximum of the partially molten          mantle domain. The injection width is controlled by the characteristic          injection width parameter and will be automatically adjusted to ensure          emplaced magma height does not exceed a threshold (magma_height_limit).\n\nTo improve computational efficiency a subset of the mantle domain is searched for the shallowest mantle marker. The mantle search width  defines the width of this search domain, which is centered on the initial shallowest partially molten mantle marker. The mantle search domain  should be larger than the injection width otherwise erroneous injection  may occur. A warning is printed if the injection domain is outside of the  mantle search domain.\n\nEmplacement can be controlled by a probabilistic normal distribution  model by setting userandominjection_subdomain to True. With this option the injection width is divided into injection subdomains selected using  a normal probability distribution function. The shallowest mantle marker  within the selected subdomain is converted into magma.\n\nThe effects of fractionation in sills can be approximated by setting iuse_gabbroic_fractionation = 1. This model changes the composition of gabbroic magma to fractionated gabbroic magma once magma enters the crustal domain. Entry into the crustal domain is controlled by the fractionation_threshold_limit parameter which is the distance from the Moho where the composition of gabbroic magma is changed to fractionated or layered gabbroic magma. This change in composition involves an increase in the solidus leading to regions of partially molten fractioned gabbro as opposed to large regions of pure gabbroic magma inconsistent with geophysical observations.","category":"section"},{"location":"api/melt_model/melt_extraction/#Initialization","page":"MeltExtraction","title":"Initialization","text":"","category":"section"},{"location":"api/melt_model/melt_extraction/#EarthBox.MeltModel.Extraction.initialize!","page":"MeltExtraction","title":"EarthBox.MeltModel.Extraction.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize melt extraction model parameters.\n\nArguments\n\nmodel::ModelData: The model data container containing the    model parameters and arrays.\n\nKeyword Arguments\n\niuse_extraction::Int64\nInteger flag that activates melt extraction model (0 = off, 1 = on). Extraction is required for intrusive and extrusive processes.\niuse_shallow_mantle_injection::Int64\nInteger flag that activates shallow mantle injection model: 0 off; 1 on. This model is used to inject mantle-derived magma at the shallowest part of the mantle domain. If this option is False then mantle-derived magma is injected at the shallowest location of the partially molten mantle domain. This option approximates rapid ascent of melt from the mantle to the crustal domain via dykes and channelized melt networks.\nsmoothing_radius_drainage::Float64\nSmoothing radius (meters) used to smooth the top of the partially molten mantle domain before calculating local maxima used to define migration domains for melt extraction.\nsmoothing_radius_fractionation::Float64\nSmoothing radius (meters) used to smooth the oceanic Moho for the  gabbroic fractionation model whereby fractionation occurs based on distance to Moho. Smoothing the Moho avoids spikes associated with residual gabbroic particles in the mantle associated with magmatic crust thinning.\ncharacteristic_injection_width::Float64\nCharacteristic width (meters) of magma injection into the shallow mantle above the local maximum of the mantle partial melt domain. This parameters is used only if useshallowmantle_injection is True. Note that the actual injection width may be increased if the height of injected magma exceeds the magma height limit.\nmantle_search_width::Float64\nWidth (meters) of the mantle domain used to search for the shallowest mantle marker in a subset of the model domain to improve computational efficiency. This parameter is used only if useshallowmantle_injection is True and may need to be adjusted depending on the characteristic injection width. Adjustments should be made to ensure that the search domain is equal to or larger than the injection domain.\nmagma_height_limit::Float64\nMaximum height (meters) of magma that can be injected into the mantle domain. This is used to limit the height of magma bodies that are injected at the top of the mantle domain by increasing the injection width.\niuse_random_injection_subdomain::Int64\nInteger flag that activates the random injection model (0 = off, 1 = on) whereby the characteristic injection width (characteristicinjectionwidth) is divided into subdomains (numberofinjection_subdomains) that are selected using a uniform distribution. The shallowest mantle marker within a selected subdomain is converted into magma. If this option is False then the shallowest mantle marker within the injection width is converted into magma.\niuse_normal_injection_subdomain::Int64\nInteger flag that activates the normal injection model (0 = off, 1 = on) whereby the characteristic injection width (characteristicinjectionwidth) is divided into subdomains (numberofinjection_subdomains) that are selected using a normal distribution. The shallowest mantle marker within a selected subdomain is converted into magma. If this option is False then a uniform distribution is used to select the subdomain.\nnumber_of_injection_subdomains::Int64\nThe number used to divide the characteristic injection width into separate domains that are selected using a normal distribution if iuse_random_injection_subdomain = 1.\nemplacement_temperature::Float64\nTemperature at which magma is emplaced in Kelvin. This parameter is currently not used in the code. Instead a default value of 1473.0 K is used.See function transform_marker_to_magma for details.\niuse_gabbroic_fractionation::Int64\nInteger flag that activates gabbroic fractionation model: 0 off; 1 on. This model is used to approximate the effects of rapid fractionation in sills that produce layered gabbroic magma. This is accomplished by transforming gabbroic magma to a fractionated gabbroic magma composition once magma enters the crustal domain at the Moho.\nfractionation_threshold_limit::Float64\nThreshold limit (meters) for gabbroic fractionation. This is the distance from Moho where the composition of gabbroic magma is changed to fractionated or layered gabbroic magma to simulate the effects of rapid fractionation in sills and the downward flow of the gabbro glacier. This change in composition involves an increase in the solidus leading to regions of partially molten fractioned gabbro as opposed to large regions of pure gabbroic magma inconsistent with geophysical observations.\nmaximum_shallow_injection_depth::Float64\nMaximum submud depth (meters) for normal shallow mantle injection. If the local maximum of the partially molten zone is deeper than this value then the injection width is increased by a factor of 5. THIS IS CURRENTLY TURNED OFF IN CODE. See function extractpartialmeltandmakemagmabody for details.\nextraction_fraction::Float64\nFraction of extracted melt that is extracted from the partially molten zone. The remaining melt is left in the partially molten zone and refertalizes the mantle.\n\n\n\n\n\n","category":"function"},{"location":"model_data/collections/geometry/","page":"Geometry","title":"Geometry","text":"Geometry\n\nParameters\nStickyAirGeometry\nEarthLayering\nWeakSeed\nWeakFault\nLithoStrongZones\nPlume\nCrustalHole\nRayleighTaylor\nMobileWall\nSandbox\nInternalVelocityZone\nFractureZone","category":"section"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.Geometry","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.Geometry","text":"Geometry <: CollectionContainer\n\nStruct containing material geometry parameters.\n\nFields\n\nparameters::Parameters: Parameter groups for material geometry.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.Parameters","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nCollection of geometry parameters.\n\nFields\n\nsticky_air_geometry::StickyAirGeometry: Sticky air layer geometry parameters\nearth_layering::EarthLayering: Earth layering parameters\nweak_seed::WeakSeed: Weak seed parameters\nweak_fault::WeakFault: Weak fault parameters  \nlitho_strong_zones::LithoStrongZones: Lithospheric strong zone parameters\nplume::Plume: Mantle plume parameters\ncrustal_hole::CrustalHole: Crustal hole parameters\nrayleigh_taylor::RayleighTaylor: Rayleigh-Taylor instability parameters\nmobile_wall::MobileWall: Mobile wall parameters\nsandbox::Sandbox: Sandbox experiment parameters\ninternal_velocity_zone::InternalVelocityZone: Internal velocity zone parameters\nfracture_zone::FractureZone: Fracture zone parameters\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.StickyAirGeometryGroup.StickyAirGeometry","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.StickyAirGeometryGroup.StickyAirGeometry","text":"StickyAirGeometry <: AbstractParameterGroup\n\nParameter group for sticky air geometry parameters.\n\nFields\n\nthick_air::ParameterFloat: Thickness in meters of sticky air in meters\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\nthick_air = model.geometry.parameters.sticky_air_geometry.thick_air.value\n\nConstructor\n\nStickyAirGeometry()\n\nCreate a new StickyAirGeometry parameter group with default values.\n\nReturns\n\nStickyAirGeometry: New StickyAirGeometry parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.EarthLayeringGroup.EarthLayering","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.EarthLayeringGroup.EarthLayering","text":"EarthLayering <: AbstractParameterGroup\n\nParameter group for Earth layering geometry parameters.\n\nFields\n\nthick_upper_crust::ParameterFloat: Thickness in meters of upper crust\nthick_lower_crust::ParameterFloat: Thickness in meters of lower crust\nthick_upper_lith::ParameterFloat: Thickness in meters of upper mantle lithosphere\nthick_middle_lith::ParameterFloat: Thickness in meters of middle lithosphere\nthick_lower_lith::ParameterFloat: Thickness in meters of lower mantle lithosphere\nthick_lith::ParameterFloat: Thickness in meters of lithosphere\nthick_crust::ParameterFloat: Thickness in meters of crust\nthick_mantle_lith::ParameterFloat: Thickness in meters of mantle lithosphere\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of  parameter objects\n\nNested Dot Access\n\nthick_upper_crust = model.geometry.parameters.earth_layering.thick_upper_crust.value\nthick_lower_crust = model.geometry.parameters.earth_layering.thick_lower_crust.value\nthick_upper_lith = model.geometry.parameters.earth_layering.thick_upper_lith.value\nthick_middle_lith = model.geometry.parameters.earth_layering.thick_middle_lith.value\nthick_lower_lith = model.geometry.parameters.earth_layering.thick_lower_lith.value\nthick_lith = model.geometry.parameters.earth_layering.thick_lith.value\nthick_crust = model.geometry.parameters.earth_layering.thick_crust.value\nthick_mantle_lith = model.geometry.parameters.earth_layering.thick_mantle_lith.value\n\nConstructor\n\nEarthLayering()\n\nCreate a new EarthLayering parameter group with default values (NaN indicates unset  parameters).\n\nReturns\n\nEarthLayering: New EarthLayering parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.WeakSeedGroup.WeakSeed","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.WeakSeedGroup.WeakSeed","text":"WeakSeed <: AbstractParameterGroup\n\nParameter group for weak seed geometry parameters.\n\nFields\n\nw_seed::ParameterFloat: Width in meters of weak seed\nx_seed::ParameterFloat: x-location in meters of weak seed\ny_seed::ParameterFloat: y-location in meters of weak seed\niuse_weak_seed::ParameterInt: Use weak seed (0=off, 1=on)\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of  parameter objects\n\nNested Dot Access\n\nw_seed = model.geometry.parameters.weak_seed.w_seed.value\nx_seed = model.geometry.parameters.weak_seed.x_seed.value\ny_seed = model.geometry.parameters.weak_seed.y_seed.value\niuse_weak_seed = model.geometry.parameters.weak_seed.iuse_weak_seed.value\n\nConstructor\n\nWeakSeed()\n\nCreate a new WeakSeed parameter group with default values.\n\nReturns\n\nWeakSeed: New WeakSeed parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.WeakFaultGroup.WeakFault","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.WeakFaultGroup.WeakFault","text":"WeakFault <: AbstractParameterGroup\n\nParameter group for weak fault geometry parameters.\n\nFields\n\nfault_dip_degrees::ParameterFloat: Dip in degrees of the weak zone used to approximate a fault\nfault_thickness::ParameterFloat: Thickness in meters of the weak zone used to approximate a fault\nx_initial_fault::ParameterFloat: Initial x-coordinate in meters of the weak zone used to approximate a fault\nfault_height::ParameterFloat: Height in meters of the weak zone used to approximate a fault\niuse_weak_fault::ParameterInt: Use weak fault (0=off, 1=on)\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of    parameter objects\n\nNested Dot Access\n\nfault_dip_degrees = model.geometry.parameters.weak_fault.fault_dip_degrees.value\nfault_thickness = model.geometry.parameters.weak_fault.fault_thickness.value\nx_initial_fault = model.geometry.parameters.weak_fault.x_initial_fault.value\nfault_height = model.geometry.parameters.weak_fault.fault_height.value\niuse_weak_fault = model.geometry.parameters.weak_fault.iuse_weak_fault.value\n\nConstructor\n\nWeakFault()\n\nCreate a new WeakFault parameter group with default values.\n\nReturns\n\nWeakFault: New WeakFault parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.LithoStrongZonesGroup.LithoStrongZones","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.LithoStrongZonesGroup.LithoStrongZones","text":"LithoStrongZones <: AbstractParameterGroup\n\nParameter group for lithospheric strong zones geometry parameters.\n\nFields\n\nx_left_strong::ParameterFloat: x-coordinate in meters of the left edge of the lithospheric strong zone\nx_right_strong::ParameterFloat: x-coordinate in meters of the right edge of the lithospheric strong zone\niuse_strong_zones::ParameterInt: Use strong zones (0=off, 1=on)\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter   objects\n\nNested Dot Access\n\nx_left_strong = model.geometry.parameters.litho_strong_zones.x_left_strong.value\nx_right_strong = model.geometry.parameters.litho_strong_zones.x_right_strong.value\niuse_strong_zones = model.geometry.parameters.litho_strong_zones.iuse_strong_zones.value\n\nConstructor\n\nLithoStrongZones()\n\nCreate a new LithoStrongZones parameter group with default values.\n\nReturns\n\nLithoStrongZones: New LithoStrongZones parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.PlumeGroup.Plume","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.PlumeGroup.Plume","text":"Plume <: AbstractParameterGroup\n\nParameter group for mantle plume geometry parameters.\n\nFields\n\nplume_radius::ParameterFloat: Radius in meters of the mantle plume\nplume_center_x::ParameterFloat: x-coordinate in meters of the plume center\nplume_center_y::ParameterFloat: y-coordinate in meters of the plume center\nplume_head_thick::ParameterFloat: Thickness in meters of the plume head\ndelta_temperature_plume::ParameterFloat: Temperature difference of the plume relative to background mantle\niuse_plume::ParameterInt: Flag for using plume (0=off, 1=on)\nplume_start_time::ParameterFloat: Time in Myr when plume starts\niplume_state::ParameterInt: State of the plume: 0 - not initiated; 1 = initiated\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of    parameter objects\n\nNested Dot Access\n\nplume_radius = model.geometry.parameters.plume.plume_radius.value\nplume_center_x = model.geometry.parameters.plume.plume_center_x.value\nplume_center_y = model.geometry.parameters.plume.plume_center_y.value\nplume_head_thick = model.geometry.parameters.plume.plume_head_thick.value\ndelta_temperature_plume = model.geometry.parameters.plume.delta_temperature_plume.value\niuse_plume = model.geometry.parameters.plume.iuse_plume.value\nplume_start_time = model.geometry.parameters.plume.plume_start_time.value\niplume_state = model.geometry.parameters.plume.iplume_state.value\n\nConstructor\n\nPlume()\n\nCreate a new Plume parameter group with default values.\n\nReturns\n\nPlume: New Plume parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.CrustalHoleGroup.CrustalHole","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.CrustalHoleGroup.CrustalHole","text":"CrustalHole <: AbstractParameterGroup\n\nParameter group for crustal hole geometry parameters.\n\nFields\n\nxhole_start::ParameterFloat: x-coordinate in meters of the start of the crustal hole\nxhole_middle::ParameterFloat: x-coordinate in meters of the middle of the crustal hole\nxhole_end::ParameterFloat: x-coordinate in meters of the end of the crustal hole\nxhole_depth::ParameterFloat: Depth in meters of the crustal hole\nobj_list::Vector{Union{[ParameterFloat](@ref)}}: List of parameter objects\n\nNested Dot Access\n\nxhole_start = model.geometry.parameters.crustal_hole.xhole_start.value\nxhole_middle = model.geometry.parameters.crustal_hole.xhole_middle.value\nxhole_end = model.geometry.parameters.crustal_hole.xhole_end.value\nxhole_depth = model.geometry.parameters.crustal_hole.xhole_depth.value\n\nConstructor\n\nCrustalHole()\n\nCreate a new CrustalHole parameter group with default values.\n\nReturns\n\nCrustalHole: New CrustalHole parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.RayleighTaylorGroup.RayleighTaylor","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.RayleighTaylorGroup.RayleighTaylor","text":"RayleighTaylor <: AbstractParameterGroup\n\nParameter group for Rayleigh-Taylor instability geometry parameters.\n\nFields\n\ndepth_interface_h1::ParameterFloat: Depth in meters of the interface for Rayleigh-Taylor instability\nwave_length_lambda::ParameterFloat: Wavelength in meters of the perturbation for Rayleigh-Taylor instability\namplitude_initial::ParameterFloat: Initial amplitude in meters of the perturbation for Rayleigh-Taylor instability\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\ndepth_interface_h1 = model.geometry.parameters.rayleigh_taylor.depth_interface_h1.value\nwave_length_lambda = model.geometry.parameters.rayleigh_taylor.wave_length_lambda.value\namplitude_initial = model.geometry.parameters.rayleigh_taylor.amplitude_initial.value\n\nConstructor\n\nRayleighTaylor()\n\nCreate a new RayleighTaylor parameter group with default values.\n\nReturns\n\nRayleighTaylor: New RayleighTaylor parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.MobileWallGroup.MobileWall","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.MobileWallGroup.MobileWall","text":"MobileWall <: AbstractParameterGroup\n\nParameter group for mobile wall geometry parameters.\n\nFields\n\nx_left_mobile_wall::ParameterFloat: X-location in meters of left-edge of mobile wall used in sandbox extension and shortening models\nx_right_mobile_wall::ParameterFloat: X-location in meters of right-edge of mobile wall used in sandbox extension and shortening models\ny_top_mobile_wall::ParameterFloat: Y-location in meters of top-edge of mobile wall used in sandbox extension and shortening models\ny_bottom_mobile_wall::ParameterFloat: Y-location in meters of bottom-edge of mobile wall used in sandbox extension and shortening models\nplate_extension_width::ParameterFloat: Width in meters of plate extension used in sandbox extension models\nplate_extension_thickness::ParameterFloat: Thickness in meters of plate extension used in sandbox extension models\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\nx_left_mobile_wall = model.geometry.parameters.mobile_wall.x_left_mobile_wall.value\nx_right_mobile_wall = model.geometry.parameters.mobile_wall.x_right_mobile_wall.value\ny_top_mobile_wall = model.geometry.parameters.mobile_wall.y_top_mobile_wall.value\ny_bottom_mobile_wall = model.geometry.parameters.mobile_wall.y_bottom_mobile_wall.value\nplate_extension_width = model.geometry.parameters.mobile_wall.plate_extension_width.value\nplate_extension_thickness = model.geometry.parameters.mobile_wall.plate_extension_thickness.value\n\nConstructor\n\nMobileWall()\n\nCreate a new MobileWall parameter group with default values.\n\nReturns\n\nMobileWall: New MobileWall parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.SandboxGroup.Sandbox","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.SandboxGroup.Sandbox","text":"Sandbox <: AbstractParameterGroup\n\nParameter group for sandbox model geometry parameters.\n\nFields\n\nnsand_layers::ParameterInt: Number of sand layers used in sandbox extension and shortening models\ny_sand_air_interface::ParameterFloat: Y-location in meters of interface between sand and air along the left boundary used in sandbox extension and shortening models\ny_top_microbeads::ParameterFloat: Y-location in meters of top of microbeads used in sandbox shortening models\ny_bottom_microbeads::ParameterFloat: Y-location in meters of bottom of microbeads used in sandbox shortening models\nx_left_ramp::ParameterFloat: X-location in meters of left-edge of ramp used in sandbox shortening models\nx_right_ramp::ParameterFloat: X-location in meters of right-edge of ramp used in sandbox shortening models\nramp_dip_deg::ParameterFloat: Dip of ramp in degrees used in sandbox shortening models used in sandbox shortening models\npdms_layer_width::ParameterFloat: Width in meters of PDMS (polydimethylsiloxane) layer located in the central bottom part of model used in sandbox extension models\npdms_layer_thickness::ParameterFloat: Thickness in meters of PDMS (polydimethylsiloxane) layer used in sandbox extension models\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}`: List of    parameter objects\n\nNested Dot Access\n\nnsand_layers = model.geometry.parameters.sandbox.nsand_layers.value\ny_sand_air_interface = model.geometry.parameters.sandbox.y_sand_air_interface.value\ny_top_microbeads = model.geometry.parameters.sandbox.y_top_microbeads.value\ny_bottom_microbeads = model.geometry.parameters.sandbox.y_bottom_microbeads.value\nx_left_ramp = model.geometry.parameters.sandbox.x_left_ramp.value\nx_right_ramp = model.geometry.parameters.sandbox.x_right_ramp.value\nramp_dip_deg = model.geometry.parameters.sandbox.ramp_dip_deg.value\npdms_layer_width = model.geometry.parameters.sandbox.pdms_layer_width.value\npdms_layer_thickness = model.geometry.parameters.sandbox.pdms_layer_thickness.value\n\nConstructor\n\nSandbox()\n\nCreate a new Sandbox parameter group with default values.\n\nReturns\n\nSandbox: New Sandbox parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.InternalVelocityZoneGroup.InternalVelocityZone","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.InternalVelocityZoneGroup.InternalVelocityZone","text":"InternalVelocityZone <: AbstractParameterGroup\n\nParameter group for internal velocity zone geometry parameters.\n\nFields\n\nxindex_vx_internal::ParameterInt: X-index for internal vx velocity\nyindex_min_vx_internal::ParameterInt: Minimum y-index for internal vx velocity\nyindex_max_vx_internal::ParameterInt: Maximum y-index for internal vx velocity\nxindex_vy_internal::ParameterInt: X-index for internal vy velocity\nyindex_min_vy_internal::ParameterInt: Minimum y-index for internal vy velocity\nyindex_max_vy_internal::ParameterInt: Maximum y-index for internal vy velocity\nx_vx_internal::ParameterFloat: X-coordinate in meters for internal vx velocity\ny_min_vx_internal::ParameterFloat: Minimum y-coordinate in meters for internal vx velocity\ny_max_vx_internal::ParameterFloat: Maximum y-coordinate in meters for internal vx velocity\nx_vy_internal::ParameterFloat: X-coordinate in meters for internal vy velocity\ny_min_vy_internal::ParameterFloat: Minimum y-coordinate in meters for internal vy velocity\ny_max_vy_internal::ParameterFloat: Maximum y-coordinate in meters for internal vy velocity\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of  parameter objects\n\nNested Dot Access\n\nxindex_vx_internal = model.geometry.parameters.internal_velocity_zone.xindex_vx_internal.value\nyindex_min_vx_internal = model.geometry.parameters.internal_velocity_zone.yindex_min_vx_internal.value\nyindex_max_vx_internal = model.geometry.parameters.internal_velocity_zone.yindex_max_vx_internal.value\nxindex_vy_internal = model.geometry.parameters.internal_velocity_zone.xindex_vy_internal.value\nyindex_min_vy_internal = model.geometry.parameters.internal_velocity_zone.yindex_min_vy_internal.value\nyindex_max_vy_internal = model.geometry.parameters.internal_velocity_zone.yindex_max_vy_internal.value\nx_vx_internal = model.geometry.parameters.internal_velocity_zone.x_vx_internal.value\ny_min_vx_internal = model.geometry.parameters.internal_velocity_zone.y_min_vx_internal.value\ny_max_vx_internal = model.geometry.parameters.internal_velocity_zone.y_max_vx_internal.value\nx_vy_internal = model.geometry.parameters.internal_velocity_zone.x_vy_internal.value\ny_min_vy_internal = model.geometry.parameters.internal_velocity_zone.y_min_vy_internal.value\ny_max_vy_internal = model.geometry.parameters.internal_velocity_zone.y_max_vy_internal.value\n\nConstructor\n\nInternalVelocityZone()\n\nCreate a new InternalVelocityZone parameter group with default values.\n\nReturns\n\nInternalVelocityZone: New InternalVelocityZone parameter group with initialized default  values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/geometry/#EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.FractureZoneGroup.FractureZone","page":"Geometry","title":"EarthBox.ModelDataContainer.GeometryContainer.ParameterCollection.FractureZoneGroup.FractureZone","text":"FractureZone <: AbstractParameterGroup\n\nParameter group for fracture zone geometry parameters.\n\nFields\n\nsediment_thickness::ParameterFloat: Thickness in meters of sediment layer\nbasaltic_oceanic_crust_thickness::ParameterFloat: Thickness in meters of basaltic oceanic crust layer\ngabbroic_oceanic_crust_thickness::ParameterFloat: Thickness in meters of gabbroic oceanic crust layer\nthickness_of_younger_lithosphere::ParameterFloat: Thickness in meters of younger lithosphere\nthickness_of_older_lithosphere::ParameterFloat: Thickness in meters of older lithosphere\nthickness_of_weak_lithosphere::ParameterFloat: Thickness in meters of weak lithosphere\nx_fracture_zone_start::ParameterFloat: Start of fracture zone in x-direction in meters\nx_fracture_zone_end::ParameterFloat: End of fracture zone in x-direction in meters\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of  parameter objects\n\nNested Dot Access\n\nsediment_thickness = model.geometry.parameters.fracture_zone.sediment_thickness.value\nbasaltic_oceanic_crust_thickness =    model.geometry.parameters.fracture_zone.basaltic_oceanic_crust_thickness.value\ngabbroic_oceanic_crust_thickness =    model.geometry.parameters.fracture_zone.gabbroic_oceanic_crust_thickness.value\nthickness_of_younger_lithosphere =  model.geometry.parameters.fracture_zone.thickness_of_younger_lithosphere.value\nthickness_of_older_lithosphere =   model.geometry.parameters.fracture_zone.thickness_of_older_lithosphere.value\nthickness_of_weak_lithosphere =   model.geometry.parameters.fracture_zone.thickness_of_weak_lithosphere.value\nx_fracture_zone_start =   model.geometry.parameters.fracture_zone.x_fracture_zone_start.value\nx_fracture_zone_end = model.geometry.parameters.fracture_zone.x_fracture_zone_end.value\n\nConstructor\n\nFractureZone()\n\nCreate a new FractureZone parameter group with default values.\n\nReturns\n\nFractureZone: New FractureZone parameter group with initialized default values\n\n\n\n\n\n","category":"type"},{"location":"models/model_execution/remote_execution/#Batch-Remote-Execution","page":"Batch Remote Execution","title":"Batch Remote Execution","text":"Runit.jl scripts that call the function EarthBox.run_earthbox to run  Model.jl and Plot.jl scripts in the background via command line can be run  on remote machines using the function remote_model_loop. See execute_remote_script_in_background for details how passwordless ssh accessed is used for remote execution. \n\nwarning: Linux/Unix Only\nRemote model execution functions are compatible with Linux/Unix operating  systems only.\n\nmodule RunitRemote\n\nusing EarthBox\n\nfunction run_remote_models()\n    model_dir_path = \"/mnt/extradrive1/nfs/apps/julia/EarthBox/models/extension_to_sfs/extension_strong_zones\"\n    models = Dict(\n        \"hostname1\" => [\"case0\", \"case1\"],\n        \"hostname2\" => [\"case0\", \"case1\", \"case2\"],\n    )\n    remote_model_loop(\n        models,\n        model_dir_path,\n        run_model = true,\n        plot_markers = false,\n        plot_scalars = false,\n        istart = 1,\n        iend = 100\n    )\nend\n\nend # module\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    RunitRemote.run_remote_models()\nend","category":"section"},{"location":"models/model_execution/remote_execution/#Remote-Model-Loop","page":"Batch Remote Execution","title":"Remote Model Loop","text":"","category":"section"},{"location":"models/model_execution/remote_execution/#Executing-Remote-Scripts-in-the-Background","page":"Batch Remote Execution","title":"Executing Remote Scripts in the Background","text":"","category":"section"},{"location":"models/model_execution/remote_execution/#EarthBox.RunTools.remote_model_loop","page":"Batch Remote Execution","title":"EarthBox.RunTools.remote_model_loop","text":"remote_model_loop(;\n    models::Dict{String, Vector{String}},\n    model_dir_path::String,\n    run_model::Union{Bool, Nothing} = nothing,\n    plot_markers::Union{Bool, Nothing} = nothing,\n    plot_scalars::Union{Bool, Nothing} = nothing,\n    istart::Union{Int64, Nothing} = nothing,\n    iend::Union{Int64, Nothing} = nothing\n)\n\nExecute a script on a remote machine in the background by looping over the function execute_remote_script_in_background for each model case.\n\n!!! WARNING !!! This function is for Linux/Unix systems only.\n\nArguments\n\nmodels::Dict{String, Vector{String}}\nA dictionary of host names and model case names like:\n\"hostname1\" => [\"case0\", \"case1\", \"case2\"]\n\"hostname2\" => [\"case3\", \"case4\", \"case5\"]\nmodel_dir_path::String\nThe path to the directory that contains the model directories\nrun_model::Union{Bool, Nothing}\nRun the model (default: nothing)\nplot_markers::Union{Bool, Nothing}\nPlot markers (default: nothing)\nplot_scalars::Union{Bool, Nothing}\nPlot scalars (default: nothing)\nistart::Union{Int64, Nothing}\nStart index for plotting (default: nothing)\niend::Union{Int64, Nothing}\nEnd index for plotting (default: nothing)\n\n\n\n\n\n","category":"function"},{"location":"models/model_execution/remote_execution/#EarthBox.RunTools.execute_remote_script_in_background","page":"Batch Remote Execution","title":"EarthBox.RunTools.execute_remote_script_in_background","text":"execute_remote_script_in_background(;\n    hostname::String,\n    model_dir_path::String,\n    model_case_name::String,\n    run_model::Union{Bool, Nothing} = nothing,\n    plot_markers::Union{Bool, Nothing} = nothing,\n    plot_scalars::Union{Bool, Nothing} = nothing,\n    istart::Union{Int64, Nothing} = nothing,\n    iend::Union{Int64, Nothing} = nothing\n)\n\nThis function runs the Runit.jl script on a remote machine in the background as follows:\n\nssh <hostname> 'cd <model_dir_path> && nohup julia --startup=no <model_dir_path>/Runit.jl case_name=<case_name> <runit_actions> <istart_iend> > /dev/null 2>&1 &'\n\nwhere:\n\n<hostname> is the name of the remote machine.\n<model_dir_path> is the path to the directory that contains the model input files and the    Runit.jl script.\n<model_case_name> is the name of the model case like \"case0\", \"case1\", \"case2\", etc.\n<runit_actions> are the actions to be taken by the Runit.jl script like \"runmodel\",     \"plotmarkers\", \"plot_scalars\" or a combination of these separated by spaces.\n<istart_iend> are the starting and ending time steps. For example, \"istart=1 iend=10\".\n\nThe Runit.jl script should be in a model directory that contains Model.jl  and Plot.jl scripts that are properly configured and setup for command-line  execution of the run_earthbox() function. For example, the Runit.jl script  should contain the following code or similar code that achieves the same result:\n\nmodule Runit\n\nusing EarthBox\ninclude(\"Model.jl\")\nimport .Model: EB_PROJECT_PATH, ROOT_PATH_OUTPUT\nrun_earthbox(\n    model_dir = PATH_TO_MODEL_DIRECTORY,\n    eb_project_path_from_script = EB_PROJECT_PATH,\n    root_path_output_from_script = ROOT_PATH_OUTPUT\n    )\n\nend\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    Runit.main()\nend\n\nArguments\n\nhostname::String\nThe name of the remote machine.\nmodel_dir_path::String\nThe path to the directory that contains the model input files and the   Runit.jl script.\nmodel_case_name::String\nThe name of the model case. This is the name of the case that will be   executed as defined in the model script like \"case0\", \"case1\", \"case2\", etc.\nrun_model::Union{Bool, Nothing}\nRun the model (default: nothing)\nplot_markers::Union{Bool, Nothing}\nPlot markers (default: nothing)\nplot_scalars::Union{Bool, Nothing}\nPlot scalars (default: nothing)\nistart::Union{Int64, Nothing}\nStarting time step. Default is 1.\niend::Union{Int64, Nothing}\nEnding time step. Default is nothing.\n\nIt is assumed that passwordless SSH access is configured for the remote machine and hostnames are resolved to IP addresses.\n\nSetting up passwordless SSH access\n\nOn Ubuntu/PopOS/Debian-based systems you can map IP addresses to hostnames in  the /etc/hosts file by editing the file with the following command:\n\nsudo vi /etc/hosts\n\nand adding an IP-address and hostname pair on each line for each remote machine.\n\nPasswordless SSH access can be configured on Ubuntu/PopOS/Debian-based systems by  following the instructions:\n\n[1] Generate SSH key files:\n\nssh-keygen -t rsa\n\nUse id_rsa for the private key that will be located at /home/username/.ssh  and follow the prompts to enter a passphrase or use an empty passphrase. A public key file will also be created that will be shared with the remote  machine (see step [2] below).\n\n[2] Copy the public SSH key to the remote machine:\n\nssh-copy-id <username>@<hostname>\n\n\n\n\n\n","category":"function"},{"location":"api/marker_materials/material_input/#Material-Input","page":"Material Input","title":"Material Input","text":"Material inputs define information associated with each material used in the model and must be provided as an argument to MarkerMaterials.initialize! either in the form of a path to a yamal formatted file or Julia dictionary.\n\nMaterial inputs must include the following information for each material:\n\nInteger ID greater than or equal to 1\nMaterial name (mat_name) from the user selected material collection library file. See   Material Collection Files and MaterialLibrary for information on how to select  and query a material collection library file packaged with EarthBox or build one from scratch.\nMaterial type name (mat_type) that defines evolving genetic characteristics. See   Material Types for more information about material type.\nMaterial domain name (mat_domain) that defines the physical domain associated with the material.  See Material Domains for more information about material domains.\nred-green-blue colors used in EarthBox plotting functions.","category":"section"},{"location":"api/marker_materials/material_input/#Material-Input-Files","page":"Material Input","title":"Material Input Files","text":"Material input files are .yaml files with the following structure:\n\nname: user_defined_name_of_material_model\ndescription: 'Add text to describe this material model'\n1:\n  mat_name: [MaterialCollectionName1, None, ' Material name from material library ']\n  mat_type: [MaterialTypeName1, None, ' Material type ']\n  mat_domain: [MaterialDomainName1, None, ' Material domain ']\n  red_fraction: [1.0, None, ' red_fraction']\n  green_fraction: [1.0, None, ' green_fraction']\n  blue_fraction: [1.0, None, ' blue_fraction ']\n2:\n  mat_name: [MaterialCollectionName2, None, ' Material name from material library ']\n  mat_type: [MaterialTypename2, None, ' Material type ']\n  mat_domain: [MaterialDomainName2, None, ' Material domain ']\n  red_fraction: [0.0, None, ' red_fraction']\n  green_fraction: [1.0, None, ' green_fraction']\n  blue_fraction: [1.0, None, ' blue_fraction ']\n3: ...\n\nwhere MaterialCollectionName1 and MaterialCollection2 are material names from the selected material  collection library file (Material Collection Files), MaterialTypename1 and MaterialTypeName2 are genetic material type names (Material Types), MaterialDomainName1 and MaterialDomainname2 are material domain names (Material Domains), and red_fraction, green_fraction and blue_fraction are RGB color values. The information provided for each information type is in the form of a list with entries for value, units and description. The units are None for the current  implementation and the description can be used for general documentation. \n\nwarning: material ID's\nInteger ID's must be greater than or equal to 1.\n\ninfo: accessing valid names\nValid material, type and domain names and definitions can be accessed using the instructions from MaterialLibrary, Material Types and Material Domains.","category":"section"},{"location":"api/marker_materials/material_input/#Material-Input-Dictionaries","page":"Material Input","title":"Material Input Dictionaries","text":"Material input can also be provided as a Julia dictionary. This gives the user the ability to programmatically access valid material, genetic type names and domain names. The following example uses a material collection library file from EarthBox to build a material input dictionary for a  model with a sticky air/water layer, continental lithosphere, lateral lithospheric strong zones and  melting processes including melt extraction and melt extrusion.\n\nusing EarthBox\n\nMaterialDictType = EarthBoxDtypes.MaterialDictType;\nMaterialsDictType = EarthBoxDtypes.MaterialsDictType;\n\ncollection = MaterialLibrary().lithospheric_deformation.lithospheric_deformation_eb1;\nmat_names = collection.materials;\ntypes = MaterialTypesRegistry();\ndomains = materialDomainsRegistry()\n\nmaterial_input_dict = MaterialsDictType(\n    # Sticky Domain\n    Int16(1) => MaterialDictType(\n        \"mat_name\" => mat_names.sticky_air,\n        \"mat_type\" => types.sticky_air,\n        \"mat_domain\" => domains.atmosphere,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 255/255,\n        \"blue_fraction\" => 255/255,\n    ),\n    Int16(2) => MaterialDictType(\n        \"mat_name\" => mat_names.sticky_water,\n        \"mat_type\" => types.sticky_water,\n        \"mat_domain\" => domains.ocean,\n        \"red_fraction\" => 0/255,\n        \"green_fraction\" => 255/255,\n        \"blue_fraction\" => 255/255,\n    ),\n    # Sedimentary Basin\n    Int16(3) => MaterialDictType(\n        \"mat_name\" => mat_names.clastic_sediment,\n        \"mat_type\" => types.sediment,\n        \"mat_domain\" => domains.sedimentary_basin,\n        \"red_fraction\" => 0.89411765,\n        \"green_fraction\" => 0.58039216,\n        \"blue_fraction\" => 0.28627451,\n    ),\n    # Felsic Continental Crust\n    Int16(4) => MaterialDictType(\n        \"mat_name\" => mat_names.felsic_continental_crust,\n        \"mat_type\" => types.felsic_continental_crust_fertile,\n        \"mat_domain\" => domains.upper_continental_crust,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 153/255,\n        \"blue_fraction\" => 153/255,\n    ),\n    Int16(5) => MaterialDictType(\n        \"mat_name\" => mat_names.felsic_continental_crust_strong_zone,\n        \"mat_type\" => types.felsic_continental_crust_fertile,\n        \"mat_domain\" => domains.upper_continental_crust_strong_zone,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 163/255,\n        \"blue_fraction\" => 163/255,\n    ),\n    # Mafic Continental Crust\n    Int16(6) => MaterialDictType(\n        \"mat_name\" => mat_names.mafic_continental_crust,\n        \"mat_type\" => types.mafic_continental_crust_fertile,\n        \"mat_domain\" => domains.lower_continental_crust,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 200/255,\n        \"blue_fraction\" => 200/255,\n    ),\n    Int16(7) => MaterialDictType(\n        \"mat_name\" => mat_names.mafic_continental_crust_strong_zone,\n        \"mat_type\" => types.mafic_continental_crust_fertile,\n        \"mat_domain\" => domains.lower_continental_crust_strong_zone,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 210/255,\n        \"blue_fraction\" => 210/255,\n    ),\n    # Continental Mantle Lithosphere\n    Int16(8) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_continental_lithosphere,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.upper_mantle_lithosphere,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 153/255,\n        \"blue_fraction\" => 153/255,\n    ),\n    Int16(9) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_continental_lithosphere,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.middle_mantle_lithosphere,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 153/255,\n        \"blue_fraction\" => 153/255,\n    ),\n    Int16(10) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_continental_lithosphere,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.lower_mantle_lithosphere,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 153/255,\n        \"blue_fraction\" => 153/255,\n    ),\n    Int16(11) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_continental_lithosphere_strong_zone,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.lithospheric_mantle_strong_zone,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 163/255,\n        \"blue_fraction\" => 163/255,\n    ),\n    # Asthenosphere\n    Int16(12) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_asthenosphere_dry_fertile,\n        \"mat_type\" => types.ultramafic_mantle_fertile,\n        \"mat_domain\" => domains.asthenosphere,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 200/255,\n        \"blue_fraction\" => 153/255,\n    ),\n    # Partially Molten Asthenosphere\n    Int16(13) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_asthenosphere_dry_fertile,\n        \"mat_type\" => types.ultramafic_mantle_partially_molten,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 150/255,\n        \"blue_fraction\" => 0.0,\n    ),\n    # Refractory Asthenosphere\n    Int16(14) => MaterialDictType(\n        \"mat_name\" => mat_names.ultramafic_asthenosphere_dry_fertile,\n        \"mat_type\" => types.ultramafic_mantle_refactory,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 0.0,\n        \"green_fraction\" => 255/255,\n        \"blue_fraction\" => 0.0,\n    ),\n    # Solidified Gabbro\n    Int16(15) => MaterialDictType(\n        \"mat_name\" => mat_names.oceanic_gabbroic_crust,\n        \"mat_type\" => types.solidified_gabbro,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 227/255,\n        \"green_fraction\" => 227/255,\n        \"blue_fraction\" => 227/255,\n    ),\n    # Partially Molten Gabbro\n    Int16(16) => MaterialDictType(\n        \"mat_name\" => mat_names.oceanic_gabbroic_crust,\n        \"mat_type\" => types.solidified_gabbro_partially_molten,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 125/255,\n        \"blue_fraction\" => 255/255,\n    ),\n    # Extracted Gabbroic Magma\n    Int16(17) => MaterialDictType(\n        \"mat_name\" => mat_names.gabbroic_magma,\n        \"mat_type\" => types.extracted_gabbroic_magma,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 100/255,\n        \"blue_fraction\" => 100/255,\n    ),\n    # Layered Solidified Gabbroic Crust\n    Int16(18) => MaterialDictType(\n        \"mat_name\" => mat_names.layered_gabbroic_crust,\n        \"mat_type\" => types.solidified_layered_gabbro,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 175/255,\n        \"green_fraction\" => 175/255,\n        \"blue_fraction\" => 175/255,\n    ),\n    # Layered Partially Molten Gabbroic Crust\n    Int16(19) => MaterialDictType(\n        \"mat_name\" => mat_names.layered_gabbroic_crust,\n        \"mat_type\" => types.solidified_layered_gabbro_partially_molten,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 0/255,\n        \"blue_fraction\" => 255/255,\n    ),\n    # Layered Gabbroic Magma\n    Int16(20) => MaterialDictType(\n        \"mat_name\" => mat_names.layered_gabbroic_magma,\n        \"mat_type\" => types.extracted_layered_gabbroic_magma,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 0/255,\n        \"blue_fraction\" => 0/255,\n    ),\n    # Extruded Gabbroic Magma (Lava)\n    Int16(21) => MaterialDictType(\n        \"mat_name\" => mat_names.gabbroic_magma,\n        \"mat_type\" => types.extruded_gabbroic_magma,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 255/255,\n        \"green_fraction\" => 255/255,\n        \"blue_fraction\" => 0/255,\n    ),\n    # Solidified Extruded Gabbroic Magma (Basalt)\n    Int16(22) => MaterialDictType(\n        \"mat_name\" => mat_names.oceanic_gabbroic_crust,\n        \"mat_type\" => types.solidified_basalt,\n        \"mat_domain\" => domains.general_domain,\n        \"red_fraction\" => 168/255,\n        \"green_fraction\" => 45/255,\n        \"blue_fraction\" => 0/255,\n    )\n)\n\nnote: integer ID's\nInteger ID's must be defined with Int16 to maintain compatibility with material ID marker arrays.","category":"section"},{"location":"methods/interpolation/marker_grid_interpolation/#Marker-Grid-Interpolation","page":"Marker-Grid Interpolation","title":"Marker-Grid Interpolation","text":"Marker-in-cell methods require tensor and scalar parameters to be interpolated back and forth between the the Eulerian grid and the Lagrangian markers. We use the first-order bilinear  interpolation scheme for interpolating marker information to Eulerian grid nodes:","category":"section"},{"location":"methods/interpolation/marker_grid_interpolation/#eq:bilinear_interp2grid","page":"Marker-Grid Interpolation","title":"eq:bilinear_interp2grid","text":"S_ij = \n    frac\n        displaystyle sum_mS_m w_m(ij)\n    \n        displaystyle sum_mw_m(ij)\n    \nquad w_m(ij) = \n    left(\n        1 - fracDelta x_mDelta x\n    right)\n    left(\n        1 - fracDelta y_mDelta y\n    right)\n\nwhere S(i j) is the interpolated parameter value at the Eulerian grid node (i j),  S_m is the parameter value at the marker m located within one of four surrounding grid  cells, w_m(ij) is the weight of the marker m at the Eulerian grid node (i j),  Delta x_m and Delta y_m are the distances between the marker m and the Eulerian  grid node (i j) in the x and y directions, respectively, and Delta x and  Delta y are the grid spacings in the x and y directions, respectively. With our  modeling approach the index i corresponds to the vertical y-axis that increases with depth and  the index j corresponds to the x-axis. We refer to two types of interpolation based on the size  of the search radius used in Eq.: (1) inclusive interpolation  where markers within the search radius equal to Delta x and Delta y are used in the  interpolation, and (2) exclusive interpolation where markers within the search radius equal to  05Delta x and 05Delta y are used in the interpolation.\n\nA similar first-order bilinear scheme is used for interpolating parameter values from Eulerian grid  nodes to Lagrangian markers:","category":"section"},{"location":"methods/interpolation/marker_grid_interpolation/#eq:bilinear-interp2markers","page":"Marker-Grid Interpolation","title":"eq:bilinear-interp2markers","text":"beginsplit\nS_m = \nS_i_ulm j_ulmw_ULm + S_i_ulm j_ulm+1w_UR \n+ S_i_ulm+1 j_ulmw_LL + S_i_ulm+1 j_ulm+1w_LR\nendsplit\n\nwhere S_m is the interpolated parameter value at the Lagrangian marker m, i_ulm is  the y-index of the upper left grid node for marker m, j_ulm is the x-index of the  upper-left grid node for marker m, S_i_ulmj_ulm,  S_i_ulm j_ulm+1,  S_i_ulm+1 j, and S_i_ulm+1 j_ulm+1 are the parameter values at the four  surrounding Eulerian grid nodes, and w_ULm, w_LLm, w_URm, and w_LRm  are the weights for the upper-left, lower-left, upper-right, and lower-right grid nodes,  respectively. The weights of the four surrounding Eulerian grid nodes for marker m are  calculated using the following equations:","category":"section"},{"location":"methods/interpolation/marker_grid_interpolation/#eq:node*marker*weights","page":"Marker-Grid Interpolation","title":"eq:nodemarkerweights","text":"beginsplit\n    w_ULm  = (10 - Delta x_UL)(10 - Delta y_UL) \n    w_LLm  = (10 - Delta x_UL)Delta y_UL\n    w_URm  = Delta x_UL(10 - Delta y_UL) \n    w_LRm  = Delta x_ULDelta y_UL \nendsplit\n\nwhere Delta x_UL and Delta y_UL are the normalized distances in the x and  y directions, respectively, between the marker and the upper-left node of the cell containing  the marker as defined by the following equations:","category":"section"},{"location":"methods/interpolation/marker_grid_interpolation/#eq:normalized*upper*left_distances","page":"Marker-Grid Interpolation","title":"eq:normalizedupperleft_distances","text":"beginsplit\nDelta x_UL = fracleft(x_m - x_bj_ulmright)Delta x_bj_ulm \nDelta y_UL = fracleft(y_m - y_bi_ulmright)Delta y_bi_ulm\nendsplit\n\nwhere x_m and y_m are the coordinates of the marker m, x_bj_ulm and  y_bi_ulm are the coordinates of the upper-left basic grid node of the cell containing  the marker m, and Delta x_bj_ulm and Delta y_bi_ulm are the basic grid  spacings in the x and y directions, respectively. The upper-left indices i_ulm and  j_ulm of the cell containing the marker and weights w_ULm, w_LLm,  w_URm, and w_LRm are pre-computed for each marker using bisection to improve the  efficiency of the interpolation process. \n\nThese pre-computed weights and indices can also be used to optimize Eq.  by first calculating numerator and denominator terms of the bilinear average for each grid node by  looping over each marker m and applying the following equations:","category":"section"},{"location":"methods/interpolation/marker_grid_interpolation/#eq:bilinear-numerator","page":"Marker-Grid Interpolation","title":"eq:bilinear-numerator","text":"beginsplit\n    S_avgn(i_ulm j_ulm)  = S_avgn(i_ulm j_ulm) + S_m w_ULm \n    S_avgn(i_ulm j_ulm+1)  = S_avgn(i_ulm j_ulm+1) + S_m w_URm \n    S_avgn(i_ulm+1 j_ulm)  = S_avgn(i_ulm+1 j_ulm) + S_m w_LLm \n    S_avgn(i_ulm+1 j_ulm+1)  = S_avgn(i_ulm+1 j_ulm+1) + S_m w_LRm text\nendsplit\n\nand","category":"section"},{"location":"methods/interpolation/marker_grid_interpolation/#eq:bilinear-denominator","page":"Marker-Grid Interpolation","title":"eq:bilinear-denominator","text":"beginsplit\n    S_avgd(i_ulm j_ulm)  = S_avgd(i_ulm j_ulm) + w_ULm \n    S_avgd(i_ulm j_ulm+1)  = S_avgd(i_ulm j_ulm+1) + w_URm \n    S_avgd(i_ulm+1 j_ulm)  = S_avgd(i_ulm+1 j_ulm) + w_LLm \n    S_avgd(i_ulm+1 j_ulm+1)  = S_avgd(i_ulm+1 j_ulm+1) + w_LRm \nendsplit\n\nwhere  subscript n denotes the numerator term, and subscript d denotes the denominator term and grid arrays S_avgn(i j) and S_avgd(i j) are initialized with zero values.  The bilinear average at each grid node (i j) is then calculated as:","category":"section"},{"location":"methods/interpolation/marker_grid_interpolation/#eq:bilinear-average","page":"Marker-Grid Interpolation","title":"eq:bilinear-average","text":"S_i j = fracS_avgn(i j)S_avgd(i j) text","category":"section"},{"location":"api/surface_processes/sealevel/#Sealevel","page":"Sealevel","title":"Sealevel","text":"","category":"section"},{"location":"api/surface_processes/sealevel/#Initialization","page":"Sealevel","title":"Initialization","text":"","category":"section"},{"location":"api/surface_processes/sealevel/#EarthBox.SurfaceProcesses.Sealevel.initialize!","page":"Sealevel","title":"EarthBox.SurfaceProcesses.Sealevel.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize sealevel model parameters.\n\nArguments\n\nmodel::ModelData\nThe model data container containing the model parameters and arrays.\noption_name::Union{Int, String, Symbol, Nothing}=nothing\nControls the type of sealevel option. See the Sealevel Options section below for    information on available sealevel options. The sealevel option is stored in the model data    container as an integer ID (itype_sealevel) and a corresponding string name (stype_sealevel).    If option_name is nothing the current sealevel option defined in the model data container    will be used. The sealevel option parameters can be accessed from the model data container as follows:\nitype_sealevel = model.topography.parameters.sealevel.itype_sealevel.value\nstype_sealevel = model.topography.parameters.sealevel.stype_sealevel.value\n\nKeyword Arguments\n\ny_sealevel::Float64\nSeawater level y-coordinate in meters\nbase_level_shift::Float64\nShift in base level in meters. Positive values shift the base level down in the +y direction.\nbase_level_shift_end_time::Float64\nEnd time for base level shift in Myr\n\n\n\nSealevel Options\n\n\n\nConstant\n\noption_name value: \"Constant\", :Constant, or 0\nDescription: Sealevel is at a constant depth relative to the surface of the model.\n\nAveragePressure\n\noption_name value: \"AveragePressure\", :AveragePressure, or 2\nDescription: Sea level is adjusted by calculating a isostatic base level relative to the average pressure along the base of the model.\n\nLeftEdge\n\noption_name value: \"LeftEdge\", :LeftEdge, or 1\nDescription: Sea level is adjusted by calculating a isostatic base level relative to the left-hand edge of sticky-rock interface.\n\n\n\n\n\n","category":"function"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/lava_flow/#Lava-Flow-Update-Steps","page":"Lava Flow","title":"Lava Flow Update Steps","text":"[1] Calculate the reference eruption width W_e based on the characteristic magmatic crust  height H_mc(k) for drainage basin k using equation eq:eruption-width.\n\n[2] Calculate minimum x-coordinate of the eruption domain x_emin using equation  eq:x-eruption-min.\n\n[3] Forecast the y-coordinate y_efc of the eruption by interpolating  the y-coordinate of the topography grid (x_topo y_topo) at x_efc, which is calculated from eq:x-eruption-fc using the reference eruption width W_e and the minimum x-coordinate of the eruption domain x_emin.\n\n[4] Calculate the characteristic volume per flow V_flow^char from equation eq:char-flow-volume that uses the forecasted y-coordinate of the eruption y_efc to determine subaerial or submarine conditions.\n\n[5] Calculate the number of flows per model time step N_flow from eq:num-flows using the characteristic volume per flow V_flow^char and the total volume of volcanic material extruded from the drainage basin V_vol(k) that was calculated during melt extraction.\n\n[6] Calculate the volume of volcanic material per flow V_flow from equation  eq:flow-volume using the number of flows per model time step N_flow and the total volume of volcanic material extruded from the drainage basin V_vol(k).\n\n[7] Define the initial y-coordinate of topography grid y_topo init by setting it equal to the current y-coordinate of the topography grid y_topo (this will be used when the compaction section is added to the text).\n\n[8] Initialize the integrated lava flow thickness H_flowtot to zero.\n\n[9] Run Lava Flow Loop.\n\n[10] Apply compaction correction to the y-coordinate of topography grid y_topo using  an approach similar to that used to account for sediment compaction during the sediment transport model but with the thickness of newly deposited lava flows H_flowtot replacing the sediment thickness. Pre-existing sedimentary and sticky markers are adjusted to account for  compaction. The initial y-coordinate of the topography grid y_topoinit is used to calculate the compaction correction.","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/lava_flow/#Lava-Flow-Loop","page":"Lava Flow","title":"Lava Flow Loop","text":"For Each Lava Flow Do:\n\n[1] Calculate the x-coordinate of the eruption site x_e for the current flow as a  normally distributed random variable using equations eq:random-eruption-location and  eq:eruption-location-constraints, the minimum x-coordinate of the eruption domain  x_emin and the eruption width W_e.\n\n[2] Determine residual flow thickness H_res from equation eq:residualflowthickness using the forecasted y-coordinate of the eruption y_efc and the y-coordinate of sea level  y_sl to determine subaerial or submarine conditions.\n\n[3] Decimate the topography grid (x_topo y_topo) to obtain a grid with a lower  resolution (x_topo y_topo) that will be used for lava flow calculations using a  cellular automata approach.\n\n[4] Calculate a the decimated grid spacing Delta x.\n\n[5] Calculate the number of pulses per flow N_pulse from equation eq:num_pulses using the flow volume V_flow, the decimated grid spacing Delta x, and the residual flow thickness H_res.\n\n[6] Calculate pulse thickness, H_pulse, from equation eq:pulse_thickness using  the flow volume V_flow, the number of pulses per flow N_pulse, and the decimated grid  spacing Delta x.\n\n[7] Initialize lava flow thickness H_flow to zero on the decimated grid.\n\n[8] Run Lava Flow Pulse Loop.\n\n[9] Calculate the updated thickness of the lava flow from multiple pulses on main grid  H_flow by interpolating H_flow.\n\n[10] Update the y-coordinate of topography y_topo with flow thickness from equation  eq:topo-flow-update using H_flow after copying y_topo to y_topo^o. \n\n[11] Update total laval flow thickness integrating multiple flow events, H_flowtot,  using the following equation:","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/lava_flow/#eq:total-laval-flow-thickness","page":"Lava Flow","title":"eq:total-laval-flow-thickness","text":"    H_flowtot = H_flowtot^o + H_flow\n\nwhere H_flowtot^o is the previous total lava flow thickness.","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/lava_flow/#Lava-Flow-Pulse-Loop","page":"Lava Flow","title":"Lava Flow Pulse Loop","text":"For Each Lava Pulse p Do:\n\n[1] Calculate the index of the eruption node i_e on the decimated grid from  eq:eruption-index using the x-coordinate of the eruption x_e and the  decimated grid spacing Delta x.\n\n[2] Sort indices of the decimated grid (x_topo y_topo) based on distance  from the eruption node i_e.\n\n[3] Add the pulse thickness H_pulse to the flow thickness grid H_flow at the  eruption node i_e using equation eq:initialize-pulse-thickness.\n\n[4] Run Cellular Automata Lava Flow Update Steps.","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/lava_flow/#Cellular-Automata-Lava-Flow-Update-Steps","page":"Lava Flow","title":"Cellular Automata Lava Flow Update Steps","text":"While Maximum Thickness Difference  Tolerance Do for Each Node i:\n\nUpdate lava flow thickness H_flow using cellular automata approach\n\nwhereby the flow thickness for each cell is updated starting from node i_e and  radiating outward by allowing lava to flow from each cell with higher relative elevation to adjacent cells with the lower relative elevation. \n\nnote: lava-flow-requirement\nLava is only allowed to flow to adjacent cells if thickness of lava is greater than the  residual thickness H_res. \n\nnote: flow-thickness-update\nFlow thickness is updated by iterating over grid nodes until the maximum thickness difference  between iterations falls below a user defined tolerance. The outflow thickness associated with flow from cell i to adjacent cells is calculated using equation  eq:outflow-thickness and the updated flow thickness is calculated using equation eq:flow-thickness-update.","category":"section"},{"location":"api/heat_solver/heat_solver/#HeatSolver","page":"HeatSolver","title":"HeatSolver","text":"","category":"section"},{"location":"api/heat_solver/heat_solver/#Initialization","page":"HeatSolver","title":"Initialization","text":"","category":"section"},{"location":"api/heat_solver/heat_solver/#EarthBox.HeatSolver.initialize!","page":"HeatSolver","title":"EarthBox.HeatSolver.initialize!","text":"initialize!(\n    model::ModelData;\n    kwargs...\n)::Nothing\n\nInitialize heat solver parameters.\n\nArguments\n\nmodel::ModelData: The model data container containing    model parameters and arrays.\n\nKeyword Arguments\n\nmax_temp_change::Float64:\nMaximal temperature change allowed for one timestep in Kelvin\niuse_heat::Int64:\nSolve heat equation: 0 off; 1 on\niuse_adiabatic_heating::Int64:\nAdiabatic heating: 0 off; 1 on\niuse_shear_heating::Int64:\nShear heating: 0 off; 1 on\niuse_sticky_correction::Int64:\nSticky temperature correction (reset to top boundary temperature): 0 off; 1 on\n\n\n\n\n\n","category":"function"},{"location":"methods/discretization/conduction/#Discretization-of-Heat-Conduction-Equation","page":"Discretization of Heat-conduction Equation","title":"Discretization of Heat Conduction Equation","text":"Coefficients and right-hand-side terms of the system of equations for the heat conduction equation  are generated by looping over basic grid cells and discretizing the governing equations associated  with unknowns T using finite difference stencils where T is the temperature unknown defined  on the basic grid. The finite difference representation of the heat conduction equation is given by:","category":"section"},{"location":"methods/discretization/conduction/#eq:heat-fd-representation","page":"Discretization of Heat-conduction Equation","title":"eq:heat-fd-representation","text":"beginsplit\nrho_C C_pC fracT_C - T_C^oDelta t = \n-left(fracq_xR - q_xLDelta x_C + fracq_yD - q_yUDelta y_C right)\n+ H_radC + H_shearC + H_adiC + H_meltC + H_exoC\nendsplit\n\nwhere T_L, T_R, T_U, and T_D are the temperatures unknowns located to the left,  right, up, and down of the central unknown temperature T_C, respectively, T_C^o is the  temperature from the previous time step and q_xL, q_xR, q_yD, and q_yU are  heat fluxes in the x and y directions, respectively, given by:","category":"section"},{"location":"methods/discretization/conduction/#eq:heat_fluxes","page":"Discretization of Heat-conduction Equation","title":"eq:heat_fluxes","text":"beginsplit\nq_xL  = -k_L fracT_C - T_LDelta x_L \nq_xR  = -k_R fracT_R - T_CDelta x_R \nq_yU  = -k_U fracT_C - T_UDelta y_U \nq_yD  = -k_D fracT_D - T_CDelta y_D \nendsplit\n\nwhere k_L, k_R, k_U, and k_D are the thermal conductivities at mid-points to  the left, right, up, and down of the central unknown temperature T_C, respectively, given by:","category":"section"},{"location":"methods/discretization/conduction/#eq:thermal*conductivity*midpoints","page":"Discretization of Heat-conduction Equation","title":"eq:thermalconductivitymidpoints","text":"beginsplit\nk_L  = frack_L + k_C2 \nk_R  = frack_R + k_C2 \nk_U  = frack_U + k_C2 \nk_D  = frack_D + k_C2 text\nendsplit\n\nThe full conservative finite difference representation of equation  Eq. with latent heating effects incorporated into  effective heat capacity and adiabatic coefficients is therefore given by:","category":"section"},{"location":"methods/discretization/conduction/#eq:heat-discretized","page":"Discretization of Heat-conduction Equation","title":"eq:heat-discretized","text":"beginsplit\nrho_C C_pC^eff fracT_C - T_C^oDelta t =\n-leftfrac\n    left(\n        -left(frack_R + k_C2right) left(fracT_R - T_CDelta x_R right)\n    right)\n    - left(\n        - left(frack_L + k_C2right) left(fracT_C - T_LDelta x_Lright)\n    right)\nDelta x_Cright \n-leftfrac\n    left(\n        -left(frack_D + k_C2right) left(fracT_D - T_CDelta y_Dright)\n    right)\n    - left( \n        - left(frack_U + k_C2right) left(fracT_C - T_UDelta y_Uright)\n    right)\nDelta y_Cright \n+ H_radC + H_exoC + H_shearC + H_adiC^eff text\nendsplit\n\nwhere H_radC is radiogenic heat production, H_exoC is the heat produced from  exothermic serpentinization reactions given by:","category":"section"},{"location":"methods/discretization/conduction/#eq:exothermic*heat*production_discretized","page":"Discretization of Heat-conduction Equation","title":"eq:exothermicheatproduction_discretized","text":"H_exoC = fracf_serpincC EDelta t M_serp text\n\nC_pC^eff is the effective heat capacity given by:","category":"section"},{"location":"methods/discretization/conduction/#eq:effective*heat*capacity_discretized","page":"Discretization of Heat-conduction Equation","title":"eq:effectiveheatcapacity_discretized","text":"beginsplit\nC_pC^eff  = C_pC + L_C left(fracpartial Mpartial Tright)_C text  \nendsplit\n\nH_adiC^eff is the effective adiabatic heating term given by:","category":"section"},{"location":"methods/discretization/conduction/#eq:effective*adiabatic*heating_discretized","page":"Discretization of Heat-conduction Equation","title":"eq:effectiveadiabaticheating_discretized","text":"beginsplit\nH_adiC^eff  = left(T_C^o alpha_C - rho_C L_C left(fracpartial Mpartial Pright)_Cright)\n    left( fracv_yL + v_yR2right)rho_C g_y \nendsplit\n\nand H_shearC is the shear heating term given by:","category":"section"},{"location":"methods/discretization/conduction/#eq:shear*heating*discretized","page":"Discretization of Heat-conduction Equation","title":"eq:shearheatingdiscretized","text":"beginsplit\nH_shearC  = frac12\n    left(\n        frac(sigma_xxLL)^22eta_xxLL + frac(sigma_xxLR)^22eta_yyLR\n        + frac(sigma_yyUL)^22eta_yyUL + frac(sigma_yyUR)^22eta_yyUR\n    right)\n    + frac(sigma_xyC)^2eta_xyC text\nendsplit\n\nRearranging equation Eq. leads to the following  equation with coefficients for unknowns T_C, T_L, T_R, T_U and T_D:","category":"section"},{"location":"methods/discretization/conduction/#eq:heat-coeff","page":"Discretization of Heat-conduction Equation","title":"eq:heat-coeff","text":"beginsplit\nleft\n    frac1Delta x_C\n        left( frack_R + k_C2Delta x_R + frack_L + k_C2Delta x_L right)\n    + frac1Delta y_C\n        left( frack_D + k_C2Delta y_D + frack_U + k_C2Delta y_U right)\n    + fracrho_C C_pC^effDelta t\nrightT_C \n- left( frack_L + k_C2Delta x_L Delta x_C right)T_L\n- left( frack_R + k_CDelta x_R Delta x_C2 right)T_R\n- left( frack_U + k_C2Delta y_U Delta y_C right)T_U\n- left( frack_D + k_C2Delta y_D Delta y_C right)T_D \n= H_radC + H_exoC + H_shearC + H_adiC^eff + fracrho_C C_pC^effT_C^oDelta t text\nendsplit\n\n(Image: Heat Equation Stencil)","category":"section"},{"location":"methods/discretization/conduction/#fig:stencil-heat","page":"Discretization of Heat-conduction Equation","title":"fig:stencil-heat","text":"Stencil used to discretize heat-conduction equation.\n\nThe large matrix coordinates (ij) of coefficients in equation  Eq. are related to the global index I_T from equation  Eq. as follows:","category":"section"},{"location":"methods/discretization/conduction/#eq:heat-matrix-indices","page":"Discretization of Heat-conduction Equation","title":"eq:heat-matrix-indices","text":"beginsplit\n    T_C text    (I_T text  I_T) \n    T_L text    (I_T text  I_T - N_yb) \n    T_R text    (I_T text  I_T + N_yb) \n    T_U text    (I_T text  I_T - 1) \n    T_D text    (I_T text  I_T + 1) \nendsplit","category":"section"},{"location":"methods/discretization/grid_structure/#Staggered-Grid-Structure","page":"Staggered Grid Structure","title":"Staggered Grid Structure","text":"An orthogonal 2D staggered grid composed of a basic grid and three staggered grids is used to  discretize governing equations using a conservative finite difference formulation described by  Gerya (2010) (Fig.). The basic grid, denoted by subscript b, encompasses the main model domain (x_size y_size) with N_xb nodes in the  x-direction and N_yb nodes in the y-direction. The x- and y-coordinates of the basic  grid are (x_bj y_bi) where j is in the x-direction ranging from 1 to N_xb  and i is in the y-direction ranging from 1 to N_yb. Both y_bi and i  increase with depth. The basic grid spacings in the x- and y-directions are denoted by  Delta x_bj where j ranges from 1 to N_xb-1 and Delta y_bi where i  ranges from 1 to N_yb-1, respectively. Temperature unknowns T_(ij)_b, deviatoric  shear stress sigma_xy(ij)_b, deviatoric shear strain rate dot epsilon_xy(ij)_b,  and visco-plastic shear viscosity eta_vp(ij)_b are defined on the nodes of the basic grid. ","category":"section"},{"location":"methods/discretization/grid_structure/#Grid-Indexing","page":"Staggered Grid Structure","title":"Grid Indexing","text":"Basic grid cells and unknowns are indexed with respect to the upper-left node of  basic-grid cells that have a global cell index defined as follows Fig.:","category":"section"},{"location":"methods/discretization/grid_structure/#eq:basic-cell-index","page":"Staggered Grid Structure","title":"eq:basic-cell-index","text":"I_cell  = (j-1)(N_yb-1) + i\n\nwhere i and j are indices of the upper-left basic grid node associated with a cell. Unknowns  v_x, v_y, and P are numbered with the increasing cell index I_cell as follows:","category":"section"},{"location":"methods/discretization/grid_structure/#eq:global-indices-of-stokes-unknowns","page":"Staggered Grid Structure","title":"eq:global-indices-of-stokes-unknowns","text":"beginsplit\n    I_v_x = 3I_cell - 2  quad textfor x-velocity unknown \n    I_v_y = 3I_cell - 1  quad textfor y-velocity unknown \n    I_P = 3I_cell  quad textfor pressure unknown\nendsplit\n\nTemperature unknowns T are numbered using the global index I_T, which is defined as follows:","category":"section"},{"location":"methods/discretization/grid_structure/#eq:global-indices-of-heat-unknowns","page":"Staggered Grid Structure","title":"eq:global-indices-of-heat-unknowns","text":"I_T = (j-1)N_yb + i\n\nwhere i and j are indices of the basic grid Fig.. \n\n(Image: Staggered grid)","category":"section"},{"location":"methods/discretization/grid_structure/#fig:staggered-grid","page":"Staggered Grid Structure","title":"fig:staggered-grid","text":"Staggered grid used to discretize governing equations. Nodes of  the basic grid are shown as black circles. Nodes of the velocity-x grid are denoted by red symbols, nodes of the velocity-y grid are denoted by light blue symbols, and nodes of the pressure grid are denoted by green symbols. Node index pairs for the  basic, velocity-x, velocity-y and pressure grids are denoted with subscripts b, v_x, v_y  and p, respectively. The global index for temperature unknowns I_T is denoted with bold font, and global cell index I_cell used to discretize the Stokes-continuity  equations are denoted by bold font in parentheses. The global index of Stoke-continuity unknowns is shown with numbers inside of colored symbols. Colored circles represent normal unknowns where  finite-difference stencils are applied. Ghost nodes located outside of the main  model domain, which are used to approximate derivatives in the finite difference  stencils, are shown as squares. Boundary nodes are shown with diamonds with thin  outlines. Boundary unknown nodes are denoted with diamonds with thick outlines. The unknowns defined at boundary unknown nodes have prescribed values leading to large matrix coefficients equal to one and right-hand side terms equal prescribed velocity values.","category":"section"},{"location":"api/marker_materials/material_domains/#Material-Domains","page":"Material Domains","title":"Material Domains","text":"","category":"section"},{"location":"api/marker_materials/material_domains/#EarthBox.Markers.MarkerMaterials.Registry.MaterialDomainsRegistry","page":"Material Domains","title":"EarthBox.Markers.MarkerMaterials.Registry.MaterialDomainsRegistry","text":"MaterialDomainsRegistry\n\nA registry of material domains. Material domains are used to define the initial  physical domain of a material. Material domains are used by initialization  functions to assign materials to the correct physical domain.\n\nFields\n\ngeneral_domain::String = \"GeneralDomain\".\nGeneral material domain. This is the default material domain for all materials.\natmosphere::String = \"Atmosphere\".\nAtmosphere domain composed of sticky-air material.\nocean::String = \"Ocean\".\nOcean domain composed of sticky-water material.\nsedimentary_basin::String = \"SedimentaryBasin\".\nSedimentary basin domain composed of sediment material.\ncontinental_crust::String = \"ContinentalCrust\".\nContinental crust domain composed of felsic rocks.\nupper_continental_crust::String = \"UpperContinentalCrust\".\nUpper continental crust domain composed of felsic rocks.\nlower_continental_crust::String = \"LowerContinentalCrust\".\nLower continental crust domain composed of felsic and/or mafic crustal rocks.\nexhumed_continental_crust::String = \"ExhumedContinentalCrust\".\nExhumed continental crust domain composed of felsic and/or mafic rocks that have been exhumed from the lower continental crust to the upper continental crust.\noceanic_crust::String = \"OceanicCrust\".\nOceanic crust material domain composed of mafic rocks formed at spreading centers.\nbasaltic_oceanic_crust::String = \"BasalticOceanicCrust\".\nBasaltic oceanic crust domain composed of basaltic rocks formed at spreading centers.\ngabbroic_oceanic_crust::String = \"GabbroicOceanicCrust\".\nGabbroic oceanic crust domain composed of gabbroic rocks formed at spreading centers.\nexhumed_mantle_lithosphere::String = \"ExhumedMantleLithosphere\".\nExhumed ultramafic mantle lithosphere.\nmantle_lithosphere::String = \"MantleLithosphere\".\nUltramafic mantle lithosphere. If this domain is defined in the material model then the domains  \"UpperMantleLithosphere\", \"MiddleMantleLithosphere\" and \"LowerMantleLithosphere\" will have properties assigned to them automatically from the \"MantleLithosphere\" domain.\nweak_mantle_lithosphere::String = \"WeakMantleLithosphere\".\nWeak mantle lithosphere domain with weaker frictional-plastic properties and/or  lower relative effective viscosity.\nupper_mantle_lithosphere::String = \"UpperMantleLithosphere\".\nUpper mantle lithosphere domain composed of ultramafic rocks.\nmiddle_mantle_lithosphere::String = \"MiddleMantleLithosphere\".\nMiddle mantle lithosphere domain composed of ultramafic rocks.\nlower_mantle_lithosphere::String = \"LowerMantleLithosphere\".\nLower mantle lithosphere domain composed of ultramafic rocks.\nasthenosphere::String = \"Asthenosphere\".\nAsthenosphere domain below the mantle lithosphere composed of ultramafic rocks.\nmantle::String = \"Mantle\".\nMantle domain composed of ultramafic rocks.\nlower_mantle::String = \"LowerMantle\".\nLower mantle domain composed of ultramafic rocks.\nmantle_plume::String = \"MantlePlume\".\nMantle plume domain composed of ultramafic rocks.\nupper_continental_crust_strong_zone::String = \"UpperContinentalCrustStrongZone\".\nUpper continental crust strong zone with relatively less damage and stronger  frictional-plastic properties.\nlower_continental_crust_strong_zone::String = \"LowerContinentalCrustStrongZone\".\nLower continental crust strong zone with relatively less damage and stronger  frictional-plastic properties.\nlithospheric_mantle_strong_zone::String = \"LithosphericMantleStrongZone\".\nLithospheric mantle strong zone with relatively less damage and stronger  frictional-plastic properties.\nweak_seed_crust::String = \"WeakSeedCrust\".\nWeak seed crust domain with weaker frictional-plastic properties and/or  lower relative effective viscosity.\nweak_seed_mantle::String = \"WeakSeedMantle\".\nWeak seed mantle domain with weaker frictional-plastic properties and/or  lower relative effective viscosity.\nweak_crustal_fault_zone::String = \"WeakCrustalFaultZone\".\nWeak crustal fault zone domain with weaker frictional-plastic properties and/or  lower relative effective viscosity.\nweak_mantle_fault_zone::String = \"WeakMantleFaultZone\".\nWeak mantle fault zone domain with weaker frictional-plastic properties and/or  lower relative effective viscosity.\nfluid_around_elastic_slab_a::String = \"FluidAroundElasticSlabA\".\nFluid domain around elastic slab with unique color for creating a checkerboard pattern.\nfluid_around_elastic_slab_b::String = \"FluidAroundElasticSlabB\".\nFluid domain around elastic slab with unique color for creating a checkerboard pattern.\nelastic_slab_a::String = \"ElasticSlabA\".\nElastic slab with unique color for creating a checkerboard pattern.\nelastic_slab_b::String = \"ElasticSlabB\".\nElastic slab with unique color for creating a checkerboard pattern.\nlayer1_rayleigh_taylor::String = \"Layer1RayleighTaylor\".\nLayer 1 of the Rayleigh Taylor instability benchmark.\nlayer2_rayleigh_taylor::String = \"Layer2RayleighTaylor\".\nLayer 2 of the Rayleigh Taylor instability benchmark.\nsand_a::String = \"SandA\".\nSand with unique color for creating a layered stratigraphic pattern.\nsand_b::String = \"SandB\".\nSand domain with unique color for creating a layered stratigraphic pattern.\nmicrobeads::String = \"Microbeads\".\nMicrobead domain used in sandbox experiments.\nmobile_wall::String = \"MobileWall\".\nStrong mobile wall domain used in sandbox experiments.\npdms_layer::String = \"PDMSLayer\".\nPolydimethylsiloxane (PDMS) layer domain used in sandbox experiments.\nplate_extension::String = \"PlateExtension\".\nStrong plate domain that extends from mobile wall used in sandbox experiments.\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#Material-Properties","page":"Material Properties","title":"Material Properties","text":"The following docstring contains a list of material properties that can be defined for each material in material library files. See Material Collection Files for more details.","category":"section"},{"location":"api/marker_materials/material_properties/#MeltingParameters","page":"Material Properties","title":"MeltingParameters","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#MaterialColor","page":"Material Properties","title":"MaterialColor","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#Density","page":"Material Properties","title":"Density","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#DislocationCreep","page":"Material Properties","title":"DislocationCreep","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#DiffusionCreep","page":"Material Properties","title":"DiffusionCreep","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#PeierlsCreep","page":"Material Properties","title":"PeierlsCreep","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#TemperatureDependentViscosity","page":"Material Properties","title":"TemperatureDependentViscosity","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#Blankenbach89Viscosity","page":"Material Properties","title":"Blankenbach89Viscosity","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#ShearModulus","page":"Material Properties","title":"ShearModulus","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#Plasticity","page":"Material Properties","title":"Plasticity","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#FlowLaw","page":"Material Properties","title":"FlowLaw","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#HeatCapacity","page":"Material Properties","title":"HeatCapacity","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#ThermalConductivity","page":"Material Properties","title":"ThermalConductivity","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#RadiogenicHeatProduction","page":"Material Properties","title":"RadiogenicHeatProduction","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#Compaction","page":"Material Properties","title":"Compaction","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#Solidus-Models","page":"Material Properties","title":"Solidus Models","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#Liquidus-Models","page":"Material Properties","title":"Liquidus Models","text":"","category":"section"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.MaterialPropertiesState","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.MaterialPropertiesState","text":"MaterialPropertiesState\n\nData structure for storing material properties state.\n\nFields\n\nmelting_params::MeltingParameters: Melting parameters\nmaterial_color::MaterialColor: Material color\ndensity::Density: Density\ndislocation_creep::DislocationCreep: Dislocation creep\ndiffusion_creep::DiffusionCreep: Diffusion creep\npeierls_creep::PeierlsCreep: Peierls creep\ntemperature_dependent_viscosity::TemperatureDependentViscosity: Temperature dependent viscosity\nblankenbach89_viscosity::Blankenbach89Viscosity: Blankenbach89 viscosity\nshear_modulus::ShearModulus: Shear modulus\nplasticity::Plasticity: Plasticity\nflow_law::FlowLaw: Flow law\nheat_capacity::HeatCapacity: Heat capacity\nthermal_conductivity::ThermalConductivity: Thermal conductivity\nradiogenic_heat_production::RadiogenicHeatProduction: Radiogenic heat production\ncompaction::Compaction: Compaction\n\nReturns\n\nMaterialPropertiesState: New MaterialPropertiesState parameter group with initialized values\n\n\n\nList of Material Properties For Material Collection Files\n\nFor a given material in a material collection library file enter the name of the properties followed  by a list containing value, units and description:\n\nMaterialName:\n    property_name_1: [value, units, description]\n    property_name_2: [value, units, description]\n\nUse the standard units defined below. A future version of EarthBox will support material property  unit conversion.\n\nThe following properties can be entered for a given material:\n\nMeltingParameters\n\nitype_liquidus: Liquidus type ID\nstype_liquidus: Liquidus type name\nitype_solidus: Solidus type ID\nstype_solidus: Solidus type name\nlatent_heat: Latent heat in J/kg\n\nDensity\n\nstandard_density: Standard density in kg/m^3\nthermal_expansion: Thermal expansion coefficient in 1/K\ncompressibility: Compressibility in 1/Pa\nmelt_density: Melt density in kg/m^3\n\nDislocationCreep\n\npre_exponential_dc: Pre-exponential factor for dislocation creep in 1/s/MPa^n\nstress_exponent_n_dc: Stress exponent for dislocation creep\nactivation_energy_dc: Activation energy for dislocation creep in kJ/mol\nactivation_volume_dc: Activation volume for dislocation creep in J/MPa/mol\n\nDiffusionCreep\n\npre_exponential_difc: Pre-exponential factor for diffusion creep in 1/s/MPa^n\nactivation_energy_difc: Activation energy for diffusion creep in kJ/mol\nactivation_volume_difc: Activation volume for diffusion creep in J/MPa/mol\n\nPeierlsCreep\n\npre_exponential_pei: Pre-exponential factor for Peierls creep in s^-m1*MPa^-m2\nstress_exponent_m1_pei: Stress exponent m1 for Peierls creep\nstress_exponent_m2_pei: Stress exponent m2 for Peierls creep\npeierls_stress: Peierls stress in MPa\n\nTemperatureDependentViscosity\n\npre_exponential_td: Pre-exponential factor for temperature dependent viscosity in Pa.s\nactivation_energy_td: Activation energy for temperature dependent viscosity in kJ/mol\n\nBlankenbach89Viscosity\n\nviscosity_ref_blankenbach89: Reference viscosity for Blankenbach89 in Pa.s\nb_term_blankenbach89: b term for Blankenbach89\nc_term_blankenbach89: c term for Blankenbach89\n\nShearModulus\n\nshear_modulus: Shear modulus in Pa\n\nPlasticity\n\ncohesion_initial: Initial cohesion in Pa\ncohesion_final: Final cohesion in Pa\nfriction_angle_initial: Initial friction angle in degrees\nfriction_angle_final: Final friction angle in degrees\nstrain_initial: Initial strain\nstrain_final: Final strain\ndilatation_angle: Dilatation angle in degrees\n\nFlowLaw\n\nflow_type: Flow law type\nflow_stype: Flow law type name\n\nHeatCapacity\n\nheat_capacity: Heat capacity in J/kg/K\n\nThermalConductivity\n\nthermal_conductivity_ref: Reference thermal conductivity in W/m/K\nthermal_conductivity_a: Thermal conductivity parameter a in W/m\n\nRadiogenicHeatProduction\n\nradiogenic_heat_production: Radiogenic heat production in W/m^3\n\nCompaction\n\nporosity_initial: Initial porosity in fraction\nporosity_decay_depth: Porosity decay depth in m\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.MeltingParameters","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.MeltingParameters","text":"MeltingParameters\n\nData structure for storing melting parameters.\n\nFields\n\nitype_liquidus::ParameterInt: Liquidus type ID\nstype_liquidus::ParameterStr: Liquidus type name\nitype_solidus::ParameterInt: Solidus type ID\nstype_solidus::ParameterStr: Solidus type name\nlatent_heat::ParameterFloat: Latent heat in J/kg\n\nReturns\n\nMeltingParameters: New MeltingParameters parameter group with initialized values\n\nSolidus Models\n\nstype_solidus itype_solidus Description\n\"NoMelting\" -1 Negative one is used to signal a material without melting. This is the default value for itype_solidus.\n\"SedimentGerya2010\" 0 Sediment solidus model from Gerya (2010) Table 17.2.\n\"UprContCrustGerya2010\" 1 Upper continental crust solidus model from Gerya (2010) Table 17.2.\n\"LwrContCrustGerya2010\" 2 Lower continental crust solidus model from Gerya (2010) Table 17.2.\n\"DryMantleGerya2010\" 3 Dry mantle solidus model from Gerya (2010) Table 17.2.\n\"PeridotiteKatz2003\" 4 Peridotite solidus model from Katz et al. (2003).\n\"GabbroGerya2010\" 5 Gabbro solidus model from Gerya (2010) Table 17.2.\n\"GabbroSchubert2013\" 6 Gabbro solidus model from Schubert et al. (2013)\n\"GabbroGlacier\" 7 Gabbro solidus model that approximates the gabbro glacier model of Maclennan et al. (2004).\n\nLiquidus Models\n\nstype_liquidus itype_liquidus Description\n\"NoMelting\" -1 Negative one is used to signal a material without melting. This is the default value for itype_liquidus.\n\"SedimentGerya2010\" 0 Sediment liquidus model from Gerya (2010) Table 17.2.\n\"UprContCrustGerya2010\" 1 Upper continental crust liquidus model from Gerya (2010) Table 17.2.\n\"LwrContCrustGerya2010\" 2 Lower continental crust liquidus model from Gerya (2010) Table 17.2.\n\"DryMantleGerya2010\" 3 Dry mantle liquidus model from Gerya (2010) Table 17.2.\n\"PeridotiteKatz2003\" 4 Peridotite liquidus model from Katz et al. (2003).\n\"GabbroGerya2010\" 5 Gabbro liquidus model from Gerya (2010) Table 17.2.\n\"GabbroGlacier\" 6 Gabbro liquidus model that approximates the gabbro glacier model of Maclennan et al. (2004).\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.MaterialColor","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.MaterialColor","text":"MaterialColor\n\nData structure for storing material color parameters.\n\nFields\n\nred_fraction::ParameterFloat: Red color fraction\ngreen_fraction::ParameterFloat: Green color fraction\nblue_fraction::ParameterFloat: Blue color fraction\n\nReturns\n\nMaterialColor: New MaterialColor parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.Density","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.Density","text":"Density\n\nData structure for storing density parameters.\n\nFields\n\nstandard_density::ParameterFloat: Standard density in kg/m^3\nthermal_expansion::ParameterFloat: Thermal expansion coefficient in 1/K\ncompressibility::ParameterFloat: Compressibility in 1/Pa\nmelt_density::ParameterFloat: Melt density in kg/m^3\n\nReturns\n\nDensity: New Density parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.DislocationCreep","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.DislocationCreep","text":"DislocationCreep\n\nData structure for storing dislocation creep parameters.\n\nFields\n\npre_exponential_dc::ParameterFloat: Pre-exponential factor for dislocation creep in 1/s/MPa^n\nstress_exponent_n_dc::ParameterFloat: Stress exponent for dislocation creep\nactivation_energy_dc::ParameterFloat: Activation energy for dislocation creep in kJ/mol\nactivation_volume_dc::ParameterFloat: Activation volume for dislocation creep in J/MPa/mol\n\nReturns\n\nDislocationCreep: New DislocationCreep parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.DiffusionCreep","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.DiffusionCreep","text":"DiffusionCreep\n\nData structure for storing diffusion creep parameters.\n\nFields\n\npre_exponential_difc::ParameterFloat: Pre-exponential factor for diffusion creep in 1/s/MPa^n\nactivation_energy_difc::ParameterFloat: Activation energy for diffusion creep in kJ/mol\nactivation_volume_difc::ParameterFloat: Activation volume for diffusion creep in J/MPa/mol\n\nReturns\n\nDiffusionCreep: New DiffusionCreep parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.PeierlsCreep","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.PeierlsCreep","text":"PeierlsCreep\n\nData structure for storing peierls creep parameters.\n\nFields\n\npre_exponential_pei::ParameterFloat: Pre-exponential factor for Peierls creep in s^-m1*MPa^-m2\nstress_exponent_m1_pei::ParameterFloat: Stress exponent m1 for Peierls creep\nstress_exponent_m2_pei::ParameterFloat: Stress exponent m2 for Peierls creep\npeierls_stress::ParameterFloat: Peierls stress in MPa\n\nReturns\n\nPeierlsCreep: New PeierlsCreep parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.TemperatureDependentViscosity","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.TemperatureDependentViscosity","text":"TemperatureDependentViscosity\n\nData structure for storing temperature dependent viscosity parameters.\n\nFields\n\npre_exponential_td::ParameterFloat: Pre-exponential factor for temperature dependent viscosity in Pa.s\nactivation_energy_td::ParameterFloat: Activation energy for temperature dependent viscosity in kJ/mol\n\nReturns\n\nTemperatureDependentViscosity: New TemperatureDependentViscosity parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.Blankenbach89Viscosity","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.Blankenbach89Viscosity","text":"Blankenbach89Viscosity\n\nData structure for storing blankenbach89 viscosity parameters.\n\nFields\n\nviscosity_ref_blankenbach89::ParameterFloat: Reference viscosity for Blankenbach89 in Pa.s\nb_term_blankenbach89::ParameterFloat: b term for Blankenbach89\nc_term_blankenbach89::ParameterFloat: c term for Blankenbach89\n\nReturns\n\nBlankenbach89Viscosity: New Blankenbach89Viscosity parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.ShearModulus","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.ShearModulus","text":"ShearModulus\n\nData structure for storing shear modulus parameters.\n\nFields\n\nshear_modulus::ParameterFloat: Shear modulus in Pa\n\nReturns\n\nShearModulus: New ShearModulus parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.Plasticity","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.Plasticity","text":"Plasticity\n\nData structure for storing plasticity parameters.\n\nFields\n\ncohesion_initial::ParameterFloat: Initial cohesion in Pa\ncohesion_final::ParameterFloat: Final cohesion in Pa\nfriction_angle_initial::ParameterFloat: Initial friction angle in degrees\nfriction_angle_final::ParameterFloat: Final friction angle in degrees\nsine_friction_angle_initial::ParameterFloat: Initial sine friction angle\nsine_friction_angle_final::ParameterFloat: Final sine friction angle\nstrain_initial::ParameterFloat: Initial strain\nstrain_final::ParameterFloat: Final strain\ndilatation_angle::ParameterFloat: Dilatation angle in degrees\n\nReturns\n\nPlasticity: New Plasticity parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.FlowLaw","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.FlowLaw","text":"FlowLaw\n\nData structure for storing flow law parameters.\n\nFields\n\nflow_type::ParameterInt: Flow law type\nflow_stype::ParameterStr: Flow law type name\nviscosity_iso::ParameterFloat: Isoviscous viscosity in Pa.s\ndislocation_creep::DislocationCreep: DislocationCreep parameter group\npeierls_creep::PeierlsCreep: PeierlsCreep parameter group\ndiffusion_creep::DiffusionCreep: DiffusionCreep parameter group\ntemperature_dependent_viscosity::TemperatureDependentViscosity: TemperatureDependentViscosity parameter group\nblankenbach89_viscosity::Blankenbach89Viscosity: Blankenbach89Viscosity parameter group\nplasticity::Plasticity: Plasticity parameter group\nshear_modulus::ShearModulus: ShearModulus parameter group\n\nReturns\n\nFlowLaw: New FlowLaw parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.HeatCapacity","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.HeatCapacity","text":"HeatCapacity\n\nData structure for storing heat capacity parameters.\n\nFields\n\nheat_capacity::ParameterFloat: Heat capacity in J/kg/K\n\nReturns\n\nHeatCapacity: New HeatCapacity parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.ThermalConductivity","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.ThermalConductivity","text":"ThermalConductivity\n\nData structure for storing thermal conductivity parameters.\n\nFields\n\nthermal_conductivity_ref::ParameterFloat: Reference thermal conductivity in W/m/K\nthermal_conductivity_a::ParameterFloat: Thermal conductivity parameter a in W/m\n\nReturns\n\nThermalConductivity: New ThermalConductivity parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.RadiogenicHeatProduction","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.RadiogenicHeatProduction","text":"RadiogenicHeatProduction\n\nData structure for storing radiogenic heat production parameters.\n\nFields\n\nradiogenic_heat_production::ParameterFloat: Radiogenic heat production in W/m^3\n\nReturns\n\nRadiogenicHeatProduction: New RadiogenicHeatProduction parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/marker_materials/material_properties/#EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.Compaction","page":"Material Properties","title":"EarthBox.Markers.MarkerMaterials.MaterialsContainer.MaterialProperties.Compaction","text":"Compaction\n\nData structure for storing compaction parameters.\n\nFields\n\nporosity_initial::ParameterFloat: Initial porosity in fraction\nporosity_decay_depth::ParameterFloat: Porosity decay depth in m\n\nReturns\n\nCompaction: New Compaction parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"api/surface_processes/relative_base_level/#RelativeBaseLevel","page":"RelativeBaseLevel","title":"RelativeBaseLevel","text":"","category":"section"},{"location":"api/surface_processes/relative_base_level/#Initialization","page":"RelativeBaseLevel","title":"Initialization","text":"","category":"section"},{"location":"api/surface_processes/relative_base_level/#EarthBox.SurfaceProcesses.Sealevel.RelativeBaseLevel.initialize!","page":"RelativeBaseLevel","title":"EarthBox.SurfaceProcesses.Sealevel.RelativeBaseLevel.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize reference lithosphere parameters for relative base level model. The reference lithosphere is used to define global sea level (reference base level) as the top of the lithosphere column in isostatic equilibrium with the average pressure at the base of the model column (Kneller et al., 2023).\n\nArguments\n\nmodel::ModelData: The model data container containing the model parameters and arrays.\n\nKeyword Arguments\n\nthickness_upper_continental_crust_ref::Float64\nThickness of upper continental crust of the reference lithosphere in meters\nthickness_lower_continental_crust_ref::Float64\nThickness of lower continental crust of the reference lithosphere in meters\nthickness_lithosphere_ref::Float64\nThickness of lithosphere for the reference lithosphere in meters\ngridy_spacing_ref::Float64\nSpacing of grid cells in y-direction for the reference lithosphere in meters\ntemperature_top_ref::Float64\nTemperature at top of lithosphere for the reference lithosphere in Celsius\ntemperature_moho_ref::Float64\nTemperature at Moho of the reference lithosphere in Celsius\ntemperature_base_lith_ref::Float64\nTemperature at base of lithosphere for the reference lithosphere in Celsius\nadiabatic_gradient_ref::Float64\nAdiabatic gradient below the reference lithosphere in K/km\niuse_linear_segments::Int\nInteger flag that controls the type of temperature profile used in the reference lithosphere model. If iuse_linear_segments = 1, a temperature profile with four linear segments is used that is controlled by the following user defined parameters: temperature_top_ref, temperature_moho_ref, and temperature_base_lith_ref. If iuse_linear_segments = 0, the temperature profile is calculated using an analytical 3-layer model defined during marker temperature. See the AnalyticalThreeLayer model description at MarkerTemperature). Default is 1.\n\n\n\n\n\n","category":"function"},{"location":"models/sandbox/sandbox_extension/#Sandbox-Extension-Analogue-Benchmark","page":"Sandbox Extension","title":"Sandbox Extension Analogue Benchmark","text":"see EarthBox/models/sandbox/sandbox_extension","category":"section"},{"location":"methods/serpentinization/serpentinization/#Serpentinization","page":"Serpentinization","title":"Serpentinization","text":"Serpentinization is modeled using the approach of Mezri et al. (2024) whereby the serpentinization ratio  R_serpm is updated as follows:","category":"section"},{"location":"methods/serpentinization/serpentinization/#eq:serpentinization-ratio","page":"Serpentinization","title":"eq:serpentinization-ratio","text":"R_serpm \n    = minleft(\n        R_serpm^o + S_rateleft(1-R_serp^oright)Delta t\n        text quad\n        1 - R_serp^o\n        right)\n\nwhere m is the index of a given marker, R_serpm^o is the previous serpentinization ratio, and  S_rate is the serpentinization rate defined by the following equation:","category":"section"},{"location":"methods/serpentinization/serpentinization/#eq:serpentinization-rate","page":"Serpentinization","title":"eq:serpentinization-rate","text":"S_rate = S_rate^maxf_serpTf_serp(epsilon)\n\nwhere S_rate^max is the maximum serpentinization rate, f_serpT is the temperature factor  and f_serp(epsilon) is the plastic strain rate factor defined by the following equations:","category":"section"},{"location":"methods/serpentinization/serpentinization/#eq:serpentinization-factors","page":"Serpentinization","title":"eq:serpentinization-factors","text":"beginsplit\n    f_serpT =\n        expleft(\n            -fracleft(fracT_m - T_serp^o94right)^22\n            right)\n        left(\n            1 + mathrmerf\n                left(\n                    -4fracleft(fracT_m - T_serp^ow_serpright)sqrt2\n                right)\n        right)\n        quad text \n    f_serpdot epsilon = 1 - exp left(\n            -fracdot epsilon_plasticmdot epsilon_serp\n        right)\n        quad text\nendsplit\n\nwhere T_serp^o is the reference serpentinization temperature and dot epsilon_serp is the reference serpentinization strain rate. The parameter values used in this work  for equations Eq. and Eq. are provided in Tab..\n\nThe serpentinization ratio is used to update marker density rho_m using the following equation:","category":"section"},{"location":"methods/serpentinization/serpentinization/#eq:density-serpentinization","page":"Serpentinization","title":"eq:density-serpentinization","text":"beginsplit\n    f_rhoreduction = \n        1 \n        + left(\n            fracleft(rho_mantle^char - Delta rho_serpright)rho_mantle^char - 1\n        right)R_serpm text \n    rho_m = f_rhoreduction rho_m^o\nendsplit\n\nwhere rho_m^o is the marker density prior to this update step, rho_mantle^char is the  characteristic mantle density and Delta rho_serp is the density reduction due to serpentinization.\n\nMarker thermal conductivity k_m is updated for serpentinization using the following equation:","category":"section"},{"location":"methods/serpentinization/serpentinization/#eq:thermal-conductivity-serpentinization","page":"Serpentinization","title":"eq:thermal-conductivity-serpentinization","text":"k_m = (1 - R_serpm)k_m^o  + R_serpmk_serp\n\nwhere k_m^o is the thermal conductivity of the marker prior to the update step and k_serpm is  calculated using the following equation:","category":"section"},{"location":"methods/serpentinization/serpentinization/#eq:thermal-conductivity-serpentinite","page":"Serpentinization","title":"eq:thermal-conductivity-serpentinite","text":"k_serp = (\n    3580*(10227*k_serp20^circ C - 1882)\n    *(10T_K(m) - 000068)\n    + 184\n)\n\nwhere k_serp20^circ C is the thermal conductivity of the serpentine at 20^circC and  T_K(m) is the temperature of marker m in Kelvin. The parameter values used in this work for  equations Eq., Eq. and Eq. are provided in  Tab..\n\nParameter Symbol Units Value\nMaximum serpentinization rate S_rate^max s^-1 10^-11\nMaximum submud depth of serpentinization d_serp^max m 4000\nMaximum temperature of serpentinization T_serp^max ^circC 340.5\nReference strain rate for serpentinization dotepsilon_serp s^-1 10^-13\nCharacteristic mantle density rho_mantle^char kg m^-3 3300\nDensity reduction due to serpentinization Delta rho_serp kg m^-3 500\nReference thermal conductivity of serpentinite at 20^circC k_20^circ C W m^-1 K^-1 2.6","category":"section"},{"location":"methods/serpentinization/serpentinization/#tab:serpentinization-example-parameters","page":"Serpentinization","title":"tab:serpentinization-example-parameters","text":"Example parameters for serpentinization model.","category":"section"},{"location":"api/command_line_args/command_line_args/#Command-line-Arguments","page":"Command-line Arguments","title":"Command-line Arguments","text":"There are several helper functions that can be used with EarthBox scripts that allow standardized command-line integration.","category":"section"},{"location":"api/command_line_args/command_line_args/#EarthBox.GetArgs.get_model_output_path_from_cl_args","page":"Command-line Arguments","title":"EarthBox.GetArgs.get_model_output_path_from_cl_args","text":"get_model_output_path_from_cl_args(model_output_path_from_script_path::String)::String\n\nGet the model output path from the command line argument model_output_path=.... If the model output path is not provided, then the model output path is set to the  path from the script executing the plotter.\n\nArguments\n\nmodel_output_path_from_script_path::String:\nPath to the model output directory sent from the script executing the plotter.\n\nReturns\n\nmodel_output_path::String:\nPath to the model output directory\n\n\n\n\n\n","category":"function"},{"location":"api/command_line_args/command_line_args/#EarthBox.GetArgs.get_case_name_from_cl_args","page":"Command-line Arguments","title":"EarthBox.GetArgs.get_case_name_from_cl_args","text":"get_case_name_from_cl_args()::String\n\nGet the model case name from the command line argument case_name=.... If the model case name is not provided, then the model case name is set to \"case0\".\n\nReturns\n\nmodel_case_name::String:\nName of the model case\n\n\n\n\n\n","category":"function"},{"location":"api/command_line_args/command_line_args/#EarthBox.GetArgs.get_istart","page":"Command-line Arguments","title":"EarthBox.GetArgs.get_istart","text":"get_istart()::Int64\n\nGet the starting time step from the command line argument istart=.... If the starting time step is not provided, then the starting time step is set to 1.\n\nReturns\n\nistart::Int64:\nStarting time step\n\n\n\n\n\n","category":"function"},{"location":"api/command_line_args/command_line_args/#EarthBox.GetArgs.get_iend","page":"Command-line Arguments","title":"EarthBox.GetArgs.get_iend","text":"get_iend()::Union{Int64, Nothing}\n\nGet the ending time step from the command line argument iend=.... If the ending time step is not provided, then the ending time step is set to nothing.\n\nReturns\n\niend::Union{Int64, Nothing}:\nEnding time step\n\n\n\n\n\n","category":"function"},{"location":"api/command_line_args/command_line_args/#EarthBox.GetArgs.get_plot_option_name","page":"Command-line Arguments","title":"EarthBox.GetArgs.get_plot_option_name","text":"get_plot_option_name()::String\n\nGet the standardized plot option name from the command line argument. If the plot option name is not provided, then an error is thrown.\n\nThe plot option name is used to lookup a user defined function provided by the  user for plotting EarthBox output.\n\nValid Plot Option Names\n\nmarker_plots: Plot markers using user defined function.\nscalar_plots: Plot scalars using user defined function.\nvelocity_plots: Plot velocity using user defined function.\nstokes_convergence_plots: Plot Stokes convergence using user defined function.\nyield_strength_plots: Plot yield strength using user defined function.\n\nReturns\n\nplot_option_name::String:\nName of the standardized plot option\n\n\n\n\n\n","category":"function"},{"location":"api/command_line_args/command_line_args/#EarthBox.GetArgs.get_earthbox_project_path_from_args","page":"Command-line Arguments","title":"EarthBox.GetArgs.get_earthbox_project_path_from_args","text":"get_earthbox_project_path_from_args()::Union{String, Nothing}\n\nGet the EarthBox project path from the command line argument eb_path=.... If the EarthBox project path is not provided, then the EarthBox project path is  set to nothing.\n\nReturns\n\neb_path::Union{String, Nothing}:\nPath to the EarthBox project\n\n\n\n\n\n","category":"function"},{"location":"benchmarks/models/seafloor_spreading/#Seafloor-Spreading","page":"Seafloor Spreading","title":"Seafloor Spreading","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:seafloor_spreading);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nAverage off-axis thickness of oceanic crust (Numerical): 7405.106679485966\nAverage thickness of oceanic crust (Target): 7000.0                            \n                                                                               \nMax difference (num-ana): 405.10668                                            \nMax relative error: 5.787 %                                                    \nMax relative error limit: 6.000 %                                              \n                                                                               \nTest Successful: max relative error is not greater than limit: 5.787% <= 6.000%\n\n(Image: Seafloor Spreading Benchmark (Topography))","category":"section"},{"location":"benchmarks/models/seafloor_spreading/#fig:seafloor-spreading-topography","page":"Seafloor Spreading","title":"fig:seafloor-spreading-topography","text":"Benchmark result for topography using EarthBox version 0.1.0\n\n(Image: Seafloor Spreading Benchmark (Magmatic Crustal Thickness))","category":"section"},{"location":"benchmarks/models/seafloor_spreading/#fig:seafloor-spreading-xth","page":"Seafloor Spreading","title":"fig:seafloor-spreading-xth","text":"Benchmark result for magmatic crustal thickness using EarthBox version 0.1.0","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/marker_transformation/#Marker-Transformation-Steps","page":"Marker Transformation","title":"Marker Transformation Steps","text":"For each marker m do:\n\n[1] Determine the marker y-coordinate of topography y_topom by interpolating the topography  grid (x_topoi y_topoi) at x-coordinate of marker x_m.\n\n[2] Determine the marker extrusion thickness H_flowtotm by interpolating the topography grid (x_topoi H_flowtoti) at x-coordinate of the marker x_m.\n\n[3] Define the y-coordinate of the top of the newly deposited sedimentary layer y_sedm assuming new volcanic flows were emplaced after sedimentary layers were deposited using the  following equation:","category":"section"},{"location":"thermo_mechanical_algorithm/post_solver_steps/sections/marker_transformation/#eq:top-new_sediment","page":"Marker Transformation","title":"eq:top-new_sediment","text":"y_sedm = y_topom + H_flowtotm\n\n[4] Transform markers for water-air interface:\n\nIf sticky-air markers are below sea level y_sl, transform sticky-air markers to  water markers.\nIf sticky-water markers are above sea level y_sl, transform sticky-water markers  to air markers.\n\n[5] If marker composition is sticky-air or sticky-water and y_m  y_topom transform markers to sedimentary markers if y_m  y_sedm or transform sticky-air markers to volcanic markers if y_m leq y_sedm.\n\n[6] Apply erosion if marker composition is lithological (i.e. not sticky-air or sticky-water) and y_m  y_interpm:\n\nIf y_m  y_sl transform markers to sticky-air markers.\nIf y_m geq y_sl transform markers to sticky-water markers.","category":"section"},{"location":"api/staggered_grid/initialization/#Staggered-Grid-Initialization","page":"Initialization","title":"Staggered Grid Initialization","text":"","category":"section"},{"location":"api/staggered_grid/initialization/#Accessing-Option-Names","page":"Initialization","title":"Accessing Option Names","text":"Available option names for grid_type can be accessed as follows:\n\nStaggeredGrid.option_names.UniformGrid\nStaggeredGrid.option_names.TtypeRefinedGrid\nStaggeredGrid.option_names.Grid51x51UniformRefinementAlongSides\nStaggeredGrid.option_names.Grid51x51SmoothedRefinementAlongSides","category":"section"},{"location":"api/staggered_grid/initialization/#EarthBox.StaggeredGrid.initialize!","page":"Initialization","title":"EarthBox.StaggeredGrid.initialize!","text":"initialize!(\n    model::ModelData; \n    grid_type::Union{Int, String, Symbol, Nothing}=nothing, \n    parameters::Union{Dict{String, <:Union{Float64, Int64, String}}, Nothing}=nothing\n)::Nothing\n\nInitialize staggered grid with the specified grid type and parameters. \n\nArguments\n\nmodel::ModelData\nThe model data object containing model parameters and arrays. \ngrid_type\nControls the type of grid. The grid_type argument can be an   integer ID, a string, a symbol, or nothing. Grid type is stored in the model   data container as an integer ID (itype_grid) and a corresponding string name   (stype_grid). If grid_type is nothing the current grid type defined in the   model data container will be used. Grid type parameters can be accessed  from the model data container as follows:\nitype_grid = model.grids.parameters.grid_options.itype_grid.value\nstype_grid = model.grids.parameters.grid_options.stype_grid.value\nparameters\nDictionary of parameters used to define the grid type. Currently  this is only used for grid_type = :TtypeRefinedGrid. See the section below   called Parameter Dictionary Keys for more information.\n\nReturns\n\nNothing\n\nGrid Types\n\nAvailable grid types (string, symbol, or integer ID) are as follows:\n\nUniformGrid\ngrid_type value: \"UniformGrid\", :UniformGrid, or 0\nUniform basic grid.\nTtypeRefinedGrid\ngrid_type value: \"TtypeRefinedGrid\", :TtypeRefinedGrid, or 1 \nBasic grid has lateral refinement in the central part of the model and vertical refinement in the upper part of the model (i.e. T-type).\nGrid51x51UniformRefinementAlongSides\ngrid_type value: \"Grid51x51UniformRefinementAlongSides\", :Grid51x51UniformRefinementAlongSides, or 2 \n51x51 basic grid with high-resolution along sides. This type is used for convection in a box benchmarks.\nGrid51x51SmoothedRefinementAlongSides\ngrid_type value: \"Grid51x51SmoothedRefinementAlongSides\", :Grid51x51SmoothedRefinementAlongSides, or 3 \n51x51 basic grid with smoothed high-resolution zones along sides. This grid is used for convection in a box benchmarks.\n\nParameter Dictionary Keys\n\nRequired parameter keys for grid type :TtypeRefinedGrid:\n\n\"xo_highres\": Starting x-coordinate of high resolution region in meters\n\"xf_highres\": Ending x-coordinate of high resolution region in meters\n\"yf_highres\": Ending y-coordinate of high resolution region in meters\n\"dx_highres\": Grid spacing in x-direction for high resolution region in meters\n\"dy_highres\": Grid spacing in y-direction for high resolution region in meters\n\nOptional parameter keys for grid type :TtypeRefinedGrid:\n\n\"iuse_trench\": Flag to enable trench-based refinement (0 or 1)\n\"iuse_refinement_delay\": Flag to enable delayed refinement (0 or 1)\n\"refinement_time\": Time in Myr when refinement should occur\n\nNotes:\n\nT-type parameters do not need to be provided as input if they were previously defined when   initializing the model using EarthBoxState.\n\n\n\n\n\n","category":"function"},{"location":"api/markers/boundary_friction/#MarkerBoundaryFriction","page":"MarkerBoundaryFriction","title":"MarkerBoundaryFriction","text":"","category":"section"},{"location":"api/markers/boundary_friction/#Initialize","page":"MarkerBoundaryFriction","title":"Initialize","text":"","category":"section"},{"location":"api/markers/boundary_friction/#EarthBox.Markers.MarkerMaterials.MarkerBoundaryFriction.initialize!","page":"MarkerBoundaryFriction","title":"EarthBox.Markers.MarkerMaterials.MarkerBoundaryFriction.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize marker boundary friction parameters. \n\nArguments\n\nmodel::ModelData: The model data container containing the model parameters and arrays.\n\nKeyword Arguments\n\nboundary_friction_width::Union{Float64, Nothing}=nothing:\nWidth of boundary friction zone\nboundary_friction_angle::Union{Float64, Nothing}=nothing:\nFriction angle of boundary friction zone\nboundary_cohesion::Union{Float64, Nothing}=nothing:\nCohesion of boundary friction zone\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"api/earthbox_state/earthbox_state/#Initializing-EarthBox","page":"EarthBoxState","title":"Initializing EarthBox","text":"EarthBox is initialized by creating a EarthBoxState object is composed of a variety of data structs used by EarthBox. \n\nOn such struct is the ModelData struct with pre-allocated arrays and model parameters that can be accessed","category":"section"},{"location":"api/earthbox_state/earthbox_state/#EarthBox.EarthBoxState","page":"EarthBoxState","title":"EarthBox.EarthBoxState","text":"EarthBoxState\n\nMutable struct used to store EarthBox model state.\n\nFields\n\nrestart_from_backup::Bool\nControls whether to restart model from a backup file called model_backup.jld   located in the output directory.\npaths::Union{EarthBoxPaths.EarthBoxPathsState, Nothing}\nStruct containing path information including model input file, materials   input file, materials library file, output directory, and storage directory.  See Input Path Configuration section below for more details.\nxnum::Union{Int, Nothing}\nNumber of basic nodes in the x direction\nynum::Union{Int, Nothing}\nNumber of basic nodes in the y direction\nxsize::Union{Float64, Nothing}\nModel width in meters\nysize::Union{Float64, Nothing}\nModel height in meters\nnmarkers_cell_x::Union{Float64, Nothing}\nNumber of markers per cell in the x direction\nnmarkers_cell_y::Union{Float64, Nothing}\nNumber of markers per cell in the y direction\ninitialization_params::Union{ParametersDictType, Nothing}\nDictionary of initialization parameters provided as inputs\nrun_paths::Union{Dict{String, String}, Nothing}\nDictionary containing key paths used for running EarthBox models including  the model input file path (model_file), materials input file path   (materials_file), materials library file path (materials_library_file),   model output directory path (output_dir), source directory (src_dir),   and model output directory (plots_dir).\nstorage_dir::Union{String, Nothing}\nPath to storage directory where model backup files will be moved for   longer term storage\nmodel_manager::Union{ModelManager.ModelManagerState, Nothing}\nModel manager state that stores key structs for managing the model run   including including the ModelData struct composed of collections of arrays   and parameters.\nunits::Union{UnitConversionData, Nothing}\nUnit conversion data\n\nConstructor\n\nEarthBoxState(;\n    restart_from_backup::Bool = false, \n    paths::Union{Dict{String, String}, Nothing} = nothing, \n    xnum::Union{Int, Nothing} = nothing, \n    ynum::Union{Int, Nothing} = nothing, \n    znum::Union{Int, Nothing} = nothing, \n    xsize::Union{Float64, Nothing} = nothing, \n    ysize::Union{Float64, Nothing} = nothing, \n    zsize::Union{Float64, Nothing} = nothing, \n    nmarkers_cell_x::Union{Float64, Nothing} = nothing, \n    nmarkers_cell_y::Union{Float64, Nothing} = nothing, \n    nmarkers_cell_z::Union{Float64, Nothing} = nothing, \n    dx_marker::Union{Float64, Nothing} = nothing, \n    dy_marker::Union{Float64, Nothing} = nothing, \n    dz_marker::Union{Float64, Nothing} = nothing, \n    ttype_refinement_parameters::Union{Dict{String, Float64}, Nothing} = nothing, \n    use_mumps::Bool = false, \n    nprocs::Int = 1, \n    use_internal_mumps::Bool = true\n    )\n\nMain state constructor for EarthBox geodynamic simulations used to initialize  the model and manage model run actions. The creation of this state object is  accompanied by the initialization of model data structures including arrays and  parameters. MPI is also initialized if the MUMPS solver is used.\n\nInputs\n\nrestart_from_backup::Bool\nControls whether to restart model from a backup file called model_backup.jld   located in the output directory defined in paths.\npaths::Union{Dict{String, String}, Nothing}\nDictionary of user provided input paths including model input file, materials   input file, materials library file, output directory, and storage directory.   See Input Path Configuration section below for more details.\nxnum::Union{Int, Nothing}\nNumber of basic nodes in the x direction\nynum::Union{Int, Nothing}\nNumber of basic nodes in the y direction\nznum::Union{Int, Nothing}\nNumber of basic nodes in the z direction\nxsize::Union{Float64, Nothing}\nModel width in meters\nysize::Union{Float64, Nothing}\nModel height in meters\nzsize::Union{Float64, Nothing}\nModel depth in meters\nnmarkers_cell_x::Union{Float64, Nothing}\nNumber of markers per cell in the x direction\nnmarkers_cell_y::Union{Float64, Nothing}\nNumber of markers per cell in the y direction\nnmarkers_cell_z::Union{Float64, Nothing}\nNumber of markers per cell in the z direction\ndx_marker::Union{Float64, Nothing}\nMarker spacing (meters) in the x direction used to calculate nmarkers_cell_x\ndy_marker::Union{Float64, Nothing}\nMarker spacing (meters) in the y direction used to calculate nmarkers_cell_y\ndz_marker::Union{Float64, Nothing}\nMarker spacing (meters) in the z direction used to calculate nmarkers_cell_z\nttype_refinement_parameters::Union{Dict{String, Float64}, Nothing}\nDictionary of T-type refinement parameters. See the   T-type Refinement Parameters section below for more details.\nuse_mumps::Bool\nControls whether to use the MUMPS solver.\nnprocs::Int\nNumber of MPI processes to use for the MUMPS solver.\nanalysis_method::Union{String, Symbol, Nothing}\nAnalysis method to use for the MUMPS solver. Options are \"PARALLEL\" and \"SERIAL\".  Default is \"SERIAL\". Using the \"PARALLEL\" option can significantly speed up the   MUMPS solver especially for large systems of equations. However, the \"PARALLEL\"   option may require MPI.jl to be configured using system libraries, MUMPS to be  locally compiled with the appropriate system libraries and MUMPS.jl to be  reconfigured. See installation instructions in the docs for more details.  Set to \"SERIAL\" if you are having issues with the \"PARALLEL\" option.\nparallel_ordering_method::Union{String, Symbol, Nothing}\nParallel ordering method to use for the MUMPS solver. Options are \"PTSCOTCH\"   and \"ParMETIS\". The \"ParMETIS\" option. The \"PTSCOTCH\" is sometimes not  available with Julia MUMPS binaries.\nmemory_relax_perc::Int\nMemory relaxation percentage to use for the MUMPS solver. Default is 25.\nverbose_output::Int\nVerbose output level to use for the MUMPS solver. Default is 0.\nuse_internal_mumps::Bool\nControls whether to use the internal MUMPS solver. See the   Internal vs External MUMPS Solver section below for more details.\npass_large_arrays_via_mpi::Bool\nControls whether to pass large arrays via MPI between a parent and spawned   child process. If false arrays are passed via file IO. Passing large arrays   via MPI between a parent and spawned child process does not work on all systems   and is therefore tuned off by default.\n\nOutputs\n\nEarthBoxState  EarthBoxState object\n\nInput-dependent Initialization Scenarios\n\nAll model arrays are pre-allocated during initialization which requires xnum,  ynum, xsize, and ysize to be defined for grid-related arrays and  nmarkers_cell_x and nmarkers_cell_y to be defined for marker-related arrays.  The procedure used to define these key initialization parameters is dependent on the inputs provided by the user. For cases involving local grid refinement  (e.g. T-type refinement), xnum, ynum are derived from the T-type refinement  parameters. If marker spacing parameters are provided, nmarkers_cell_x and  nmarkers_cell_y are derived from the marker spacing and xsize and ysize and  corresponding average marker spacing parameters, dx_marker and dy_marker,  respectively. Specific, input-dependent initialization scenarios are described below.\n\nInitialization Scenarios for Scalar Arrays\n\nScenario 1: Input parameters xnum, ynum, xsize, and ysize are defined  as non-nothing API inputs:\n\nxnum, ynum, xsize, and ysize will be used to initialize the model    including scalar arrays\n\nScenario 2: ttype_refinement_parameters, xsize, and ysize are  provided as non-nothing API inputs:\n\nxnum and ynum are automatically derived from the dictionary parameters and    used to initialize the model including scalar arrays\n\nScenario 3: A model input file containing entries for xnum, ynum, xsize,  and ysize is defined in the paths dictionary and ttype_refinement_parameters,  xsize, and ysize are equal to nothing:\n\nxnum, ynum, xsize, and ysize will be read from the model input file and used to initialize    the model including scalar arrays\n\nOther scenarios (e.g. incomplete inputs) will throw an error. For example, if  the user provides only xnum, and other parameters are equal to nothing, the  code will throw an error as inputs are incomplete.\n\nIf a complete input scenario is provided and a path to a model input file is  provided, the code will ignore the model input file defined in the paths  dictionary and all inputs must be defined via the API with subsequent API  initialization calls.\n\nInitialization Scenarios for Marker Arrays\n\nScenario 1: Input parameters nmarkers_cell_x and nmarkers_cell_y are all  defined as inputs\n\nnmarkers_cell_x and nmarkers_cell_y will be used to initialize marker arrays\n\nScenario 2: Input parameters dx_marker and dy_marker are all defined as  non-nothing inputs\n\nnmarkers_cell_x and nmarkers_cell_y will be derived from the marker spacing and xsize    and ysize\n\nScenario 3: A model input file is defined in the paths dictionary and  nmarkers_cell_x, nmarkers_cell_y are defined in the model input file:\n\nnmarkers_cell_x and nmarkers_cell_y will be read from the model input file and used to    initialize marker arrays\n\nScenario 4: A model input file is defined in the paths dictionary and dx_marker, and  dy_marker and xsize and ysize are defined in the model input file:\n\nnmarkers_cell_x and nmarkers_cell_y will be derived from the marker spacing and xsize    and ysize\n\nIf parameters dx_marker and dy_marker are encountered by EarthBox they will be  used to calculate nmarkers_cell_x and nmarkers_cell_y. Marker resolution  parameters in the x- and y-directions are calculated independently of each other.\n\nInput Path Configuration (paths dictionary)\n\nThe paths dictionary with type Dict{String, String} accepts the following optional key:value pairs:\n\nmodel_input_file\nPath to yaml model input file containing input parameters for the model.   If omitted the user will have to define input parameters through various   initialization methods in the EarthBox API.\nmaterials_input_file\nPath to yaml materials input file containing material information for each   material used in the model. If omitted the user will have to provide provide   this path or a dictionary of material inputs as inputs for marker material   initialization through the EarthBox API.\nmaterials_library_file\nPath to materials library file containing material parameters associated with   the material names used in the materials input file. If omitted the user will   have to provide the path to the materials library file as input for marker    material initialization through the EarthBox API. A collection of material    libraries are provided in the EarthBox package MaterialLibrary.\noutput_dir\nPath to output directory where model output files will be written. If omitted   the output directory will be set to the active model directory with the   default name 'output_dir'.\nstorage_dir\nPath to storage directory where output files will be moved for longer term   storage. If omitted output files will not be moved. omitted output files   will not be moved.\n\nT-type Refinement Parameters\n\nThe ttype_refinement_parameters dictionary with type Dict{String, Float64}  accepts the following key:value pairs:\n\nxo_highres: Starting x-coordinate of high resolution region in meters\nxf_highres: Ending x-coordinate of high resolution region in meters\ndx_highres: Constant grid spacing in x-direction for high resolution region in meters\nyf_highres: Ending y-coordinate of high resolution region in meters\ndy_highres: Constant grid spacing in y-direction for high resolution region in meters\ndx_lowres: Average grid spacing in x-direction for low resolution regions in meters\ndy_lowres: Average grid spacing in y-direction for low resolution regions in meters\n\nIf all keys are defined in the ttype_refinement_parameters dictionary, the number of basic nodes in  the x and y directions, xnum and ynum, will be calculated from the T-type refinement parameters.\n\nNote that dx_lowres and dy_lowres are used to calculate the number of basic nodes in x and y directions during model initialization and are not used in grid generation functions. Furthermore, parameters  dx_lowres and dy_lowres are not required when initializing the staggered grid  through StaggeredGrid.initialize!.\n\nParameters from the ttype_refinement_parameters dictionary are loaded into the model data structures by this API call eliminating the need to provide them when initializing the staggered grid through the EarthBox API StaggeredGrid.initialize!.\n\nInternal vs External MUMPS Solver\n\nThe bool use_internal_mumps controls whether the internal MUMPS solver is used where a persistent  MPI process is spawned and information is passed between a parent and child Julia process via MPI.  If use_internal_mumps is false, the MUMPS solver is ran as an external process and information  is passed via file IO. The internal solver is preferred since it significantly minimizes Julia  compilation and loading overhead and eliminates overhead associated with file IO.\n\n\n\n\n\n","category":"type"},{"location":"thermo_mechanical_algorithm/heat_solver_steps/heat_solver_steps/#Heat-solver-Steps","page":"Heat-solver Steps","title":"Heat-solver Steps","text":"[1] Update purely conductive temperature solution T_solu(ij)_b and conductive temperature  change Delta T_(ij)_b using steps \\ref{step:conductivetemperaturesolution} and  [eq.temperature-change] with temperature interpolated from markers to basic grid T_(ij)_b  as the initial condition.\n\n[2] Update marker temperature T_m for conductive temperature change Delta T_(ij)_b and  sub-grid thermal diffusion using Subgrid Thermal Diffusion Steps with T_(ij)_b.","category":"section"},{"location":"model_data/model_data/#ModelData","page":"ModelData","title":"ModelData","text":"","category":"section"},{"location":"model_data/model_data/#Accessing-ModelData-Objects","page":"ModelData","title":"Accessing ModelData Objects","text":"Parameter and array objects can be access from the ModelData structure via the obj_dict field.\n\n\nusing EarthBox\n\neb = EarthBoxState(xnum=100, ynum=100, xsize=100000, ysize=100000.0, dx_marker=100.0, dy_marker=100.0);\n\nmodel = eb.model_manager.model;\nxnum = model.obj_dict[\"xnum\"];\nmarker_x = model.obj_dict[\"marker_x\"];\nmarker_y = model.obj_dict[\"marker_y\"];\n\nx = marker_x.array[50]\narray_units = marker_x.units\narray_description = marker_x.description\n\nvalue = xnum.value\nunits = xnum.units\nparameter_description = xnum.description\n\n\nnote: nested dot access\nModel objects can also be accessed via nested dot structures. For example, the marker x-coordinates can be accessed via model.markers.arrays.location.marker_x.array. The nested dot access patterns are defined for each objects in a model data collection. See  [MarkerContainer.ArrayCollection.Location][@ref ModelDataContainer.MarkerContainer.ArrayCollection.Location] for an example of nested dot access definitions.","category":"section"},{"location":"model_data/model_data/#EarthBox.ModelDataContainer.ModelData","page":"ModelData","title":"EarthBox.ModelDataContainer.ModelData","text":"ModelData\n\nStruct containing parameter and array collections for the EarthBox model data and other fields  related to the EarthBox model. Each collection container contains parameter and array collections,  parameters and arrays respectively, for the various data categories. Parameters and array  collections are in turn composed of groups of related parameters and arrays. The general structure  of the model data collections container is as follows:\n\nModelData\n collection_container_1\n   parameters\n     parameter_group_A\n       parameter_A1\n       parameter_A2\n     parameter_group_B\n        parameter_B1\n        parameter_B2\n   arrays\n      array_group_C\n        array_C1\n        array_C2\n      array_group_D\n         array_D1\n         array_D2\n collection_container_2\n   parameters\n     parameter_group_E\n       parameter_E1\n       parameter_E2\n     parameter_group_F\n        parameter_F1\n        parameter_F2\n   arrays\n      array_group_G\n        array_G1\n        array_G2\n      array_group_H\n         array_H1\n         array_H2\n\nFor a ModelData object model, the parameter_A1 and array_C1 can be accessed as follows: \n\nmodel.collection_container_1.parameters.parameter_group_A.parameter_A1\nmodel.collection_container_1.arrays.array_group_C.array_C1\n\nParameter groups contain parameter objects with attributes like value, unit, and description. Array groups contain array objects with attributes like array, units, and description.\n\nFields\n\ngrids::Grids or Grids3d: Parameter and array collections for basic and staggered grids. See Grids for details.\ntimestep::Timestep: Parameter collections for model time stepping. See Timestep for details.\ngeometry::Geometry: Parameter collections for material geometry. See Geometry for details.\nbcs::BoundaryConditions: Parameter and array collections for boundary conditions. See BoundaryConditions for details.\nmaterials::Materials: Parameter, array and dictionary collections for material properties. See Materials for details.\nmarkers::Markers: Parameter and array collections for markers. See Markers for details.\ninterpolation::Interpolation: Parameter and array collections for marker-grid interpolation. See Interpolation for details.\nmelting::Melting: Parameter and array collections for melting and melt extraction. See Melting for details.\ntopography::Topography: Parameter and array collections for topography evolution. See Topography for details.\nheat_equation::HeatEquation: Parameter and array collections for heat equation. See HeatEquation for details.\nstokes_continuity::StokesContinuity: Parameter and array collections for Stokes-continuity solver. See StokesContinuity for details.\ngravity: Gravity parameters including gravity components and control flags. See Gravity for details.\nbenchmarks::Benchmarks: Parameter collection for benchmark parameters. See Benchmarks for details.\nconversion::Conversion: Conversion parameters. See Conversion for details.\ncarbonate::Carbonate: Parameter and array collections for carbonate deposition configuration. See Carbonate for details.\nRGAS::ParameterFloat: Gas constant. See ParameterFloat for details on type.\nunit_conversion_data::UnitConversionData: Data structure with unit conversion functions and registry.\nmodel_input_file::Union{String, Nothing}: Model input file.\ninput_parameters::ParametersDictType: Input parameters dictionary.\nobj_dict::ObjDictType: Dictionary of EarthBox parameter and array objects where keys are names and values are parameter and array objects.\nglobal_iter_dict::GlobalIterDictType: Dictionary of global iteration information.\n\n\n\n\n\n","category":"type"},{"location":"thermo_mechanical_algorithm/post_solver_steps/post_solver_steps/#Post-solver-Steps","page":"Post-solver Steps","title":"Post-solver Steps","text":"[1] Calculate melt extraction (Melt Extraction Update Steps).\n\n[2] Update topography grid (x_topoi y_topoi) for material displacement using updated  velocity solution (Topography Grid Update Steps).\n\n[3] Apply the sediment transport model with sediment compaction to update topography grid  (x_topoi y_topoi) (Sediment Transport Update Steps).\n\n[4] Copy topography grid (x_topo y_topo) to (x_topo y_topo), which will be used to track the evolving topography associated with lava flows.\n\n[5] Apply lava flow model (Lava Flow Update Steps).\n\n[6] Update sea level y_sl assuming local isostatic equilibrium between reference lithosphere column and the average pressure at the base of the model.\n\n[7] Update next eruption time t_eruption to t_eruption + Delta t_e if the model  time t is greater than the current eruption time t_eruption.\n\n[8] Recycle markers that have exited the model domain by re-injecting rock markers at the bottom of the model domain as asthenosphere, and by re-injecting sticky air-water markers at the top of the model domain.\n\n[9] Apply marker transformation for erosion, sedimentation and extrusion by updating marker composition C_m (Marker Transformation Steps).\n\n[10] Calculate the serpentinization ratio R_serpm using equation  eq:serpentinization-ratio with marker temperature T_m and plastic strain rate  dot epsilon_plasticm after copying the current serpentinization ratio to R_serpm^o.","category":"section"},{"location":"api/marker_materials/material_types/#Material-Types","page":"Material Types","title":"Material Types","text":"","category":"section"},{"location":"api/marker_materials/material_types/#EarthBox.Markers.MarkerMaterials.Registry.MaterialTypesRegistry","page":"Material Types","title":"EarthBox.Markers.MarkerMaterials.Registry.MaterialTypesRegistry","text":"MaterialTypesRegistry\n\nA registry of material type names. Material types are used to define different  evolving genetic characteristics of a material including phase transformation  and other evolving genetic characteristics. This structure provides easy access to the material type names.\n\nFields\n\ngeneral::String = \"General\".\nGeneral material type. This is the default material type for all materials.\nsticky_air::String = \"StickyAir\".\nSticky air material type used to approximate a stress-free air-rock interface that may involve the transformation of rock material to sticky air to approximate the effects of erosion.\nsticky_water::String = \"StickyWater\".\nSticky water material type used to approximate a stress-free water-rock interface that may involve the transformation of rock material to sticky water to approximate the effects of erosion or the transformation of sticky-air to sticky-water to maintain the water-air interface.\nsediment::String = \"Sediment\".\nSediment material type formed by erosion and deposition often implemented in the code by  transforming sticky air/water to sediment to approximate deposition.\nfelsic_continental_crust_fertile::String = \"FertileFelsicContinentalCrust\".\nFertile felsic continental crust capable of undergoing partial melting to produce magma.\nfelsic_continental_crust_partially_molten::String = \"PartiallyMoltenFelsicContinentalCrust\".\nPartially molten felsic continental crust containing a mixture of solid and liquid phases.\nfelsic_continental_crust_refactory::String = \"RefactoryFelsicContinentalCrust\".\nRefactory felsic continental crust that has undergone melting and exists under conditions not   conducive to further melting.\nextracted_felsic_magma::String = \"ExtractedFelsicMagma\".\nMelt extracted from the felsic continental crust to form intra-crustal magma bodies.\nsolidified_granite::String = \"SolidifiedGranite\".\nSolidified granite material type formed by the cooling of magma.\nsolidified_rhyolite::String = \"SolidifiedRhyolite\".\nSolidified rhyolite material type formed by the cooling of granitic magma extruded onto the  Earth's surface.\nmafic_continental_crust_fertile::String = \"FertileMaficContinentalCrust\".\nFertile mafic continental crust capable of undergoing partial melting to produce magma.\nmafic_continental_crust_partially_molten::String = \"PartiallyMoltenMaficContinentalCrust\".\nPartially molten mafic continental crust containing a mixture of solid and liquid phases.\nmafic_continental_crust_refactory::String = \"RefactoryMaficContinentalCrust\".\nRefactory mafic continental crust that has undergone melting and exists under conditions not   conducive to further melting.\nultramafic_mantle_fertile::String = \"FertileUltramaficMantle\".\nFertile ultramafic mantle capable of undergoing partial melting to produce magma.\nultramafic_mantle_partially_molten::String = \"PartiallyMoltenUltramaficMantle\".\nPartially molten ultramafic mantle containing a mixture of solid and liquid phases.\nultramafic_mantle_refactory::String = \"RefactoryUltramaficMantle\".\nRefactory ultramafic mantle that has undergone melting and exists under conditions not   conducive to further melting.\nultramafic_continental_mantle_refractory::String = \"UltramaficContinentalMantleRefractory\".\nRefractory ultramafic mantle that has undergone melting and exists under conditions not   conducive to further melting.\nsolidified_gabbro::String = \"SolidifiedGabbro\".\nSolidified gabbro material type formed by the cooling of gabbroic magma or partially molten   gabbro.\nsolidified_gabbro_partially_molten::String = \"SolidifiedGabbroPartiallyMolten\".\nPartially molten gabbro material that has undergone partial solidification from gabbroic magma and still contains a mixture of solid and liquid phases.\nextracted_gabbroic_magma::String = \"ExtractedGabbroicMagma\".\nGabbroic melt extracted from the mantle and instantaneously migrated to   to form magma bodies in accumulation zones either at local maxima in the   partially molten region or at the base of the crust. \nextruded_gabbroic_magma::String = \"ExtrudedGabbroicMagma\".\nGabbroic melt extracted from the mantle and instantly extruded onto the  Earth's surface.\nsolidified_layered_gabbro::String = \"SolidifiedLayeredGabbro\".\nSolidified layered gabbro material type formed by the cooling of layered gabbroic magma or   partially molten layered gabbro. Layered gabbro refers to gabbroic material that has undergone  fractional crystallization that modifies the composition and melting properties.\nsolidified_layered_gabbro_partially_molten::String = \"SolidifiedLayeredGabbroPartiallyMolten\".\nPartially molten layered gabbro material that has undergone partial solidification from layered   gabbroic magma and still contains a mixture of solid and liquid phases.\nextracted_layered_gabbroic_magma::String = \"ExtractedLayeredGabbroicMagma\".\nLayered gabbroic melt extracted from the mantle and instantaneously migrated to   to form magma bodies in accumulation zones at the base of the Moho above local  maxima in the partially molten mantle regions. \nsolidified_basalt::String = \"SolidifiedBasalt\".\nSolidified basalt material type formed by the cooling of basaltic magma or partially molten   basalt.\nserpentinite::String = \"Serpentinite\".\nSerpentinite material type formed by the alteration of peridotite in the presence of water and implemented in the code by transforming ultramafic material to serpentinite.\nsalt::String = \"Salt\".\nSalt material type formed by the evaporation and precipitation and implemented in the code by  transforming sticky water to salt.\n\n\n\n\n\n","category":"type"},{"location":"methods/discretization/stokes2D/#Discretizing-the-2D-Stokes-Continuity-Equations","page":"Discretization of the 2D Stokes-continuity Equations","title":"Discretizing the 2D Stokes-Continuity Equations","text":"Coefficients and right-hand-side terms of the system of equations for the Stokes  and continuity equations are generated by looping over basic grid cells (fig:staggered-grid)  and discretizing the governing equations associated with unknowns v_x, v_y and P using finite difference stencils where v_x is the x-velocity unknown defined on the  vx-staggered grid, v_y is the y-velocity unknown defined on the vy-staggered grid and  P is the scaled pressure unknown defined on the staggered pressure grid. The following  equation shows how the scaled pressure unknown P is related to the Pressure P:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:scaled-pressure","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:scaled-pressure","text":"P = fracPf_P\n\nThe scaling factor f_P is defined by the following equation:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:pressure-scaling-factor","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:pressure-scaling-factor","text":"f_P = left(frac 2eta_vp(00)b  Delta x_avg + Delta y_avg right)\n\nwhere eta_vp(00)b is the visco-plastic viscosity at the upper-left node of the basic  grid, Delta x_avg and Delta y_avg are the average grid spacings in the x- and  y-directions, respectively, and P is pressure.","category":"section"},{"location":"methods/discretization/stokes2D/#x-Stokes-Discretization","page":"Discretization of the 2D Stokes-continuity Equations","title":"x-Stokes Discretization","text":"The finite difference representation of the x-Stokes equation eq:x-stokes is given by:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:x-stokes-fd-representation","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:x-stokes-fd-representation","text":"fracDelta sigma_xxDelta x \n+ fracDelta sigma_xyDelta y \n- fracDelta PDelta x = -g_x rho text\n\nAs described by (Gerya, 2010), a conservative finite difference formulation on the stencil shown in Fig. allows Eq. to be re-written as:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:x-stokes-discretized","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:x-stokes-discretized","text":"beginsplit\nleft\n    frac\n        2 eta_vpR frac(v_xR - v_xC)Delta x_R \n        -2 eta_vpL frac(v_xC - v_xL)Delta x_L\n     Delta x_C\nright \n+ left\n    frac \n        eta_vpD left(\n                frac(v_xD - v_xC)Delta y_D \n                + frac(v_yLR - v_yLL)Delta x_C\n            right)\n        - eta_vpU left(\n                frac(v_xC - v_xU)Delta y_U \n                + frac(v_yUR - v_yUL)Delta x_C\n            right)\n     Delta y_C\nright \n- f_P frac(P_R - P_L)Delta x_C = -g_x frac(rho_U + rho_D)2 \nendsplit\n\nwhere the subscripts L, R, U, D, UL, LL, UR and LR denote nodal  position to the left, right, up, down, upper-left, lower-left, upper-right and lower-right,  respectively, with respect to the central velocity node v_xC located along the right right  boundary of the basic grid cell where the stencil is applied. Subscripts b, p, x and  y refer to the basic, pressure, x-velocity and y-velocity grids, respectively. The grid  spacings Delta x_C, Delta x_L, Delta x_R denote the x-direction grid spacings  centered on the central velocity node v_xC, to the left of this node and to the right of  this node, respectively. The grid spacings Delta y_C, Delta y_U, Delta y_D, denote  the y-direction grid spacings centered on the central velocity node v_xC, above this node  and below this node, respectively. \n\n(Image: x-Stokes Stencil)","category":"section"},{"location":"methods/discretization/stokes2D/#fig:stencil-x-stokes","page":"Discretization of the 2D Stokes-continuity Equations","title":"fig:stencil-x-stokes","text":"Stencil used to discretize Stokes equations in the x-direction to produce the finite  difference representation shown in equation Eq.. This stencil is  used to generate an equation associated with the central velocity unknown v_xC for the large system of equations with coefficients for unknowns v_xC, v_xL, v_xR, v_xU, v_xD, v_yUL, v_yLL, v_yUR, v_yLR, P_R, P_L and the right-hand-side term as shown in  equation Eq.. Red circles denote nodes on the x-velocity grid, blue circles  denote nodes on the y-velocity grid, light blue circles denote nodes on the pressure grid, and  black circles denote nodes on the basic grid. This stencil is applied to the basic grid cell  colored light gray with upper-left node indices (ij)_b. Staggered grid indices are shown with  small font for nodes used in the stencil. Unknowns and staggered grid spacings use the following  subscript notation to denote position relative to the central velocity node v_xC: C, L, R, U,  D, UL, LL, UR, and LR denote the central, left, right, up, down, upper-left, lower-left,  upper-right, and lower-right positions, respectively.\n\nRearranging Eq. leads to the following equation with coefficients  for unknowns v_xC, v_xL, v_xR, v_xU, v_xD, v_yUL, v_yLL,  v_yUR, v_yLR, P_R, P_L and the right-hand-side term R_x:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:x-stokes-coeff","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:x-stokes-coeff","text":"beginsplit\n -left(\n     frac2 eta_vpLDelta x_L Delta x_C \n    + frac2 eta_vpRDelta x_R Delta x_C \n    + fraceta_vpUDelta y_U Delta y_C \n    + fraceta_vpDDelta y_D Delta y_C\n right) v_xC \n + frac2 eta_vpLDelta x_L Delta x_C v_xL \n+ frac2 eta_vpRDelta x_R Delta x_C v_xR \n+ fraceta_vpUDelta y_U Delta y_C v_xU \n+ fraceta_vpDDelta y_D Delta y_C v_xD \n + fraceta_vpUDelta x_C Delta y_C v_yUL \n- fraceta_vpDDelta x_C Delta y_C v_yLL \n-fraceta_vpU Delta x_C Delta y_C v_yUR \n-  fraceta_vpDDelta x_C Delta y_C v_yLR \n - fracf_PDelta x_C P_R \n+ fracf_PDelta x_C P_L \n= -g_x fracrho_U + rho_D2\nendsplit\n\nThe large matrix coordinates (ij) of coefficients in equation  Eq. are related to the global index I_v_x from  equation Eq. as follows:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:stokes-coeff-global-indices","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:stokes-coeff-global-indices","text":"beginsplit\n    v_xC text    (I_v_x text  I_v_x) \n    v_xL text    (I_v_x text  I_v_x - Delta I_v_xR) \n    v_xR text    (I_v_x text  I_v_x + Delta I_v_xR) \n    v_xU text    (I_v_x text  I_v_x - 3) \n    v_xD text    (I_v_x text  I_v_x + 3) \n    v_yUL text    (I_v_x text  I_v_x - 2) \n    v_yUR text    (I_v_x text  I_v_x - 2 + Delta I_v_xR) \n    v_yLL text    (I_v_x text  I_v_x + 1) \n    v_yLR text    (I_v_x text  I_v_x + 1 + Delta I_v_xR) \n    P_L text    (I_v_x text  I_v_x + 2) \n    P_R text    (I_v_x text  I_v_x + 2 + Delta I_v_xR) \nendsplit\n\nwhere Delta I_v_xR is the cell index shift required to get to the right velocity node and  is defined as follows: \n\nDelta I_v_xR = 3(N_y(b) - 1)\n\nThe x-Stokes stencil is not applied along basic cells located along the right boundary  since the v_xC is prescribed. For these cases the matrix element  (3I_cell text  3I_cell) is equal to 1 and the right-hand-side is equal to the  prescribed v_x velocity (v_x = zero for free slip and no slip). These nodes are referred  to as ghost unknowns by (Gerya, 2010). When ghost boundary nodes are included in the  stencil formulation some unknowns become constants that are moved to the right-hand-side of the  system of equations.","category":"section"},{"location":"methods/discretization/stokes2D/#y-Stokes-Discretization","page":"Discretization of the 2D Stokes-continuity Equations","title":"y-Stokes Discretization","text":"The finite difference representation of the y-Stokes equation  eq:y-stokes-stabilization is given by:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:y-stokes-fd-representation","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:y-stokes-fd-representation","text":"fracDelta sigma_yyDelta y \n+ fracDelta sigma_yxDelta x \n- fracDelta PDelta y \n- g_y Delta t left( v_xfracDelta rhoDelta x + v_yfracDelta rhoDelta yright) \n= -g_y rho text\n\nwhich can be rewritten by applying conservative finite difference formulation of  (Gerya, 2010) as:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:y-stokes-discretized","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:y-stokes-discretized","text":"beginsplit\nleftfrac\n    2eta_vpDfrac(v_yD - v_yC)Delta y_D \n    - 2eta_vpUfrac(v_yC - v_yU)Delta y_U\nDelta y_Cright \n+ leftfrac \n    eta_vpR\n        left(\n            frac(v_yR - v_yC)Delta x_R \n            + frac(v_xLR - v_xUR)Delta y_C\n        right)\n        - eta_vpL\n            left(\n                frac(v_yC - v_yL)Delta x_L \n                + frac(v_xLL - v_xUL)Delta y_C\n            right) \n    Delta x_C right\n- f_Pfrac(P_D - P_U)Delta y_C\n- g_y  Delta t frac14\n    left(v_xUL + v_xUR + v_xLL + v_xLRright)\n        frac12left(fracrho_RR - rho_RDelta x_R + fracrho_R - rho_LDelta x_Lright)\n- g_y  Delta t v_yC frac12\n    left(fracrho_LR - rho_RDelta y_D + fracrho_R - rho_URDelta y_Uright)\n= -g_yfrac(rho_bR+rho_bL)2\nendsplit\n\nwhere the subscripts L, R, RR, U, D, UL, LL, UR and LR denote  nodal position to the left, right, right-right, up, down, upper-left, lower-left, upper-right and  lower-right, respectively, with respect to the central velocity node v_yC located along the  upper boundary of the basic grid cell where the stencil is applied. Subscripts b, p,  x and y refer to the basic, pressure, x-velocity and y-velocity grids, respectively. The  grid spacings Delta y_C, Delta y_U, Delta y_D denote the y-direction grid spacings  centered on the central velocity node v_yC, above this node and below this node,  respectively. The grid spacings Delta x_C, Delta x_L, Delta x_R denote the  x-direction grid spacings centered on the central velocity node v_yC, to the left of this  node and to the right of this node, respectively. \n\n(Image: y-Stokes Stencil)","category":"section"},{"location":"methods/discretization/stokes2D/#fig:stencil-y-stokes","page":"Discretization of the 2D Stokes-continuity Equations","title":"fig:stencil-y-stokes","text":"Stencil used to discretize Stokes equations in the y-direction to produce the finite  difference representation shown in equation Eq.. This stencil is  used to generate an equation associated with the central velocity unknown v_yC for the large system of equations with coefficients for unknowns v_yC, v_yL+, v_yR, v_yU, v_yD, v_xUL, v_xLL, v_xUR, v_xLR, P_U, P_D and the right-hand-side term as shown in  equation Eq.. See figure Fig. for additional details.\n\nRearranging Eq. leads to the following equation with coefficients  for unknowns v_yC, v_yU, v_yD, v_yL, v_yR, v_xUL, v_xLL,  v_xUR, v_xLR, P_U, P_D and the right-hand-side term R_y:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:y-stokes-coeff","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:y-stokes-coeff","text":"beginsplit\n- left(\n    frac2eta_vpUDelta y_CDelta y_U \n    + frac2eta_vpDDelta y_CDelta y_D \n    + fraceta_vpLDelta x_CDelta x_L \n    + fraceta_vpRDelta x_CDelta x_R\n    + c_ystab\nright) v_yC \n+ frac2eta_vpLDelta x_CDelta x_Lv_yL\n+ frac2eta_vpRDelta x_CDelta x_Rv_yR\n+ frac2eta_vpUDelta y_CDelta y_Uv_yU\n+ frac2eta_vpDDelta y_CDelta y_Dv_yD \n+ left(fraceta_vpLDelta x_CDelta y_C-c_xstabright)v_xUL\n- left(fraceta_vpLDelta x_CDelta y_C+c_xstabright)v_xLL\n- left(fraceta_vpRDelta x_CDelta y_C+c_xstabright)v_xUR\n- left(fraceta_vpRDelta x_CDelta y_C+c_xstabright)v_xLR \n- fracf_PDelta y_CP_D\n+ fracf_PDelta y_CP_U\n= -g_yfrac(rho_bR+rho_bL)2\nendsplit\n\nwhere c_ystab is given by:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:y-stokes-stab","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:y-stokes-stab","text":"c_ystab \n= g_y  Delta t frac12\nleft(fracrho_LR - rho_RDelta y_D + fracrho_R - rho_URDelta y_Uright) text\n\nand c_xstab is given by:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:x-stokes-stab","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:x-stokes-stab","text":"c_xstab = g_y  Delta t frac18\nleft(fracrho_RR - rho_RDelta x_R + fracrho_R - rho_LDelta x_Lright) text\n\nThe large matrix coordinates (ij) of coefficients in equation  Eq. are related to the global index I_v_y from  equation eq:global-indices-of-stokes-unknowns as follows:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:y-stokes-matrix-indices","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:y-stokes-matrix-indices","text":"beginsplit\n    v_yC text    (I_v_y text  I_v_y) \n    v_yU text     (I_v_y text  I_v_y - 3) \n    v_yD text    (I_v_y text  I_v_y + 3) \n    v_yL text    (I_v_y text  I_v_y - Delta I_v_xR) \n    v_yR text    (I_v_y text  I_v_y + Delta I_v_xR) \n    v_xUL text    (I_v_y text  I_v_y - 1 - Delta I_v_xR) \n    v_xLL text    (I_v_y text  I_v_y + 2 - Delta I_v_xR) \n    v_xUR text    (I_v_y text  I_v_y - 1) \n    v_xLR text    (I_v_y text  I_v_y + 2) \n    P_U text    (I_v_y text  I_v_y + 1) \n    P_D text    (I_v_y text  I_v_y + 4) \nendsplit","category":"section"},{"location":"methods/discretization/stokes2D/#Continuity-Discretization","page":"Discretization of the 2D Stokes-continuity Equations","title":"Continuity Discretization","text":"The finite difference representation of the continuity equation Eq is given by:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:continuity-fd-representation","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:continuity-fd-representation","text":"fracDelta v_xDelta x + fracDelta v_yDelta y = R_c\n\nwhich can be rewritten by applying conservative finite difference formulation of \\cite{gerya2010} as:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:continuity-discretized","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:continuity-discretized","text":"beginsplit\nleft\n    fracv_xR - v_xLDelta x_b \n    + fracv_yD - v_yUDelta y_b\nright = 0\nendsplit\n\nwhere the subscripts L, R, U, D denote nodal position to the left, right, up and down, respectively, with respect to the central pressure node P_pC located at the center of the basic grid cell where  the stencil is applied. Subscripts b, p, x and y refer to the basic, pressure, x-velocity and y-velocity grids, respectively. The grid spacings Delta x_b and Delta y_b denote the x and y-direction grid spacings of the basic grid centered on the central pressure node P_pC. Rearranging  Eq. leads to the following equation with coefficients for unknowns v_xL, v_xR, v_yU, v_yD and the right-hand-side term R_c:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:continuity-coeff","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:continuity-coeff","text":"beginsplit\n    fracf_PDelta x_bv_xR\n    - fracf_PDelta x_bv_xL\n    + fracf_PDelta y_bv_yD\n    - fracf_PDelta y_bv_yU\n    = 0\nendsplit\n\n(Image: Continuity Stencil)","category":"section"},{"location":"methods/discretization/stokes2D/#fig:stencil-continuity","page":"Discretization of the 2D Stokes-continuity Equations","title":"fig:stencil-continuity","text":"Stencil used to discretize the continuity equation to produce the finite  difference representation shown in equation Eq.. This stencil is  used to generate an equation associated with the central pressure unknown P for the large system of equations with coefficients for unknowns v_xL, v_xR, v_yU, v_yD, P and the right-hand-side term as shown in equation Eq.. See figure Fig. for additional details.\n\nThe large matrix coordinates (ij) of coefficients in equation  Eq. are related to the global index I_P from  equation Eq. as follows:","category":"section"},{"location":"methods/discretization/stokes2D/#eq:continuity-matrix-indices","page":"Discretization of the 2D Stokes-continuity Equations","title":"eq:continuity-matrix-indices","text":"beginsplit\n    v_xL text    (I_p text  I_p - 2 - Delta I_v_xR)\n    v_xR text    (I_p text  I_p - 2)\n    v_xU text    (I_p text  I_p - 4)\n    v_yD text    (I_p text  I_p - 1)\nendsplit","category":"section"},{"location":"methods/discretization/stokes2D/#Sparse-Stokes-Matrix-Example","page":"Discretization of the 2D Stokes-continuity Equations","title":"Sparse Stokes Matrix Example","text":"Appling the stencils from x-Stokes Discretization, y-Stokes Discretization and Continuity Discretization for a small system leads to the system of equations shown in Fig..\n\n  0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26\n  x y p x y p x y p x y p x y p x y p x y p x y p x y p\n0 x C LL L D    UR  R LR R               \n1 y UR C U LR D D     R                \n2 p R D 1                        \n3 x U UL  C LL L D    UR  R LR R            \n4 y  U  UR C U LR D D     R             \n5 p  U  R D 0                     \n6 x    U UL  C LL L D    UR  R LR R         \n7 y        1                   \n8 p L    U  R D 0                  \n9 x L      U UL  C LL L D    UR  R LR R      \n10 y UL L  LL    U  UR C U LR D D     R       \n11 p    L    U  R D 0               \n12 x    L      U UL  C LL L D    UR  R LR R   \n13 y    UL L  LL    U  UR C U LR D D     R    \n14 p       L    U  R D 0            \n15 x       L      U UL  C LL L D    UR  R LR R\n16 y                 1          \n17 p          L    U  R D 0         \n18 x                   1        \n19 y          UL L  LL    U  UR C U LR D D   \n20 p             L    U  R D 0      \n21 x                      1     \n22 y             UL L  LL    U  UR C U LR D D\n23 p                L    U  R D 0   \n24 x                         1  \n25 y                          1 \n26 p                   L    U  R D 0","category":"section"},{"location":"methods/discretization/stokes2D/#fig:sparse-matrix-stokes","page":"Discretization of the 2D Stokes-continuity Equations","title":"fig:sparse-matrix-stokes","text":"Sparse matrix for discretized Stokes-continuity equations where N_xb = N_yb = 4.  For this case Delta I_v_xR is equal to 9. Unknowns for v_x, v_y and P are  denoted along the horizontal and vertical matrix axes as x, y, and p, respectively. The associated  stencil is applied to each row of the matrix where the x-Stokes stencil is applied to rows labeled  as x, the y-Stokes stencil is applied to rows labeled as y, and the continuity stencil is applied  to rows labeled as p. Coefficients for unknowns associated with the equation generated from a given  stencil are applied to the appropriate column of the matrix. Locations of unknowns relative to a  main central node denoted by C are denoted as U, D, L, R, UL, UR, LL, LR which represent up, down,  left, right, upper-left, upper-right, lower-left, and lower-right, respectively. Coefficients with  italic font are equal to zero since the product of the prescribed unknown and associated coefficient  from the x-stokes-coeff equation is moved to the right-hand-side term. Central main nodes  associated with a given stencil with coefficients not equal to 0 or 1 are denoted as C.  Matrix values equal one in the central node location are associated with prescribed boundary  unknowns. Zeros along the diagonal represent pressure coefficients that are equal to zero since  pressure does not appear in the incompressible continuity equation. Blank spaces are zero-value  coefficients for non-diagonal unknowns. Note that the central pressure node P has one non-zero  coefficient equal to 1 at matrix location (22) where the pressure boundary condition is  applied.","category":"section"},{"location":"models/hot_box_melting/hot_box_melting/#Melting-of-a-Hot-Box-in-the-Mantle","page":"Hot Box Melting","title":"Melting of a Hot Box in the Mantle","text":"Simple melting test involving a square domain with high temperature that undergoes  melting, melt extraction, melt emplacement at the Moho and melt extrusion at the surface.\n\nsee EarthBox/models/hot_box_melting","category":"section"},{"location":"model_data/collections/topography/","page":"Topography","title":"Topography","text":"Topography\n\nParameters\nModelOptions\nTopoGrid\nDepoAndErosionRates\nDownhillDiffusion\nSeaLevel\nReferenceLithosphere\nArrays","category":"section"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.Topography","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.Topography","text":"Topography <: CollectionContainer\n\nData structure containing parameter and array objects for topography evolution.\n\nFields\n\nparameters::Parameters: Parameter groups for topography configuration\narrays::Arrays: Array groups for topographic grid data\n\nConstructor\n\nTopography()::Topography\n\nCreate a new Topography collection with default parameters.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.Parameters","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for topography evolution model.\n\nFields\n\nmodel_options::ModelOptions: Topography model on/off switches and options\ntopo_grid::TopoGrid: Topography grid parameters\ndepo_and_erosion_rates::DepoAndErosionRates: Deposition and erosion rates\ndownhill_diffusion::DownhillDiffusion: Downhill diffusion parameters\nsealevel::SeaLevel: Sea level parameters\nreference_lithosphere::ReferenceLithosphere: Reference lithosphere parameters\n\nConstructor\n\nParameters()\n\nCreate a new Parameters collection with default topography model values.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.ModelOptionsGroup.ModelOptions","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.ModelOptionsGroup.ModelOptions","text":"ModelOptions <: AbstractParameterGroup\n\nParameter group for topography model options.\n\nFields\n\niuse_topo::ParameterInt: Integer flag used to enable topography model: 0 = off; 1 = on\nitype_topo::ParameterInt: ID for topography node advection option: 0 = Runge Kutta with interpolation; 1 = antidiffusion\nstype_topo::ParameterStr: Topography advection option name\niuse_downhill_diffusion::ParameterInt: Integer flag that activates sediment transport model with downhill diffusion (0 = off, 1 = on). If option is set to off uniform erosion and deposition rates will be used\niuse_salt_deposition::ParameterInt: Integer flag that activates salt deposition model: 0 = off; 1 = on\nobj_list::Vector{Union{ParameterFloat, ParameterInt, ParameterStr}}: List of parameter objects\n\nNested Dot Access\n\niuse_topo = model.topography.parameters.model_options.iuse_topo.value\nitype_topo = model.topography.parameters.model_options.itype_topo.value\nstype_topo = model.topography.parameters.model_options.stype_topo.value\niuse_downhill_diffusion = model.topography.parameters.model_options.iuse_downhill_diffusion.value\niuse_salt_deposition = model.topography.parameters.model_options.iuse_salt_deposition.value\n\nConstructor\n\nModelOptions()\n\nReturns\n\nModelOptions: New ModelOptions parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.TopoGridGroup.TopoGrid","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.TopoGridGroup.TopoGrid","text":"TopoGrid <: AbstractParameterGroup\n\nParameter group for topography grid parameters.\n\nFields\n\ntopo_xsize::ParameterFloat: Topography model size in horizontal direction in meters\ntoponum::ParameterInt: Number of nodes in the x-direction of the topography model\ndx_topo::ParameterFloat: Topography grid step size in meters\nnsmooth_top_bottom::ParameterInt: Number of topography nodes that will be used to calculate a running average for the calculated y-coordinate of the top and bottom of marker layers\nmarker_search_factor::ParameterFloat: Search factor used to calculate the search radius for determining the shallowest and deepest markers associated with a given topography node\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\ntopo_xsize = model.topography.parameters.topo_grid.topo_xsize.value\ntoponum = model.topography.parameters.topo_grid.toponum.value\ndx_topo = model.topography.parameters.topo_grid.dx_topo.value\nnsmooth_top_bottom = model.topography.parameters.topo_grid.nsmooth_top_bottom.value\nmarker_search_factor = model.topography.parameters.topo_grid.marker_search_factor.value\n\nConstructor\n\nTopoGrid()\n\nReturns\n\nTopoGrid: New TopoGrid parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.DepoAndErosionRatesGroup.DepoAndErosionRates","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.DepoAndErosionRatesGroup.DepoAndErosionRates","text":"DepoAndErosionRates <: AbstractParameterGroup\n\nParameter group for deposition and erosion rates.\n\nFields\n\nerosion_rate::ParameterFloat: Erosion rate above water level in m/s\nsedimentation_rate::ParameterFloat: Sedimentation rate below water level in m/s\npelagic_sedimentation_rate::ParameterFloat: Pelagic sedimentation rate (m/s). Typical value used in the literature are 0.3 mm/yr (syn-rift) to 0.01 mm/yr (post-rift) (e.g. Perez-Gussinye et al., 2020)\npelagic_sedimentation_rate_reduction_factor::ParameterFloat: The pelagic sedimentation rate is divided by this factor after the specified pelagic sedimentation rate reduction time.\npelagic_sedimentation_rate_reduction_time::ParameterFloat: Time in Myr after which the pelagic sedimentation rate is reduced by the pelagicsedimentationratereductionfactor.\nsalt_deposition_rate::ParameterFloat: Salt deposition rate in m/s\nsalt_start_time::ParameterFloat: Salt start time in Myr\nsalt_end_time::ParameterFloat: Salt end time in Myr\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nerosion_rate = model.topography.parameters.depo_and_erosion_rates.erosion_rate.value\nsedimentation_rate = model.topography.parameters.depo_and_erosion_rates.sedimentation_rate.value\npelagic_sedimentation_rate = model.topography.parameters.depo_and_erosion_rates.pelagic_sedimentation_rate.value\npelagic_sedimentation_rate_reduction_factor = model.topography.parameters.depo_and_erosion_rates.pelagic_sedimentation_rate_reduction_factor.value\npelagic_sedimentation_rate_reduction_time = model.topography.parameters.depo_and_erosion_rates.pelagic_sedimentation_rate_reduction_time.value\nsalt_deposition_rate = model.topography.parameters.depo_and_erosion_rates.salt_deposition_rate.value\nsalt_start_time = model.topography.parameters.depo_and_erosion_rates.salt_start_time.value\nsalt_end_time = model.topography.parameters.depo_and_erosion_rates.salt_end_time.value\n\nConstructor\n\nDepoAndErosionRates()\n\nReturns\n\nDepoAndErosionRates: New DepoAndErosionRates parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.DownhillDiffusionGroup.DownhillDiffusion","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.DownhillDiffusionGroup.DownhillDiffusion","text":"DownhillDiffusion <: AbstractParameterGroup\n\nParameter group for downhill diffusion parameters.\n\nFields\n\ndownhill_diff_elev_max::ParameterFloat: d2Yt - max elevation\ntransport_length::ParameterFloat: Transport length scale in meters\ntopo_diff_coef::ParameterFloat: Topography diffusion coefficient in m^2/s\nsubaerial_slope_diffusivity::ParameterFloat: Subaerial slope diffusivity in m^2/s. Typical value used in the literature is 0.25 m^2/yr (7.9e-9 m^2/s) (e.g. Andres-Martinez et al., 2019; Armitage et al., 2015)\nprecipitation_rate::ParameterFloat: Precipitation rate in m/s used to calculate water flux in drainage basins for fluvial transport diffusivity model. Precipitation rate (m/s). Used to calculate water flux in drainage basins. Typical value used in the literature is 1 m/yr (3.2e-8 m/s) (e.g. Andres-Martinez et al.; 2019; Huffman et al., 2009).\nsubaerial_transport_coefficient::ParameterFloat: Subaerial discharge transport coefficient. Used to calculate effective subaerial fluvial transport diffusivity that includes slope diffusivity, precipitation rate and downstream distances. Typical values used in the literature are 1e-4 (low transport) to 1e-2 (high transport) (e.g. Andres-Martinez et al., 2019; Armitage et al., 2015).\nsubmarine_slope_diffusivity::ParameterFloat: Maximum submarine slope diffusivity in m^2/s used in diffusivity model that decays exponentially with water depth. Typical value used in the literature is 100 m^2/yr (3.2e-9 m^2/s) (e.g. Andres-Martinez et al., 2019; Kaufman et al., 1991).\nsubmarine_diffusion_decay_depth::ParameterFloat: Submarine diffusion decay depth (m). Typical value used in the literature is 1000-2000 m (e.g. Andres-Martinez et al., 2019; Kaufmanet al., 1991; Perez-Gussinye et al., 2020).\ntransport_timestep::ParameterFloat: Transport timestep (s). Typical value used in the literature is 1000 years (3.1536e10 s) (e.g. Andres-Martinez et al., 2019).\nnumber_of_transport_timesteps_per_model_timestep::ParameterInt: Number of transport time steps per model time step.\niuse_compaction_correction::ParameterInt: Integer flag activating compaction correction during sediment transport where newly deposited sediment thickness and pre-existing sediment thickness are corrected for compaction.\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\ndownhill_diff_elev_max = model.topography.parameters.downhill_diffusion.downhill_diff_elev_max.value\ntransport_length = model.topography.parameters.downhill_diffusion.transport_length.value\ntopo_diff_coef = model.topography.parameters.downhill_diffusion.topo_diff_coef.value\nsubaerial_slope_diffusivity = model.topography.parameters.downhill_diffusion.subaerial_slope_diffusivity.value\nprecipitation_rate = model.topography.parameters.downhill_diffusion.precipitation_rate.value\nsubaerial_transport_coefficient = model.topography.parameters.downhill_diffusion.subaerial_transport_coefficient.value\nsubmarine_slope_diffusivity = model.topography.parameters.downhill_diffusion.submarine_slope_diffusivity.value\nsubmarine_diffusion_decay_depth = model.topography.parameters.downhill_diffusion.submarine_diffusion_decay_depth.value\ntransport_timestep = model.topography.parameters.downhill_diffusion.transport_timestep.value\niuse_compaction_correction = model.topography.parameters.downhill_diffusion.iuse_compaction_correction.value\n\nConstructor\n\nDownhillDiffusion()\n\nReturns\n\nDownhillDiffusion: New DownhillDiffusion parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.SeaLevelGroup.SeaLevel","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.SeaLevelGroup.SeaLevel","text":"SeaLevel <: AbstractParameterGroup\n\nParameter group for sea level parameters.\n\nFields\n\nitype_sealevel::ParameterInt: Integer flag controlling the sealevel model\nstype_sealevel::ParameterStr: Sealevel option name\ny_water_ini::ParameterFloat: Initial and current seawater level in meters\nbase_level_shift::ParameterFloat: Shift in base level in meters. Positive values shift the base level down in the +y direction.\nbase_level_shift_end_time::ParameterFloat: End time for base level shift in Myr\ny_sealevel::ParameterFloat: Seawater level y-coordinate in meters\nobj_list::Vector{Union{ParameterFloat, ParameterInt, ParameterStr}}: List of parameter objects\n\nNested Dot Access\n\nitype_sealevel = model.topography.parameters.sealevel.itype_sealevel.value\nstype_sealevel = model.topography.parameters.sealevel.stype_sealevel.value\ny_water_ini = model.topography.parameters.sealevel.y_water_ini.value\nbase_level_shift = model.topography.parameters.sealevel.base_level_shift.value\nbase_level_shift_end_time = model.topography.parameters.sealevel.base_level_shift_end_time.value\ny_sealevel = model.topography.parameters.sealevel.y_sealevel.value\n\nConstructor\n\nSeaLevel()\n\nReturns\n\nSeaLevel: New SeaLevel parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.ReferenceLithosphereGroup.ReferenceLithosphere","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.ParameterCollection.ReferenceLithosphereGroup.ReferenceLithosphere","text":"ReferenceLithosphere <: AbstractParameterGroup\n\nParameter group for reference lithosphere parameters.\n\nFields\n\nthickness_upper_continental_crust_ref::ParameterFloat: Thickness of upper continental crust of the reference lithosphere in meters\nthickness_lower_continental_crust_ref::ParameterFloat: Thickness of lower continental crust of the reference lithosphere in meters\nthickness_lithosphere_ref::ParameterFloat: Thickness of lithosphere for the reference lithosphere in meters\ngridy_spacing_ref::ParameterFloat: Spacing of grid cells in y-direction for the reference lithosphere in meters\ntemperature_top_ref::ParameterFloat: Temperature at top of lithosphere for the reference lithosphere in Celsius\ntemperature_moho_ref::ParameterFloat: Temperature at Moho of the reference lithosphere in Celsius\ntemperature_base_lith_ref::ParameterFloat: Temperature at base of lithosphere for the reference lithosphere in Celsius\nadiabatic_gradient_ref::ParameterFloat: Adiabatic gradient below the reference lithosphere in K/km\niuse_linear_segments::ParameterInt: Integer flag that controls the type of temperature profile used in the reference lithosphere model. If iuse_linear_segments = 1, a temperature profile with four linear segments is used that is controlled by the following user defined parameters: temperature_top_ref, temperature_moho_ref, and temperature_base_lith_ref. If iuse_linear_segments = 0, the temperature profile is calculated using an analytical 3-layer model defined during marker temperature. See the AnalyticalThreeLayer model description at MarkerTemperature). Default is 1.\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nthickness_upper_continental_crust_ref = model.topography.parameters.reference_lithosphere.thickness_upper_continental_crust_ref.value\nthickness_lower_continental_crust_ref = model.topography.parameters.reference_lithosphere.thickness_lower_continental_crust_ref.value\nthickness_lithosphere_ref = model.topography.parameters.reference_lithosphere.thickness_lithosphere_ref.value\ngridy_spacing_ref = model.topography.parameters.reference_lithosphere.gridy_spacing_ref.value\ntemperature_top_ref = model.topography.parameters.reference_lithosphere.temperature_top_ref.value\ntemperature_moho_ref = model.topography.parameters.reference_lithosphere.temperature_moho_ref.value\ntemperature_base_lith_ref = model.topography.parameters.reference_lithosphere.temperature_base_lith_ref.value\nadiabatic_gradient_ref = model.topography.parameters.reference_lithosphere.adiabatic_gradient_ref.value\niuse_linear_segments = model.topography.parameters.reference_lithosphere.iuse_linear_segments.value\n\nConstructor\n\nReferenceLithosphere()\n\nReturns\n\nReferenceLithosphere: New ReferenceLithosphere parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/topography/#EarthBox.ModelDataContainer.TopographyContainer.ArrayCollection.Arrays","page":"Topography","title":"EarthBox.ModelDataContainer.TopographyContainer.ArrayCollection.Arrays","text":"Arrays <: AbstractArrayCollection\n\nData structure containing array groups for topography evolution.\n\nFields\n\ngridt::TopoArray2DState: (7, toponum) Topography grid array\nROW 1: x-coordinates of topography grid nodes.\nROW 2: y-coordinate of topography grid nodes (i.e. elevation).\nROW 3: Updated pre-antidiffusion y-coordinate (i.e. elevation) at topography grid nodes.\nROW 4: x-component of velocity at topography grid nodes.\nROW 5: y-component of velocity at topography grid nodes.\nROW 6: Antidiffusion correction.\nROW 7: Thickness of extrusive material at each node.\n\nNested Dot Access\n\nmodel.topography.arrays.gridt.array\n\nConstructor\n\nArrays(toponum::Int)::Arrays\n\nCreate a new Arrays collection with the given topography grid resolution.\n\nArguments\n\ntoponum::Int: Number of topography grid points\n\n\n\n\n\n","category":"type"},{"location":"models/lithospheric_extension/extension_weak_fault/#Lithospheric-Extension-with-a-Weak-Fault","page":"Extension with Weak Fault","title":"Lithospheric Extension with a Weak Fault","text":"Lithospheric extension model with a weak fault that localizes deformation.\n\nsee EarthBox/models/lithospheric_extension/extension_weak_fault","category":"section"},{"location":"#Introduction-to-EarthBox","page":"Introduction","title":"Introduction to EarthBox","text":"EarthBox is a multiphase visco-elasto-plastic marker-in-cell geodynamic modeling program that  discretizes the Stokes-continuity and heat transport equations on a staggered grid using  conservative finite differences and free-surface stabilization (See Methods).  Advective processes are modeled using a 4-th order Runge-Kutta scheme that includes both  grid and sub-grid changes in temperature and deviatoric stress. A variety of geologic  processes are integrated in the EarthBox modeling system including partial melting,  instantaneous melt extraction and transport, gabbroic melt fractionation, melt extrusion,  lava flow, submarine hydrothermal cooling, exothermic serpentinization and sediment  transport with erosion, deposition, compaction and an isostatically realistic global sea level. EarthBox uses a composite viscous flow law that includes dislocation creep, diffusion creep, Peierls creep, the effects of viscous softening associated with grain size reduction and the  effects of partial melting. The frictional-plastic model used by EarthBox includes strain weakening and melt damage associated with melt transport networks above zones of melt focusing  (Fig.).\n\n<iframe width=\"750\" height=\"375\"\n   src=\"https://www.youtube.com/embed/EExMeB9Svmc\"\n   title=\"YouTube video\"\n   frameborder=\"0\"\n   allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n   allowfullscreen>\n</iframe>","category":"section"},{"location":"#fig:video-example-model-melt-damage","page":"Introduction","title":"fig:video-example-model-melt-damage","text":"Video of an EarthBox simulation of magmatic crust formation and subaerial lava flow with melt damage  above regions of melt focusing\n\nThe goals of the EarthBox.jl project are two-fold: \n\nTo create an easy-to-use and easy-to-modify geodynamic modeling framework with   performance comparable to C++ and Fortran, optimized for multi-threaded shared   memory machines. \nTo provide an extensible system for building libraries of options and model cases. \n\nEarthBox is currently 2D with an experimental 3D multigrid solver that will be integrated  into the EarthBox system during a future release. EarthBox is developed using the Julia  programming language and includes arm's-length integration with the  parallel direct solver MUMPS (Amestoy et al., 2001; Amestoy et al., 2019) that manages the stochastic  nature of this powerful parallel direct solver that if not properly addressed can lead to failed simulation runs.\n\nTo get started with EarthBox see EarthBox Installation,  Building and Executing Models with the EarthBox API, EarthBox Models and EarthBox API Overview. \n\nThe fundamental aspects of the marker-in-cell approach for solving incompressible flows with a  free-surface used by EarthBox were first published by Harlow and Welch (1965). This approach was later  modified for visco-elasto-plastic problems by Gerya and Yuen (2003), Gerya and Yuen (2007), Gerya (2010). EarthBox uses a  visco-elasto-plastic thermo-mechanical algorithm that closely follows the algorithm described  by Gerya (2010) but with the node-based plasticity approach from Gerya (2019) to  improve the convergence of the non-linear visco-elasto-plastic Stokes-continuity solver  (see Methods and Main Steps).\n\nEarthBox includes a melting model with linearized melt fraction and instantaneous melt  extraction with optional emplacement at the Moho to simulate magma intrusion at mid-ocean ridges (see Melt generation, Transport and Emplacement). Novel aspects of EarthBox's melting  model are (1) a simple gabbroic fractionation model based on the proximity of extracted melt  to the Moho, (2) a melt extrusion and lava flow model based on cellular automata that  allows the modeling of the formation of seaward dipping reflectors (see Melt Extrusion and Lava Flow) and (3) a probabilistic melt-damage model that  weakens frictional plastic properties above regions of melt focusing that plays a critical role in stabilizing spreading centers when extrusive processes are included.\n\nTopography can be difficult to accurately track with particle-in-cell models. EarthBox implements an Eulerian-Lagrangian approach whereby a topography marker chain is advected using a 4th order Runge-Kutta scheme and then topographic elevation is  interpolated to an Eulerian topography grid. The approach led to highly accurate tracking of the air-rock interface comparable to finite-element Eulerian-Lagrangian codes. \n\nEarthBox provides an option to define global sea level using the isostatic equilibrium  between a reference lithospheric column and the average pressure at the base of the  model (Kneller et al., 2023). Sediment transport including erosion and deposition with fluvial  and marine processes is implemented using the approach of Andrs-Martnez et al. (2019)  (see Sediment Transport) but with the added effect of sediment compaction. \n\nEarthBox also includes the effects of hydrothermal circulation on submarine thermal  structure that takes into account the effects of sediment overburden  (see Hydrothermal Circulation) and how exothermic serpentinization reactions  impact thermal conductivity and density (see Serpentinization).\n\nNumerical and analytical benchmarks of EarthBox are presented in the Benchmarks providing a  direct comparison to similar codes such as I2ELVIS that has been used  extensively in published geodynamic modeling studies (Gerya and Yuen, 2003; Gerya, 2010; Gerya, 2019). EarthBox includes an integrated benchmarking system allowing the user to quickly reproduce benchmarks, gain confidence in multiple aspects of the code and test the code  after modifications are made (see Benchmarks). Some novel aspects of the design of the EarthBox software are as follows:\n\nA consistent option scheme utilizing a common option state and Julia's multiple dispatch system  making it easy to customize and extend EarthBox and manage complex and diverse model options.\nIntegrated boundary-condition options for the Stokes-continuity and heat equations  for specific problem types that take marker recycling into account (see Boundary Condition Models).\nA self-contained fully integrated benchmarking system allows most aspects of the code to be  tested in a fully integrated manner (see Benchmarks).\nFlexible model building, execution and plotting features allowing the use of an API  or YAML input files (see EarthBox API Overview).\nA multiple model case management system (see Case Management).","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/marker_viscosity_update/#Marker-Creep-Viscosity-Update-Steps","page":"Marker Creep Viscosity Update Steps","title":"Marker Creep Viscosity Update Steps","text":"[1] Update non-linear creep viscosity eta_creepm for all markers m  (Non-linear Viscosity Update Steps).\n\n[2] Initialize visco-plastic viscosity eta_vpm with creep viscosity eta_creepm.\n\n[3] Update marker visco-plastic viscosity eta_vpm for each marker m to account for  extractable melt fraction using equation eq:viscosity-partial-melt with the current  visco-plastic viscosity as the initial value eta_vpm^o and extractable melt fraction  M_extractablem.","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/marker_viscosity_update/#Non-linear-Viscosity-Update-Steps","page":"Marker Creep Viscosity Update Steps","title":"Non-linear Viscosity Update Steps","text":"For each marker m do:\n\n[1] Initialize the deviatoric stress invariant sigma_IIAm using equation  eq:second-invariant-stress with current marker deviatoric shear stress sigma_xym and deviatoric normal stress sigma_xxm.\n\n[2] Calculate effective creep viscosity eta_creepm using equation  eq:composite-viscosity with deviatoric stress invariant sigma_IIAm and  dot epsilon_eff calculated with current marker temperature T_m, pressure P_m and deviatoric stress invariant sigma_IIAm.\n\n[3] Forecast the deviatoric stress invariant sigma_IIBm using equation  eq:visco-elastic-stress-forecast with current creep viscosity eta_creepm. \n\n[4] Update eta_creepm using bisection (Update Effective Viscosity Using Bisection).\n\n[5] Copy updated marker creep viscosity eta_creepm and copy to  eta_vp(m) to initialize visco-plastic marker viscosity for time step.","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/marker_viscosity_update/#Update-Effective-Viscosity-Using-Bisection","page":"Marker Creep Viscosity Update Steps","title":"Update Effective Viscosity Using Bisection","text":"While N_iterations  N_max and Delta sigma  1 Do\n\n[1] Calculate average stress invariant sigma_IIavgm using the following equation:","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/marker_viscosity_update/#eq:stress-inv-avg-bisection","page":"Marker Creep Viscosity Update Steps","title":"eq:stress-inv-avg-bisection","text":"sigma_IIavgm = frac12 \n    left( sigma_IIAm + sigma_IIBm right)\n\n[2] Calculate effective creep viscosity eta_creepm using equation  eq:composite-viscosity with deviatoric stress invariant sigma_IIavgm and dot epsilon_eff calculated with marker temperature T_m, pressure P_m and  deviatoric stress invariant sigma_IIavgm.\n\n[3] Update the forecasted visco-elastic stress invariant sigma_IIfcm  using equation eq:visco-elastic-stress-forecast with eta_creepm and current marker deviatoric shear stress sigma_xym and deviatoric normal stress  sigma_xxm.\n\n[4] Update bisection limits:\n\nukw: \ntextif  ( sigma_IIBm  sigma_IImA ) text and  ( sigma_IIfcm  sigma_IIavgm ) text or  ( sigma_IIBm  sigma_IIAm ) text and  ( sigma_IIfcm  sigma_IIavgm )sigma_IIAm = sigma_IIavgmtextelsesigma_IIBm = sigma_IIavgmtextend\n\n[5] Update the stress change Delta sigma using the following equation:","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/marker_viscosity_update/#eq:bisection-stress-change","page":"Marker Creep Viscosity Update Steps","title":"eq:bisection-stress-change","text":"Delta sigma = sigma_IIBm - sigma_IIAm","category":"section"},{"location":"model_data/collections/gravity/","page":"Gravity","title":"Gravity","text":"Gravity\n\nParameters","category":"section"},{"location":"model_data/collections/gravity/#EarthBox.ModelDataContainer.GravityContainer.Gravity","page":"Gravity","title":"EarthBox.ModelDataContainer.GravityContainer.Gravity","text":"Gravity\n\nStruct containing all gravity-related components for the EarthBox model.\n\nFields\n\nparameters: Gravity parameters including gravity components and control flags\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/gravity/#EarthBox.ModelDataContainer.GravityContainer.ParameterCollection.Parameters","page":"Gravity","title":"EarthBox.ModelDataContainer.GravityContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for gravity parameters.\n\nFields\n\ngravity_x::ParameterFloat: x-component of gravity acceleration in m/s/s\ngravity_y::ParameterFloat: y-component of gravity acceleration in m/s/s\nturn_off_gravity_y::ParameterInt: Flag to turn off y-component of gravity: 0 = off; 1 = on\nnsteps_turn_off_gravity::ParameterInt: Number of steps to gradually turn off gravity\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\ngravity_x = model.gravity.parameters.gravity_x.value\ngravity_y = model.gravity.parameters.gravity_y.value\nturn_off_gravity_y = model.gravity.parameters.turn_off_gravity_y.value\nnsteps_turn_off_gravity = model.gravity.parameters.nsteps_turn_off_gravity.value\n\nConstructor\n\nParameters()\n\nReturns\n\nParameters: New Parameters collection with initialized values\n\n\n\n\n\n","category":"type"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/melt_damage_update/#Melt-Damage-Update-Steps","page":"Melt Damage Update Steps","title":"Melt Damage Update Steps","text":"For each drainage basin k do\n\nCalculate the central damage zone damage probability p_damage^centralusing equation  eq:central-damage-probability with characteristic magmatic crust height  H_mck calculated during melt extraction.\nCalculate the x-coordinate limits of the melt damage zone x_damage^min and  x_damage^max and the y-coordinate limit y_damage^max using equations eq:melt-damage-zone-limits with the average x-coordinate of the shallowest partially molten mantle marker x_shallowpmk and average y-coordinate of the shallowest partially molten mantle marker y_shallowpmk calculated during melt extraction.\nCalculate the melt damage factor for each marker (Melt Damage Marker Update).","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/melt_damage_update/#Melt-Damage-Marker-Update","page":"Melt Damage Update Steps","title":"Melt Damage Marker Update","text":"For each marker m do:\n\nCalculate the damage probability of the marker p_damagem using equation  eq:melt-damage-probability with the x-coordinate of the marker x_m, x_shallowpmk, p_damage^central, x_damage^min and x_damage^max.\nCalculate a random number r between 0 and 1.\nAssign the marker damage factor f_damagem using equation  eq:melt-damage-factor with p_damagem and r.","category":"section"},{"location":"plot_tools/cl_plotter/#Command-line-Plotter","page":"Command-line Plotter","title":"Command-line Plotter","text":"The EarthBox command-line plotter allows the user to build customized functions  for plotting EarthBox output files. The standard way to use the EarthBox plotter  involves creating a script called Plot.jl in a directory containing model input  files and scripts. The Plot.jl script should contain a module called Plot with  plotting functions, model output paths, material definition (for marker and yield plots)  and a function that executes the plotter function run_cl_plotter. Paths and options are specified via command line with an option to directly pass the root path of the model output directory as a function argument to eliminate the need to write the  full path via command line.\n\nFor more detailed information about available plotting functions that can be used  with the command-line plotter see the following:\n\nPlotting Scalar Arrays\nPlotting Marker Swarms\nPlotting Velocity Vectors\nPlotting Yield Strength\nPlotting Stokes Convergence","category":"section"},{"location":"plot_tools/cl_plotter/#EarthBox.PlotToolsManager.ModelPlots2DManager.run_cl_plotter","page":"Command-line Plotter","title":"EarthBox.PlotToolsManager.ModelPlots2DManager.run_cl_plotter","text":"run_cl_plotter(;\n    model_output_path::Union{String, Nothing}=nothing,\n    root_path_output::Union{String, Nothing}=nothing,\n    marker_plots_func::Function,\n    scalar_plots_func::Function,\n    velocity_plots_func::Function,\n    stokes_convergence_plots_func::Function,\n    yield_strength_plots_func::Function,\n)::Nothing\n\nEarthBox plot runner function that uses command line arguments. Run this function  from a script that is executed via command line.\n\nArguments\n\nmodel_output_path::Union{String, Nothing}:\nPath to the model output directory containing the model output files.  If not provided, then the model output path is defined using the case_name   and the root_path or the model output path provided as a command-line argument.\nroot_path_output::Union{String, Nothing}:\nRoot path to the model output directory containing the model output files.  If not provided, then the root path is defined using the command-line   argument root_path=....\nmarker_plots_func::Function:\nFunction to plot markers. \nscalar_plots_func::Function:\nFunction to plot scalars\nvelocity_plots_func::Function:\nFunction to plot velocity\nstokes_convergence_plots_func::Function:\nFunction to plot Stokes convergence\nyield_strength_plots_func::Function:\nFunction to plot yield strength\nmodel_output_from_script_path::String:\nPath to the model output directory sent from the script executing the plotter.  This is used if the model output path is not specified in the command line arguments.\n\nUsage\n\nAssuming the run_cl_plotter function is called from a script called Plot.jl ...\n\nTo run the plotter with the full model output path specified via a command-line argument:\n\njulia Plot.jl <plot_option_name> istart=<istart> iend=<iend> model_output_path=<model_output_path> \n\nTo run the plotter with the modeloutputpath defined by case_name=<case_name> and root_path=<root_path> from command line arguments:\n\njulia Plot.jl <plot_option_name> case_name=<case_name> root_path=<root_path> istart=<istart> iend=<iend>\n\nTo run plotter with model_output_path defined by case_name=<case_name> from  command line and the parameter root_path_output:\n\njulia Plot.jl <plot_option_name> case_name=<case_name> istart=<istart> iend=<iend>\n\nwhere:\n\n<plot_option_name>\nThe name of the plot option to use with the following options:\nmarker_plots: Plot the markers using the user defined function.\nscalar_plots: Plot the scalars using the user defined function.\nvelocity_plots: Plot the velocity using the user defined function.\nstokes_convergence_plots: Plot the Stokes convergence using the user defined function.\nyield_strength_plots: Plot the yield strength using the user defined function.\ncase_name=<case_name>\nThe name of the model case to plot like case0, case1, case2, etc. If   not provided, then the default case name is case0.\nmodel_output_path=<model_output_path>\nThe path to the model output directory containing the model output files.   If not provided, then the model output path is defined using the case_name   and the root_path or a root path provided as an argument to the   run_cl_plotter function.\nroot_path=<root_path>\nThe root path to the model output directory. This will be used along with the   case_name to define the model output path if the model output path is not    provided via command line and the root_path_output argument is not    defined in the call to the command-line plotter (run_cl_plotter).\nistart=<istart>\nThe starting time step. Default is 1.\niend=<iend>\nThe ending time step. If not provided, then the ending time step is set to   the starting time step.\n\nExamples\n\njulia Plot.jl marker_plots istart=1 iend=100 model_output_path=/path/to/naliboff17_case0_output\n\nor to use case_name=<case_name> and root_path=<root_path> to define the  model output path, run:\n\njulia Plot.jl marker_plots case_name=case0 root_path=/path/to/root_path istart=1 iend=100\n\nor to use case_name=<case_name> and the parameter root_path_output to define the model  output path, run:\n\njulia Plot.jl marker_plots case_name=case0 istart=1 iend=100\n\n\n\n\n\n","category":"function"},{"location":"plot_tools/vector_plots/#Plotting-Velocity-Vectors","page":"Velocity Vector Plots","title":"Plotting Velocity Vectors","text":"","category":"section"},{"location":"plot_tools/vector_plots/#EarthBox.PlotToolsManager.ModelPlots2DManager.plot_velocity","page":"Velocity Vector Plots","title":"EarthBox.PlotToolsManager.ModelPlots2DManager.plot_velocity","text":"plot_velocity(;\n    model_output_path::String,\n    dimensions::Tuple{Float64, Float64, Float64, Float64},\n    xyspacing::Tuple{Float64, Float64},\n    istart::Int64 = 1,\n    iend::Union{Int64, Nothing} = nothing,\n    kwargs...\n)::Nothing\n\nArguments\n\nmodel_output_path::String:\nPath to output directory containing model output files\ndimensions::Tuple{Float64, Float64, Float64, Float64}:\nDimensions of plot: (xmin, xmax, ymin, ymax)\nxyspacing::Tuple{Float64, Float64}:\nSpacing of ticks for the x and y axes: (xspacing, yspacing)\nistart::Int64 = 1:\nInitial starting time step\niend::Union{Int64, Nothing} = nothing:\nFinal ending time step\n\nOptional Velocity Plotting Keyword Arguments\n\ndecimation_factor::Int:\nDecimation factor for reducing the number of markers plotted\nscale_factor::Float64:\nScale factor for the velocity plot\n\nOptional General Plotting Keyword Arguments\n\nnsteps::Int: \nNumber of time steps to plot\nnskip::Int: \nNumber of time steps to skip\nistart::Int: \nInitial starting time step\niplot_contour_labels::Int:\n0 = off; 1 = plot contour labels\ncolor_map::Union{String, Symbol}:\ncolor map name for scalar grid plots (see https://docs.makie.org/dev/explanations/colors)\nfigure_dpi::Float64:\nDots per square inch for figures\nfigsize::Tuple{Float64, Float64}:\nFigure size in inches in x-y directions\nlength_units::String:\nLength units for plots (\"km\", \"m\", \"cm\")\ntime_units::String:\nTime units for plots (\"Myr\", \"yr\", \"s\")\nvelocity_units::String:\nVelocity units for plots (\"cm/yr\", \"cm/hr\", \"m/s\", \"m/yr\", \"mm/yr\")\ntemperature_units::String:\nTemperature units for plots (\"C\", \"K\")\nviscosity_units::String:\nViscosity units for plots (\"Pa.s\", \"log10(Pa.s)\")\nstrainrate_units::String:\nStrain rate units for plots (\"1/s\", \"log10(1/s)\")\npressure_units::String:\nPressure units for plots (\"Pa\", \"GPa\", \"MPa\")\nstress_units::String:\nStress units for plots (\"Pa\", \"GPa\", \"MPa\")\nlinewidth::Float64:\nLine width for plots\nedgecolor::String:\nEdge color for plots\nshow_nodes::Bool:\nShow nodes on plots\ndimensions::Tuple{Float64, Float64, Float64, Float64}:\nDimensions of plot: (xmin, xmax, ymin, ymax)\ndim_close_up::Union{Tuple{Float64, Float64, Float64, Float64}, Nothing}:\nDimensions of zoomed in plot: (xmin, xmax, ymin, ymax)\nxyspacing::Tuple{Float64, Float64}:\nSpacing of ticks for the x and y axes: (xspacing, yspacing)\nxy_location_contour_legend::Tuple{Float64, Float64}:\nLocation of low-left-hand corner of contour legend\ntitle_fontsize::Int:\nFont size for title\naxis_title_fontsize::Int:\nFont size for axis titles\naxis_labels_fontsize::Int:\nFont size for axis labels\naxis_ticks_fontsize::Int:\nFont size for axis ticks\ncontour_label_fontsize::Int:\nFont size for contour labels\nnumber_format::String:\nNumber format for contours (e.g. \"%6.1f\")\nlegend_fontsize::Int:\nFont size for legend\ncolorbar_ticks_fontsize::Int:\nFont size for color bar ticks\ncolorbar_labels_fontsize::Int:\nFont size for color bar labels\ntext_box_font_size::Int:\nFont size for text box\nextension::String:\nExtension for plots (e.g. \".png\", \".pdf\")\n\n\n\n\n\n","category":"function"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/rock_property_update/#Rock-Property-Update-Steps","page":"Rock Property Update Steps","title":"Rock Property Update Steps","text":"[1] Update density rho_m for each marker m using equation eq:density with thermal expansion coefficient alpha_m, compressibility beta_m, temperature T_m,  pressure P_m, and reference density rho_refm.\n\n[2] Update heat capacity C_pm for each marker m using equation eq:heat-capacity  with heat capacity at 20^circ C C_p20m and marker temperature in degrees Celsius  T_^circCm.\n\n[3] Update marker thermal conductivity k_m for each marker m using equation  eq:thermal-conductivity with reference thermal conductivity k_20^circ Cm and temperature T_m.\n\n[4] Update marker adiabatic coefficient c_adim using equation  eq:adiabatic-coefficient with thermal expansion coefficient alpha_m and marker  temperature T_m.\n\n[5] Update sediment rock properties rho_m, k_m and C_pm for each marker m to account  for sediment porosity phi_m if marker composition C_m is sediment using equations  eq:sediment-rock-props with matrix properties for density, thermal conductivity and heat  capacity equal to the current marker properties rho_m, k_m and C_pm, respectively.\n\n[6] Update rho_m and k_m for each marker m to account for serpentinization using equations eq:density-serpentinization and eq:thermal-conductivity-serpentinization with serpentinization ratio R_serpm and current marker properties rho_m and k_m to define properties prior to update step.\n\n[7] Update marker density rho_m for each marker m to account for depletion of rock matrix  due to partial melting using equation eq:density-melt-depletion with extracted melt  fraction M_extractedm and current marker density rho_m used to define density prior to  this update step.\n\n[8] Update marker density rho_m for each marker m to account for partial melt in pore  space using equation eq:density-melt-pore-space with pressure P_m, extractable melt fraction M_extractablem and the current marker density rho_m to define density prior to this update step.","category":"section"},{"location":"api/boundary_conditions/bc_managers/velocity/#EarthBox.BoundaryConditions.Velocity.initialize!","page":"Velocity","title":"EarthBox.BoundaryConditions.Velocity.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize velocity boundary condition parameters.\n\nArguments\n\nmodel::ModelData: Model data object containing model parameters and arrays.\n\nOptional Keyword Arguments\n\nvelocity::Float64: \nGeneral velocity boundary condition\nfull_velocity_extension::Float64: \nFull extension rate in m/s\nfull_velocity_extension_step1::Float64: \nFull extension rate at step 1 in m/s\nfull_velocity_extension_step2::Float64: \nFull extension rate at step 2 in m/s\nfull_velocity_contraction::Float64: \nFull contraction rate in m/s\nvelocity_shear::Float64: \nShear velocity in m/s\nvelocity_rotation::Float64: \nRotation velocity in m/s\nvelocity_internal_x::Float64: \nX component of internal velocity in m/s\nvelocity_internal_y::Float64: \nY component of internal velocity in m/s\nplate_thickness::Float64: \nThickness of plate in meters used for inflow-outflow depth-dependent extension and contraction boundary conditions\nsmoothing_thickness::Float64: \nThickness in meters for velocity smoothing between inflow and outflow boundaries\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"api/material_geometry/mobile_wall/#MobileWall","page":"MobileWall","title":"MobileWall","text":"The MobileWall geometry is composed of a rigid wall and a rigid basal plate extending from the  wall. This geometry is used for extensional and contractional sandbox experiments.","category":"section"},{"location":"api/material_geometry/mobile_wall/#Initialization","page":"MobileWall","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/mobile_wall/#EarthBox.MaterialGeometry.MobileWall.initialize!","page":"MobileWall","title":"EarthBox.MaterialGeometry.MobileWall.initialize!","text":"Initialize mobile wall geometry.\n\nKeyword arguments:\n\nx_left_mobile_wall::Union{Float64, Nothing}:\nX-location in meters of left-edge of mobile wall used in sandbox extension and shortening models\nx_right_mobile_wall::Union{Float64, Nothing}:\nX-location in meters of right-edge of mobile wall used in sandbox extension and shortening models\ny_top_mobile_wall::Union{Float64, Nothing}:\nY-location in meters of top-edge of mobile wall used in sandbox extension and shortening models\ny_bottom_mobile_wall::Union{Float64, Nothing}:\nY-location in meters of bottom-edge of mobile wall used in sandbox extension and shortening models\nplate_extension_width::Union{Float64, Nothing}:\nWidth in meters of plate extension used in sandbox extension models\nplate_extension_thickness::Union{Float64, Nothing}:\nThickness in meters of plate extension used in sandbox extension models\n\n\n\n\n\n","category":"function"},{"location":"methods/governing_equations/energy/#Conservation-of-Energy","page":"Conservation of Energy","title":"Conservation of Energy","text":"Temperature is obtained by solving the conservation of energy equation as given by:","category":"section"},{"location":"methods/governing_equations/energy/#eq:energy","page":"Conservation of Energy","title":"eq:energy","text":"rho C_p fracDTDt\n= fracpartialpartial x left( k fracpartial Tpartial x right)\n+ fracpartialpartial y left( k fracpartial Tpartial y right)\n+ H_rad + H_shear + H_adi + H_melt + H_exo\n\nwhere T is the temperature, C_p is the specific heat capacity, k is the thermal conductivity, H_rad is the radiogenic heat production, H_shear is the shear heating,  H_adi is the adiabatic heating, H_melt is the latent heat of melting and  crystallization, H_exo is the heat produced from from exothermic serpentinization reactions  and fracDTDt is the substantive time temperature derivative defined as:","category":"section"},{"location":"methods/governing_equations/energy/#eq:substantive-temperature-derivative","page":"Conservation of Energy","title":"eq:substantive-temperature-derivative","text":"fracDTDt = left(fracpartial Tpartial t + v_x fracpartial Tpartial x + \nv_y fracpartial Tpartial yright)\n\nThe thermal conductivity term k in Eq. is described with the following  temperature-dependent model:","category":"section"},{"location":"methods/governing_equations/energy/#eq:thermal-conductivity","page":"Conservation of Energy","title":"eq:thermal-conductivity","text":"k = (358(10227k_20^circ C - 1882)(10T_K - 000068) + 184)\n\nwhere k_20^circ C is the thermal conductivity of the rock at 20^circC, T_K is  temperature in Kelvin (Hantschel and Kauerauf, 2009). The heat capacity term C_p in  Eq. is described with the following temperature-dependent model:","category":"section"},{"location":"methods/governing_equations/energy/#eq:heat-capacity","page":"Conservation of Energy","title":"eq:heat-capacity","text":"C_p =\nC_p20\n    Big(\n        0953 + 229 cdot 10^-3 T_^circ C\n        - 2835 cdot 10^-6 left(T_^circCright)^2\n        + 1191 cdot 10^-9 left(T_^circCright)^3\n    Big)\n\nwhere C_p20 is the heat capacity of the rock at 20^circ C and T_^circC is the  temperature in ^circC (Hantschel and Kauerauf, 2009).\n\nThe shear heating term H_shear is defined using the following equation: ","category":"section"},{"location":"methods/governing_equations/energy/#eq:shear-heating","page":"Conservation of Energy","title":"eq:shear-heating","text":"H_shear = fracsigma_xx^2eta_vp + fracsigma_xy^2eta_vp\n\nwhere sigma_xx and sigma_xy are the deviatoric components of the stress tensor and eta_vp is the visco-plastic effective viscosity. The adiabatic heating term H_adi is  defined using the following equation:","category":"section"},{"location":"methods/governing_equations/energy/#eq:adiabatic-heating","page":"Conservation of Energy","title":"eq:adiabatic-heating","text":"H_adi = c_adi fracDPDt\n\nwhere fracDPDt is the substantive pressure derivative and c_adi is the adiabatic  coefficient given by:","category":"section"},{"location":"methods/governing_equations/energy/#eq:adiabatic-coefficient","page":"Conservation of Energy","title":"eq:adiabatic-coefficient","text":"c_adi = alpha T\n\nwhere alpha is the thermal expansion coefficient. The substantive pressure derivative  fracDPDt is defined as:","category":"section"},{"location":"methods/governing_equations/energy/#eq:substantive-pressure-derivative","page":"Conservation of Energy","title":"eq:substantive-pressure-derivative","text":"fracDPDt = left(fracdPdxv_x + fracdPdyvyright) text\n\nThe melt generation term H_melt is divided into two components:","category":"section"},{"location":"methods/governing_equations/energy/#eq:melt-generation","page":"Conservation of Energy","title":"eq:melt-generation","text":"H_melt = H_melt adi + H_melt T\n\nwhere H_melt adi is the adiabatic component of the latent heat of melting associated with changes in pressure within partially molten domains and H_melt T is the temperature-dependent  component. The adiabatic component of the latent heat of melting and the temperature-dependent  components are given by:","category":"section"},{"location":"methods/governing_equations/energy/#eq:melt-generation-adiabatic","page":"Conservation of Energy","title":"eq:melt-generation-adiabatic","text":"H_melt adi = -rho Lfracpartial Mpartial PfracDPDt","category":"section"},{"location":"methods/governing_equations/energy/#eq:melt-generation-temperature","page":"Conservation of Energy","title":"eq:melt-generation-temperature","text":"H_melt T = -rho L fracpartial Mpartial TfracDTDt\n\nwhere L is the latent heat of melting, M is the melt fraction, and fracDTDt is the substantive temperature derivative. Equation Eq. is included  in an effective heat capacity term in the energy equation Eq. to account for the  temperature-dependent latent heat of melting and crystallization. The effective heat capacity term  is given by:","category":"section"},{"location":"methods/governing_equations/energy/#eq:effective-heat-capacity","page":"Conservation of Energy","title":"eq:effective-heat-capacity","text":"C_p^eff = C_p + L fracpartial Mpartial T\n\nThe partial derivative fracpartial Mpartial T in  Eq. is calculated using a finite difference approximation as  follows:","category":"section"},{"location":"methods/governing_equations/energy/#eq:partial-melt-fraction-temperature","page":"Conservation of Energy","title":"eq:partial-melt-fraction-temperature","text":"fracpartial Mpartial T = fracM_T + Delta TP - M_T - Delta TP2Delta T\n\nwhere Delta T = 1 K and M_T + Delta TP and M_T - Delta TP are the melt  fractions at the current pressure P and temperatures T + Delta T and T - Delta T,  respectively.\n\nSimilarly, equation Eq. is included in an effective adiabatic coefficient term in equation Eq. to account for the adiabatic  component of the latent heat of melting and crystallization. The effective adiabatic coefficient  term is given by:","category":"section"},{"location":"methods/governing_equations/energy/#eq:effective-adiabatic-coefficient","page":"Conservation of Energy","title":"eq:effective-adiabatic-coefficient","text":"c_adi^eff = c_adi - rho L fracpartial Mpartial P\n\nThe partial derivative fracpartial Mpartial P in  Eq. is calculated using a finite difference  approximation as follows:","category":"section"},{"location":"methods/governing_equations/energy/#eq:partial-melt-fraction-pressure","page":"Conservation of Energy","title":"eq:partial-melt-fraction-pressure","text":"fracpartial Mpartial P = fracM_TP + Delta P - M_TP - Delta P2Delta P\n\nwhere Delta P = 1000 Pa and M_TP + Delta P and M_TP - Delta P are the melt  fractions at the current temperature T and pressures P + Delta P and P - Delta P,  respectively. The exothermic heat production term H_exo associated with serpentinization is  given by:","category":"section"},{"location":"methods/governing_equations/energy/#eq:exothermic-heat-production","page":"Conservation of Energy","title":"eq:exothermic-heat-production","text":"H_exo = fracf_serpincEDelta t M_serp\n\nwhere f_serpinc is the incremental of serpentinization ratio, M_serp is the molar  volume of serpentine (m^3mol), E is the enthalpy change (Jmol) and Delta t is  the time step.\n\nThe substantive time pressure derivative that appears in Eq. and  Eq. is approximated using the following equation that  neglects deviations of dynamic pressure gradients from lithostatic pressure gradients  (Gerya, 2019):","category":"section"},{"location":"methods/governing_equations/energy/#eq:pressure-derivative","page":"Conservation of Energy","title":"eq:pressure-derivative","text":"left(fracdPdxv_x + fracdPdyv_yright) = rho g_x v_x + rho g_y v_y","category":"section"},{"location":"benchmarks/batch_execution/#Batch-Benchmark-Execution","page":"Batch Execution","title":"Batch Benchmark Execution","text":"","category":"section"},{"location":"benchmarks/batch_execution/#Example:-Running-Multiple-\"Fast\"-Benchmark-Cases","page":"Batch Execution","title":"Example: Running Multiple \"Fast\" Benchmark Cases","text":"This example shows how multiple benchmarks can be run in batch mode with output being sent to the present working directory. Check terminal output for a quick look at test results and for the path to where results were written to file.\n\n\nusing DataStructures: OrderedDict\nusing EarthBox\n\ntest_dict = OrderedDict(\n    benchmark_names.couette_flow_viscous_heating        => true,\n    benchmark_names.channel_flow_non_newtonian          => true,\n    benchmark_names.channel_flow_variable_conductivity  => true,\n    benchmark_names.channel_flow_non_steady_temperature => true,\n    benchmark_names.solid_body_rotation                 => true,\n    benchmark_names.rayleigh_taylor_instability         => true,\n);\nBenchmarksManager.run_benchmarks(test_dict);\n\n\nThis code will produce an output directory with a time-stamped name like  earthbox_benchmark_results_2025-11-07_08-48-04 that contains model output, benchmark plots and a summary file of test results called test_results.yml.","category":"section"},{"location":"benchmarks/batch_execution/#Example:-Running-Multiple-Benchmark-Cases-with-User-Configuration","page":"Batch Execution","title":"Example: Running Multiple Benchmark Cases with User Configuration","text":"This example shows how multiple benchmarks can be run in batch mode with control over model execution, post processing, output base path and the use of the MUMPS solver.\n\n\nusing DataStructures: OrderedDict\nusing EarthBox\n\nbenchmark_names = BenchmarksManager.benchmark_names\ntest_dict = OrderedDict(\n    benchmark_names.couette_flow_viscous_heating                          => true,\n    benchmark_names.channel_flow_non_newtonian                            => true,\n    benchmark_names.channel_flow_variable_conductivity                    => true,\n    benchmark_names.channel_flow_non_steady_temperature                   => true,\n    benchmark_names.solid_body_rotation                                   => true,\n    benchmark_names.rayleigh_taylor_instability                           => true,\n    benchmark_names.elastic_slab                                          => true,\n    benchmark_names.viscoelastic_stress_buildup                           => true,\n    benchmark_names.box_convection_isoviscous_1a                          => true,\n    benchmark_names.plasticity_benchmark_kaus10                           => true,\n    benchmark_names.viscoelastic_extension                                => false,\n    benchmark_names.viscoelastic_extension_asymmetric                     => false,\n    benchmark_names.viscoelastic_extension_depth_dependent                => false,\n    benchmark_names.viscoelastic_extension_inflow_and_outflow_along_sides => false,\n    benchmark_names.viscoelastic_contraction                              => false,\n    benchmark_names.viscoelastic_contraction_asymmetric                   => false,\n    benchmark_names.simple_sedimentation                                  => false,\n    benchmark_names.seafloor_spreading                                    => false,\n    benchmark_names.flexure_triangular_hole                               => true\n)\n# Dictionary used to activate the mumps solver for large models\n# For each dictionary key the value is a vector with two elements:\n# [1] Bool: Activate/deactivate mumps solver\n# [2] Int: Number of processors to use\nmumps_solver_dict = Dict{Symbol, Vector{Any}}(\n    benchmark_names.flexure_triangular_hole => [true, 8]\n)\nBenchmarksManager.run_benchmarks(\n    test_dict,\n    mumps_solver_dict   = mumps_solver_dict,\n    run_model           = true,\n    run_post_processing = true,\n    base_path           = \"/mnt/extradrive1\",\n    make_backup         = false,\n    restart_from_backup = false\n)\n","category":"section"},{"location":"benchmarks/batch_execution/#EarthBox.BenchmarksManager.run_benchmarks","page":"Batch Execution","title":"EarthBox.BenchmarksManager.run_benchmarks","text":"run_benchmarks(\n    test_dict::OrderedDict{Symbol, Bool};\n    mumps_solver_dict::Union{Dict{Symbol, Vector{Any}}, Nothing} = nothing,\n    kwargs...\n)::Benchmarks\n\nRun the benchmarks specified in the test_dict.\n\nArguments\n\ntest_dict::OrderedDict{Symbol, Bool}:\nDictionary of benchmarks to run. The key is the benchmark name and the   value is a boolean indicating if the benchmark should be run.\nmumps_solver_dict::Union{Dict{Symbol, Vector{Any}}, Nothing} = nothing:\nDictionary of benchmarks to run with MUMPS solver. The key is the benchmark   name and the value is a vector of two elements. The first element is a boolean   indicating if the benchmark should be run with MUMPS solver and the second   element is the number of processors to use.\n\nOptional Keyword Arguments:\n\nrun_model::Bool:\nSet to true to run the model. Default is true.\nrun_post_processing::Bool:\nSet to true to run post processing. Default is true.\nbase_path::String:\nBase path for the output directory. EarthBox creates a time-stamped subdirectory in this path.   Default is the present working directory (pwd()).\nold_date_stamp::String:\nOld date stamp for the output directory. If equal to nothing, a new date stamp will be generated.   If a old time stamp is provided, the output directory will use the old time stamp.  This is useful if you want to re-run post processing on a previous run. The format of the time stamp is  YYYY-MM-DDHH-MM-SS. For example: \"2024-04-2012-53-59\". Default is nothing.\nmake_backup::Bool:\nSet to true to make backup model files with each output step. This is useful for testing   model restart functionality. Default is false.\nrestart_from_backup::Bool:\nSet to true to restart from a backup file. Default is false.\n\nReturns\n\nNothing\n\nReturns\n\nbench::Benchmarks:\nBenchmarks object containing the results of the benchmarks.\n\n\n\n\n\n","category":"function"},{"location":"models/vep_extension_downhill_diffusion/vep_extension_downhill_diffusion/#Visco-elasto-plastic-Extension-with-Sediment-Transport","page":"Visco-elasto-plastic Extension with Downhill Diffusion","title":"Visco-elasto-plastic Extension with Sediment Transport","text":"see EarthBox/models/vep_extension_downhill_diffusion","category":"section"},{"location":"api/boundary_conditions/bc_managers/velocity_stop/#EarthBox.BoundaryConditions.VelocityStop.initialize!","page":"VelocityStop","title":"EarthBox.BoundaryConditions.VelocityStop.initialize!","text":"initialize!(model::ModelData; kwargs...)::Nothing\n\nInitialize velocity stopping model.\n\nArguments\n\nmodel::ModelData: Model data object containing model parameters and arrays.\n\nOption Keyword Arguments\n\niuse_velocity_stop::Union{Bool, Nothing}: \nInteger flag indicating whether to stop velocity boundary conditions at a defined time\nvelocity_stop_time::Union{Float64, Nothing}: \nTime in million years when velocity boundary conditions are set to zero\n\n\n\n\n\n","category":"function"},{"location":"benchmarks/models/viscoelastic_contraction/#Viscoelastic-Contraction","page":"Viscoelastic Contraction","title":"Viscoelastic Contraction","text":"See descriptions at EarthBox.BenchmarksManager.run_benchmark.","category":"section"},{"location":"benchmarks/models/viscoelastic_contraction/#Symmetric","page":"Viscoelastic Contraction","title":"Symmetric","text":"This benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:viscoelastic_contraction);\n\nFrom test_results.yml\n\nrelative error limit %: 3.0\nmax relative error percentage: 2.0714\nmessage: \"Test Successful: max relative error is not greater than limit: 2.071% <= 3.000%\"\nresult: \"Success\"\n\n(Image: Viscoelastic Contraction)","category":"section"},{"location":"benchmarks/models/viscoelastic_contraction/#fig:viscoelastic-contraction","page":"Viscoelastic Contraction","title":"fig:viscoelastic-contraction","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"benchmarks/models/viscoelastic_contraction/#Asymmetric","page":"Viscoelastic Contraction","title":"Asymmetric","text":"This benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:viscoelastic_contraction_asymmetric);\n\nFrom test_results.yml\n\nrelative error limit %: 3.0\nmax relative error percentage: 0.7165\nmessage: \"Test Successful: max relative error is not greater than limit: 0.717% <= 3.000%\"\nresult: \"Success\"\n\n(Image: Viscoelastic Contraction (Asymmetric))","category":"section"},{"location":"benchmarks/models/viscoelastic_contraction/#fig:viscoelastic-contraction-asymmetric","page":"Viscoelastic Contraction","title":"fig:viscoelastic-contraction-asymmetric","text":"Benchmark result using EarthBox version 0.1.0","category":"section"},{"location":"models/model_execution/background_command_line_execution/#Background-Command-line-Execution","page":"Background Command-line Execution","title":"Background Command-line Execution","text":"The function EarthBox.run_earthbox enables sequential model running and  post-processing via background command-line execution on Linux/Unix systems. \n\nIn order to have compatibility with remote model execution scripts the  EarthBox.run_earthbox function should be used inside a script called  Runit.jl that can be executed via command line and is located in the model  directory with Model.jl and Plot.jl scripts. ","category":"section"},{"location":"models/model_execution/background_command_line_execution/#Runit.jl.","page":"Background Command-line Execution","title":"Runit.jl.","text":"Creating a script called Runit.jl in the model directory that calls the  function EarthBox.run_earthbox allows the use to run models and  post-processing functions sequentially. See EarthBox.run_earthbox for  command-line arguments that are used by EarthBox.run_earthbox. \n\nnote: remote and local batch execution\nScripts named Runit.jl in a model directory scripts are executed by  remote_model_loop for remote execution and  by local_model_loop for local batch execution. \n\nwarning: Runit.jl file name\nSince remote and local batch processing functions look for a script called  Runit.jl in the model directory it is critical to use the name Runit.jl.\n\nwarning: local of Runit.jl scripts\nRunit.jl scripts must be located in a model directory along with ['Model.jl'] and ['Plot.jl'] scripts.\n\nThe following is an example of a Runit.jl script that would enable sequential execution of models and post-processing functions in addition to remote and local batch execution.\n\nmodule Runit\n\nusing EarthBox\ninclude(\"Model.jl\")\n\n# Get the model output root path constants from Model.jl\nimport .Model: ROOT_PATH_OUTPUT\n\n# Path to the EarthBox project used when running the model and plotting scripts.\nconst EB_PROJECT_PATH = \"/home/$(get_username())/apps/julia/EarthBox\"\n\nfunction main()\n    run_earthbox(\n        model_dir = \"$(abspath(@__DIR__))\",\n        # If the EarthBox project path is not provided, then it is assumed that \n        # EarthBox is installed in a standard Julia location or the JULIA_PROJECT \n        # environment variable is set equal to the EarthBox project path.\n        eb_project_path_from_script = EB_PROJECT_PATH,\n        root_path_output_from_script = ROOT_PATH_OUTPUT\n        )\nend\n\nend # module\n\nif abspath(PROGRAM_FILE) == @__FILE__\n    Runit.main()\nend","category":"section"},{"location":"models/model_execution/background_command_line_execution/#EarthBox.RunTools.run_earthbox","page":"Background Command-line Execution","title":"EarthBox.RunTools.run_earthbox","text":"run_earthbox(;\n    model_dir::String,\n    eb_project_path_from_script::Union{String, Nothing} = nothing,\n    root_path_output_from_script::Union{String, Nothing} = nothing\n)\n\nRun the model script Model.jl and/or plotter script Plot.jl from model  directory via command-line execution in the background using the function  execute_earthbox_script. This function will run both the model and plotting  scripts in sequence.\n\n!!! WARNING !!! This function is for Linux/Unix systems only.\n\nArguments\n\nmodel_dir::String\nDirectory from where the model action is taken and that contains Runit.jl,   Model.jl and Plot.jl.\neb_project_path_from_script::Union{String, Nothing} = nothing\nPath to the EarthBox project from the script executing the action. This  will be overridden by the EarthBox project path specified via command line   arguments.\nroot_path_output_from_script::Union{String, Nothing} = nothing\nPath to the root output directory from the script executing the action.   This will be overridden by the root output directory specified via command   line arguments.\n\nCommand Line Arguments\n\ncase_name=<case_name>\nThe name of the model case defined in CaseInputs.jl. The case name is   used when running the model to select inputs from the model case   collection defined in CaseInputs.jl. The case name is also used to define  the output path in customizable path functions in Paths.jl and Plot.jl.\nroot_path=<path/to/root/output>\nThe path to the root output directory. This will be override the root   output directory specified via function argument.\neb_path=<path/to/earthbox/project>\nThe path to the EarthBox project used when running Model.jl and Plot.jl.   If eb_path is not defined it will be assumed that EarthBox is   installed in a standard Julia location or the JULIA_PROJECT environment   variable is set equal to the EarthBox project path.\nmodel_output_path=<path/to/model/output>\nThe path to the model output directory. \nistart=<istart>\nThe starting time step for plotting.\niend=<iend>\nThe ending time step for plotting.\nrun_model\nAction command for running the model. \nplot_markers\nAction command for plotting the markers.\nplot_scalars\nAction command for plotting the scalars.\n\nUsage:\n\nAssuming that run_earthbox() is called from a script called Runit.jl from a model directory that contains Model.jl and Plot.jl...\n\nTo run model, plot markers, plot scalars and define all paths on command line,  run:\n\njulia Runit.jl case_name=<case_name> run_model plot_markers plot_scalars istart=1 iend=10 eb_path=<eb_path> model_output_path=<path/to/model/output> \n\nor to use root_path instead of model_output_path, run:\n\njulia Runit.jl case_name=<case_name> run_model plot_markers plot_scalars istart=1 iend=10 root_path=<path/to/root/output>` \n\nTo run model, plot markers and plot scalars and use path definitions in Model.jl  and Plot.jl, run:\n\njulia Runit.jl case_name=<case_name> run_model plot_markers plot_scalars istart=1 iend=10\n\nTo run model only and use path definitions in Model.jl and Plot.jl, run:\n\njulia Runit.jl case_name=<case_name> run_model\n\nIf a case name is not specified, the default case name is \"case0\".\n\n\n\n\n\n","category":"function"},{"location":"models/model_execution/background_command_line_execution/#EarthBox.RunTools.execute_earthbox_script","page":"Background Command-line Execution","title":"EarthBox.RunTools.execute_earthbox_script","text":"execute_earthbox_script(;\n    model_dir::String,\n    eb_path::Union{String, Nothing},\n    command_type::String,\n    model_case_name::String,\n    model_logfile_name::String = \"model.log\",\n    model_output_path::Union{String, Nothing} = nothing\n    istart::Int64 = 1,\n    iend::Int64 = 1,\n)\n\nExecute earthbox scripts via command line.\n\n!!! WARNING !!! This function is for Linux/Unix systems only.\n\nProcesses are executed via command line using the Julia run function as follows:\n\nrun(bash -c <command>, wait = true)\n\nwhere <command> takes the form of:\n\njulia [--project=<eb_path>] --startup-file=no <model_dir>/Model.jl case_name=<case_name> model_output_path=<model_output_path> > <model_logfile_name>\njulia [--project=<eb_path>] --startup-file=no <model_dir>/Plot.jl marker_plots istart=<istart> iend=<iend> model_case_name=<case_name> model_output_path=<model_output_path> > marker_plots_<model_logfile_name>\njulia [--project=<eb_path>] --startup-file=no <model_dir>/Plot.jl scalar_plots istart=<istart> iend=<iend> model_case_name=<case_name> model_output_path=<model_output_path> > scalar_plots_<model_logfile_name>\n\nIf eb_path is not specified, then it is assumed that EarthBox is installed in  a standard Julia location or the JULIA_PROJECT environment variable is set equal  to the EarthBox project path. In this case the --project=<eb_path> argument is not  included in the command.\n\nIf model_output_path is not specified, then it is assumed that the model output path is defined internally within the Model.jl and Plot.jl scripts.\n\nThe following scripts are expected to be in the model directory:\n\nModel.jl\nModel script that initializes the model and runs time steps via the EarthBox API.  This script must be setup to be executed via command line with the command line   arguments case_name=<case_name>.\nPlot.jl\nPlot script that plots the model results using the EarthBox API. This script   must be setup to be executed via command line with the command line arguments   istart=<istart> iend=<iend> model_case_name=<case_name>.\n\nArguments\n\nmodel_dir::String\nDirectory from where the script action is taken and that contains the script.\neb_path::Union{String, Nothing}\nEarthBox project path\ncommand_type::String\nCommand type\n\"model\": Run the model script Model.jl\n\"marker_plots\": Plot markers using the Plot module from a Plot.jl script\n\"scalar_plots\": Plot scalars using the Plot module from a Plot.jl script\nmodel_case_name::String\nModel case name like \"case0\", \"case1\", \"case2\", etc.\nmodel_logfile_name::String\nModel log file name (only used if command_type is \"model\")\nmodel_output_path::Union{String, Nothing}\nModel output path where model output will be saved and log files will be copied\nistart::Int64\nStarting time step. Default is 1.\niend::Int64\nEnding time step. Default is 1.\n\n\n\n\n\n","category":"function"},{"location":"model_data/collections/melting/","page":"Melting","title":"Melting","text":"Melting\n\nParameters\nOptions\nMeltingMaterialIDs\nRheology\nExtrusion\nExtraction\nArrays\nExtraction","category":"section"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.Melting","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.Melting","text":"Melting <: CollectionContainer\n\nData structure containing parameter and array objects for melting and melt extraction.\n\nFields\n\nparameters::Parameters: Parameter groups for melting options and configuration\narrays::Arrays: Array groups for melt extraction tracking\n\nConstructor\n\nMelting()::Melting\n\nCreate a new Melting collection with default values.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.Parameters","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for melting and melt extraction processes.\n\nFields\n\noptions::Options: Melting model on/off switches\nmelting_material_ids::MeltingMaterialIDs: Material IDs for melting processes\nrheology::Rheology: Rheological properties of molten rock\nextrusion::Extrusion: Parameters for melt extrusion\nextraction::Extraction: Parameters for melt extraction\n\nConstructor\n\nParameters()\n\nCreate a new Parameters collection with default melting model values.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.OptionsGroup.Options","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.OptionsGroup.Options","text":"Options <: AbstractParameterGroup\n\nParameter group for melting model on/off switches.\n\nFields\n\niuse_melting::ParameterInt: Integer flag that activates melt model with melt fraction calculation: 0 off; 1 on\niuse_melt_viscosity::ParameterInt: Integer flag that activates melt viscosity model where the viscosity of partially molten rocks is set to melt viscosity if melt fraction exceeds 10%: 0 off; 1 on\niuse_melt_thermal_props::ParameterInt: Integer flag that activates melt to impact thermal properties including density, heat capacity in the term rhocp and thermal expansivity in the adiabatic heating term alphaT: 0 off; 1 on\niuse_extraction::ParameterInt: Integer flag that activates melt extraction model (0 = off, 1 = on). Extraction is required for intrusive and extrusive processes.\niuse_gabbroic_fractionation::ParameterInt: Integer flag that activates gabbroic fractionation model: 0 off; 1 on. This model is used to approximate the effects of rapid fractionation in sills that produce layered gabbroic magma. This is accomplished by transforming gabbroic magma to a fractionated gabbroic magma composition once magma enters the crustal domain at the Moho.\niuse_shallow_mantle_injection::ParameterInt: Integer flag that activates shallow mantle injection model: 0 off; 1 on. This model is used to inject mantle-derived magma at the shallowest part of the mantle domain. If this option is False then mantle-derived magma is injected at the shallowest location of the partially molten mantle domain. This option approximates rapid ascent of melt from the mantle to the crustal domain via dykes and channelized melt networks.\niuse_random_injection_subdomain::ParameterInt: Integer flag that activates the random injection model (0 = off, 1 = on) whereby the characteristic injection width (characteristicinjectionwidth) is divided into subdomains (numberofinjection_subdomains) that are selected using a uniform distribution. The shallowest mantle marker within a selected subdomain is converted into magma. If this option is False then the shallowest mantle marker within the injection width is converted into magma.\niuse_normal_injection_subdomain::ParameterInt: Integer flag that activates the normal injection model (0 = off, 1 = on) whereby the characteristic injection width (characteristicinjectionwidth) is divided into subdomains (numberofinjection_subdomains) that are selected using a normal distribution. The shallowest mantle marker within a selected subdomain is converted into magma. If this option is False then a uniform distribution is used to select the subdomain.\niuse_depletion_density::ParameterInt: Integer flag that activate depletion density model (0 = off, 1 = on) whereby the density of rocks that have undergone melt extraction is modified to account for the partitioning of heavy elements into the melt.\niuse_exponential_viscosity_reduction::ParameterInt: Integer flag that activates exponential viscosity reduction for partially molten rocks whereby the effective viscosity of partially molten rocks is reduced exponentially with extractable melt fraction for mantle rocks that are impacted bymelt extraction and melt fraction for crustal rocks that are currently not impacted by melt extraction (0 = off, 1 = on). If this parameter is set to 0, the effective viscosity of partially molten rocks is set to melt viscosity if melt fraction exceeds 10%.\nobj_list::Vector{ParameterInt}: List of parameter objects\n\nNested Dot Access\n\niuse_melting = model.melting.parameters.options.iuse_melting.value\niuse_melt_viscosity = model.melting.parameters.options.iuse_melt_viscosity.value\niuse_melt_thermal_props = model.melting.parameters.options.iuse_melt_thermal_props.value\niuse_extraction = model.melting.parameters.options.iuse_extraction.value\niuse_gabbroic_fractionation = model.melting.parameters.options.iuse_gabbroic_fractionation.value\niuse_shallow_mantle_injection = model.melting.parameters.options.iuse_shallow_mantle_injection.value\niuse_random_injection_subdomain = model.melting.parameters.options.iuse_random_injection_subdomain.value\niuse_normal_injection_subdomain = model.melting.parameters.options.iuse_normal_injection_subdomain.value\niuse_depletion_density = model.melting.parameters.options.iuse_depletion_density.value\niuse_exponential_viscosity_reduction = model.melting.parameters.options.iuse_exponential_viscosity_reduction.value\n\nConstructor\n\nOptions()\n\nReturns\n\nOptions: New Options parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.MeltingMaterialIDsGroup.MeltingMaterialIDs","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.MeltingMaterialIDsGroup.MeltingMaterialIDs","text":"MeltingMaterialIDs <: AbstractParameterGroup\n\nParameter group for material IDs used in melting processes.\n\nFields\n\nipmf1::ParameterInt: Material ID of the mantle\nipmf2::ParameterInt: Material ID of the mantle\nipmf3::ParameterInt: Material ID of the mantle\nipmf4::ParameterInt: Material ID of the mantle\nipmf_molten::ParameterInt: Material ID of molten mantle\nipmf_solid::ParameterInt: Material ID of solidified mantle\nipmf_molten_vol::ParameterInt: Material ID of molten extruded mantle\nipmf_solid_vol::ParameterInt: Material ID of solidified extruded molten mantle\nobj_list::Vector{ParameterInt}: List of parameter objects\n\nNested Dot Access\n\nipmf1 = model.melting.parameters.melting_material_ids.ipmf1.value\nipmf2 = model.melting.parameters.melting_material_ids.ipmf2.value\nipmf3 = model.melting.parameters.melting_material_ids.ipmf3.value\nipmf4 = model.melting.parameters.melting_material_ids.ipmf4.value\nipmf_molten = model.melting.parameters.melting_material_ids.ipmf_molten.value\nipmf_solid = model.melting.parameters.melting_material_ids.ipmf_solid.value\nipmf_molten_vol = model.melting.parameters.melting_material_ids.ipmf_molten_vol.value\nipmf_solid_vol = model.melting.parameters.melting_material_ids.ipmf_solid_vol.value\n\nConstructor\n\nMeltingMaterialIDs()\n\nReturns\n\nMeltingMaterialIDs: New MeltingMaterialIDs parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.RheologyGroup.Rheology","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.RheologyGroup.Rheology","text":"Rheology <: AbstractParameterGroup\n\nParameter group for rheological properties of molten rock.\n\nFields\n\nviscosity_melt::ParameterFloat: Viscosity of molten rock in Pa.s\nobj_list::Vector{ParameterFloat}: List of parameter objects\n\nNested Dot Access\n\nviscosity_melt = model.melting.parameters.rheology.viscosity_melt.value\n\nConstructor\n\nRheology()\n\nReturns\n\nRheology: New Rheology parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.ExtrusionGroup.Extrusion","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.ExtrusionGroup.Extrusion","text":"Extrusion <: AbstractParameterGroup\n\nParameter group for melt extrusion model parameters.\n\nFields\n\niuse_extrusion::ParameterInt: Integer flag that activates melt extrusion model: 0 off; 1 on\nextrusion_volume_factor::ParameterFloat: Minimum value for the extrusion volume factor. The volume of lava produced at the surface of the model is calculated as the product of the extrusion volume factor and the total volume of magma produced during a time step. The extrusion volume factor changes as a function of the characteristic magmatic crust height. The characteristic magmatic crust height is the height of new crust that would be formed if all the melt in the mantle was extracted and emplaced at the top of the model in a column with a width equal to the full extension velocity times the time step. This minimum value is used when the magmatic crust height is below the minimum characteristic magmatic crust height. A linear model is used to define the extrusion volume factor when the calculated magmatic crust height is between the minimum and maximum characteristic magmatic crust height.\nextrusion_volume_factor_max::ParameterFloat: Maximum value for the extrusion volume factor. This maximum value is reached when the characteristic magmatic crust height is equal to the maximum characteristic magmatic crust height.\ncharacteristic_magmatic_crust_height::ParameterFloat: Characteristic height of magmatic crust in meters calculated based on the total volume of magma produced during a given time step and the full extensional velocity. The characteristic magmatic crust height is the height of new crust that would be formed if all the melt in the mantle was extracted and emplaced at the top of the model in a column with a width equal to the full extension velocity times the time step.\ncharacteristic_magmatic_crust_height_min::ParameterFloat: Minimum reference value for the characteristic magmatic crust height in meters. When the calculated characteristic magmatic crust height is below this value the extrusion volume factor is set to the minimum value (i.e. extrusion_volume_factor).\ncharacteristic_magmatic_crust_height_max::ParameterFloat: Maximum reference value for the characteristic magmatic crust height in meters. When the calculated characteristic magmatic crust height is above this value the extrusion volume factor is set to the maximum value (i.e. extrusion_volume_factor_max).\ncharacteristic_flow_length_subaerial::ParameterFloat: Characteristic flow length for subaerial eruptions in meters. Flow distance of basaltic flows on land may be hundreds of kilometers (e.g. Ginkgo flow of the Frenchman Springs Member of the Columbia River Basalts has a flow length of 500 km).\ncharacteristic_flow_length_submarine::ParameterFloat: Characteristic flow length for submarine eruptions in meters.\nresidual_lava_thickness_subaerial::ParameterFloat: Residual lava thickness for subaerial eruptions in meters\nresidual_lava_thickness_submarine::ParameterFloat: Residual lava thickness for submarine eruptions in meters\niuse_random_eruption_location::ParameterInt: Integer flag that activates random eruption location: 0 off; 1 on\niuse_normal_eruption_location::ParameterInt: Integer flag that activates normal distribution for eruption location: 0 off; 1 on\ndecimation_factor::ParameterInt: Topography grid decimation factor for 1D lava flow model grid\ninitial_magma_flush_steps::ParameterInt: Number of time steps for initial magma flush\nmagma_flush_factor::ParameterFloat: Factor that determines the amount of magma to flush for flush during magma flush time steps\nwidth_eruption_domain_fixed::ParameterFloat: Fixed width of the eruption domain in meters. If this is set to zero, the width of the eruption domain is determined by the width of the gabbroic molten zone including normal and layered gabbro.\nwidth_eruption_domain_fixed_max::ParameterFloat: Maximum width of the eruption domain. If this is set to zero, the width of the eruption domain is determined by the width of the gabbroic molten zone including normal and layered gabbro.\nporosity_initial_lava_flow::ParameterFloat: Initial porosity of lava flow in fraction used to decompact extruded gabbroic magma to account for vesicles. This parameter is not used to compact lava flows during burial. Instead, compaction properties associated with the material type are used. This allows for the decompaction of lava flows during eruption to account for porosity from vesicles and the preservation of thickness during burial due to chemical compaction and rigidity of the basalt matrix.\ndecay_depth_lava_flow::ParameterFloat: Depth at which the porosity of lava flow decays to zero in meters. This parameter is used to compact lava flows during burial. Instead, compaction properties associated with the material type are used. This allows for the decompaction of lava flows during eruption to account for porosity from vesicles and the preservation of thickness during burial due to chemical compaction and rigidity of the basalt matrix.\ntime_of_next_eruption_myr::ParameterFloat: Time of next eruption in Myr\neruption_interval_yr::ParameterFloat: Eruption interval in years\niuse_eruption_interval::ParameterInt: Integer flag that activates eruption interval: 0 off; 1 on\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\niuse_extrusion = model.melting.parameters.extrusion.iuse_extrusion.value\nextrusion_volume_factor = model.melting.parameters.extrusion.extrusion_volume_factor.value\nextrusion_volume_factor_max = model.melting.parameters.extrusion.extrusion_volume_factor_max.value\ncharacteristic_magmatic_crust_height = model.melting.parameters.extrusion.characteristic_magmatic_crust_height.value\ncharacteristic_magmatic_crust_height_min = model.melting.parameters.extrusion.characteristic_magmatic_crust_height_min.value\ncharacteristic_magmatic_crust_height_max = model.melting.parameters.extrusion.characteristic_magmatic_crust_height_max.value\ncharacteristic_flow_length_subaerial = model.melting.parameters.extrusion.characteristic_flow_length_subaerial.value\ncharacteristic_flow_length_submarine = model.melting.parameters.extrusion.characteristic_flow_length_submarine.value\nresidual_lava_thickness_subaerial = model.melting.parameters.extrusion.residual_lava_thickness_subaerial.value\nresidual_lava_thickness_submarine = model.melting.parameters.extrusion.residual_lava_thickness_submarine.value\niuse_random_eruption_location = model.melting.parameters.extrusion.iuse_random_eruption_location.value\niuse_normal_eruption_location = model.melting.parameters.extrusion.iuse_normal_eruption_location.value\ndecimation_factor = model.melting.parameters.extrusion.decimation_factor.value\ninitial_magma_flush_steps = model.melting.parameters.extrusion.initial_magma_flush_steps.value\nmagma_flush_factor = model.melting.parameters.extrusion.magma_flush_factor.value\nwidth_eruption_domain_fixed = model.melting.parameters.extrusion.width_eruption_domain_fixed.value\nwidth_eruption_domain_fixed_max = model.melting.parameters.extrusion.width_eruption_domain_fixed_max.value\nporosity_initial_lava_flow = model.melting.parameters.extrusion.porosity_initial_lava_flow.value\ndecay_depth_lava_flow = model.melting.parameters.extrusion.decay_depth_lava_flow.value\ntime_of_next_eruption_myr = model.melting.parameters.extrusion.time_of_next_eruption_myr.value\neruption_interval_yr = model.melting.parameters.extrusion.eruption_interval_yr.value\niuse_eruption_interval = model.melting.parameters.extrusion.iuse_eruption_interval.value\n\nConstructor\n\nExtrusion()\n\nCreate a new Extrusion parameter group with default values.\n\nReturns\n\nExtrusion: New Extrusion parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.ExtractionGroup.Extraction","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.ParameterCollection.ExtractionGroup.Extraction","text":"Extraction <: AbstractParameterGroup\n\nParameter group for melt extraction model parameters.\n\nFields\n\nmelt_residual::ParameterFloat: Sum of residual fractional melt particles\next_vol::ParameterFloat: Volume of extruded material in m^3\nxmid_mol::ParameterFloat: x-location of the molten mantle zone in meters\nytop_mol::ParameterFloat: y-location of the top of the molten mantle zone in meters\nwidth_mol::ParameterFloat: Width of the molten mantle zone in meters\nndrainage_basin::ParameterInt: Number of drainage basins in the model\nsmoothing_radius_drainage::ParameterFloat: Smoothing radius (meters) used to smooth the top of the partially molten mantle domain before calculating local maxima used to define migration domains for melt extraction.\ncharacteristic_injection_width::ParameterFloat: Characteristic width (meters) of magma injection into the shallow mantle above the local maximum of the mantle partial melt domain. This parameters is used only if useshallowmantle_injection is True. Note that the actual injection width may be increased if the height of injected magma exceeds the magma height limit.\nmagma_height_limit::ParameterFloat: Maximum height (meters) of magma that can be injected into the mantle domain. This is used to limit the height of magma bodies that are injected at the top of the mantle domain by increasing the injection width.\nfractionation_threshold_limit::ParameterFloat: Threshold limit (meters) for gabbroic fractionation. This is the distance from Moho where the composition of gabbroic magma is changed to fractionated or layered gabbroic magma to simulate the effects of rapid fractionation in sills and the downward flow of the gabbro glacier. This change in composition involves an increase in the solidus leading to regions of partially molten fractioned gabbro as opposed to large regions of pure gabbroic magma inconsistent with geophysical observations.\nemplacement_temperature::ParameterFloat: Temperature at which magma is emplaced in Kelvin. This parameter is currently not used in the code. Instead a default value of 1473.0 K is used.See function transform_marker_to_magma for details.\nnumber_of_injection_subdomains::ParameterInt: The number used to divide the characteristic injection width into separate domains that are selected using a normal distribution if iuse_random_injection_subdomain = 1.\nmaximum_shallow_injection_depth::ParameterFloat: Maximum submud depth (meters) for normal shallow mantle injection. If the local maximum of the partially molten zone is deeper than this value then the injection width is increased by a factor of 5. THIS IS CURRENTLY TURNED OFF IN CODE. See function extractpartialmeltandmakemagmabody for details.\nextraction_fraction::ParameterFloat: Fraction of extracted melt that is extracted from the partially molten zone. The remaining melt is left in the partially molten zone and refertalizes the mantle.\nsmoothing_radius_fractionation::ParameterFloat: Smoothing radius (meters) used to smooth the oceanic Moho for the  gabbroic fractionation model whereby fractionation occurs based on distance to Moho. Smoothing the Moho avoids spikes associated with residual gabbroic particles in the mantle associated with magmatic crust thinning.\nmantle_search_width::ParameterFloat: Width (meters) of the mantle domain used to search for the shallowest mantle marker in a subset of the model domain to improve computational efficiency. This parameter is used only if useshallowmantle_injection is True and may need to be adjusted depending on the characteristic injection width. Adjustments should be made to ensure that the search domain is equal to or larger than the injection domain.\nndrainage_basin_old::ParameterInt: Old number of drainage basins\nobj_list::Vector{Union{ParameterFloat, ParameterInt}}: List of parameter objects\n\nNested Dot Access\n\nmelt_residual = model.melting.parameters.extraction.melt_residual.value\next_vol = model.melting.parameters.extraction.ext_vol.value\nxmid_mol = model.melting.parameters.extraction.xmid_mol.value\nytop_mol = model.melting.parameters.extraction.ytop_mol.value\nwidth_mol = model.melting.parameters.extraction.width_mol.value\nndrainage_basin = model.melting.parameters.extraction.ndrainage_basin.value\nsmoothing_radius_drainage = model.melting.parameters.extraction.smoothing_radius_drainage.value\ncharacteristic_injection_width = model.melting.parameters.extraction.characteristic_injection_width.value\nmagma_height_limit = model.melting.parameters.extraction.magma_height_limit.value\nfractionation_threshold_limit = model.melting.parameters.extraction.fractionation_threshold_limit.value\nemplacement_temperature = model.melting.parameters.extraction.emplacement_temperature.value\nnumber_of_injection_subdomains = model.melting.parameters.extraction.number_of_injection_subdomains.value\nmaximum_shallow_injection_depth = model.melting.parameters.extraction.maximum_shallow_injection_depth.value\nextraction_fraction = model.melting.parameters.extraction.extraction_fraction.value\nsmoothing_radius_fractionation = model.melting.parameters.extraction.smoothing_radius_fractionation.value\nmantle_search_width = model.melting.parameters.extraction.mantle_search_width.value\nndrainage_basin_old = model.melting.parameters.extraction.ndrainage_basin_old.value\n\nConstructor\n\nExtraction()\n\nReturns\n\nExtraction: New Extraction parameter group with initialized values\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.ArrayCollection.Arrays","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.ArrayCollection.Arrays","text":"Arrays <: AbstractArrayCollection\n\nData structure containing array groups for melt extraction tracking.\n\nFields\n\nextraction::Extraction: Arrays for drainage basin tracking\n\nConstructor\n\nArrays()::Arrays\n\nCreate a new Arrays collection with default extraction arrays.\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/melting/#EarthBox.ModelDataContainer.MeltingContainer.ArrayCollection.ExtractionGroup.Extraction","page":"Melting","title":"EarthBox.ModelDataContainer.MeltingContainer.ArrayCollection.ExtractionGroup.Extraction","text":"Extraction <: AbstractArrayGroup\n\nArray group containing drainage basin tracking arrays for melt extraction.\n\nFields\n\nxstart_drainage::GridArray1DState: (nmax_basin) : Current x-locations in meters of the start of the drainage area. The drainage area is the region where the melt migrates to the shallowest position.\nxend_drainage::GridArray1DState: (nmax_basin) : Current x-locations in meters of the end of the drainage area. The drainage area is the region where the melt migrates to the shallowest position.\nmelt_residuals::GridArray1DState: (nmax_basin) : Residual melt volume in m^3 remaining in the extrusion volume after the melt has been extracted in drainage basin.\nextrusion_volumes::GridArray1DState: (nmax_basin) : Volume of extracted melt in m^3 that will be extruded to surface.\nxmid_molten_zones::GridArray1DState: (nmax_basin) : X-locations in meters of the midpoints of the molten region.\nytop_molten_zones::GridArray1DState: (nmax_basin) : Y-locations in meters of the top of the molten region.\nwidth_molten_zones::GridArray1DState: (nmax_basin) : Width of the molten region in drainage basin in meters.\navg_shallow_partial_melt_xcoors::GridArray1DState: (nmax_basin) : Average x-coordinates of the shallowest partial melt marker in drainage basins in meters.\navg_shallow_partial_melt_ycoors::GridArray1DState: (nmax_basin) : Average y-coordinates of the shallowest partial melt marker in drainage basins in meters.\nxstart_drainage_o::GridArray1DState: (nmax_basin) : Old x-locations of the start of the drainage area. The drainage area is the region where the melt migrates to the shallowest position in meters.\nxend_drainage_o::GridArray1DState: (nmax_basin) : Old x-locations of the end of the drainage area. The drainage area is the region where the melt migrates to the shallowest position in meters.\n\nNested Dot Access\n\nxstart_drainage = model.melting.arrays.extraction.xstart_drainage.array\nxend_drainage = model.melting.arrays.extraction.xend_drainage.array\nmelt_residuals = model.melting.arrays.extraction.melt_residuals.array\nextrusion_volumes = model.melting.arrays.extraction.extrusion_volumes.array\nxmid_molten_zones = model.melting.arrays.extraction.xmid_molten_zones.array\nytop_molten_zones = model.melting.arrays.extraction.ytop_molten_zones.array\nwidth_molten_zones = model.melting.arrays.extraction.width_molten_zones.array\navg_shallow_partial_melt_xcoors = model.melting.arrays.extraction.avg_shallow_partial_melt_xcoors.array\navg_shallow_partial_melt_ycoors = model.melting.arrays.extraction.avg_shallow_partial_melt_ycoors.array\nxstart_drainage_o = model.melting.arrays.extraction.xstart_drainage_o.array\nxend_drainage_o = model.melting.arrays.extraction.xend_drainage_o.array\n\nConstructor\n\nExtraction()\n\nCreate a new Extraction array group with default drainage basin arrays.\n\nReturns\n\nExtraction: New Extraction array group with initialized arrays\n\n\n\n\n\n","category":"type"},{"location":"api/model_manager/xdmf/xdmf_timestep_manager/","page":"XdmfTimeStepsManager","title":"XdmfTimeStepsManager","text":"The XdmfTimeStepsManager manages xdmf output.","category":"section"},{"location":"api/model_manager/xdmf/xdmf_timestep_manager/#EarthBox.ModelManager.XdmfTimeStepsManager","page":"XdmfTimeStepsManager","title":"EarthBox.ModelManager.XdmfTimeStepsManager","text":"XdmfTimeStepsManager\n\nModule responsible for managing XDMF output files and timesteps.\n\nThis module handles:\n\nWriting model data to XDMF format files\nManaging separate XDMF files for fields, markers, velocity and topography\nConverting and formatting data for output\nCoordinating timestep information across output files\n\nThe XdmfTimeStepsManager acts as the central coordinator for XDMF output, organizing the writing of different data types to their respective files while maintaining consistent timestep information.\n\n\n\n\n\n","category":"module"},{"location":"methods/discretization/grid_generation/#Staggered-Grid-Generation","page":"Staggered Grid Generation","title":"Staggered Grid Generation","text":"A grid type option referred to as T-type involves local refinement in a upper central domain of the model and smooth variations of grid resolution in surrounding lower resolution domains. T-type refinement is enabled by setting the grid_type argument equal to :TtypeRefinedGrid (See  StaggeredGrid.initialize!). \n\nThe high-resolution domain in the T-type grid has basic grid spacings Delta x_hr and  Delta y_hr in the x- and y-directions, respectively, and extends laterally from  x-coordinate x_o to x_f and vertically from the top of the model domain to a depth of  y_f. The x-indices of the basic grid corresponding to x_o and x_f are j_x_o  and j_x_f, respectively, and are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-bounding-j-indices","page":"Staggered Grid Generation","title":"eq:ttype-bounding-j-indices","text":"beginsplit\n    j_x_o  = intleft(fracN_xb - N_xhr2right) + 1\n    j_x_f  = j_x_o + intleft( fracleft(x_f - x_oright)Delta x_hr right)\nendsplit\n\nStarting with x_bj_x_o = x_o the x-coordinates within the high resolution domain from  j=j_x_o+1 to j=j_x_f are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-x-coords-highres","page":"Staggered Grid Generation","title":"eq:ttype-x-coords-highres","text":"x_bj = x_bj-1 + Delta x_hr text\n\nStarting with index j=2 and ending with index j=j_x_o the x-coordinates to the left of  x_o are calculate using the following equation (Gerya, 2010):","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-x-coords-left","page":"Staggered Grid Generation","title":"eq:ttype-x-coords-left","text":"x_bj = x_bj-1 + Delta x_hr(f_smoothL)^j_x_o - j + 1\n\nwhere f_smoothL is a smoothing factor that is calculated iteratively starting with an initial  value of f_smoothL = 11 using the following equation:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-left-smoothing","page":"Staggered Grid Generation","title":"eq:ttype-left-smoothing","text":"f_smoothL = left\n    1 \n    + fracx_oDelta x_hrleft(1 - frac1f_smoothLright) \n    right^frac1N_stepsL\n\nwhere N_stepsL = j_x_o - 1. The x-coordinates to the right of x_f starting at index j_x_f+1  are calculated using the following equation (Gerya, 2010):","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-x-coords-right","page":"Staggered Grid Generation","title":"eq:ttype-x-coords-right","text":"x_bj = x_bj-1 + Delta x_hr(f_smoothR)^j - j_x_f\n\nwhere f_smoothR is a smoothing factor that is calculated iteratively starting with an initial value of f_smoothR = 11 using the following equation:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-right-smoothing","page":"Staggered Grid Generation","title":"eq:ttype-right-smoothing","text":"f_smoothR = left\n    1 \n    + fracx_size - x_bj_x_fDelta x_hrleft(1 - frac1f_smoothRright) \n    right^frac1N_stepsR\n\nwhere N_stepsR = left(N_xb - j_x_fright). \n\nThe spacing of the basic grid in the x-direction is given by:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:x-spacing-basic","page":"Staggered Grid Generation","title":"eq:x-spacing-basic","text":"Delta x_bj = x_bj+1 - x_bj text\n\nwhere j ranges from 1 to N_xb-1.\n\nStarting with y_bi = 0, the y-coordinates of the high-resolution domain from indices  i=2 to i=i_y_f are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-y-coords-highres","page":"Staggered Grid Generation","title":"eq:ttype-y-coords-highres","text":"y_bi = y_bi-1 + Delta y_hr text\n\nwhere i_y_f is the index of the basic grid corresponding to the depth y_f and is calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-y-index-final","page":"Staggered Grid Generation","title":"eq:ttype-y-index-final","text":"i_y_f = intleft(fracy_fDelta y_hrright) + 1 text\n\nThe y-coordinates below the high-resolution domain starting at index i = i_y_f+1 are calculated using  the following equation (Gerya, 2010):","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-y-coords-below-hr","page":"Staggered Grid Generation","title":"eq:ttype-y-coords-below-hr","text":"y_bi = y_bi-1 + Delta y_hr(f_smoothB)^i - i_y_f\n\nwhere f_smoothB is a smoothing factor that is calculated iteratively starting with an initial value of f_smoothB = 11 using the following equation:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:ttype-y-smoothing","page":"Staggered Grid Generation","title":"eq:ttype-y-smoothing","text":"f_smoothB = left\n    1 \n    + fracy_size - y_bi_y_fDelta y_hrleft(1 - frac1f_smoothBright) \n    right^frac1left(N_yb - i_y_fright) text\n\nThe spacing of the basic grid in the y-direction is given by:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:y-spacing-basic","page":"Staggered Grid Generation","title":"eq:y-spacing-basic","text":"Delta y_bi = y_bi+1 - y_bi text\n\nwhere i ranges from 1 to N_yb-1.\n\nThe pressure grid, denoted by subscript p, has nodes located at the center of basic grid cells  with (N_xb-1) nodes in the x-direction and (N_yb-1) nodes in the y-direction  Fig.. The x- and y-coordinates of the pressure grid are (x_pj y_pi)  where j is in the x-direction ranging from 1 to N_xb-1 and i is in the y-direction ranging  from 1 to N_yb-1. The pressure grid spacings in the x- and y-directions are denoted by  Delta x_pj where j ranges from 1 to N_xb-2 and Delta y_pi where i ranges from 1  to N_yb-2, respectively. Pressure unknown P_(ij)_p, deviatoric normal stress  sigma_xx(ij)_p, deviatoric normal strain rate dot epsilon_xx(ij)_p and  visco-plastic normal viscosity eta_vp(ij)_p are defined on the nodes of the pressure grid.  The spacing of the pressure grid in the x-direction is given by:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:pressure-x-spacing","page":"Staggered Grid Generation","title":"eq:pressure-x-spacing","text":"Delta x_pj = 05left(x_bj+2 - x_bjright)\n\nwhere j ranges from 1 to N_xb-2. The spacing of the pressure grid in the y-direction is given by:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:pressure-y-spacing","page":"Staggered Grid Generation","title":"eq:pressure-y-spacing","text":"Delta y_pi = 05left(y_bi+2 - y_biright)\n\nwhere i ranges from 1 to N_yb-2. Starting with x_p1 = 05(x_b1+x_b2), the  x-coordinates of the pressure grid from indices j=2 to j=N_xb-1 are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:pressure-x-coords","page":"Staggered Grid Generation","title":"eq:pressure-x-coords","text":"x_pj = x_pj-1 + Delta x_pj-1 text\n\nStarting with y_p1 = 05(y_b1+y_b2), the y-coordinates of the pressure grid from indices i=2 to i=N_yb-1 are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:pressure-y-coords","page":"Staggered Grid Generation","title":"eq:pressure-y-coords","text":"y_pi = y_pi-1 + Delta y_pi-1 text\n\nThe v_x grid, denoted by subscript v_x, has nodes located at the center of left- and  right-sides of basic-grid cells and outside the model domain in the y-direction with N_xb nodes in the x-direction and (N_yb+1) nodes in the y-direction Fig..  The x- and y-coordinates of the v_x grid are (x_bj y_v_xi) where j ranges from 1 to  N_xb and i ranges from 1 to N_yb+1. The grid spacings in the y-direction of the v_x  grid are denoted by Delta y_v_xi where i ranges from 1 to N_yb. Spacing in the  x-direction is equal to Delta x_bj. The unknown for the x-component of velocity v_x(ij)v_x  is defined on the nodes of the v_x grid. Starting with y_v_x1 = 05(y_b1 - 05Delta y_b1)  and ending with y_v_xN_yb+1 = y_bN_yb + 05Delta y_bN_yb-1, the y-coordinates of  the v_x grid from indices i=2 to i=N_yb are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:vx-grid-y-coords","page":"Staggered Grid Generation","title":"eq:vx-grid-y-coords","text":"y_v_xi = 05(y_bi + y_bi-1) text\n\nStarting with Delta y_v_x1 = Delta y_b1 and ending with Delta y_v_xN_yb = Delta y_bN_yb-1, the grid spacings in the y-direction of the v_x grid from indices i=2 to i=N_yb are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:vx-y-spacing","page":"Staggered Grid Generation","title":"eq:vx-y-spacing","text":"Delta y_v_xi = 05(y_bi+1 - y_bi-1)\n\nThe v_y grid, denoted by subscript v_y, has nodes located at the center top and bottom  of basic-grid cells and outside the model domain in the x-direction with N_xb+1 nodes in the x-direction and (N_yb) nodes in the y-direction Fig.. The  x- and y-coordinates of the v_y grid are (x_jv_y y_bi) where j ranges from 1 to  N_xb+1 and i ranges from 1 to N_yb. The grid spacings in the x-direction of the v_y  grid are denoted by Delta x_jv_y where j ranges from 1 to N_xb. Spacing in the  y-direction is equal to Delta y_bi. The unknown for the y-component of velocity v_y(ij)v_y  is defined on the nodes of the v_y grid. Starting with x_v_y1 = 05(x_b1 - 05Delta x_b1)  and ending with x_v_yN_xb+1 = x_bN_xb + 05Delta x_bN_xb-1, the x-coordinates  of the v_y grid from indices j=1 to j=N_xb are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:vy-x-coords","page":"Staggered Grid Generation","title":"eq:vy-x-coords","text":"x_v_yj = 05(x_bj + x_bj-1) text\n\nStarting with Delta x_v_y1 = Delta x_b1 and ending with  Delta x_v_yN_xb = Delta x_bN_xb-1, the grid spacings in the x-direction of the v_y grid from indices j=2 to j=N_xb-1 are calculated as follows:","category":"section"},{"location":"methods/discretization/grid_generation/#eq:vy-x-spacing","page":"Staggered Grid Generation","title":"eq:vy-x-spacing","text":"Delta x_v_yj = 05(x_bj+1 - x_bj-1)","category":"section"},{"location":"data_types/data_types/#EarthBox.Parameters.ParameterFloat","page":"Data Types","title":"EarthBox.Parameters.ParameterFloat","text":"ParameterFloat\n\nA mutable struct representing a parameter with a Float64 value.\n\nFields\n\nvalue::Float64: The numerical value of the parameter\nname::String: The name of the parameter \nunits::String: The units of the parameter\ndescription::String: A description of what the parameter represents\nparser::Function: A function to parse the parameter value from a string\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Parameters.ParameterInt","page":"Data Types","title":"EarthBox.Parameters.ParameterInt","text":"ParameterInt\n\nA mutable struct representing a parameter with an Int64 value.\n\nFields\n\nvalue::Int64: The numerical value of the parameter\nname::String: The name of the parameter \nunits::String: The units of the parameter\ndescription::String: A description of what the parameter represents\nparser::Function: A function to parse the parameter value from a string\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Parameters.ParameterStr","page":"Data Types","title":"EarthBox.Parameters.ParameterStr","text":"ParameterStr\n\nA mutable struct representing a parameter with a String value.\n\nFields\n\nvalue::String: The string value of the parameter\nname::String: The name of the parameter \nunits::String: The units of the parameter\ndescription::String: A description of what the parameter represents\nparser::Function: A function to parse the parameter value from a string\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.Array1DInt.Array1DIntState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.Array1DInt.Array1DIntState","text":"Array1DIntState\n\nMutable struct representing a 1D integer array with associated metadata.\n\nFields\n\narray::Vector{Int}: The 1D integer array data\nname::String: Name of the array\nunits::String: Physical units of the array values\ndescription::String: Description of the array's purpose\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.Array1DFloat.Array1DFloatState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.Array1DFloat.Array1DFloatState","text":"Array1DFloatState\n\nMutable struct representing a 1D float array with associated metadata.\n\nFields\n\narray::Vector{Float64}: The 1D float array data\nname::String: Name of the array\nunits::String: Physical units of the array values\ndescription::String: Description of the array's purpose\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.GridArray1D.GridArray1DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.GridArray1D.GridArray1DState","text":"GridArray1DState\n\nStruct representing a 1D grid array with associated metadata.\n\nFields\n\narray: the actual array data (Vector{Float64})\nname: identifier for the array\nunits: physical units of the array values\ndescription: detailed description of what the array represents\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.RhsHeatArray1D.RhsHeatArray1DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.RhsHeatArray1D.RhsHeatArray1DState","text":"RhsHeatArray1DState\n\nStruct containing 1D array for heat equation right-hand side.\n\nFields\n\narray: 1D array of float64 values\nname: Name of the array\nunits: Units of the array values\ndescription: Description of what the array represents\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.RhsStokesArray1D.RhsStokesArray1DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.RhsStokesArray1D.RhsStokesArray1DState","text":"RhsStokesArray1DState\n\nStruct containing a 1D array for Stokes equation right-hand side.\n\nFields\n\narray: the 1D array data\nname: name of the array\nunits: physical units of the array values\ndescription: description of the array's purpose\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.SolutionArray1D.SolutionArray1DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.SolutionArray1D.SolutionArray1DState","text":"SolutionArray1DState\n\nMutable struct representing a 1D solution array with associated metadata.\n\nFields\n\narray::Vector{Float64}: The 1D array data\nname::String: Name of the array\nunits::String: Physical units of the array values\ngrid_type::String: Type of grid (always \"solution\")\ndescription::String: Description of the array's purpose\noutform::OutputFormat: Output formatting specifications\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.MaterialArrayFloat1D.MaterialArrayFloat1DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.MaterialArrayFloat1D.MaterialArrayFloat1DState","text":"MaterialArrayFloat1DState\n\nMutable struct representing a 1D material array with associated metadata.\n\nFields\n\narray::Vector{Float64}: The 1D array data\nname::String: Name of the array\nunits::Vector{String}: List of physical units\ndescription::Vector{String}: List of descriptions\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.MaterialArrayInt1D.MaterialArrayInt1DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.MaterialArrayInt1D.MaterialArrayInt1DState","text":"MaterialArrayInt1DState\n\nMutable struct representing a 1D material array with associated metadata.\n\nFields\n\narray::Vector{Int64}: The 1D array data\nname::String: Name of the array\nunits::Vector{String}: List of physical units\ndescription::Vector{String}: List of descriptions\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.MarkerArrayFloat1D.MarkerArrayFloat1DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.MarkerArrayFloat1D.MarkerArrayFloat1DState","text":"MarkerArrayFloat1DState{T<:AbstractFloat}\n\nMutable struct representing a 1D float marker array with associated metadata.\n\nType Parameters\n\nT<:AbstractFloat: The floating-point type for the array (e.g., Float64, Float32, Float16)\n\nFields\n\narray::Vector{T}: The 1D float array data for markers\nname::String: Name of the array\nunits::String: Physical units of the array values\ndescription::String: Description of the array's purpose\noutform::OutputFormat: Output formatting specifications\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.MarkerArrayInt1D.MarkerArrayInt1DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.MarkerArrayInt1D.MarkerArrayInt1DState","text":"MarkerArrayInt1DState{T<:Integer}\n\nMutable struct representing a 1D integer marker array with associated metadata.\n\nType Parameters\n\nT<:Integer: The integer type for the array (e.g., Int64, Int32, Int16)\n\nFields\n\narray::Vector{T}: The 1D integer array data for markers\nname::String: Name of the array\nunits::String: Physical units of the array values\ndescription::String: Description of the array's purpose\noutform::OutputFormat: Output formatting specifications\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.InternalBcArrayFloat.InternalBcArrayFloatState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.InternalBcArrayFloat.InternalBcArrayFloatState","text":"InternalBcArrayFloatState\n\nStruct representing a 1D internal boundary condition float array with associated metadata.\n\nFields\n\narray: the actual array data (Vector{Float64})\nname: identifier for the array\ndescription: array of detailed descriptions for each element\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.InternalBcArrayInt.InternalBcArrayIntState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.InternalBcArrayInt.InternalBcArrayIntState","text":"InternalBcArrayIntState\n\nStruct representing a 1D internal boundary condition integer array with associated metadata.\n\nFields\n\narray: the actual array data (Vector{Int})\nname: identifier for the array\ndescription: array of detailed descriptions for each element\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.ScalarArray2D.ScalarArray2DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.ScalarArray2D.ScalarArray2DState","text":"ScalarArray2DState\n\nMutable struct representing a 2D scalar array with associated metadata.\n\nFields\n\nny::Int64: Number of nodes in the y-direction\nnx::Int64: Number of nodes in the x-direction\narray::Matrix{Float64}: The 2D array data\nname::String: Name of the array\nunits::String: Physical units of the array values\ngrid_type::String: Type of grid (\"basic\", \"pressure\", \"vx\", \"vy\")\ndescription::String: Description of the array's purpose\noutform::OutputFormat: Output formatting specifications\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.BcArrayFloat.BcArrayFloatState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.BcArrayFloat.BcArrayFloatState","text":"BcArrayFloatState\n\nStruct representing a 2D boundary condition array with associated metadata.\n\nFields\n\narray: the actual array data (Matrix{Float64})\nname: identifier for the array\nunits: physical units of the array values\ndescription: detailed description of what the array represents\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.MaterialArrayFloat2D.MaterialArrayFloat2DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.MaterialArrayFloat2D.MaterialArrayFloat2DState","text":"MaterialArrayFloat2DState\n\nMutable struct representing a 2D material array with associated metadata.\n\nFields\n\narray::Matrix{Float64}: The 2D array data\nname::String: Name of the array\nunits::Vector{String}: List of physical units\ndescription::Vector{String}: List of descriptions\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.MaterialArrayInt2D.MaterialArrayInt2DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.MaterialArrayInt2D.MaterialArrayInt2DState","text":"MaterialArrayInt2DState\n\nMutable struct representing a 2D material array with associated metadata.\n\nFields\n\narray::Matrix{Int64}: The 2D array data\nname::String: Name of the array\nunits::Vector{String}: List of physical units\ndescription::Vector{String}: List of descriptions\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.TopoArray2D.TopoArray2DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.TopoArray2D.TopoArray2DState","text":"TopoArray2DState\n\nA struct for storing 2D topography data arrays with metadata.\n\nFields\n\narray::Matrix{Float64}: The 2D array of float64 values\nname::String: Name of the array\nunits::Vector{String}: Units for the array values\ndescription::Vector{String}: Description of the array contents\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.CarbArray2D.CarbArray2DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.CarbArray2D.CarbArray2DState","text":"CarbArray2DState\n\nA struct for storing 2D carbonate data arrays with metadata.\n\nFields\n\narray::Matrix{Float64}: The 2D array of float64 values\nname::String: Name of the array\nunits::Vector{String}: Units for the array values\ndescription::Vector{String}: Description of the array contents\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.Arrays.ArrayTypes.ScalarArray3D.ScalarArray3DState","page":"Data Types","title":"EarthBox.Arrays.ArrayTypes.ScalarArray3D.ScalarArray3DState","text":"ScalarArray3DState\n\nMutable struct representing a 3D scalar array with associated metadata.\n\nFields\n\nny::Int64: Number of nodes in the y-direction\nnx::Int64: Number of nodes in the x-direction\nnz::Int64: Number of nodes in the z-direction\narray::Matrix{Float64}: The 3D array data\nname::String: Name of the array\nunits::String: Physical units of the array values\ngrid_type::String: Type of grid (\"basic\", \"pressure\", \"vx\", \"vy\")\ndescription::String: Description of the array's purpose\noutform::OutputFormat: Output formatting specifications\n\n\n\n\n\n","category":"type"},{"location":"data_types/data_types/#EarthBox.MaterialColorsContainer.MaterialColors","page":"Data Types","title":"EarthBox.MaterialColorsContainer.MaterialColors","text":"MaterialColors\n\nStruct with material color information.\n\nFields\n\ncolor_map::[Union{Any, Nothing}]:\nColor map for material colors\nn_bin::[Union{Int64, Nothing}]:\nNumber of material colors\nlabels::[Union{Vector{String}, Nothing}]:\nLabels for material colors with format: material type : material domain : (material name)\nticks::[Union{Vector{Float64}, Nothing}]:\nTicks for the colorbar\ncolorrange::[Union{Tuple{Float64, Float64}, Nothing}]: \nColor range for the colorbar specifically for CairoMakie where for material  ID's ranging from 1tonbinthe colorbar range should be from1 - 0.5tonbin + 0.5` to maintain proper spacing between the colorbar ticks.\n\n\n\n\n\n","category":"type"},{"location":"material_library/collections/sandbox/#Material-Collection:-sandbox","page":"Collection: Sandbox","title":"Material Collection: sandbox","text":"","category":"section"},{"location":"material_library/collections/sandbox/#Material-List:-Sandbox-Benchmarks","page":"Collection: Sandbox","title":"Material List: Sandbox Benchmarks","text":"SandboxStickyAir\nSandboxSandLayer\nSandboxMicrobeads\nSandboxMobileWall\nSandboxPDMS","category":"section"},{"location":"material_library/collections/sandbox/#Material-Tables:-Sandbox_Experiments","page":"Collection: Sandbox","title":"Material Tables: Sandbox_Experiments","text":"","category":"section"},{"location":"material_library/collections/sandbox/#SandboxStickyAir","page":"Collection: Sandbox","title":"SandboxStickyAir","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().sandbox,\n    target_collection_name = \"Sandbox_Experiments\", material_name = \"SandboxStickyAir\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/sandbox/#SandboxSandLayer","page":"Collection: Sandbox","title":"SandboxSandLayer","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().sandbox,\n    target_collection_name = \"Sandbox_Experiments\", material_name = \"SandboxSandLayer\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/sandbox/#SandboxMicrobeads","page":"Collection: Sandbox","title":"SandboxMicrobeads","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().sandbox,\n    target_collection_name = \"Sandbox_Experiments\", material_name = \"SandboxMicrobeads\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/sandbox/#SandboxMobileWall","page":"Collection: Sandbox","title":"SandboxMobileWall","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().sandbox,\n    target_collection_name = \"Sandbox_Experiments\", material_name = \"SandboxMobileWall\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"material_library/collections/sandbox/#SandboxPDMS","page":"Collection: Sandbox","title":"SandboxPDMS","text":"using EarthBox\nimport Markdown\ntable_str = make_material_table(\n    MaterialLibrary().sandbox,\n    target_collection_name = \"Sandbox_Experiments\", material_name = \"SandboxPDMS\"\n    )\nMarkdown.parse(table_str)","category":"section"},{"location":"api/material_geometry/internal_velocity_zone/#InternalVelocityZone","page":"InternalVelocityZone","title":"InternalVelocityZone","text":"The InternalVelocityZone material geometry is used to control where internal velocity is applied for cases with internal velocity boundary conditions.","category":"section"},{"location":"api/material_geometry/internal_velocity_zone/#Initialization","page":"InternalVelocityZone","title":"Initialization","text":"","category":"section"},{"location":"api/material_geometry/internal_velocity_zone/#EarthBox.MaterialGeometry.InternalVelocityZone.initialize!","page":"InternalVelocityZone","title":"EarthBox.MaterialGeometry.InternalVelocityZone.initialize!","text":"Initialize internal velocity zone geometry.\n\nKeyword arguments:\n\nxvxinternal::Union{Float64, Nothing}:\nX-coordinate in meters for internal vx velocity\nyminvx_internal::Union{Float64, Nothing}:\nMinimum y-coordinate in meters for internal vx velocity\nymaxvx_internal::Union{Float64, Nothing}:\nMaximum y-coordinate in meters for internal vx velocity\nxvyinternal::Union{Float64, Nothing}:\nX-coordinate in meters for internal vy velocity\nyminvy_internal::Union{Float64, Nothing}:\nMinimum y-coordinate in meters for internal vy velocity\nymaxvy_internal::Union{Float64, Nothing}:\nMaximum y-coordinate in meters for internal vy velocity\n\n\n\n\n\n","category":"function"},{"location":"model_data/collections/conversion/","page":"Conversion","title":"Conversion","text":"Conversion\n\nParameters","category":"section"},{"location":"model_data/collections/conversion/#EarthBox.ModelDataContainer.ConversionContainer.Conversion","page":"Conversion","title":"EarthBox.ModelDataContainer.ConversionContainer.Conversion","text":"Conversion\n\nParameter collection for conversion parameters.\n\nFields\n\nparameters::Parameters: Parameter groups for conversion configuration\n\n\n\n\n\n","category":"type"},{"location":"model_data/collections/conversion/#EarthBox.ModelDataContainer.ConversionContainer.ParameterCollection.Parameters","page":"Conversion","title":"EarthBox.ModelDataContainer.ConversionContainer.ParameterCollection.Parameters","text":"Parameters <: AbstractParameterCollection\n\nParameter collection for conversion parameters.\n\nFields\n\nKtoC::ParameterFloat: Conversion factor for Kelvins to Celsius: TC = TK - KtoC\nsec_per_yr::ParameterFloat: Seconds per year\nsec_per_Myr::ParameterFloat: Seconds per million years\ncm_yr2m_s::ParameterFloat: Conversion factor for cm/yr to m/s\n\nConstructor\n\nParameters()\n\nReturns\n\nParameters: New Parameters collection with initialized values\n\nNested Dot Access\n\nKtoC = model.conversion.parameters.KtoC.value\nsec_per_yr = model.conversion.parameters.sec_per_yr.value\nsec_per_Myr = model.conversion.parameters.sec_per_Myr.value\ncm_yr2m_s = model.conversion.parameters.cm_yr2m_s.value\n\n\n\n\n\n","category":"type"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/hydrothermal_update/#Hydrothermal-Update-Steps","page":"Hydrothermal Update Steps","title":"Hydrothermal Update Steps","text":"For each marker m in drainage basin k do:\n\nCheck if Hydrothermal Cooling Criteria are satisfied.\nIf criteria are met, update Effective Thermal Conductivity.","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/hydrothermal_update/#Hydrothermal-Cooling-Criteria","page":"Hydrothermal Update Steps","title":"Hydrothermal Cooling Criteria","text":"[1] Marker composition C_m is normal or fractionated gabbro, normal or fractionated gabbroic emplaced magma, basalt, mantle or continental crust.\n\n[2] There is a water column above the marker indicated by y_ml  y_sl where y_ml is the y-coordinate of the mudline at the x-coordinate x_m of the  marker and y_sl is y-coordinate of sea level.\n\n[3] The marker is below sea level as indicated by y_m  y_sl where y_m is the y-coordinate of the marker.\n\n[4] Sediment thickness at the x-coordinate of the marker d_sedx_m is below a  threshold of 2500 m.","category":"section"},{"location":"thermo_mechanical_algorithm/pre_solver_steps/sections/hydrothermal_update/#Effective-Thermal-Conductivity","page":"Hydrothermal Update Steps","title":"Effective Thermal Conductivity","text":"[1] Calculate the x-limits of the molten zone x_molten^min and x_molten^max using equation eq:x-molten-limits with the x-coordinate of the mid-point of the  gabbroic molten zone x_moltenk and the width of the gabbroic molten zone W_moltenk  where k is the drainage basin index.\n\n[2] Calculate the distance from the molten zone D_molten using equation  eq:distance-from-molten-zone with x_molten^min, x_molten^max and  the x-coordinate of the marker x_m.\n\n[3] Calculate the hydrothermal distance factor f_hydro using equation  eq:hydrothermal-distance-factor with D_molten.\n\n[4] Calculate the distance-based Nusselt number Nu_dist using equation  eq:distance-based-nusselt with f_hydro.\n\n[5] Calculate the effective Nusselt number Nu_eff using equation  eq:effective-nusselt with Nu_dist, the plastic strain rate  dot epsilon_plasticm and plastic strain epsilon_plastic(m) of the marker m.\n\n[6] Update marker thermal conductivity k_m using equation eq:hydrothermal-k with the current thermal conductivity k_m as the unmodified thermal conductivity of the marker, marker x-coordinate x_m, marker y-coordinate y_m, marker temperature T_m, the submud  depth of the marker d_smm, sediment thickness at x-coordinate of marker d_sedx_m,  y-coordinate of mudline at the x-coordinate of marker y_ml and the effective Nusselt  number Nu_eff.","category":"section"},{"location":"benchmarks/models/channel_flow_non_steady_temperature/#Channel-Flow-Non-steady-Temperature","page":"Channel Flow Non Steady Temperature","title":"Channel Flow Non-steady Temperature","text":"See description at EarthBox.BenchmarksManager.run_benchmark.\n\nThis benchmark can be run with the following code:\n\nusing EarthBox\nBenchmarksManager.run_benchmark(:channel_flow_non_steady_temperature);\n\nOutput will be sent to a directory in the present working directory. Output will also be sent to the terminal indicating the result of the benchmark and where to find output files.\n\nMax difference (num-ana): 4.86148\nMax relative error: 0.658 %\nMax relative error limit: 0.700 %\n\nTest Successful: max relative error is not greater than limit: 0.658% <= 0.700%\n\nLook at the following path for benchmark plots: .../earthbox_benchmark_results_2025-11-15_16-39-32/channel_flow_non_steady_temperature_output\n\n(Image: Channel Flow Non-steady Temperature)","category":"section"},{"location":"benchmarks/models/channel_flow_non_steady_temperature/#fig:channel-flow-non-steady-temperature","page":"Channel Flow Non Steady Temperature","title":"fig:channel-flow-non-steady-temperature","text":"Benchmark result using EarthBox version 0.1.0","category":"section"}]
}
