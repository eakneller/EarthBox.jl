<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Using Custom MUMPS Libraries · EarthBox.jl</title><meta name="title" content="Using Custom MUMPS Libraries · EarthBox.jl"/><meta property="og:title" content="Using Custom MUMPS Libraries · EarthBox.jl"/><meta property="twitter:title" content="Using Custom MUMPS Libraries · EarthBox.jl"/><meta name="description" content="Documentation for EarthBox.jl."/><meta property="og:description" content="Documentation for EarthBox.jl."/><meta property="twitter:description" content="Documentation for EarthBox.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/><script src="../../assets/equation-refs.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="EarthBox.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EarthBox.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Installation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../MPI_system/">Using System MPI Binaries</a></li><li class="is-active"><a class="tocitem" href>Using Custom MUMPS Libraries</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Building-MUMPS-Libraries"><span>Building MUMPS Libraries</span></a></li><li><a class="tocitem" href="#Optimization-Options"><span>Optimization Options</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Model Management with the EarthBox API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../models/model_execution/api_building_and_execution/">Model Building, Execution and Plotting</a></li><li><a class="tocitem" href="../../models/model_execution/input_file_execution/">Using Input Files</a></li><li><a class="tocitem" href="../../models/model_execution/background_command_line_execution/">Background Command-line Execution</a></li><li><a class="tocitem" href="../../models/model_execution/remote_execution/">Batch Remote Execution</a></li><li><a class="tocitem" href="../../models/model_execution/batch_local_execution/">Batch Local Execution</a></li><li><a class="tocitem" href="../../models/model_execution/parallel_marker_plotting/">Plotting Marker Swarms in Parallel</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../models/model_list/">Model List</a></li><li><a class="tocitem" href="../../models/lithospheric_extension/polyphase_extension_n17/">Polyphase Extension n17</a></li><li><a class="tocitem" href="../../models/lithospheric_extension/extension_weak_fault/">Extension with Weak Fault</a></li><li><a class="tocitem" href="../../models/lithospheric_extension/extension_with_softening_b14/">Extension with Softening b14</a></li><li><a class="tocitem" href="../../models/sdr_formation/sdr_formation/">SDR Formation</a></li><li><a class="tocitem" href="../../models/vep_extension_downhill_diffusion/vep_extension_downhill_diffusion/">Visco-elasto-plastic Extension with Downhill Diffusion</a></li><li><a class="tocitem" href="../../models/subduction/slab_retreat/">Slab Retreat</a></li><li><a class="tocitem" href="../../models/sandbox/sandbox_extension/">Sandbox Extension</a></li><li><a class="tocitem" href="../../models/sandbox/sandbox_shortening/">Sandbox Shortening</a></li><li><a class="tocitem" href="../../models/spreading_center/spreading_center/">Spreading Center</a></li><li><a class="tocitem" href="../../models/hot_box_melting/hot_box_melting/">Hot Box Melting</a></li><li><a class="tocitem" href="../../models/regional/catl/">Magmatic Crust Formation: Central Atlantic</a></li><li><a class="tocitem" href="../../models/regional/iberia/">Magma Poor Margin: Iberia</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../methods/introduction/">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Governing Equations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../methods/governing_equations/momentum_and_mass/">Conservation of Momentum and Mass</a></li><li><a class="tocitem" href="../../methods/governing_equations/energy/">Conservation of Energy</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Discretization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../methods/discretization/grid_structure/">Staggered Grid Structure</a></li><li><a class="tocitem" href="../../methods/discretization/grid_generation/">Staggered Grid Generation</a></li><li><a class="tocitem" href="../../methods/discretization/marker_distribution/">Marker Distribution</a></li><li><a class="tocitem" href="../../methods/discretization/stokes2D/">Discretization of the 2D Stokes-continuity Equations</a></li><li><a class="tocitem" href="../../methods/discretization/conduction/">Discretization of Heat-conduction Equation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Boundary Conditions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../methods/discretization/stokes_bcs/">Stokes Boundary Conditions</a></li><li><a class="tocitem" href="../../methods/discretization/heat_bcs/">Heat Boundary Conditions</a></li></ul></li><li><a class="tocitem" href="../../methods/interpolation/marker_grid_interpolation/">Marker-Grid Interpolation</a></li><li><a class="tocitem" href="../../methods/stokes_algorithm/stokes_algorithm/">Stokes-Continuity Algorithm</a></li><li><a class="tocitem" href="../../methods/heat_algorithm/heat_algorithm/">Heat Algorithm</a></li><li><a class="tocitem" href="../../methods/sediment_transport/sediment_transport/">Sediment Transport</a></li><li><a class="tocitem" href="../../methods/melt/melt/">Melt</a></li><li><a class="tocitem" href="../../methods/lava_flow/lava_flow/">Lava Flow</a></li><li><a class="tocitem" href="../../methods/viscous_creep/viscous_creep/">Viscous Creep</a></li><li><a class="tocitem" href="../../methods/strain_weakening/strain_weakening/">Strain Weakening</a></li><li><a class="tocitem" href="../../methods/hydrothermal/hydrothermal/">Hydrothermal Circulation</a></li><li><a class="tocitem" href="../../methods/serpentinization/serpentinization/">Serpentinization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Thermo-mechanical Algorithm</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../thermo_mechanical_algorithm/main_steps/">Main Steps</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Pre-solver Steps</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../thermo_mechanical_algorithm/pre_solver_steps/pre_solver_steps/">Pre-solver Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/pre_solver_steps/sections/rock_property_update/">Rock Property Update Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/pre_solver_steps/sections/latent_heat_update/">Latent Heat Update Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/pre_solver_steps/sections/hydrothermal_update/">Hydrothermal Update Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/pre_solver_steps/sections/marker_failure_prop_update/">Marker Failure Properties Update Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/pre_solver_steps/sections/marker_viscosity_update/">Marker Creep Viscosity Update Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/pre_solver_steps/sections/melt_damage_update/">Melt Damage Update Steps</a></li></ul></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/stokes_solver_steps/stokes_solver_steps/">Stokes-solver Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/heat_solver_steps/heat_solver_steps/">Heat-solver Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/advection_solver_steps/advection_solver_steps/">Advection-solver Steps</a></li><li><input class="collapse-toggle" id="menuitem-5-6" type="checkbox"/><label class="tocitem" for="menuitem-5-6"><span class="docs-label">Post-solver Steps</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../thermo_mechanical_algorithm/post_solver_steps/post_solver_steps/">Post-solver Steps</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/post_solver_steps/sections/topography/">Topography</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/post_solver_steps/sections/melt_extraction/">Melt Extraction</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/post_solver_steps/sections/sediment_transport/">Sediment Transport</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/post_solver_steps/sections/lava_flow/">Lava Flow</a></li><li><a class="tocitem" href="../../thermo_mechanical_algorithm/post_solver_steps/sections/marker_transformation/">Marker Transformation</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">EarthBox API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/earthbox_api/">API Overview</a></li><li><a class="tocitem" href="../../api/earthbox_state/earthbox_state/">EarthBoxState</a></li><li><input class="collapse-toggle" id="menuitem-6-3" type="checkbox"/><label class="tocitem" for="menuitem-6-3"><span class="docs-label">Model Management</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/model_manager/model_manager/">ModelManager</a></li><li><a class="tocitem" href="../../api/model_manager/xdmf/xdmf_timestep_manager/">XdmfTimeStepsManager</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-4" type="checkbox"/><label class="tocitem" for="menuitem-6-4"><span class="docs-label">Staggered Grid</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/staggered_grid/initialization/">Initialization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-5" type="checkbox"/><label class="tocitem" for="menuitem-6-5"><span class="docs-label">Material Geometry</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/material_geometry/sticky_air_geometry/">StickyAirGeometry</a></li><li><a class="tocitem" href="../../api/material_geometry/earth_layering/">EarthLayering</a></li><li><a class="tocitem" href="../../api/material_geometry/litho_strong_zones/">LithoStrongZones</a></li><li><a class="tocitem" href="../../api/material_geometry/plume/">Plume</a></li><li><a class="tocitem" href="../../api/material_geometry/crustal_hole/">CrustalHole</a></li><li><a class="tocitem" href="../../api/material_geometry/rayleigh_taylor/">RayleighTaylor</a></li><li><a class="tocitem" href="../../api/material_geometry/mobile_wall/">MobileWall</a></li><li><a class="tocitem" href="../../api/material_geometry/sandbox/">Sandbox</a></li><li><a class="tocitem" href="../../api/material_geometry/internal_velocity_zone/">InternalVelocityZone</a></li><li><a class="tocitem" href="../../api/material_geometry/fracture_zone/">FractureZone</a></li><li><a class="tocitem" href="../../api/material_geometry/weak_fault/">WeakFault</a></li><li><a class="tocitem" href="../../api/material_geometry/weak_seed/">WeakSeed</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-6" type="checkbox"/><label class="tocitem" for="menuitem-6-6"><span class="docs-label">Boundary Conditions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/boundary_conditions/boundary_conditions/">Initialization</a></li><li><a class="tocitem" href="../../api/boundary_conditions/bc_managers/pressure/">Pressure</a></li><li><a class="tocitem" href="../../api/boundary_conditions/bc_managers/temperature/">Temperature</a></li><li><a class="tocitem" href="../../api/boundary_conditions/bc_managers/transient_bottom_temperature/">TransientBottomTemperature</a></li><li><a class="tocitem" href="../../api/boundary_conditions/bc_managers/velocity/">Velocity</a></li><li><a class="tocitem" href="../../api/boundary_conditions/bc_managers/velocity_from_strain_rate/">VelocityFromStrainRate</a></li><li><a class="tocitem" href="../../api/boundary_conditions/bc_managers/velocity_stop/">VelocityStop</a></li><li><a class="tocitem" href="../../api/boundary_conditions/bc_managers/velocity_step/">VelocityStep</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-7" type="checkbox"/><label class="tocitem" for="menuitem-6-7"><span class="docs-label">Marker Initialization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/markers/coordinates/">MarkerCoordinates</a></li><li><a class="tocitem" href="../../api/markers/temperature/">MarkerTemperature</a></li><li><a class="tocitem" href="../../api/markers/friction/">MarkerFriction</a></li><li><a class="tocitem" href="../../api/markers/cohesion/">MarkerCohesion</a></li><li><a class="tocitem" href="../../api/markers/dilatancy/">MarkerDilatancy</a></li><li><a class="tocitem" href="../../api/markers/viscous_strain_softening/">MarkerViscousStrainSoftening</a></li><li><a class="tocitem" href="../../api/markers/preexponential/">MarkerPreexponential</a></li><li><a class="tocitem" href="../../api/markers/stress_limits/">MarkerStressLimits</a></li><li><a class="tocitem" href="../../api/markers/boundary_friction/">MarkerBoundaryFriction</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-8" type="checkbox"/><label class="tocitem" for="menuitem-6-8"><span class="docs-label">Marker Materials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/marker_materials/materials/">MarkerMaterials</a></li><li><a class="tocitem" href="../../api/marker_materials/material_collection_files/">Material Collection Files</a></li><li><a class="tocitem" href="../../api/marker_materials/material_properties/">Material Properties</a></li><li><a class="tocitem" href="../../api/marker_materials/material_input/">Material Input</a></li><li><a class="tocitem" href="../../api/marker_materials/material_types/">Material Types</a></li><li><a class="tocitem" href="../../api/marker_materials/material_domains/">Material Domains</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-9" type="checkbox"/><label class="tocitem" for="menuitem-6-9"><span class="docs-label">Rock Properties</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/rock_properties/rock_properties/">RockProperties</a></li><li><a class="tocitem" href="../../api/rock_properties/hydrothermal/hydrothermal/">Hydrothermal Circulation</a></li><li><a class="tocitem" href="../../api/rock_properties/serpentinization/serpentinization/">Serpentinization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-10" type="checkbox"/><label class="tocitem" for="menuitem-6-10"><span class="docs-label">Stokes Continuity Solver</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/stokes_continuity_solver/stokes_continuity_solver/">StokesContinuitySolver</a></li><li><a class="tocitem" href="../../api/stokes_continuity_solver/global_plasticity_loop/">GlobalPlasticityLoop</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-11" type="checkbox"/><label class="tocitem" for="menuitem-6-11"><span class="docs-label">Heat Solver</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/heat_solver/heat_solver/">HeatSolver</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-12" type="checkbox"/><label class="tocitem" for="menuitem-6-12"><span class="docs-label">Marker Advection</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/advection/advection/">Advection</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-13" type="checkbox"/><label class="tocitem" for="menuitem-6-13"><span class="docs-label">Interpolation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/interpolation/interpolation/">Interpolation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-14" type="checkbox"/><label class="tocitem" for="menuitem-6-14"><span class="docs-label">Melt Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/melt_model/melt_model/">MeltModel</a></li><li><a class="tocitem" href="../../api/melt_model/melt_extraction/">MeltExtraction</a></li><li><a class="tocitem" href="../../api/melt_model/melt_extrusion/">MeltExtrusion</a></li><li><a class="tocitem" href="../../api/melt_model/melt_damage/">MeltDamage</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-15" type="checkbox"/><label class="tocitem" for="menuitem-6-15"><span class="docs-label">Surface Processes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/surface_processes/topography/">Topography</a></li><li><a class="tocitem" href="../../api/surface_processes/sealevel/">Sealevel</a></li><li><a class="tocitem" href="../../api/surface_processes/relative_base_level/">RelativeBaseLevel</a></li><li><a class="tocitem" href="../../api/surface_processes/sediment_transport/">SedimentTransport</a></li><li><a class="tocitem" href="../../api/surface_processes/salt/">SaltDeposition</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-16" type="checkbox"/><label class="tocitem" for="menuitem-6-16"><span class="docs-label">Time Step Execution and Initialization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/run_time_steps/run_time_steps/">Execution</a></li><li><a class="tocitem" href="../../api/run_time_steps/time_Step_initialization/">Initialization</a></li><li><a class="tocitem" href="../../api/run_time_steps/examples/">Examples</a></li></ul></li><li><a class="tocitem" href="../../api/command_line_args/command_line_args/">Command-line Arguments</a></li><li><a class="tocitem" href="../../api/case_management/case_management/">Case Management</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Material Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../material_library/material_library/">MaterialLibrary</a></li><li><a class="tocitem" href="../../material_library/collections/lithospheric_deformation_eb1/">Collection: Lithospheric Deformation eb1</a></li><li><a class="tocitem" href="../../material_library/collections/benchmarks/">Collection: Benchmarks</a></li><li><a class="tocitem" href="../../material_library/collections/benchmarks_sfs/">Collection: Benchmarks SFS</a></li><li><a class="tocitem" href="../../material_library/collections/sandbox/">Collection: Sandbox</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">Plot Tools</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../plot_tools/cl_plotter/">Command-line Plotter</a></li><li><a class="tocitem" href="../../plot_tools/scalar_grid_plots/">Scalar Grid Plots</a></li><li><a class="tocitem" href="../../plot_tools/vector_plots/">Velocity Vector Plots</a></li><li><a class="tocitem" href="../../plot_tools/marker_plots/">Marker Swarm Plots</a></li><li><a class="tocitem" href="../../plot_tools/yield_strength_plots/">Yield Strength Plots</a></li><li><a class="tocitem" href="../../plot_tools/stokes_convergence_plots/">Stokes Convergence Plots</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Data Types</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../data_types/data_types/">Data Types</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10" type="checkbox"/><label class="tocitem" for="menuitem-10"><span class="docs-label">Model Data</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_data/model_data/">ModelData</a></li><li><input class="collapse-toggle" id="menuitem-10-2" type="checkbox"/><label class="tocitem" for="menuitem-10-2"><span class="docs-label">Collections</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_data/collections/benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="../../model_data/collections/bcs/">BoundaryConditions</a></li><li><a class="tocitem" href="../../model_data/collections/carbonate/">Carbonate</a></li><li><a class="tocitem" href="../../model_data/collections/conversion/">Conversion</a></li><li><a class="tocitem" href="../../model_data/collections/geometry/">Geometry</a></li><li><a class="tocitem" href="../../model_data/collections/gravity/">Gravity</a></li><li><a class="tocitem" href="../../model_data/collections/grids/">Grids</a></li><li><a class="tocitem" href="../../model_data/collections/heat_equation/">HeatEquation</a></li><li><a class="tocitem" href="../../model_data/collections/interpolation/">Interpolation</a></li><li><a class="tocitem" href="../../model_data/collections/markers/">Markers</a></li><li><a class="tocitem" href="../../model_data/collections/materials/">Materials</a></li><li><a class="tocitem" href="../../model_data/collections/melting/">Melting</a></li><li><a class="tocitem" href="../../model_data/collections/stokes_continuity/">StokesContinuity</a></li><li><a class="tocitem" href="../../model_data/collections/timestep/">Timestep</a></li><li><a class="tocitem" href="../../model_data/collections/topography/">Topography</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-11" type="checkbox"/><label class="tocitem" for="menuitem-11"><span class="docs-label">Units</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../units/units/">Units</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-12" type="checkbox"/><label class="tocitem" for="menuitem-12"><span class="docs-label">Benchmarks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../benchmarks/benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="../../benchmarks/single_execution/">Single Execution</a></li><li><a class="tocitem" href="../../benchmarks/batch_execution/">Batch Execution</a></li><li><input class="collapse-toggle" id="menuitem-12-4" type="checkbox"/><label class="tocitem" for="menuitem-12-4"><span class="docs-label">Results</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../benchmarks/models/couette_flow_viscous_heating/">Couette Flow with Viscous Heating</a></li><li><a class="tocitem" href="../../benchmarks/models/channel_flow_variable_conductivity/">Channel Flow Variable Conductivity</a></li><li><a class="tocitem" href="../../benchmarks/models/channel_flow_non_steady_temperature/">Channel Flow Non Steady Temperature</a></li><li><a class="tocitem" href="../../benchmarks/models/channel_flow_non_newtonian/">Channel Flow Non Newtonian</a></li><li><a class="tocitem" href="../../benchmarks/models/solid_body_rotation/">Solid Body Rotation</a></li><li><a class="tocitem" href="../../benchmarks/models/rayleigh_taylor_instability/">Rayleigh Taylor Instability</a></li><li><a class="tocitem" href="../../benchmarks/models/elastic_slab/">Elastic Slab</a></li><li><a class="tocitem" href="../../benchmarks/models/viscoelastic_stress_buildup/">Viscoelastic Stress Buildup</a></li><li><a class="tocitem" href="../../benchmarks/models/box_convection_isoviscous_1a/">Box Convection Isoviscous 1a</a></li><li><a class="tocitem" href="../../benchmarks/models/plasticity_benchmark_kaus10/">Plasticity Benchmark Kaus10</a></li><li><a class="tocitem" href="../../benchmarks/models/seafloor_spreading/">Seafloor Spreading</a></li><li><a class="tocitem" href="../../benchmarks/models/flexure_triangular_hole/">Flexure Triangular Hole</a></li><li><a class="tocitem" href="../../benchmarks/models/viscoelastic_extension/">Viscoelastic Extension</a></li><li><a class="tocitem" href="../../benchmarks/models/viscoelastic_contraction/">Viscoelastic Contraction</a></li><li><a class="tocitem" href="../../benchmarks/models/simple_sedimentation/">Simple Sedimentation</a></li></ul></li></ul></li><li><a class="tocitem" href="../../bibliography/bibliography/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Installation</a></li><li class="is-active"><a href>Using Custom MUMPS Libraries</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Using Custom MUMPS Libraries</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Installing-Custom-MUMPS-Libraries"><a class="docs-heading-anchor" href="#Installing-Custom-MUMPS-Libraries">Installing Custom MUMPS Libraries</a><a id="Installing-Custom-MUMPS-Libraries-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-Custom-MUMPS-Libraries" title="Permalink"></a></h1><p>Using a compiled version of MUMPS that link to system libraries can lead to significant performance improvements when solving large systems of equations especially for the analysis phase of the MUMPS solver and enable additional parallel ordering methods that may not be available with the Julia binaries.</p><p>The instructions here assume (1) you are working on a Debian Linux OS (e.g. Ubuntu and  PopOS), (2) you are working with a local copy of the EarthBox project where MUMPS has  already been installed and (3) the EarthBox project has been put in development mode in  the base Julia environment so EarthBox can be accessed  via <code>using EarthBox</code> (see <a href="../installation/#EarthBox-Installation-for-Development-and-Experimentation">EarthBox Installation for Development and Experimentation</a>).</p><p>If you are working with a version of EarthBox installed from the registry you can perform a similar set of steps in the base Julia environment. This will require installing <code>MUMPS.jl</code> in the base environment first using a similar version to the one used by EarthBox.</p><p>[1] Set the environment variable <code>JULIA_MUMPS_LIBRARY_PATH</code> to the path of the directory  that contains the local MUMPS libraries. This should be set in your <code>~/.bashrc</code> as follows:</p><pre><code class="language-bash hljs">export JULIA_MUMPS_LIBRARY_PATH=&quot;/path/to/MUMPS_x.x.x/lib&quot;</code></pre><p>This path will be used to recompile the MUMPS package for Julia. For guidance on compiling MUMPS and generated the MUMPS library directory see <a href="#Building-MUMPS-Libraries">Building MUMPS Libraries</a>.</p><p>[2] Define the <code>LD_LIBRARY_PATH</code> path to ensure that all system libraries are found  when <code>MUMPS.jl</code> is re-built:</p><pre><code class="language-bash hljs">export LD_LIBRARY_PATH=&quot;$JULIA_MUMPS_LIBRARY_PATH:$LD_LIBRARY_PATH&quot;</code></pre><p>[3] Source your <code>~/.bashrc</code> file:</p><pre><code class="language-bash hljs">source ~/.bashrc</code></pre><p>[4] Navigate to the EarthBox project directory and make a development copy of MUMPS:</p><pre><code class="language-bash hljs">julia --project=.</code></pre><pre><code class="language-julia hljs">Pkg.develop(&quot;MUMPS&quot;)</code></pre><p>[5] Rebuild MUMPS.jl using the development package:</p><pre><code class="language-julia hljs">Pkg.build(&quot;MUMPS&quot;)</code></pre><p>The development package looks for environment variable JULIA<em>MUMPS</em>LIBRARY_PATH. If this variable is found it will be used to recompile MUMPS.jl using the  system MUMPS libraries.</p><p>[6] Ensure all dependencies are resolved and instantiated:</p><pre><code class="language-julia hljs">Pkg.resolve()
Pkg.instantiate()</code></pre><h1 id="Building-MUMPS-Libraries"><a class="docs-heading-anchor" href="#Building-MUMPS-Libraries">Building MUMPS Libraries</a><a id="Building-MUMPS-Libraries-1"></a><a class="docs-heading-anchor-permalink" href="#Building-MUMPS-Libraries" title="Permalink"></a></h1><p>Installing MUMPS involves downloading the MUMPS source code, copying the relevant  Makefile.inc file from the collection for different setups, editing this file  using desired options and library locations, and then compiling the MUMPS  libraries using make all. However, in reality a lot of editing of the  <code>Makefile.inc</code> and editing of <code>Makefiles</code> in the src directory is often needed to  get compilation to work. MUMPS also uses a variety of other libraries that  can be installed with the system package manager (see the relevant  Makefile.inc). The AI chat assistant in Cursor is very useful for figuring out how to do this if you allow the system to perform trial and error and iterate  on the compilation process. See the following site to download different  versions of the MUMPS source code including the most recent release at the  time of writing this script (5.7.3):</p><ul><li><a href="https://coin-or-tools.github.io/ThirdParty-Mumps/">ThirdParty-Mumps</a></li></ul><p>The instructions provided here assume you are working on a Debian-based Linux OS (e.g. Ubuntu/PopOS), MUMPS version is 5.7.3 and that core dependencies have  been installed on the system via:</p><pre><code class="language-bash hljs">apt-get install libmetis-dev libparmetis-dev libscotch-dev libptscotch-dev libatlas-base-dev openmpi-bin libopenmpi-dev liblapack-dev libscalapack-openmpi-dev</code></pre><p>After installation these libraries will be located at /usr/lib/x86_64-linux-gnu,  and associated include files are located at /usr/include after installation.</p><p>Next the instructions in the MUMPS distribution will have to be consulted and Makefiles will have to be edited. The required edits are very system dependent  and will most likely require trial and error. </p><p>However, here key edits that were made to Makefiles for MUMPS 5.7.3 in order to get compilation to work for a parallel version of MUMPS that worked well with MUMPS.jl version 1.5.1:</p><ul><li><p>Uncomment the parallel library option setup in <code>Makefile.inc</code> and   comment out the serial library option setup if parallel capability is   desired.</p></li><li><p>Set <code>LIBEXT</code> to <code>.so</code> in the <code>Makefile.inc</code> file for shared instead of static   libraries which is required for the <code>MUMPS.jl</code> package.</p></li><li><p>Set <code>PATH_OPT = -Wl,-rpath,$(topdir)/lib</code> in <code>Makefile.inc</code>. This option embeds  the runtime library search path directly into the executable or shared   library being built. This means the system will know where to find the   required libraries at runtime without needing to modify the <code>LD_LIBRARY_PATH</code>   environment variable.</p></li><li><p>Special care must be taken with the so called optimized options. One   approach is use the edits described in <a href="#Optimization-Options">Optimization Options</a>.</p></li></ul><h2 id="Optimization-Options"><a class="docs-heading-anchor" href="#Optimization-Options">Optimization Options</a><a id="Optimization-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization-Options" title="Permalink"></a></h2><p>The following optimization options in the <code>Makefile.inc</code> led to successful compilation:</p><pre><code class="language-makefile hljs">OPTF    = -O -fopenmp -fallow-argument-mismatch
OPTL    = -O -fopenmp
OPTC    = -O -fopenmp</code></pre><p>However, this required also editing the <code>Makefile</code> in the src directory by changing <code>$(FPIC)</code> to <code>$(FPIC_OPT)</code> in the following lines starting at line 450:</p><pre><code class="language-makefile hljs">.SUFFIXES: .c .F .o
.F.o:
$(FC) $(OPTF) $(FPIC_OPT) -I. -I../include $(INCS) $(IORDERINGSF) $(ORDERINGSF) -c $*.F $(OUTF)$*.o
.c.o:
$(CC) $(OPTC) $(FPIC_OPT) -I../include $(INCS) $(CDEFS) $(IORDERINGSC) $(ORDERINGSC) -c $*.c $(OUTC)$*.o

$(ARITH)mumps_c.o:	mumps_c.c
$(CC) $(OPTC) $(FPIC_OPT) -I../include $(INCS) $(CDEFS) -DMUMPS_ARITH=MUMPS_ARITH_$(ARITH) \
        $(IORDERINGSC) $(ORDERINGSC) -c mumps_c.c $(OUTC)$@</code></pre><p>Alternatively, this could have been accomplished in the <code>Makefile.inc</code> by setting  the following:</p><pre><code class="language-makefile hljs">OPTF    = -O -fopenmp -fallow-argument-mismatch $(FPIC_OPT)
OPTC    = -O -fopenmp $(FPIC_OPT)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../MPI_system/">« Using System MPI Binaries</a><a class="docs-footer-nextpage" href="../../models/model_execution/api_building_and_execution/">Model Building, Execution and Plotting »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.0 on <span class="colophon-date" title="Thursday 20 November 2025 21:55">Thursday 20 November 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
